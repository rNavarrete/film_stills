window.Configuration={};
window.Configuration.Console={"rrsEnabled":true,"ssePermanentlyOn":false,"persistApplicationLogs":true,"logsMarketplace":"us","useV4Sign":true,"regionToEndpointMap":{"":"s3.amazonaws.com","us-west-2":"s3-us-west-2.amazonaws.com","us-west-1":"s3-us-west-1.amazonaws.com","eu-west-1":"s3-eu-west-1.amazonaws.com","EU":"s3-eu-west-1.amazonaws.com","ap-southeast-1":"s3-ap-southeast-1.amazonaws.com","ap-northeast-1":"s3-ap-northeast-1.amazonaws.com","ap-southeast-2":"s3-ap-southeast-2.amazonaws.com","sa-east-1":"s3-sa-east-1.amazonaws.com",
"eu-central-1":"s3.eu-central-1.amazonaws.com"},"regionToGammaEndpointMap":{"":"s3.amazonaws.com","us-west-2":"s3-us-west-2.amazonaws.com","us-west-1":"s3-us-west-1.amazonaws.com","eu-west-1":"s3-eu-west-1.amazonaws.com","EU":"s3-eu-west-1.amazonaws.com","ap-southeast-1":"s3-ap-southeast-1.amazonaws.com","ap-northeast-1":"s3-ap-northeast-1.amazonaws.com","ap-southeast-2":"s3-ap-southeast-2.amazonaws.com","sa-east-1":"s3-sa-east-1.amazonaws.com","eu-central-1":"s3.eu-central-1.amazonaws.com"},"eventNewUi":true,
"arnAWSId":"aws","welcomeStringID":"feedback-welcome-string","regionToIsTransitionToGlacierEnabledMap":{"":true,"us-west-2":true,"us-west-1":true,"eu-west-1":true,"EU":true,"ap-southeast-1":false,"ap-northeast-1":true,"ap-southeast-2":true,"sa-east-1":false,"eu-central-1":true},"rootLoggerLogsToConsole":false,"customerReadyEventName":"console-interactive","persistedLogBucketLocation":"","persistProfilerData":true,"useKmsFeature":true,"dnsCompatibleBucketNameShown":false,"documentDomain":"console.aws.amazon.com",
"regionToIntegEndpointMap":{"":"s3.amazonaws.com","us-west-2":"s3-us-west-2.amazonaws.com","us-west-1":"s3-us-west-1.amazonaws.com","eu-west-1":"s3-eu-west-1.amazonaws.com","EU":"s3-eu-west-1.amazonaws.com","ap-southeast-1":"s3-ap-southeast-1.amazonaws.com","ap-northeast-1":"s3-ap-northeast-1.amazonaws.com","ap-southeast-2":"s3-ap-southeast-2.amazonaws.com","sa-east-1":"s3-sa-east-1.amazonaws.com","eu-central-1":"s3.eu-central-1.amazonaws.com"},"persistedLogBucket":"s3-console-production-logs","enableTags":true,
"securityTokenCookieName":"s3.console.ws.security.aws","regionToIsNotificationToLambdaEnabledMap":{"":true,"us-west-2":true,"us-west-1":false,"eu-west-1":true,"EU":true,"ap-southeast-1":false,"ap-northeast-1":false,"ap-southeast-2":false,"sa-east-1":false,"eu-central-1":false},"regionToWebsiteEndpointMap":{"":"s3-website-us-east-1.amazonaws.com","us-west-2":"s3-website-us-west-2.amazonaws.com","us-west-1":"s3-website-us-west-1.amazonaws.com","eu-west-1":"s3-website-eu-west-1.amazonaws.com","EU":"s3-website-eu-west-1.amazonaws.com",
"ap-southeast-1":"s3-website-ap-southeast-1.amazonaws.com","ap-northeast-1":"s3-website-ap-northeast-1.amazonaws.com","ap-southeast-2":"s3-website-ap-southeast-2.amazonaws.com","sa-east-1":"s3-website-sa-east-1.amazonaws.com","eu-central-1":"s3-website.eu-central-1.amazonaws.com"},"regionToHostMap":{"":"s3-console-us-standard.console.aws.amazon.com","eu-west-1":"s3-console-eu-west-1.console.aws.amazon.com","EU":"s3-console-eu-west-1.console.aws.amazon.com","us-west-1":"s3-console-us-west-1.console.aws.amazon.com",
"ap-northeast-1":"s3-console-ap-northeast-1.console.aws.amazon.com","ap-southeast-1":"s3-console-ap-southeast-1.console.aws.amazon.com","ap-southeast-2":"s3-console-ap-southeast-2.console.aws.amazon.com","us-west-2":"s3-console-us-west-2.console.aws.amazon.com","sa-east-1":"s3-console-sa-east-1.console.aws.amazon.com","eu-central-1":"s3-console-eu-central-1.console.aws.amazon.com"},"xdmRequired":true,"regionDefinitions":[{"key":"","label":"US Standard"},{"key":"us-west-2","label":"Oregon","marketplace":"PDX"},
{"key":"us-west-1","label":"Northern California","marketplace":"SFO"},{"key":"eu-west-1","label":"Ireland","marketplace":"DUB"},{"key":"ap-southeast-1","label":"Singapore","marketplace":"SIN"},{"key":"ap-northeast-1","label":"Tokyo","marketplace":"NRT"},{"key":"ap-southeast-2","label":"Sydney","marketplace":"SYD"},{"key":"EU","hidden":true,"label":"Ireland","marketplace":"DUB"},{"key":"sa-east-1","label":"Sao Paulo","marketplace":"GRU"},{"key":"eu-central-1","label":"Frankfurt","marketplace":"FRA"}],
"useIntegratedSecurity":true,"xdmXhrPreloadedChannels":["s3-console-us-standard.console.aws.amazon.com","s3-console-eu-west-1.console.aws.amazon.com","s3-console-us-west-1.console.aws.amazon.com","s3-console-ap-northeast-1.console.aws.amazon.com","s3-console-ap-southeast-1.console.aws.amazon.com","s3-console-ap-southeast-2.console.aws.amazon.com","s3-console-us-west-2.console.aws.amazon.com","s3-console-sa-east-1.console.aws.amazon.com","s3-console-eu-central-1.console.aws.amazon.com"]};window.ExportedConfiguration=window.Configuration.Console;
window.Configuration={whitelistedOverrides:["useCloudFront","trickleActivationRate","shouldReportCloudFrontActivation","useVersion","logLevel","rootLoggerLogsToConsole","rootLoggerLogsToSystemOut","profilerDataLoggerLogsToConsole","useAdaptiveTimeoutSelector","requestMaxRetries","fastRequestMaxRetries","retryBackoffFactor","fastRetryBackoffFactor","fastRetryConnectTimeoutFactor","useFastRetryForLogin","secure","maxInflightRequests","useRemoteIOKernel","useAppletIOKernel","persistProfilerData","persistApplicationLogs",
"useIntegratedSecurity","useTattle","tattlePath","useSynchronizedTimeSource","sandboxFlashIOKernel","feedbackEnabled","accessKey","secretKey","useRemoteIOKernel","initializeRemoteIOKernel","sessionId","autoLoadAppletIfEnabled","gma","integ","runNearestEndpointCheck","initialNearestEndpointCheckDelay","dragAndDrop","delegateUploadsToRemoteIOKernel","enableFolderUploads","appletLogLevel","useNitro","beamUploads","remoteMakePublic","awsConsoleRegion","enableTags","pageLoadStartTime","enableWebsiteRedirects",
"region","SYD","followTheWhiteRabbit","locale","useV4Sign","useKmsFeature","useMultiPartCopy","useBackAndForward","dnsCompatibleBucketNameShown","logoutPath","eventNewUi"],gma:false,integ:false,awsConsoleRegion:"",region:"",SYD:true,enableTags:ExportedConfiguration.enableTags,remoteDelete:true,enableWebsiteRedirects:true,remoteMakePublic:false,delegateUploadsToRemoteIOKernel:false,enableFolderUploads:true,runNearestEndpointCheck:true,integerParameters:[],sessionId:"s3.console:no-session-id",useCloudFront:true,
forcedLocal:false,followTheWhiteRabbit:false,locale:"",localeToGraphicSuffixMap:{"":"","zh":"_zh","ja":"_ja","pd_LO":""},useV4Sign:ExportedConfiguration.useV4Sign,useKmsFeature:ExportedConfiguration.useKmsFeature,dragAndDrop:true,useMultiPartCopy:true,useBackAndForward:false,eventNewUi:ExportedConfiguration.eventNewUi,arnAWSId:ExportedConfiguration.arnAWSId,welcomeStringID:ExportedConfiguration.welcomeStringID,dnsCompatibleBucketNameShown:ExportedConfiguration.dnsCompatibleBucketNameShown,rrsEnabled:ExportedConfiguration.rrsEnabled,
ssePermanentlyOn:ExportedConfiguration.ssePermanentlyOn,appletLogLevel:"Info",trickleActivationRate:0,shouldReportCloudFrontActivation:false,useVersion:function(){return window.DeploymentManifest?DeploymentManifest.version:""}(),logLevel:"Info",rootLoggerLogsToConsole:ExportedConfiguration.rootLoggerLogsToConsole,rootLoggerLogsToSystemOut:false,profilerDataLoggerLogsToConsole:false,pageLoadStartTime:"-1",connectTimeoutFactor:2500,requestIdleTimeout:20*1E3,useAdaptiveTimeoutSelector:true,requestMaxRetries:5,
fastRequestMaxRetries:20,retryBackoffFactor:1E3,fastRetryBackoffFactor:200,fastRetryConnectTimeoutFactor:200,useFastRetryForLogin:false,secure:true,maxInflightRequests:10,defaultBandwidthCap:256*1024,asyncIOBufferSize:128*1024,useRemoteIOKernel:false,useAppletIOKernel:false,initializeRemoteIOKernel:true,initializeAppletIOKernel:true,autoLoadAppletIfEnabled:false,preferredIOKernel:"Remote",customerReadyEventName:ExportedConfiguration.customerReadyEventName,ajaxToSDKProxy:{retryOptionsForServiceError:{count:0,
minInterval:100,maxInterval:5E3},retryOptionsForProxyError:{count:3,minInterval:100,maxInterval:5E3},consoleSessionTokenHeaderKey:"x-s2-console-session-token",consoleAccessKey:"access-key",consoleSecretKey:"secret-key",s3GmaFlag:"s3-gamma"},RemoteIOKernel:{scheme:window.location.protocol.split(":")[0],targetDomainEndpointMap:{"":window.location.host},beamUploads:false,deliverHttpPath:"/s3/cws/DeliverHttp"},xdmRequired:ExportedConfiguration.xdmRequired,xdmXhrPreloadedChannels:ExportedConfiguration.xdmXhrPreloadedChannels,
documentDomain:ExportedConfiguration.documentDomain,AppletIOKernel:{fileChannelBufferSize:128*1024,useBinaryStringBuffers:false},AppletEmbedConfiguration:{containerId:"AppletIOKernelContainer",parameters:{cache_archive:"S3ConsoleApplet.jar",cache_option:"Plugin",cache_version:"1.0.8",java_arguments:"-client -Xms256m -Xmx512m"},attributes:{id:"S3ConsoleApplet",name:"Amazon S3 Console Uploader",code:"s3.console.applet.applet.ConsoleApplet",archive:"S3ConsoleApplet.jar",width:1,height:1,mayscript:"true"}},
persistedLogBucket:ExportedConfiguration.persistedLogBucket,persistedLogBucketLocation:ExportedConfiguration.persistedLogBucketLocation,logsMarketplace:ExportedConfiguration.logsMarketplace,persistedLogFolder:"logs/S3ConsoleWeb/",persistProfilerData:ExportedConfiguration.persistProfilerData,persistApplicationLogs:ExportedConfiguration.persistApplicationLogs,loginTimeout:2*60*1E3,useSynchronizedTimeSource:ExportedConfiguration.useSynchronizedTimeSource,useIntegratedSecurity:ExportedConfiguration.useIntegratedSecurity,
accessKey:null,secretKey:null,useTattle:true,tattlePath:"/s3/cws/Tattle",logoutPath:"/s3/cws/Logout",securityTokenCookieName:ExportedConfiguration.securityTokenCookieName,defaultLocation:window.BootstrapConfiguration.bootstrapRegion,regionDefinitions:ExportedConfiguration.regionDefinitions,friendlyRegionNames:{},locationConstraintToAWSRegionMap:{"":"us-east-1","EU":"eu-west-1"},awsRegionToLocationConstraintMap:{"us-east-1":""},convertLocationConstraintToAWSRegion:function(location){var awsRegion=
Configuration.locationConstraintToAWSRegionMap[location];if(!awsRegion)awsRegion=location;return awsRegion},convertAWSRegionToLocationConstraint:function(awsRegion){var locationConstraint=Configuration.awsRegionToLocationConstraintMap[awsRegion];if(!locationConstraint)locationConstraint=awsRegion;return locationConstraint},getFriendlyRegionNamesMap:function(){var friendlyNames={};for(var i=0;i<this.regionDefinitions.length;++i){var region=this.regionDefinitions[i];friendlyNames[region.key]=region.label}return friendlyNames},
listViewSlidingWindowSize:350,callbacks:[],locationEndpointMap:{},locationHostnameMap:{},locationWebsiteEndpointMap:{},locationIsTransitionToGlacierEnabledMap:{},bulkTargetDomainEndpointMap:{"":window.location.host},flashIOKernelSwfUrl:"S3FlashHttpDeliveryBoy.swf",sandboxFlashIOKernel:false,feedbackEnabled:false,feedbackBucketLocation:"",feedbackBucket:"",feedbackFolder:"feedback/",loaded:function(){this.sessionId=this.newSessionId();var integerParameterMap={};for(var i=0;i<this.integerParameters.length;i++)integerParameterMap[this.integerParameters[i]]=
true;this.integerParameters=integerParameterMap;this.ensureOverrides()},initialize:function(){var location=window.location;var href=location.href;this.locationEndpointMap=ExportedConfiguration.regionToEndpointMap;this.locationHostnameMap=ExportedConfiguration.regionToHostMap;this.locationWebsiteEndpointMap=ExportedConfiguration.regionToWebsiteEndpointMap;this.friendlyRegionNames=this.getFriendlyRegionNamesMap();this.locationIsTransitionToGlacierEnabledMap=ExportedConfiguration.regionToIsTransitionToGlacierEnabledMap;
this.locationIsNotificationToLambdaEnabledMap=ExportedConfiguration.regionToIsNotificationToLambdaEnabledMap;this.integratedSecurityUrlPrefix=this.RemoteIOKernel.urlPrefix=location.protocol+"//"+location.host;this.persistedLogFolder+=location.hostname+"/";if(this.useRemoteIOKernel)this.preferredIOKernel="Remote";if(this.useAppletIOKernel)this.preferredIOKernel="Applet";this.canUseRemoteIOKernelForUploads=this.doesBrowserSupportXhrPutBlob();if(this.doesBrowserSupportBlobSlice()){this.RemoteIOKernel.maxUploadFileSize=
5*1024*1024*1024*1024;this.RemoteIOKernel.supportsMultipart=true}if(this.beamUploads){this.uploadConcurrency=2;this.RemoteIOKernel.beamUploads=true}if($.browser.firefox){this.asyncIOBufferSize=2*1024*1024;this.AppletIOKernel.fileChannelBufferSize=2*1024*1024}else if($.browser.chrome){this.asyncIOBufferSize=256*1024;this.AppletIOKernel.fileChannelBufferSize=256*1024}if(this.gma){this.locationEndpointMap=ExportedConfiguration.regionToGammaEndpointMap;this.useIntegratedSecurity=false;this.persistProfilerData=
false;this.persistApplicationLogs=false}if(this.integ){this.locationEndpointMap=ExportedConfiguration.regionToIntegEndpointMap;this.useIntegratedSecurity=false;this.persistProfilerData=false;this.persistApplicationLogs=false}for(var i in ExportedConfiguration.regionToHostMap){var serviceEndpoint=ExportedConfiguration.regionToEndpointMap[i];var host=ExportedConfiguration.regionToHostMap[i];this.bulkTargetDomainEndpointMap[serviceEndpoint]=host;if(this.canUseRemoteIOKernelForUploads)this.RemoteIOKernel.targetDomainEndpointMap[serviceEndpoint]=
host}Configuration.delegateUploadsToRemoteIOKernel=!!Configuration.enableFolderUploads&&!!Configuration.delegateUploadsToRemoteIOKernel&&Configuration.browserSupportsDelegatedUploads();var smallerPartSize=5*1024*1024;if(Configuration.delegateUploadsToRemoteIOKernel){this.AppletIOKernel.desiredPartSize=smallerPartSize;if(typeof BlobBuilder=="undefined"&&typeof XMLHttpRequest.prototype.sendAsBinary!="undefined")this.AppletIOKernel.useBinaryStringBuffers=true}this.ensureOverrides()},browserSupportsDelegatedUploads:function(){return typeof BlobBuilder!=
"undefined"||typeof XMLHttpRequest.prototype.sendAsBinary!="undefined"},newSessionId:function(){return"s3.console:"+this.uuid()},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var random=Math.random()*16|0;var hex=c=="x"?random:random&3|8;return hex.toString(16)}).toLowerCase()},doesBrowserSupportXhrPutBlob:function(){var userAgent=navigator.userAgent.toLowerCase();$.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase());var version=0;if($.browser.chrome){var browserLocation=
userAgent.indexOf("chrome/");version=parseInt(userAgent.substring(userAgent.indexOf("/",browserLocation)+1));$.browser.safari=false;if(version>=6)return true}if($.browser.safari){var browserLocation=userAgent.indexOf("safari/");version=parseInt(userAgent.substring(userAgent.indexOf("/",browserLocation)+1));if(version>=500)return true}if($.browser.mozilla)if(navigator.userAgent.toLowerCase().indexOf("firefox")!=-1){var browserLocation=userAgent.indexOf("firefox/");version=parseFloat(userAgent.substring(userAgent.indexOf("/",
browserLocation)+1));if(version>=3.6)return true}return false},doesBrowserSupportBlobSlice:function(){var userAgent=navigator.userAgent.toLowerCase();$.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase());var version=0;if($.browser.chrome){var browserLocation=userAgent.indexOf("chrome/");version=parseInt(userAgent.substring(userAgent.indexOf("/",browserLocation)+1));$.browser.safari=false;if(version>=6)return true}if($.browser.safari){var browserLocation=userAgent.indexOf("safari/");version=
parseInt(userAgent.substring(userAgent.indexOf("/",browserLocation)+1));if(version>=500&&window.Blob&&(typeof Blob.prototype.slice=="function"||typeof Blob.prototype.webkitSlice=="function"))return true}if($.browser.mozilla)if(navigator.userAgent.toLowerCase().indexOf("firefox")!=-1){var browserLocation=userAgent.indexOf("firefox/");version=parseFloat(userAgent.substring(userAgent.indexOf("/",browserLocation)+1));if(version>=4)return true}return false},transformedWhitelist:function(){var self=this;
this.cachedTransformedWhitelist=this.cachedTransformedWhitelist||function(){var hash={};for(var i=0;i<self.whitelistedOverrides.length;i++)hash[self.whitelistedOverrides[i]]=true;return hash}();self=null;return this.cachedTransformedWhitelist},isWhitelistedParam:function(k){return!!this.transformedWhitelist()[k]},isIntegerParameter:function(k){return!!this.integerParameters[k]},ensureOverrides:function(){this.overrideWithParameters();this.overrideWithTestFeatures();if(!this.useCloudFront)if(Math.random()*
100<this.trickleActivationRate){this.useCloudFront=true;this.shouldReportCloudFrontActivation=true}if(this.useCloudFront)if(!this.useVersion){console.log("Invalid configuration. Cannot use CloudFront with version: "+this.useVersion+", reverting to non-CloudFront");this.useCloudFront=false;this.forcedLocal=true}for(var i=0;i<this.regionDefinitions.length;++i){var region=this.regionDefinitions[i];var regionQueryParam=region.marketplace;if(!regionQueryParam)regionQueryParam="USStandard";if(this[regionQueryParam]!=
undefined)region.hidden=!this[regionQueryParam]}},overrideWithParameters:function(){var parameters=this.parseParameters();for(var key in parameters){if(!this.isWhitelistedParam(key))continue;var v=parameters[key];if(v=="false")this[key]=false;else if(v=="true")this[key]=true;else if(this.isIntegerParameter(key))this[key]=parseInt(v);else this[key]=v}},parseParameters:function(){var parameters={};var query=window.location.search.substring(1);var components=query.split("&")||[];for(var i=0;i<components.length;i++)if(components[i].indexOf("=")!=
-1){var pair=components[i].split("=",2);parameters[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}else if(components[i].length>0)parameters[decodeURIComponent(components[i])]="";console.log("Runtime configuration parameters",parameters);return parameters},overrideWithTestFeatures:function(){if(window.testDriveFeatures&&window.testDriveFeatures.featuresToIntroduce)for(var feature in window.testDriveFeatures.featuresToIntroduce){if(!this.isWhitelistedParam(feature))continue;var isEnabled=
window.testDriveFeatures.featuresToIntroduce[feature];if(isEnabled)this[feature]=true}}};Configuration.loaded();(function(ns){function typeOf(value){var s=typeof value;if(s==="object")if(value){if(typeof value.length==="number"&&!value.propertyIsEnumerable("length")&&typeof value.splice==="function")s="array"}else s="null";return s}var FlowUtil={};FlowUtil.typeOf=typeOf;FlowUtil.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var random=Math.random()*16|0;var hex=c=="x"?random:random&3|8;return hex.toString(16)}).toLowerCase()};FlowUtil.log=function(){return;if(window.console&&
console.log){var args=FlowUtil.$A(arguments);args.unshift("flow) ");try{switch(args.length){case 1:console.log(args[0]);break;case 2:console.log(args[0],args[1]);break;case 3:console.log(args[0],args[1],args[2]);break;case 4:console.log(args[0],args[1],args[2],args[3]);break;case 5:console.log(args[0],args[1],args[2],args[3],args[4]);break;case 6:console.log(args[0],args[1],args[2],args[3],args[4],args[5]);break}}catch(e){}}};FlowUtil.Funs={IdentityF:function(){return function(o){return o}},EmptyF:function(){},
TransitionF:function(module,state){var s=state;var m=module;return function(){Flow.module(m).notify(s)}}};FlowUtil.$A=function(a){var ret=[];for(var i=0;i<a.length;i++)ret[i]=a[i];return ret};FlowUtil.merge=function(){var args=this.$A(arguments);var dest=args.shift();var target=args.shift();for(var key in target)dest[key]=target[key];if(args.length>0){args.unshift(dest);dest=this.merge.apply(this,args)}return dest};FlowUtil.detect=function(haystack,needle,finder){for(var i=0;i<haystack.length;i++)if(finder){if(finder(haystack[i]))return haystack[i]}else if(haystack[i]==
needle)return haystack[i];return null},function(){var slice=Array.prototype.slice;function update(array,args){var arrayLength=array.length,length=args.length;while(length--)array[arrayLength+length]=args[length];return array}function merge(array,args){array=slice.call(array,0);return update(array,args)}function argumentNames(){var names=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return names.length==
1&&!names[0]?[]:names}function bind(context){if(arguments.length<2&&typeof arguments[0]==="undefined")return this;var __method=this,args=slice.call(arguments,1);return function(){var a=merge(args,arguments);return __method.apply(context,a)}}function curry(){if(arguments.length>0){var __method=this,args=slice.call(arguments,0);return function(){var a=merge(args,arguments);return __method.apply(__method,a)}}else return this}FlowUtil.merge(Function.prototype,{bind:bind,argumentNames:argumentNames,curry:curry})}();
FlowUtil.Klass={defaultBase:{memoize:function(attr,fun,context){this[attr]=this[attr]||fun.call(context||null);return this[attr]},returning:function(a,fun){if(fun)fun(a);return a},autoBind:function(attrs){for(var i=0;i<attrs.length;i++){var attr=attrs[i];this["bound"+attr.charAt(0).toUpperCase()+attr.substring(1)]=this[attr].bind(this)}},callForProperties:function(obj){for(var attr in obj)if(this[attr])this[attr](obj[attr])}},create:function(){var prot=arguments[0]||{};var r=function(){var args=arguments;
if(this.initialize)this.initialize.apply(this,args)};var modules=[];if(prot.modules&&prot.modules.length)for(var i=0;i<prot.modules.length;i++)modules.push(prot.modules[i]);delete prot.modules;prot.__modules__=modules;for(var i=0;i<modules.length;i++)if(modules[i].included){if(modules[i].included(r))modules[i].overwriteKlassMethods(r)}else modules[i].overwriteKlassMethods(r);FlowUtil.merge(r.prototype,FlowUtil.merge({},this.defaultBase),prot);return r}};FlowUtil.Module={_module:FlowUtil.Klass.create({initialize:function(mod){this.modules=
mod.modules||[];this.methods=mod.methods||{};this.included=mod.included||null},overwriteKlassMethods:function(klass){var moduleQueue=[];moduleQueue.push(this);var getAllModules=function(module,queue){if(module)if(module.modules.length>0)for(var i=0;i<module.modules;i++){queue.push(module.modules[i]);getAllModules(module.modules[i],queue)}};getAllModules(this,moduleQueue);var mod;while(mod=moduleQueue.pop())klass.prototype=FlowUtil.merge(klass.prototype,FlowUtil.merge({},mod.methods))}}),create:function(obj){return new this._module(obj)}};
var BaseHashMethods=FlowUtil.Module.create({methods:{_prepare:function(){this.storage={}},get:function(key){var ret=this.storage[key];return ret},set:function(key,val){this.storage[key]=val;return val},forEach:function(fun){if(this._forEach)return this._forEach(fun);else{var ret=[];for(var prop in this.storage){var pair={key:prop,value:this.storage[prop]};ret.push(fun.call(null,pair))}return ret}}}});var DefaultingHash=FlowUtil.Klass.create({modules:[BaseHashMethods],initialize:function(getOrFun){this.getOrFun=
getOrFun||FlowUtil.Funs.IdentityF();this._prepare()},get:function(key){var ret=this.storage[key];if(typeof ret==="undefined")ret=this.set(key,this.getOrFun(key));return ret}});var RunOnFirstSetHash=FlowUtil.Klass.create({modules:[BaseHashMethods],initialize:function(){this._prepare()},set:function(key,val,fun){var shouldFun=false;if(typeof this.get(key)==="undefined")shouldFun=true;this.storage[key]=val;if(shouldFun&&fun)fun(val);return val}});var EventManager=FlowUtil.Klass.create({initialize:function(){this.events=
new DefaultingHash(function(key){return new Event(key)})},addWatcher:function(eventKey,watcherArgs){this.events.get(eventKey).addWatcher(new Watcher(watcherArgs))},trigger:function(eventKey,args){this.events.get(eventKey).trigger(args)}});var Event=FlowUtil.Klass.create({initialize:function(key){this.key=key;this.occurrences=0;this.watchers=new RunOnFirstSetHash},addWatcher:function(obs){this.watchers.set(obs.id,obs,function(obj){obj.registered(this)}.bind(this))},hasTriggered:function(){return this.occurrences>
0},trigger:function(args){this.occurrences++;this.watchers.forEach(function(pair){pair.value.run({event:this,arguments:args,context:"eventTriggered"})}.bind(this))}});var EventRun=FlowUtil.Klass.create({initialize:function(watcher,runInfo){this.watcher=watcher;this.runInfo=runInfo;this.result=null}});var Watcher=FlowUtil.Klass.create({defaultOptions:{run:FlowUtil.Funs.EmptyF,nowIfTriggered:false,onReturnsTruthy:FlowUtil.Funs.EmptyF,once:false},initialize:function(opts){this.options=FlowUtil.merge({},
this.defaultOptions,opts||{});this.runs=[];this.id=FlowUtil.uuid();this.ranOnce=false},registered:function(evt){if(this.options.nowIfTriggered&&evt.hasTriggered())this.run({context:"fromRegistered",event:evt})},run:function(){if(this.options.once)if(this.ranOnce)return;else this.ranOnce=true;var args=FlowUtil.$A(arguments)[0]||{};var eventRun=new EventRun(this,args);setTimeout(this.runLogger.bind(this,eventRun),1)},runLogger:function(eventRun){eventRun.result=this.options.run(eventRun);this.runs.push(eventRun);
if(eventRun.result)setTimeout(this.options.onReturnsTruthy.bind(this,eventRun),1)}});var AttemptCounter=FlowUtil.Klass.create({initialize:function(count,initialCount){count=count||"forever";if(count==="forever")this.maxAttempts=-1;else this.maxAttempts=count;this.attempts=initialCount||0},advance:function(){if(!this.hasNext())throw"State error - more attempts read than allowed";this.attempts++;return this.attempts},hasNext:function(){if(this.maxAttempts<0)return true;else return this.attempts<this.maxAttempts}});
var UntilOperation=FlowUtil.Klass.create({defaultOptions:{run:FlowUtil.Funs.EmptyF,every:500,forever:false,maxAttempts:10,onMaxAttempts:FlowUtil.Funs.EmptyF,onException:FlowUtil.Funs.EmptyF,ignorePrevious:false},initialize:function(eventString,options){this.eventString=eventString;this.done=false;this.options=FlowUtil.merge({},this.defaultOptions,options||{});if(this.options.forever)this.options.maxAttempts="forever";this.attemptCounter=new AttemptCounter(this.options.maxAttempts,0);this.autoBind(["tryOperation",
"successConditionTriggered"]);this.ranOnce=false;this.operationTimeout=setTimeout(this.boundTryOperation,1)},setupTimeout:function(){if(this.done)return;this.operationTimeout=setTimeout(this.boundTryOperation,this.options.every)},setupSuccessSubscriber:function(){var opts={nowIfTriggered:true,once:true};if(this.options.ignorePrevious)opts.nowIfTriggered=false;Flow.onWithOptions(this.eventString,this.boundSuccessConditionTriggered,opts)},successConditionTriggered:function(){this.cancelRepeatOperation()},
triggerErrorOperation:function(){this.cancelRepeatOperation();this.options.onMaxAttempts()},cancelRepeatOperation:function(){this.done=true;try{clearTimeout(this.operationTimeout)}catch(e){}this.operationTimeout=null},tryOperation:function(){this.operationTimeout=null;if(!this.attemptCounter.hasNext()){this.triggerErrorOperation();return}this.attemptCounter.advance();try{FlowUtil.log("Attempting to run UntilOperation for event: "+this.eventString);this.options.run()}catch(e){this.options.onException(e);
FlowUtil.log("Until operation logged an error: "+e)}if(!this.ranOnce){this.ranOnce=true;this.setupSuccessSubscriber()}this.setupTimeout()}});var FlowKlass=FlowUtil.Klass.create({initialize:function(){this.nothingModuleCreated=false;this.flowModules=new DefaultingHash(function(key){return new FlowModule(key)})},module:function(modKey){return this.flowModules.get(modKey)},Nothing:function(){this.nothingModuleCreated=this.nothingModuleCreated||function(){Flow.module("__flowNothingStub").notify("created");
return true}();return["__flowNothingStub::created"]},on:function(key,handler){return this.onWithOptions(key,handler,{})},onWithOptions:function(key,handler,options){var pair=key.split("::");var modName=pair[0];var triggerName=pair[1];return this.module(modName).on("it::"+triggerName,handler,options)},until:function(eventString,options){return new UntilOperation(eventString,options)}});var Observable=FlowUtil.Module.create({methods:{__prepareObservable:function(){this.__observableEventManager=this.__observableEventManager||
new EventManager},observe:function(evt,watcherArgs){this.__prepareObservable();this.__observableEventManager.addWatcher(evt,watcherArgs)},broadcast:function(){this.__prepareObservable();var args=FlowUtil.$A(arguments);var evt=args.shift();this.__observableEventManager.trigger(evt,args)}}});var Dependency=FlowUtil.Klass.create({modules:[Observable],initialize:function(mod,trigger){this.met=false;this.autoBind(["triggered"]);this.mod=mod;this.trigger=trigger;this.mod.observe(trigger,{run:this.boundTriggered,
nowIfTriggered:true})},triggered:function(){this.met=true;this.broadcast("met")},isMet:function(){return this.met}});var DependencyGroup=FlowUtil.Klass.create({modules:[Observable],initialize:function(groupKey,depDescription){this.notificationSent=false;this.groupKey=groupKey;this.met=false;this.autoBind(["triggered"]);this.dependencies=[];this.setDependencies(depDescription)},setDependencies:function(depDescription){for(var i=0;i<depDescription.length;i++){var set=depDescription[i].split("::");var modName=
set[0];var triggerName=set[1]||"declared";var dep=new Dependency(Flow.module(modName),triggerName);this.dependencies.push(dep);dep.observe("met",{run:this.boundTriggered,nowIfTriggered:true})}},isMet:function(){return this.met},triggered:function(){var allMet=true;for(var i=0;i<this.dependencies.length;i++)if(!this.dependencies[i].isMet()){allMet=false;break}if(allMet)this.conditionsMet()},conditionsMet:function(){this.met=true;if(!this.notificationSent){this.notificationSent=true;this.broadcast("met",
this.groupKey)}}});var DependencyManager=FlowUtil.Klass.create({modules:[Observable],initialize:function(module){this.module=module;this.dependencyGroups=[];this.autoBind(["triggered"])},setDependencies:function(){var args=FlowUtil.$A(arguments);if(args.length<1)return;var pusher=function(key,depDescription){var depGroup=new DependencyGroup(key,depDescription);this.dependencyGroups.push(depGroup);depGroup.observe("met",{run:this.boundTriggered,nowIfTriggered:true})}.bind(this);if(args.length==1&&
typeOf(args[0])==="object")for(var key in args[0])pusher(key,args[0][key]);else for(var idx in args)pusher(idx,args[idx])},triggered:function(evt){var groupKey=evt.runInfo.arguments[0];if(!groupKey)return;FlowUtil.log("Dependency group ["+groupKey+"] met for module: "+this.module.toString());this.broadcast("met",groupKey)}});var DelegateManager=FlowUtil.Klass.create({initialize:function(opts){this.delegates=opts||{}},get:function(delegateName){return this.delegates[delegateName]}});var FlowModule=
FlowUtil.Klass.create({modules:[Observable],toString:function(){return"Module [name="+this.name+", state="+this.state+"]"},initialize:function(name){this.name=name;this.dependencyManager=new DependencyManager(this);this.delegateManager=new DelegateManager({dependencies:this.dependencyManager,it:this});this.state="allocated";this.notify("declared")},notify:function(state){FlowUtil.log(this.toString()+" says:"+state);this.state=state;this.broadcast(state)},dependsOn:function(){var args=FlowUtil.$A(arguments);
this.dependencyManager.setDependencies.apply(this.dependencyManager,args);return this},onWithOptions:function(eventString,fun,opts){var parts=eventString.split("::");var delegate_handle=null;var trigger=null;if(parts.length>1){delegate_handle=parts[0];trigger=parts[1]}else{delegate_handle="it";trigger=parts[0]}var delegate=this.delegateManager.get(delegate_handle);if(typeOf(fun)==="string")fun=FlowUtil.Funs.TransitionF(this.name,fun);opts=FlowUtil.merge({},opts||{},{run:fun});if(delegate)delegate.observe(trigger,
opts);return this},on:function(eventString,fun){return this.onWithOptions(eventString,fun,{nowIfTriggered:true})},onNext:function(eventString,fun){return this.onWithOptions(eventString,fun,{nowIfTriggered:false,once:true})}});ns.Flow=new FlowKlass;ns.FlowUtil=FlowUtil})(window);(function(ns){ns.AssetHelper=function(){};ns.AssetHelper.prototype={transformImageElts:function(){var self=this;jQuery(".asset").each(function(i,e){e=jQuery(e);e.attr("src",CB.resolve(e.attr("asset-src")))})}};ns.AH=new ns.AssetHelper})(window);var deployJava={debug:null,firefoxJavaVersion:null,myInterval:null,preInstallJREList:null,returnPage:null,brand:null,locale:null,installType:null,EAInstallEnabled:false,EarlyAccessURL:null,getJavaURL:"http://java.sun.com/webapps/getjava/BrowserRedirect?host=java.com",appleRedirectPage:"http://www.apple.com/support/downloads/",oldMimeType:"application/npruntime-scriptable-plugin;DeploymentToolkit",mimeType:"application/java-deployment-toolkit",launchButtonPNG:"http://java.sun.com/products/jfc/tsc/articles/swing2d/webstart.png",
browserName:null,browserName2:null,getJREs:function(){var list=new Array;if(deployJava.isPluginInstalled()){var plugin=deployJava.getPlugin();var VMs=plugin.jvms;for(var i=0;i<VMs.getLength();i++)list[i]=VMs.get(i).version}else{var browser=deployJava.getBrowser();if(browser=="MSIE")if(deployJava.testUsingActiveX("1.7.0"))list[0]="1.7.0";else if(deployJava.testUsingActiveX("1.6.0"))list[0]="1.6.0";else if(deployJava.testUsingActiveX("1.5.0"))list[0]="1.5.0";else if(deployJava.testUsingActiveX("1.4.2"))list[0]=
"1.4.2";else{if(deployJava.testForMSVM())list[0]="1.1"}else if(browser=="Netscape Family"){deployJava.getJPIVersionUsingMimeType();if(deployJava.firefoxJavaVersion!=null)list[0]=deployJava.firefoxJavaVersion;else if(deployJava.testUsingMimeTypes("1.7"))list[0]="1.7.0";else if(deployJava.testUsingMimeTypes("1.6"))list[0]="1.6.0";else if(deployJava.testUsingMimeTypes("1.5"))list[0]="1.5.0";else if(deployJava.testUsingMimeTypes("1.4.2"))list[0]="1.4.2";else if(deployJava.browserName2=="Safari")if(deployJava.testUsingPluginsArray("1.7.0"))list[0]=
"1.7.0";else if(deployJava.testUsingPluginsArray("1.6"))list[0]="1.6.0";else if(deployJava.testUsingPluginsArray("1.5"))list[0]="1.5.0";else if(deployJava.testUsingPluginsArray("1.4.2"))list[0]="1.4.2"}}if(deployJava.debug)for(var i=0;i<list.length;++i)alert("We claim to have detected Java SE "+list[i]);return list},installJRE:function(requestVersion){var ret=false;if(deployJava.isPluginInstalled())if(deployJava.getPlugin().installJRE(requestVersion)){deployJava.refresh();if(deployJava.returnPage!=
null)document.location=deployJava.returnPage;return true}else return false;else return deployJava.installLatestJRE()},installLatestJRE:function(){if(deployJava.isPluginInstalled())if(deployJava.getPlugin().installLatestJRE()){deployJava.refresh();if(deployJava.returnPage!=null)document.location=deployJava.returnPage;return true}else return false;else{var browser=deployJava.getBrowser();var platform=navigator.platform.toLowerCase();if(deployJava.EAInstallEnabled=="true"&&platform.indexOf("win")!=-1&&
deployJava.EarlyAccessURL!=null){deployJava.preInstallJREList=deployJava.getJREs();if(deployJava.returnPage!=null)deployJava.myInterval=setInterval("deployJava.poll()",3E3);location.href=deployJava.EarlyAccessURL;return false}else{if(browser=="MSIE")return deployJava.IEInstall();else if(browser=="Netscape Family"&&platform.indexOf("win32")!=-1)return deployJava.FFInstall();else location.href=deployJava.getJavaURL+(deployJava.returnPage!=null?"&returnPage="+deployJava.returnPage:"")+(deployJava.locale!=
null?"&locale="+deployJava.locale:"")+(deployJava.brand!=null?"&brand="+deployJava.brand:"");return false}}},runApplet:function(attributes,parameters,minimumVersion){if(minimumVersion=="undefined"||minimumVersion==null)minimumVersion="1.1";var regex="^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$";var matchData=minimumVersion.match(regex);if(deployJava.returnPage==null)deployJava.returnPage=document.location;if(matchData!=null){var browser=deployJava.getBrowser();if(browser!="?"&&"Safari"!=deployJava.browserName2)if(deployJava.versionCheck(minimumVersion+
"+"))deployJava.writeAppletTag(attributes,parameters);else{if(deployJava.installJRE(minimumVersion+"+")){deployJava.refresh();location.href=document.location;deployJava.writeAppletTag(attributes,parameters)}}else deployJava.writeAppletTag(attributes,parameters)}else if(deployJava.debug)alert("Invalid minimumVersion argument to runApplet():"+minimumVersion)},writeAppletTag:function(attributes,parameters){var s="<"+"applet ";var codeAttribute=false;for(var attribute in attributes){s+=" "+attribute+
'="'+attributes[attribute]+'"';if(attribute=="code")codeAttribute=true}if(!codeAttribute)s+=' code="dummy"';s+=">";document.write(s);if(parameters!="undefined"&&parameters!=null){var codebaseParam=false;for(var parameter in parameters){if(parameter=="codebase_lookup")codebaseParam=true;s='<param name="'+parameter+'" value="'+parameters[parameter]+'">';document.write(s)}if(!codebaseParam)document.write('<param name="codebase_lookup" value="false">')}document.write("<"+"/"+"applet"+">")},versionCheck:function(versionPattern){var index=
0;var regex="^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?(\\*|\\+)?$";var matchData=versionPattern.match(regex);if(matchData!=null){var familyMatch=true;var patternArray=new Array;for(var i=1;i<matchData.length;++i)if(typeof matchData[i]=="string"&&matchData[i]!=""){patternArray[index]=matchData[i];index++}if(patternArray[patternArray.length-1]=="+"){familyMatch=false;patternArray.length--}else if(patternArray[patternArray.length-1]=="*")patternArray.length--;var list=deployJava.getJREs();for(var i=
0;i<list.length;++i)if(deployJava.compareVersionToPattern(list[i],patternArray,familyMatch))return true;return false}else{alert("Invalid versionPattern passed to versionCheck: "+versionPattern);return false}},isWebStartInstalled:function(minimumVersion){var browser=deployJava.getBrowser();if(browser=="?"||"Safari"==deployJava.browserName2)return true;if(minimumVersion=="undefined"||minimumVersion==null)minimumVersion="1.4.2";var retval=false;var regex="^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$";
var matchData=minimumVersion.match(regex);if(matchData!=null)retval=deployJava.versionCheck(minimumVersion+"+");else{if(deployJava.debug)alert("Invalid minimumVersion argument to isWebStartInstalled(): "+minimumVersion);retval=deployJava.versionCheck("1.4.2+")}return retval},getJPIVersionUsingMimeType:function(){for(var i=0;i<navigator.mimeTypes.length;++i){var s=navigator.mimeTypes[i].type;var m=s.match(/^application\/x-java-applet;jpi-version=(.*)$/);if(m!=null){deployJava.firefoxJavaVersion=m[1];
if("Opera"!=deployJava.browserName2)break}}},launchWebStartApplication:function(jnlp){return false},createWebStartLaunchButtonEx:function(jnlp,minimumVersion){if(deployJava.returnPage==null)deployJava.returnPage=jnlp;var url="javascript:deployJava.launchWebStartApplication('"+jnlp+"');";document.write("<"+'a href="'+url+"\" onMouseOver=\"window.status=''; "+'return true;"><'+"img "+'src="'+deployJava.launchButtonPNG+'" '+'border="0" /><'+"/"+"a"+">")},createWebStartLaunchButton:function(jnlp,minimumVersion){if(deployJava.returnPage==
null)deployJava.returnPage=jnlp;var url="javascript:"+"if (!deployJava.isWebStartInstalled(&quot;"+minimumVersion+"&quot;)) {"+"if (deployJava.installLatestJRE()) {"+"if (deployJava.launch(&quot;"+jnlp+"&quot;)) {}"+"}"+"} else {"+"if (deployJava.launch(&quot;"+jnlp+"&quot;)) {}"+"}";document.write("<"+'a href="'+url+"\" onMouseOver=\"window.status=''; "+'return true;"><'+"img "+'src="'+deployJava.launchButtonPNG+'" '+'border="0" /><'+"/"+"a"+">")},launch:function(jnlp){document.location=jnlp;return true},
isPluginInstalled:function(){var plugin=deployJava.getPlugin();if(plugin&&plugin.jvms)return true;else return false},isAutoUpdateEnabled:function(){if(deployJava.isPluginInstalled())return deployJava.getPlugin().isAutoUpdateEnabled();return false},setAutoUpdateEnabled:function(){if(deployJava.isPluginInstalled())return deployJava.getPlugin().setAutoUpdateEnabled();return false},setInstallerType:function(type){deployJava.installType=type;if(deployJava.isPluginInstalled())return deployJava.getPlugin().setInstallerType(type);
return false},setAdditionalPackages:function(packageList){if(deployJava.isPluginInstalled())return deployJava.getPlugin().setAdditionalPackages(packageList);return false},setEarlyAccess:function(enabled){deployJava.EAInstallEnabled=enabled},isPlugin2:function(){if(deployJava.isPluginInstalled())if(deployJava.versionCheck("1.6.0_10+"))try{return deployJava.getPlugin().isPlugin2()}catch(err){}return false},allowPlugin:function(){deployJava.getBrowser();var ret="Safari"!=deployJava.browserName2&&"Opera"!=
deployJava.browserName2;return ret},getPlugin:function(){deployJava.refresh();var ret=null;if(deployJava.allowPlugin())ret=document.getElementById("deployJavaPlugin");return ret},compareVersionToPattern:function(version,patternArray,familyMatch){var regex="^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$";var matchData=version.match(regex);if(matchData!=null){var index=0;var result=new Array;for(var i=1;i<matchData.length;++i)if(typeof matchData[i]=="string"&&matchData[i]!=""){result[index]=matchData[i];
index++}var l=Math.min(result.length,patternArray.length);if(familyMatch){for(var i=0;i<l;++i)if(result[i]!=patternArray[i])return false;return true}else{for(var i=0;i<l;++i)if(result[i]<patternArray[i])return false;else if(result[i]>patternArray[i])return true;return true}}else return false},getBrowser:function(){if(deployJava.browserName==null){var browser=navigator.userAgent.toLowerCase();if(deployJava.debug)alert("userAgent -> "+browser);if(browser.indexOf("msie")!=-1){deployJava.browserName=
"MSIE";deployJava.browserName2="MSIE"}else if(browser.indexOf("firefox")!=-1){deployJava.browserName="Netscape Family";deployJava.browserName2="Firefox"}else if(browser.indexOf("chrome")!=-1){deployJava.browserName="Netscape Family";deployJava.browserName2="Chrome"}else if(browser.indexOf("safari")!=-1){deployJava.browserName="Netscape Family";deployJava.browserName2="Safari"}else if(browser.indexOf("mozilla")!=-1){deployJava.browserName="Netscape Family";deployJava.browserName2="Other"}else if(browser.indexOf("opera")!=
-1){deployJava.browserName="Netscape Family";deployJava.browserName2="Opera"}else{deployJava.browserName="?";deployJava.browserName2="unknown"}if(deployJava.debug)alert("Detected browser name:"+deployJava.browserName+", "+deployJava.browserName2)}return deployJava.browserName},testUsingActiveX:function(version){var objectName="JavaWebStart.isInstalled."+version+".0";if(!ActiveXObject){if(deployJava.debug)alert("Browser claims to be IE, but no ActiveXObject object?");return false}try{return new ActiveXObject(objectName)!=
null}catch(exception){return false}},testForMSVM:function(){var clsid="{08B0E5C0-4FCB-11CF-AAA5-00401C608500}";if(typeof oClientCaps!="undefined"){var v=oClientCaps.getComponentVersion(clsid,"ComponentID");if(v==""||v=="5,0,5000,0")return false;else return true}else return false},testUsingMimeTypes:function(version){if(!navigator.mimeTypes){if(deployJava.debug)alert("Browser claims to be Netscape family, but no mimeTypes[] array?");return false}for(var i=0;i<navigator.mimeTypes.length;++i){s=navigator.mimeTypes[i].type;
var m=s.match(/^application\/x-java-applet\x3Bversion=(1\.8|1\.7|1\.6|1\.5|1\.4\.2)$/);if(m!=null)if(deployJava.compareVersions(m[1],version))return true}return false},testUsingPluginsArray:function(version){if(!navigator.plugins||!navigator.plugins.length)return false;var platform=navigator.platform.toLowerCase();for(var i=0;i<navigator.plugins.length;++i){s=navigator.plugins[i].description;if(s.search(/^Java Switchable Plug-in (Cocoa)/)!=-1){if(deployJava.compareVersions("1.5.0",version))return true}else if(s.search(/^Java/)!=
-1)if(platform.indexOf("win")!=-1)if(deployJava.compareVersions("1.5.0",version)||deployJava.compareVersions("1.6.0",version))return true}if(deployJava.compareVersions("1.5.0",version))return true;return false},IEInstall:function(){location.href=deployJava.getJavaURL+(deployJava.returnPage!=null?"&returnPage="+deployJava.returnPage:"")+(deployJava.locale!=null?"&locale="+deployJava.locale:"")+(deployJava.brand!=null?"&brand="+deployJava.brand:"")+(deployJava.installType!=null?"&type="+deployJava.installType:
"");return false},done:function(name,result){},FFInstall:function(){location.href=deployJava.getJavaURL+(deployJava.returnPage!=null?"&returnPage="+deployJava.returnPage:"")+(deployJava.locale!=null?"&locale="+deployJava.locale:"")+(deployJava.brand!=null?"&brand="+deployJava.brand:"")+(deployJava.installType!=null?"&type="+deployJava.installType:"");return false},compareVersions:function(installed,required){var a=installed.split(".");var b=required.split(".");for(var i=0;i<a.length;++i)a[i]=Number(a[i]);
for(var i=0;i<b.length;++i)b[i]=Number(b[i]);if(a.length==2)a[2]=0;if(a[0]>b[0])return true;if(a[0]<b[0])return false;if(a[1]>b[1])return true;if(a[1]<b[1])return false;if(a[2]>b[2])return true;if(a[2]<b[2])return false;return true},enableAlerts:function(){deployJava.browserName=null;deployJava.debug=true},poll:function(){deployJava.refresh();var postInstallJREList=deployJava.getJREs();if(deployJava.preInstallJREList.length==0&&postInstallJREList.length!=0){clearInterval(deployJava.myInterval);if(deployJava.returnPage!=
null)location.href=deployJava.returnPage}if(deployJava.preInstallJREList.length!=0&&postInstallJREList.length!=0&&deployJava.preInstallJREList[0]!=postInstallJREList[0]){clearInterval(deployJava.myInterval);if(deployJava.returnPage!=null)location.href=deployJava.returnPage}},writePluginTag:function(){var browser=deployJava.getBrowser();if(browser=="MSIE")document.write("<"+'object classid="clsid:CAFEEFAC-DEC7-0000-0000-ABCDEFFEDCBA" '+'id="deployJavaPlugin" width="0" height="0">'+"<"+"/"+"object"+
">");else if(browser=="Netscape Family"&&deployJava.allowPlugin())deployJava.writeEmbedTag()},refresh:function(){navigator.plugins.refresh(false);var browser=deployJava.getBrowser();if(browser=="Netscape Family"&&deployJava.allowPlugin()){var plugin=document.getElementById("deployJavaPlugin");if(plugin==null)deployJava.writeEmbedTag()}},writeEmbedTag:function(){var written=false;if(navigator.mimeTypes!=null){for(var i=0;i<navigator.mimeTypes.length;i++)if(navigator.mimeTypes[i].type==deployJava.mimeType)if(navigator.mimeTypes[i].enabledPlugin){document.write("<"+
'embed id="deployJavaPlugin" type="'+deployJava.mimeType+'" hidden="true" />');written=true}if(!written)for(var i=0;i<navigator.mimeTypes.length;i++)if(navigator.mimeTypes[i].type==deployJava.oldMimeType)if(navigator.mimeTypes[i].enabledPlugin)document.write("<"+'embed id="deployJavaPlugin" type="'+deployJava.oldMimeType+'" hidden="true" />')}},do_initialize:function(){deployJava.writePluginTag();if(deployJava.locale==null){var loc=null;if(loc==null)try{loc=navigator.userLanguage}catch(err){}if(loc==
null)try{loc=navigator.systemLanguage}catch(err){}if(loc==null)try{loc=navigator.language}catch(err){}if(loc!=null){loc.replace("-","_");deployJava.locale=loc}}}};deployJava.do_initialize();var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",ON_READY_STATE_CHANGE="onreadystatechange",win=window,doc=document,nav=navigator,plugin=false,domLoadFnArr=[main],regObjArr=[],objIdArr=[],listenersArr=[],storedAltContent,storedAltContentId,storedCallbackFn,storedCallbackObj,isDomLoaded=false,isExpressInstallActive=
false,dynamicStylesheet,dynamicStylesheetMedia,autoHideShow=true,ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=!+"\u000b1",playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==
OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;if(d&&!(typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){plugin=true;ie=false;d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/[a-zA-Z]/.test(d)?parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof win.ActiveXObject!=UNDEF)try{var a=new ActiveXObject(SHOCKWAVE_FLASH_AX);
if(a){d=a.GetVariable("$version");if(d){ie=true;d=d.split(" ")[1].split(",");playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}}catch(e){}return{w3:w3cdom,pv:playerVersion,wk:webkit,ie:ie,win:windows,mac:mac}}(),onDomLoad=function(){if(!ua.w3)return;if(typeof doc.readyState!=UNDEF&&doc.readyState=="complete"||typeof doc.readyState==UNDEF&&(doc.getElementsByTagName("body")[0]||doc.body))callDomLoadFunctions();if(!isDomLoaded){if(typeof doc.addEventListener!=UNDEF)doc.addEventListener("DOMContentLoaded",
callDomLoadFunctions,false);if(ua.ie&&ua.win){doc.attachEvent(ON_READY_STATE_CHANGE,function(){if(doc.readyState=="complete"){doc.detachEvent(ON_READY_STATE_CHANGE,arguments.callee);callDomLoadFunctions()}});if(win==top)(function(){if(isDomLoaded)return;try{doc.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}callDomLoadFunctions()})()}if(ua.wk)(function(){if(isDomLoaded)return;if(!/loaded|complete/.test(doc.readyState)){setTimeout(arguments.callee,0);return}callDomLoadFunctions()})();
addLoadEvent(callDomLoadFunctions)}}();function callDomLoadFunctions(){if(isDomLoaded)return;try{var t=doc.getElementsByTagName("body")[0].appendChild(createElement("span"));t.parentNode.removeChild(t)}catch(e){return}isDomLoaded=true;var dl=domLoadFnArr.length;for(var i=0;i<dl;i++)domLoadFnArr[i]()}function addDomLoadEvent(fn){if(isDomLoaded)fn();else domLoadFnArr[domLoadFnArr.length]=fn}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF)win.addEventListener("load",fn,false);else if(typeof doc.addEventListener!=
UNDEF)doc.addEventListener("load",fn,false);else if(typeof win.attachEvent!=UNDEF)addListener(win,"onload",fn);else if(typeof win.onload=="function"){var fnOld=win.onload;win.onload=function(){fnOld();fn()}}else win.onload=fn}function main(){if(plugin)testPlayerVersion();else matchVersions()}function testPlayerVersion(){var b=doc.getElementsByTagName("body")[0];var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);var t=b.appendChild(o);if(t){var counter=0;(function(){if(typeof t.GetVariable!=
UNDEF){var d=t.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");ua.pv=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}else if(counter<10){counter++;setTimeout(arguments.callee,10);return}b.removeChild(o);t=null;matchVersions()})()}else matchVersions()}function matchVersions(){var rl=regObjArr.length;if(rl>0)for(var i=0;i<rl;i++){var id=regObjArr[i].id;var cb=regObjArr[i].callbackFn;var cbObj={success:false,id:id};if(ua.pv[0]>0){var obj=getElementById(id);if(obj)if(hasPlayerVersion(regObjArr[i].swfVersion)&&
!(ua.wk&&ua.wk<312)){setVisibility(id,true);if(cb){cbObj.success=true;cbObj.ref=getObjectById(id);cb(cbObj)}}else if(regObjArr[i].expressInstall&&canExpressInstall()){var att={};att.data=regObjArr[i].expressInstall;att.width=obj.getAttribute("width")||"0";att.height=obj.getAttribute("height")||"0";if(obj.getAttribute("class"))att.styleclass=obj.getAttribute("class");if(obj.getAttribute("align"))att.align=obj.getAttribute("align");var par={};var p=obj.getElementsByTagName("param");var pl=p.length;
for(var j=0;j<pl;j++)if(p[j].getAttribute("name").toLowerCase()!="movie")par[p[j].getAttribute("name")]=p[j].getAttribute("value");showExpressInstall(att,par,id,cb)}else{displayAltContent(obj);if(cb)cb(cbObj)}}else{setVisibility(id,true);if(cb){var o=getObjectById(id);if(o&&typeof o.SetVariable!=UNDEF){cbObj.success=true;cbObj.ref=o}cb(cbObj)}}}}function getObjectById(objectIdStr){var r=null;var o=getElementById(objectIdStr);if(o&&o.nodeName=="OBJECT")if(typeof o.SetVariable!=UNDEF)r=o;else{var n=
o.getElementsByTagName(OBJECT)[0];if(n)r=n}return r}function canExpressInstall(){return!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)&&!(ua.wk&&ua.wk<312)}function showExpressInstall(att,par,replaceElemIdStr,callbackFn){isExpressInstallActive=true;storedCallbackFn=callbackFn||null;storedCallbackObj={success:false,id:replaceElemIdStr};var obj=getElementById(replaceElemIdStr);if(obj){if(obj.nodeName=="OBJECT"){storedAltContent=abstractAltContent(obj);storedAltContentId=null}else{storedAltContent=
obj;storedAltContentId=replaceElemIdStr}att.id=EXPRESS_INSTALL_ID;if(typeof att.width==UNDEF||!/%$/.test(att.width)&&parseInt(att.width,10)<310)att.width="310";if(typeof att.height==UNDEF||!/%$/.test(att.height)&&parseInt(att.height,10)<137)att.height="137";doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",fv="MMredirectURL="+win.location.toString().replace(/&/g,"%26")+"&MMplayerType="+pt+"&MMdoctitle="+doc.title;if(typeof par.flashvars!=UNDEF)par.flashvars+=
"&"+fv;else par.flashvars=fv;if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div");replaceElemIdStr+="SWFObjectNew";newObj.setAttribute("id",replaceElemIdStr);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";(function(){if(obj.readyState==4)obj.parentNode.removeChild(obj);else setTimeout(arguments.callee,10)})()}createSWF(att,par,replaceElemIdStr)}}function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");obj.parentNode.insertBefore(el,
obj);el.parentNode.replaceChild(abstractAltContent(obj),el);obj.style.display="none";(function(){if(obj.readyState==4)obj.parentNode.removeChild(obj);else setTimeout(arguments.callee,10)})()}else obj.parentNode.replaceChild(abstractAltContent(obj),obj)}function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie)ac.innerHTML=obj.innerHTML;else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++)if(!(c[i].nodeType==
1&&c[i].nodeName=="PARAM")&&!(c[i].nodeType==8))ac.appendChild(c[i].cloneNode(true))}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(ua.wk&&ua.wk<312)return r;if(el){if(typeof attObj.id==UNDEF)attObj.id=id;if(ua.ie&&ua.win){var att="";for(var i in attObj)if(attObj[i]!=Object.prototype[i])if(i.toLowerCase()=="data")parObj.movie=attObj[i];else if(i.toLowerCase()=="styleclass")att+=' class="'+attObj[i]+'"';else if(i.toLowerCase()!="classid")att+=" "+i+'="'+attObj[i]+'"';
var par="";for(var j in parObj)if(parObj[j]!=Object.prototype[j])par+='<param name="'+j+'" value="'+parObj[j]+'" />';el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>";objIdArr[objIdArr.length]=attObj.id;r=getElementById(attObj.id)}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj)if(attObj[m]!=Object.prototype[m])if(m.toLowerCase()=="styleclass")o.setAttribute("class",attObj[m]);else if(m.toLowerCase()!="classid")o.setAttribute(m,
attObj[m]);for(var n in parObj)if(parObj[n]!=Object.prototype[n]&&n.toLowerCase()!="movie")createObjParam(o,n,parObj[n]);el.parentNode.replaceChild(o,el);r=o}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);if(obj&&obj.nodeName=="OBJECT")if(ua.ie&&ua.win){obj.style.display="none";(function(){if(obj.readyState==4)removeObjectInIE(id);else setTimeout(arguments.callee,
10)})()}else obj.parentNode.removeChild(obj)}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj)if(typeof obj[i]=="function")obj[i]=null;obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}return el}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn);listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){var pv=
ua.pv,v=rv.split(".");v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10)||0;v[2]=parseInt(v[2],10)||0;return pv[0]>v[0]||pv[0]==v[0]&&pv[1]>v[1]||pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]?true:false}function createCSS(sel,decl,media,newStyle){if(ua.ie&&ua.mac)return;var h=doc.getElementsByTagName("head")[0];if(!h)return;var m=media&&typeof media=="string"?media:"screen";if(newStyle){dynamicStylesheet=null;dynamicStylesheetMedia=null}if(!dynamicStylesheet||dynamicStylesheetMedia!=m){var s=createElement("style");
s.setAttribute("type","text/css");s.setAttribute("media",m);dynamicStylesheet=h.appendChild(s);if(ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0)dynamicStylesheet=doc.styleSheets[doc.styleSheets.length-1];dynamicStylesheetMedia=m}if(ua.ie&&ua.win){if(dynamicStylesheet&&typeof dynamicStylesheet.addRule==OBJECT)dynamicStylesheet.addRule(sel,decl)}else if(dynamicStylesheet&&typeof doc.createTextNode!=UNDEF)dynamicStylesheet.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}function setVisibility(id,
isVisible){if(!autoHideShow)return;var v=isVisible?"visible":"hidden";if(isDomLoaded&&getElementById(id))getElementById(id).style.visibility=v;else createCSS("#"+id,"visibility:"+v)}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/;var hasBadChars=regex.exec(s)!=null;return hasBadChars&&typeof encodeURIComponent!=UNDEF?encodeURIComponent(s):s}var cleanup=function(){if(ua.ie&&ua.win)window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++)listenersArr[i][0].detachEvent(listenersArr[i][1],
listenersArr[i][2]);var il=objIdArr.length;for(var j=0;j<il;j++)removeSWF(objIdArr[j]);for(var k in ua)ua[k]=null;ua=null;for(var l in swfobject)swfobject[l]=null;swfobject=null})}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr,callbackFn){if(ua.w3&&objectIdStr&&swfVersionStr){var regObj={};regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr;regObj.expressInstall=xiSwfUrlStr;regObj.callbackFn=callbackFn;regObjArr[regObjArr.length]=regObj;setVisibility(objectIdStr,true)}else if(callbackFn)callbackFn({success:false,
id:objectIdStr})},getObjectById:function(objectIdStr){if(ua.w3)return getObjectById(objectIdStr)},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj,callbackFn){var callbackObj={success:false,id:replaceElemIdStr};if(ua.w3&&!(ua.wk&&ua.wk<312)&&swfUrlStr&&replaceElemIdStr&&widthStr&&heightStr&&swfVersionStr){setVisibility(replaceElemIdStr,true);addDomLoadEvent(function(){widthStr+="";heightStr+="";var att={};if(attObj&&typeof attObj===
OBJECT)for(var i in attObj)att[i]=attObj[i];att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT)for(var j in parObj)par[j]=parObj[j];if(flashvarsObj&&typeof flashvarsObj===OBJECT)for(var k in flashvarsObj)if(typeof par.flashvars!=UNDEF)par.flashvars+="&"+k+"="+flashvarsObj[k];else par.flashvars=k+"="+flashvarsObj[k];if(hasPlayerVersion(swfVersionStr)){var obj=createSWF(att,par,replaceElemIdStr);if(att.id==replaceElemIdStr)setVisibility(replaceElemIdStr,
true);callbackObj.success=true;callbackObj.ref=obj}else if(xiSwfUrlStr&&canExpressInstall()){att.data=xiSwfUrlStr;showExpressInstall(att,par,replaceElemIdStr,callbackFn);return}else setVisibility(replaceElemIdStr,true);if(callbackFn)callbackFn(callbackObj)})}else if(callbackFn)callbackFn(callbackObj)},switchOffAutoHideShow:function(){autoHideShow=false},ua:ua,getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,
parObj,replaceElemIdStr){if(ua.w3)return createSWF(attObj,parObj,replaceElemIdStr);else return undefined},showExpressInstall:function(att,par,replaceElemIdStr,callbackFn){if(ua.w3&&canExpressInstall())showExpressInstall(att,par,replaceElemIdStr,callbackFn)},removeSWF:function(objElemIdStr){if(ua.w3)removeSWF(objElemIdStr)},createCSS:function(selStr,declStr,mediaStr,newStyleBoolean){if(ua.w3)createCSS(selStr,declStr,mediaStr,newStyleBoolean)},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,
getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(q){if(/\?/.test(q))q=q.split("?")[1];if(param==null)return urlEncodeIfNecessary(q);var pairs=q.split("&");for(var i=0;i<pairs.length;i++)if(pairs[i].substring(0,pairs[i].indexOf("="))==param)return urlEncodeIfNecessary(pairs[i].substring(pairs[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(isExpressInstallActive){var obj=getElementById(EXPRESS_INSTALL_ID);if(obj&&storedAltContent){obj.parentNode.replaceChild(storedAltContent,
obj);if(storedAltContentId){setVisibility(storedAltContentId,true);if(ua.ie&&ua.win)storedAltContent.style.display="block"}if(storedCallbackFn)storedCallbackFn(storedCallbackObj)}isExpressInstallActive=false}}}}();(function(global,factory){if(typeof module==="object"&&typeof module.exports==="object")module.exports=global.document?factory(global,true):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)};else factory(global)})(typeof window!=="undefined"?window:this,function(window,noGlobal){var deletedIds=[];var slice=deletedIds.slice;var concat=deletedIds.concat;var push=deletedIds.push;var indexOf=deletedIds.indexOf;var class2type={};var toString=class2type.toString;
var hasOwn=class2type.hasOwnProperty;var trim="".trim;var support={};var version="1.11.0",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return num!=null?num<0?this[num+this.length]:
this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=
this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:deletedIds.sort,splice:deletedIds.splice};jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if(typeof target!=="object"&&!jQuery.isFunction(target))target={};if(i===length){target=
this;i--}for(;i<length;i++)if((options=arguments[i])!=null)for(name in options){src=target[name];copy=options[name];if(target===copy)continue;if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else clone=src&&jQuery.isPlainObject(src)?src:{};target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined)target[name]=copy}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,
""),isReady:true,error:function(msg){throw new Error(msg);},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array"},isWindow:function(obj){return obj!=null&&obj==obj.window},isNumeric:function(obj){return obj-parseFloat(obj)>=0},isEmptyObject:function(obj){var name;for(name in obj)return false;return true},isPlainObject:function(obj){var key;if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj))return false;
try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return false}catch(e){return false}if(support.ownLast)for(key in obj)return hasOwn.call(obj,key);for(key in obj);return key===undefined||hasOwn.call(obj,key)},type:function(obj){if(obj==null)return obj+"";return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(data){if(data&&jQuery.trim(data))(window.execScript||function(data){window["eval"].call(window,
data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args)if(isArray)for(;i<length;i++){value=callback.apply(obj[i],args);if(value===false)break}else for(i in obj){value=callback.apply(obj[i],args);if(value===false)break}else if(isArray)for(;i<length;i++){value=
callback.call(obj[i],i,obj[i]);if(value===false)break}else for(i in obj){value=callback.call(obj[i],i,obj[i]);if(value===false)break}return obj},trim:trim&&!trim.call("\ufeff\u00a0")?function(text){return text==null?"":trim.call(text)}:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];if(arr!=null)if(isArraylike(Object(arr)))jQuery.merge(ret,typeof arr==="string"?[arr]:arr);else push.call(ret,arr);return ret},inArray:function(elem,
arr,i){var len;if(arr){if(indexOf)return indexOf.call(arr,elem,i);len=arr.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){var len=+second.length,j=0,i=first.length;while(j<len)first[i++]=second[j++];if(len!==len)while(second[j]!==undefined)first[i++]=second[j++];first.length=i;return first},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=
!callback(elems[i],i);if(callbackInverse!==callbackExpect)matches.push(elems[i])}return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray)for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null)ret.push(value)}else for(i in elems){value=callback(elems[i],i,arg);if(value!=null)ret.push(value)}return concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;if(typeof context==="string"){tmp=fn[context];
context=fn;fn=tmp}if(!jQuery.isFunction(fn))return undefined;args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},now:function(){return+new Date},support:support});jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);
if(type==="function"||jQuery.isWindow(obj))return false;if(obj.nodeType===1&&length)return true;return type==="array"||length===0||typeof length==="number"&&length>0&&length-1 in obj}var Sizzle=function(window){var i,support,Expr,getText,isXML,compile,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=
createCache(),sortOrder=function(a,b){if(a===b)hasDuplicate=true;return 0},strundefined=typeof undefined,MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++)if(this[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding=
"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:([*^$|!~]?=)"+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+
"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={"ID":new RegExp("^#("+characterEncoding+")"),"CLASS":new RegExp("^\\.("+characterEncoding+")"),"TAG":new RegExp("^("+characterEncoding.replace("w","w*")+")"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+
whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"bool":new RegExp("^(?:"+booleans+")$","i"),"needsContext":new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=
new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:
function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]);target.length=j-1}}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document)setDocument(context);context=context||document;results=results||[];if(!selector||typeof selector!=="string")return results;if((nodeType=context.nodeType)!==1&&nodeType!==9)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(m=
match[1])if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results}}else return results}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,
context.getElementsByClassName(m));return results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){nid=old=expando;newContext=context;newSelector=nodeType===9&&selector;if(nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if(old=context.getAttribute("id"))nid=old.replace(rescape,"\\$&");else context.setAttribute("id",nid);nid="[id='"+nid+"'] ";i=groups.length;while(i--)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||
context;newSelector=groups.join(",")}if(newSelector)try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){}finally{if(!old)context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength)delete cache[keys.shift()];return cache[key+" "]=value}return cache}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var div=
document.createElement("div");try{return!!fn(div)}catch(e){return false}finally{if(div.parentNode)div.parentNode.removeChild(div);div=null}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=attrs.length;while(i--)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)while(cur=cur.nextSibling)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=
elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--)if(seed[j=matchIndexes[i]])seed[j]=!(matches[j]=seed[j])})})}function testContext(context){return context&&
typeof context.getElementsByTagName!==strundefined&&context}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var hasCompare,doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;if(doc===document||doc.nodeType!==9||!doc.documentElement)return document;document=doc;docElem=doc.documentElement;documentIsHTML=
!isXML(doc);if(parent&&parent!==parent.top)if(parent.addEventListener)parent.addEventListener("unload",function(){setDocument()},false);else if(parent.attachEvent)parent.attachEvent("onunload",function(){setDocument()});support.attributes=assert(function(div){div.className="i";return!div.getAttribute("className")});support.getElementsByTagName=assert(function(div){div.appendChild(doc.createComment(""));return!div.getElementsByTagName("*").length});support.getElementsByClassName=rnative.test(doc.getElementsByClassName)&&
assert(function(div){div.innerHTML="<div class='a'></div><div class='a i'></div>";div.firstChild.className="i";return div.getElementsByClassName("i").length===2});support.getById=assert(function(div){docElem.appendChild(div).id=expando;return!doc.getElementsByName||!doc.getElementsByName(expando).length});if(support.getById){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}};Expr.filter["ID"]=
function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}}else{delete Expr.find["ID"];Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined)return context.getElementsByTagName(tag)}:
function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while(elem=results[i++])if(elem.nodeType===1)tmp.push(elem);return tmp}return results};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!==strundefined&&documentIsHTML)return context.getElementsByClassName(className)};rbuggyMatches=[];rbuggyQSA=[];if(support.qsa=rnative.test(doc.querySelectorAll)){assert(function(div){div.innerHTML=
"<select t=''><option selected=''></option></select>";if(div.querySelectorAll("[t^='']").length)rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")");if(!div.querySelectorAll("[selected]").length)rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")");if(!div.querySelectorAll(":checked").length)rbuggyQSA.push(":checked")});assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("name","D");if(div.querySelectorAll("[name=d]").length)rbuggyQSA.push("name"+
whitespace+"*[*^$|!~]?=");if(!div.querySelectorAll(":enabled").length)rbuggyQSA.push(":enabled",":disabled");div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if(support.matchesSelector=rnative.test(matches=docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos)});rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));
rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return true;return false};sortOrder=hasCompare?function(a,
b){if(a===b){hasDuplicate=true;return 0}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare)return compare;compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a))return-1;if(b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b))return 1;return sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,
b):0}return compare&4?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0;else if(aup===bup)return siblingCheck(a,b);cur=a;while(cur=cur.parentNode)ap.unshift(cur);cur=b;while(cur=cur.parentNode)bp.unshift(cur);while(ap[i]===bp[i])i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:
0};return doc};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document)setDocument(elem);expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11)return ret}catch(e){}return Sizzle(expr,
document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document)setDocument(context);return contains(context,elem)};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document)setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&
val.specified?val.value:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++])if(elem===results[i])j=duplicates.push(i);while(j--)results.splice(duplicates[j],1)}sortInput=null;return results};getText=Sizzle.getText=function(elem){var node,
ret="",i=0,nodeType=elem.nodeType;if(!nodeType)while(node=elem[i++])ret+=getText(node);else if(nodeType===1||nodeType===9||nodeType===11)if(typeof elem.textContent==="string")return elem.textContent;else for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem);else if(nodeType===3||nodeType===4)return elem.nodeValue;return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},
"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~=")match[3]=" "+match[3]+" ";return match.slice(0,4)},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3])Sizzle.error(match[0]);match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+
match[8]||match[3]==="odd")}else if(match[3])Sizzle.error(match[0]);return match},"PSEUDO":function(match){var excess,unquoted=!match[5]&&match[2];if(matchExpr["CHILD"].test(match[0]))return null;if(match[3]&&match[4]!==undefined)match[2]=match[4];else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{"TAG":function(nodeNameSelector){var nodeName=
nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},"CLASS":function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||
"")})},"ATTR":function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null)return operator==="!=";if(!operator)return true;result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+
1)===check+"-":false}},"CHILD":function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){while(dir){node=elem;while(node=node[dir])if(ofType?
node.nodeName.toLowerCase()===name:node.nodeType===1)return false;start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=cache[0]===dirruns&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())if(node.nodeType===1&&++diff&&node===
elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache)(node[expando]||(node[expando]={}))[type]=[dirruns,diff];if(node===elem)break}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},"PSEUDO":function(pseudo,argument){var args,
fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando])return fn(argument);if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{"not":markFunction(function(selector){var input=
[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--)if(elem=unmatched[i])seed[i]=!(matches[i]=elem)}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return!results.pop()}}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),"contains":markFunction(function(text){return function(elem){return(elem.textContent||
elem.innerText||getText(elem)).indexOf(text)>-1}}),"lang":markFunction(function(lang){if(!ridentifier.test(lang||""))Sizzle.error("unsupported lang: "+lang);lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),"target":function(elem){var hash=
window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},"root":function(elem){return elem===docElem},"focus":function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},"enabled":function(elem){return elem.disabled===false},"disabled":function(elem){return elem.disabled===true},"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&
!!elem.selected},"selected":function(elem){if(elem.parentNode)elem.parentNode.selectedIndex;return elem.selected===true},"empty":function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return false;return true},"parent":function(elem){return!Expr.pseudos["empty"](elem)},"header":function(elem){return rheader.test(elem.nodeName)},"input":function(elem){return rinputs.test(elem.nodeName)},"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&
elem.type==="button"||name==="button"},"text":function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text")},"first":createPositionalPseudo(function(){return[0]}),"last":createPositionalPseudo(function(matchIndexes,length){return[length-1]}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),"even":createPositionalPseudo(function(matchIndexes,
length){var i=0;for(;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),"odd":createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;)matchIndexes.push(i);return matchIndexes}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;)matchIndexes.push(i);
return matchIndexes})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:true,reset:true})Expr.pseudos[i]=createButtonPseudo(i);function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters;function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);
soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match)soFar=soFar.slice(match[0].length)||soFar;groups.push(tokens=[])}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter)if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,
type:type,matches:match});soFar=soFar.slice(matched.length)}if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir])if(elem.nodeType===
1||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml)while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements)if(matcher(elem,context,xml))return true}else while(elem=elem[dir])if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if((oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];else{outerCache[dir]=newCache;if(newCache[2]=
matcher(elem,context,xml))return true}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--)if(!matchers[i](elem,context,xml))return false;return true}:matchers[0]}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++)if(elem=unmatched[i])if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped)map.push(i)}return newUnmatched}function setMatcher(preFilter,
selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando])postFilter=setMatcher(postFilter);if(postFinder&&!postFinder[expando])postFinder=setMatcher(postFinder,postSelector);return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=
matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher)matcher(matcherIn,matcherOut,context,xml);if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--)if(elem=temp[i])matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--)if(elem=matcherOut[i])temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;
while(i--)if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1)seed[temp]=!(results[temp]=elem)}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder)postFinder(null,results,matcherOut,xml);else push.apply(results,matcherOut)}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],
i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];for(;i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),
matcher)];else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++)if(Expr.relative[tokens[j].type])break;return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,
setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||0.1,len=elems.length;if(outermost)outermostContext=context!==document&&context;for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;while(matcher=
elementMatchers[j++])if(matcher(elem,context,xml)){results.push(elem);break}if(outermost)dirruns=dirrunsUnique}if(bySet){if(elem=!matcher&&elem)matchedCount--;if(seed)unmatched.push(elem)}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++])matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)while(i--)if(!(unmatched[i]||setMatched[i]))setMatched[i]=pop.call(results);setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>
0&&matchedCount+setMatchers.length>1)Sizzle.uniqueSort(results)}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!group)group=tokenize(selector);i=group.length;while(i--){cached=matcherFromTokens(group[i]);if(cached[expando])setMatchers.push(cached);else elementMatchers.push(cached)}cached=
compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached};function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++)Sizzle(selector,contexts[i],results);return results}function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed)if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&support.getById&&context.nodeType===9&&documentIsHTML&&
Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context)return results;selector=selector.slice(tokens.shift().value.length)}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type])break;if(find=Expr.find[type])if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);
selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}compile(selector,match)(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context);return results}support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1});if(!assert(function(div){div.innerHTML=
"<a href='#'></a>";return div.firstChild.getAttribute("href")==="#"}))addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,name.toLowerCase()==="type"?1:2)});if(!support.attributes||!assert(function(div){div.innerHTML="<input/>";div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")===""}))addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input")return elem.defaultValue});if(!assert(function(div){return div.getAttribute("disabled")==
null}))addHandle(booleans,function(elem,name,isXML){var val;if(!isXML)return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null});return Sizzle}(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/;
var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if(typeof qualifier==="string"){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return jQuery.inArray(elem,
qualifier)>=0!==not})}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not)expr=":not("+expr+")";return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if(typeof selector!=="string")return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return true}));
for(i=0;i<len;i++)jQuery.find(selector,self[i],ret);ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],false))},not:function(selector){return this.pushStack(winnow(this,selector||[],true))},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,document=
window.document,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context){var match,elem;if(!selector)return this;if(typeof selector==="string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3)match=[null,selector,null];else match=rquickExpr.exec(selector);if(match&&(match[1]||!context))if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?
context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)if(jQuery.isFunction(this[match]))this[match](context[match]);else this.attr(match,context[match]);return this}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}else if(!context||context.jquery)return(context||rootjQuery).find(selector);
else return this.constructor(context).find(selector)}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}else if(jQuery.isFunction(selector))return typeof rootjQuery.ready!=="undefined"?rootjQuery.ready(selector):selector(jQuery);if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique=
{children:true,contents:true,next:true,prev:true};jQuery.extend({dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1)matched.push(cur);cur=cur[dir]}return matched},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling)if(n.nodeType===1&&n!==elem)r.push(n);return r}});jQuery.fn.extend({has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=
0;i<len;i++)if(jQuery.contains(this,targets[i]))return true})},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},
index:function(elem){if(!elem)return this[0]&&this[0].parentNode?this.first().prevAll().length:-1;if(typeof elem==="string")return jQuery.inArray(this[0],jQuery(elem));return jQuery.inArray(elem.jquery?elem[0]:elem,this)},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){do cur=cur[dir];while(cur&&
cur.nodeType!==1);return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,
"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=
function(until,selector){var ret=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until")selector=until;if(selector&&typeof selector==="string")ret=jQuery.filter(selector,ret);if(this.length>1){if(!guaranteedUnique[name])ret=jQuery.unique(ret);if(rparentsprev.test(name))ret=ret.reverse()}return this.pushStack(ret)}});var rnotwhite=/\S+/g;var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true});
return object}jQuery.Callbacks=function(options){options=typeof options==="string"?optionsCache[options]||createOptions(options):jQuery.extend({},options);var firing,memory,fired,firingLength,firingIndex,firingStart,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=
false;break}firing=false;if(list)if(stack){if(stack.length)fire(stack.shift())}else if(memory)list=[];else self.disable()},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"){if(!options.unique||!self.has(arg))list.push(arg)}else if(arg&&arg.length&&type!=="string")add(arg)})})(arguments);if(firing)firingLength=list.length;else if(memory){firingStart=start;fire(memory)}}return this},remove:function(){if(list)jQuery.each(arguments,
function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength)firingLength--;if(index<=firingIndex)firingIndex--}}});return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!!(list&&list.length)},empty:function(){list=[];firingLength=0;return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return!list},lock:function(){stack=undefined;if(!memory)self.disable();return this},locked:function(){return!stack},
fireWith:function(context,args){if(list&&(!fired||stack)){args=args||[];args=[context,args.slice?args.slice():args];if(firing)stack.push(args);else fire(args)}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],
state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise))returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);else newDefer[tuple[0]+
"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})});fns=null}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString)list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock);deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);
return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func)func.call(deferred,deferred);return deferred},when:function(subordinate){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?slice.call(arguments):value;
if(values===progressValues)deferred.notifyWith(contexts,values);else if(!--remaining)deferred.resolveWith(contexts,values)}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++)if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise))resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,
progressValues));else--remaining}if(!remaining)deferred.resolveWith(resolveContexts,resolveValues);return deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);return this};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold)jQuery.readyWait++;else jQuery.ready(true)},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady)return;if(!document.body)return setTimeout(jQuery.ready);jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>
0)return;readyList.resolveWith(document,[jQuery]);if(jQuery.fn.trigger)jQuery(document).trigger("ready").off("ready")}});function detach(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",completed,false);window.removeEventListener("load",completed,false)}else{document.detachEvent("onreadystatechange",completed);window.detachEvent("onload",completed)}}function completed(){if(document.addEventListener||event.type==="load"||document.readyState==="complete"){detach();jQuery.ready()}}
jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete")setTimeout(jQuery.ready);else if(document.addEventListener){document.addEventListener("DOMContentLoaded",completed,false);window.addEventListener("load",completed,false)}else{document.attachEvent("onreadystatechange",completed);window.attachEvent("onload",completed);var top=false;try{top=window.frameElement==null&&document.documentElement}catch(e){}if(top&&top.doScroll)(function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,
50)}detach();jQuery.ready()}})()}}return readyList.promise(obj)};var strundefined=typeof undefined;var i;for(i in jQuery(support))break;support.ownLast=i!=="0";support.inlineBlockNeedsLayout=false;jQuery(function(){var container,div,body=document.getElementsByTagName("body")[0];if(!body)return;container=document.createElement("div");container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";div=document.createElement("div");body.appendChild(container).appendChild(div);
if(typeof div.style.zoom!==strundefined){div.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1";if(support.inlineBlockNeedsLayout=div.offsetWidth===3)body.style.zoom=1}body.removeChild(container);container=div=null});(function(){var div=document.createElement("div");if(support.deleteExpando==null){support.deleteExpando=true;try{delete div.test}catch(e){support.deleteExpando=false}}div=null})();jQuery.acceptData=function(elem){var noData=jQuery.noData[(elem.nodeName+" ").toLowerCase()],
nodeType=+elem.nodeType||1;return nodeType!==1&&nodeType!==9?false:!noData||noData!==true&&elem.getAttribute("classid")===noData};var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):
data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){var name;for(name in obj){if(name==="data"&&jQuery.isEmptyObject(obj[name]))continue;if(name!=="toJSON")return false}return true}function internalData(elem,name,data,pvt){if(!jQuery.acceptData(elem))return;var ret,thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if((!id||!cache[id]||!pvt&&!cache[id].data)&&
data===undefined&&typeof name==="string")return;if(!id)if(isNode)id=elem[internalKey]=deletedIds.pop()||jQuery.guid++;else id=internalKey;if(!cache[id])cache[id]=isNode?{}:{toJSON:jQuery.noop};if(typeof name==="object"||typeof name==="function")if(pvt)cache[id]=jQuery.extend(cache[id],name);else cache[id].data=jQuery.extend(cache[id].data,name);thisCache=cache[id];if(!pvt){if(!thisCache.data)thisCache.data={};thisCache=thisCache.data}if(data!==undefined)thisCache[jQuery.camelCase(name)]=data;if(typeof name===
"string"){ret=thisCache[name];if(ret==null)ret=thisCache[jQuery.camelCase(name)]}else ret=thisCache;return ret}function internalRemoveData(elem,name,pvt){if(!jQuery.acceptData(elem))return;var thisCache,i,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(!cache[id])return;if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!jQuery.isArray(name))if(name in thisCache)name=[name];else{name=jQuery.camelCase(name);if(name in thisCache)name=
[name];else name=name.split(" ")}else name=name.concat(jQuery.map(name,jQuery.camelCase));i=name.length;while(i--)delete thisCache[name[i]];if(pvt?!isEmptyDataObject(thisCache):!jQuery.isEmptyObject(thisCache))return}}if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id]))return}if(isNode)jQuery.cleanData([elem],true);else if(support.deleteExpando||cache!=cache.window)delete cache[id];else cache[id]=null}jQuery.extend({cache:{},noData:{"applet ":true,"embed ":true,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},
hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,true)},_removeData:function(elem,name){return internalRemoveData(elem,name,true)}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=
elem&&elem.attributes;if(key===undefined){if(this.length){data=jQuery.data(elem);if(elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs")){i=attrs.length;while(i--){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}jQuery._data(elem,"parsedAttrs",true)}}return data}if(typeof key==="object")return this.each(function(){jQuery.data(this,key)});return arguments.length>1?this.each(function(){jQuery.data(this,key,value)}):elem?dataAttr(elem,
key,jQuery.data(elem,key)):undefined},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=jQuery._data(elem,type);if(data)if(!queue||jQuery.isArray(data))queue=jQuery._data(elem,type,jQuery.makeArray(data));else queue.push(data);return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=
jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx")queue.unshift("inprogress");delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks)hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue");jQuery._removeData(elem,key)})})}});
jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter)return jQuery.queue(this[0],type);return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress")jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},
promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!--count)defer.resolveWith(elements,[elements])};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=jQuery._data(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var cssExpand=["Top","Right","Bottom","Left"];var isHidden=function(elem,
el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)};var access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key)jQuery.access(elems,fn,i,key[i],true,emptyGet,raw)}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value))raw=true;if(bulk)if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),
value)}}if(fn)for(;i<length;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet};var rcheckableType=/^(?:checkbox|radio)$/i;(function(){var fragment=document.createDocumentFragment(),div=document.createElement("div"),input=document.createElement("input");div.setAttribute("className","t");div.innerHTML="  <link/><table></table><a href='/a'>a</a>";support.leadingWhitespace=div.firstChild.nodeType===3;support.tbody=
!div.getElementsByTagName("tbody").length;support.htmlSerialize=!!div.getElementsByTagName("link").length;support.html5Clone=document.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>";input.type="checkbox";input.checked=true;fragment.appendChild(input);support.appendChecked=input.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue;fragment.appendChild(div);div.innerHTML="<input type='radio' checked='checked' name='t'/>";
support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;support.noCloneEvent=true;if(div.attachEvent){div.attachEvent("onclick",function(){support.noCloneEvent=false});div.cloneNode(true).click()}if(support.deleteExpando==null){support.deleteExpando=true;try{delete div.test}catch(e){support.deleteExpando=false}}fragment=div=input=null})();(function(){var i,eventName,div=document.createElement("div");for(i in{submit:true,change:true,focusin:true}){eventName="on"+i;if(!(support[i+"Bubbles"]=
eventName in window)){div.setAttribute(eventName,"t");support[i+"Bubbles"]=div.attributes[eventName].expando===false}}div=null})();var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}jQuery.event={global:{},add:function(elem,
types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(!elemData)return;if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid)handler.guid=jQuery.guid++;if(!(events=elemData.events))events=elemData.events={};if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!==strundefined&&(!e||jQuery.event.triggered!==
e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined};eventHandle.elem=elem}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type)continue;special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,
selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false)if(elem.addEventListener)elem.addEventListener(type,eventHandle,false);else if(elem.attachEvent)elem.attachEvent("on"+type,eventHandle)}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid)handleObj.handler.guid=
handler.guid}if(selector)handlers.splice(handlers.delegateCount++,0,handleObj);else handlers.push(handleObj);jQuery.event.global[type]=true}elem=null},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(!elemData||!(events=elemData.events))return;types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=
tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,true);continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&
(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector)handlers.delegateCount--;if(special.remove)special.remove.call(elem,handleObj)}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false)jQuery.removeEvent(elem,type,elemData.handle);delete events[type]}}if(jQuery.isEmptyObject(events)){delete elemData.handle;jQuery._removeData(elem,
"events")}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8)return;if(rfocusMorph.test(type+jQuery.event.triggered))return;if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<
0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target)event.target=elem;data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false)return;
if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type))cur=cur.parentNode;for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document))eventPath.push(tmp.defaultView||tmp.parentWindow||window)}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle");
if(handle)handle.apply(cur,data);handle=ontype&&cur[ontype];if(handle&&handle.apply&&jQuery.acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false)event.preventDefault()}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented())if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&jQuery.acceptData(elem))if(ontype&&elem[type]&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp)elem[ontype]=null;jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=
undefined;if(tmp)elem[ontype]=tmp}return event.result},dispatch:function(event){event=jQuery.event.fix(event);var i,ret,handleObj,matched,j,handlerQueue=[],args=slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false)return;handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&
!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped())if(!event.namespace_re||event.namespace_re.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined)if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}if(special.postDispatch)special.postDispatch.call(this,
event);return event.result},handlers:function(event,handlers){var sel,handleObj,matches,i,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||event.type!=="click"))for(;cur!=this;cur=cur.parentNode||this)if(cur.nodeType===1&&(cur.disabled!==true||event.type!=="click")){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined)matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=
0:jQuery.find(sel,this,null,[cur]).length;if(matches[sel])matches.push(handleObj)}if(matches.length)handlerQueue.push({elem:cur,handlers:matches})}if(delegateCount<handlers.length)handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)});return handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook)this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?
this.keyHooks:{};copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop]}if(!event.target)event.target=originalEvent.srcElement||document;if(event.target.nodeType===3)event.target=event.target.parentNode;event.metaKey=!!event.metaKey;return fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null)event.which=original.charCode!=null?original.charCode:original.keyCode;return event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||
document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.relatedTarget&&fromElement)event.relatedTarget=fromElement===event.target?original.toElement:fromElement;if(!event.which&&button!==undefined)event.which=button&1?1:button&2?3:button&4?2:0;
return event}},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{this.focus();return false}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(jQuery.nodeName(this,"input")&&this.type==="checkbox"&&this.click){this.click();return false}},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){if(event.result!==
undefined)event.originalEvent.returnValue=event.result}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true,originalEvent:{}});if(bubble)jQuery.event.trigger(e,null,elem);else jQuery.event.dispatch.call(elem,e);if(e.isDefaultPrevented())event.preventDefault()}};jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener)elem.removeEventListener(type,handle,false)}:function(elem,type,handle){var name=
"on"+type;if(elem.detachEvent){if(typeof elem[name]===strundefined)elem[name]=null;elem.detachEvent(name,handle)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&(src.returnValue===false||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse}else this.type=src;if(props)jQuery.extend(this,
props);this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(!e)return;if(e.preventDefault)e.preventDefault();else e.returnValue=false},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(!e)return;if(e.stopPropagation)e.stopPropagation();
e.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=
fix}return ret}}});if(!support.submitBubbles)jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return false;jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;if(form&&!jQuery._data(form,"submitBubbles")){jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=true});jQuery._data(form,"submitBubbles",true)}})},postDispatch:function(event){if(event._submit_bubble){delete event._submit_bubble;
if(this.parentNode&&!event.isTrigger)jQuery.event.simulate("submit",this.parentNode,event,true)}},teardown:function(){if(jQuery.nodeName(this,"form"))return false;jQuery.event.remove(this,"._submit")}};if(!support.changeBubbles)jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){jQuery.event.add(this,"propertychange._change",function(event){if(event.originalEvent.propertyName==="checked")this._just_changed=true});jQuery.event.add(this,
"click._change",function(event){if(this._just_changed&&!event.isTrigger)this._just_changed=false;jQuery.event.simulate("change",this,event,true)})}return false}jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!jQuery._data(elem,"changeBubbles")){jQuery.event.add(elem,"change._change",function(event){if(this.parentNode&&!event.isSimulated&&!event.isTrigger)jQuery.event.simulate("change",this.parentNode,event,true)});jQuery._data(elem,"changeBubbles",
true)}})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||elem.type!=="radio"&&elem.type!=="checkbox")return event.handleObj.handler.apply(this,arguments)},teardown:function(){jQuery.event.remove(this,"._change");return!rformElems.test(this.nodeName)}};if(!support.focusinBubbles)jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)};jQuery.event.special[fix]=
{setup:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix);if(!attaches)doc.addEventListener(orig,handler,true);jQuery._data(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);jQuery._removeData(doc,fix)}else jQuery._data(doc,fix,attaches)}}});jQuery.fn.extend({on:function(types,selector,data,fn,one){var type,origFn;if(typeof types==="object"){if(typeof selector!==
"string"){data=data||selector;selector=undefined}for(type in types)this.on(type,selector,data,types[type],one);return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null)if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}if(fn===false)fn=returnFalse;else if(!fn)return this;if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,
types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types)this.off(type,selector,types[type]);return this}if(selector===
false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false)fn=returnFalse;return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,true)}});function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)while(list.length)safeFrag.createElement(list.pop());
return safeFrag}var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=
/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],
_default:support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!==strundefined?context.querySelectorAll(tag||
"*"):undefined;if(!found)for(found=[],elems=context.childNodes||context;(elem=elems[i])!=null;i++)if(!tag||jQuery.nodeName(elem,tag))found.push(elem);else jQuery.merge(found,getAll(elem,tag));return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function fixDefaultChecked(elem){if(rcheckableType.test(elem.type))elem.defaultChecked=elem.checked}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==
11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){elem.type=(jQuery.find.attr(elem,"type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match)elem.type=match[1];else elem.removeAttribute("type");return elem}function setGlobalEval(elems,refElements){var elem,i=0;for(;(elem=elems[i])!=null;i++)jQuery._data(elem,"globalEval",
!refElements||jQuery._data(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src))return;var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i])}if(curData.data)curData.data=jQuery.extend({},curData.data)}function fixCloneNodeIssues(src,dest){var nodeName,e,
data;if(dest.nodeType!==1)return;nodeName=dest.nodeName.toLowerCase();if(!support.noCloneEvent&&dest[jQuery.expando]){data=jQuery._data(dest);for(e in data.events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}if(nodeName==="script"&&dest.text!==src.text){disableScript(dest).text=src.text;restoreScript(dest)}else if(nodeName==="object"){if(dest.parentNode)dest.outerHTML=src.outerHTML;if(support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML))dest.innerHTML=src.innerHTML}else if(nodeName===
"input"&&rcheckableType.test(src.type)){dest.defaultChecked=dest.checked=src.checked;if(dest.value!==src.value)dest.value=src.value}else if(nodeName==="option")dest.defaultSelected=dest.selected=src.defaultSelected;else if(nodeName==="input"||nodeName==="textarea")dest.defaultValue=src.defaultValue}jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(support.html5Clone||jQuery.isXMLDoc(elem)||
!rnoshimcache.test("<"+elem.nodeName+">"))clone=elem.cloneNode(true);else{fragmentDiv.innerHTML=elem.outerHTML;fragmentDiv.removeChild(clone=fragmentDiv.firstChild)}if((!support.noCloneEvent||!support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0;(node=srcElements[i])!=null;++i)if(destElements[i])fixCloneNodeIssues(node,destElements[i])}if(dataAndEvents)if(deepDataAndEvents){srcElements=srcElements||getAll(elem);
destElements=destElements||getAll(clone);for(i=0;(node=srcElements[i])!=null;i++)cloneCopyEvent(node,destElements[i])}else cloneCopyEvent(elem,clone);destElements=getAll(clone,"script");if(destElements.length>0)setGlobalEval(destElements,!inPage&&getAll(elem,"script"));destElements=srcElements=node=null;return clone},buildFragment:function(elems,context,scripts,selection){var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;for(;i<l;i++){elem=elems[i];
if(elem||elem===0)if(jQuery.type(elem)==="object")jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(!rhtml.test(elem))nodes.push(context.createTextNode(elem));else{tmp=tmp||safe.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2];j=wrap[0];while(j--)tmp=tmp.lastChild;if(!support.leadingWhitespace&&rleadingWhitespace.test(elem))nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0]));
if(!support.tbody){elem=tag==="table"&&!rtbody.test(elem)?tmp.firstChild:wrap[1]==="<table>"&&!rtbody.test(elem)?tmp:0;j=elem&&elem.childNodes.length;while(j--)if(jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length)elem.removeChild(tbody)}jQuery.merge(nodes,tmp.childNodes);tmp.textContent="";while(tmp.firstChild)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}}if(tmp)safe.removeChild(tmp);if(!support.appendChecked)jQuery.grep(getAll(nodes,"input"),fixDefaultChecked);i=0;
while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)!==-1)continue;contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(safe.appendChild(elem),"script");if(contains)setGlobalEval(tmp);if(scripts){j=0;while(elem=tmp[j++])if(rscriptType.test(elem.type||""))scripts.push(elem)}}tmp=null;return safe},cleanData:function(elems,acceptData){var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=support.deleteExpando,special=jQuery.event.special;for(;(elem=
elems[i])!=null;i++)if(acceptData||jQuery.acceptData(elem)){id=elem[internalKey];data=id&&cache[id];if(data){if(data.events)for(type in data.events)if(special[type])jQuery.event.remove(elem,type);else jQuery.removeEvent(elem,type,data.handle);if(cache[id]){delete cache[id];if(deleteExpando)delete elem[internalKey];else if(typeof elem.removeAttribute!==strundefined)elem.removeAttribute(internalKey);else elem[internalKey]=null;deletedIds.push(id)}}}}});jQuery.fn.extend({text:function(value){return access(this,
function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=
manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){if(this.parentNode)this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,function(elem){if(this.parentNode)this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){var elem,elems=selector?jQuery.filter(selector,this):this,i=0;for(;(elem=elems[i])!=null;i++){if(!keepData&&elem.nodeType===1)jQuery.cleanData(getAll(elem));
if(elem.parentNode){if(keepData&&jQuery.contains(elem.ownerDocument,elem))setGlobalEval(getAll(elem,"script"));elem.parentNode.removeChild(elem)}}return this},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1)jQuery.cleanData(getAll(elem,false));while(elem.firstChild)elem.removeChild(elem.firstChild);if(elem.options&&jQuery.nodeName(elem,"select"))elem.options.length=0}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:
dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined)return elem.nodeType===1?elem.innerHTML.replace(rinlinejQuery,""):undefined;if(typeof value==="string"&&!rnoInnerhtml.test(value)&&(support.htmlSerialize||!rnoshimcache.test(value))&&(support.leadingWhitespace||
!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem)this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];this.domManip(arguments,function(elem){arg=this.parentNode;jQuery.cleanData(getAll(this));if(arg)arg.replaceChild(elem,this)});
return arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,true)},domManip:function(args,callback){args=concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);if(isFunction)args[0]=value.call(this,index,
self.html());self.domManip(args,callback)});if(l){fragment=jQuery.buildFragment(args,this[0].ownerDocument,false,this);first=fragment.firstChild;if(fragment.childNodes.length===1)fragment=first;if(first){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts)jQuery.merge(scripts,getAll(node,"script"))}callback.call(this[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;
jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node))if(node.src){if(jQuery._evalUrl)jQuery._evalUrl(node.src)}else jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,""))}}fragment=first=null}}return this}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=
function(selector){var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}return this.pushStack(ret)}});var iframe,elemdisplay={};function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle?window.getDefaultComputedStyle(elem[0]).display:jQuery.css(elem[0],"display");elem.detach();return display}function defaultDisplay(nodeName){var doc=
document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);doc=(iframe[0].contentWindow||iframe[0].contentDocument).document;doc.write();doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}(function(){var a,shrinkWrapBlocksVal,div=document.createElement("div"),divReset="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;"+
"display:block;padding:0;margin:0;border:0";div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";a=div.getElementsByTagName("a")[0];a.style.cssText="float:left;opacity:.5";support.opacity=/^0.5/.test(a.style.opacity);support.cssFloat=!!a.style.cssFloat;div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";a=div=null;support.shrinkWrapBlocks=function(){var body,container,div,
containerStyles;if(shrinkWrapBlocksVal==null){body=document.getElementsByTagName("body")[0];if(!body)return;containerStyles="border:0;width:0;height:0;position:absolute;top:0;left:-9999px";container=document.createElement("div");div=document.createElement("div");body.appendChild(container).appendChild(div);shrinkWrapBlocksVal=false;if(typeof div.style.zoom!==strundefined){div.style.cssText=divReset+";width:1px;padding:1px;zoom:1";div.innerHTML="<div></div>";div.firstChild.style.width="5px";shrinkWrapBlocksVal=
div.offsetWidth!==3}body.removeChild(container);body=container=div=null}return shrinkWrapBlocksVal}})();var rmargin=/^margin/;var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles,curCSS,rposition=/^(top|right|bottom|left)$/;if(window.getComputedStyle){getStyles=function(elem){return elem.ownerDocument.defaultView.getComputedStyle(elem,null)};curCSS=function(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);ret=computed?computed.getPropertyValue(name)||
computed[name]:undefined;if(computed){if(ret===""&&!jQuery.contains(elem.ownerDocument,elem))ret=jQuery.style(elem,name);if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret===undefined?ret:ret+""}}else if(document.documentElement.currentStyle){getStyles=function(elem){return elem.currentStyle};curCSS=
function(elem,name,computed){var left,rs,rsLeft,ret,style=elem.style;computed=computed||getStyles(elem);ret=computed?computed[name]:undefined;if(ret==null&&style&&style[name])ret=style[name];if(rnumnonpx.test(ret)&&!rposition.test(name)){left=style.left;rs=elem.runtimeStyle;rsLeft=rs&&rs.left;if(rsLeft)rs.left=elem.currentStyle.left;style.left=name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft)rs.left=rsLeft}return ret===undefined?ret:ret+""||"auto"}}function addGetHookIf(conditionFn,
hookFn){return{get:function(){var condition=conditionFn();if(condition==null)return;if(condition){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}(function(){var a,reliableHiddenOffsetsVal,boxSizingVal,boxSizingReliableVal,pixelPositionVal,reliableMarginRightVal,div=document.createElement("div"),containerStyles="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",divReset="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;"+"display:block;padding:0;margin:0;border:0";
div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";a=div.getElementsByTagName("a")[0];a.style.cssText="float:left;opacity:.5";support.opacity=/^0.5/.test(a.style.opacity);support.cssFloat=!!a.style.cssFloat;div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";a=div=null;jQuery.extend(support,{reliableHiddenOffsets:function(){if(reliableHiddenOffsetsVal!=null)return reliableHiddenOffsetsVal;
var container,tds,isSupported,div=document.createElement("div"),body=document.getElementsByTagName("body")[0];if(!body)return;div.setAttribute("className","t");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";container=document.createElement("div");container.style.cssText=containerStyles;body.appendChild(container).appendChild(div);div.innerHTML="<table><tr><td></td><td>t</td></tr></table>";tds=div.getElementsByTagName("td");tds[0].style.cssText="padding:0;margin:0;border:0;display:none";
isSupported=tds[0].offsetHeight===0;tds[0].style.display="";tds[1].style.display="none";reliableHiddenOffsetsVal=isSupported&&tds[0].offsetHeight===0;body.removeChild(container);div=body=null;return reliableHiddenOffsetsVal},boxSizing:function(){if(boxSizingVal==null)computeStyleTests();return boxSizingVal},boxSizingReliable:function(){if(boxSizingReliableVal==null)computeStyleTests();return boxSizingReliableVal},pixelPosition:function(){if(pixelPositionVal==null)computeStyleTests();return pixelPositionVal},
reliableMarginRight:function(){var body,container,div,marginDiv;if(reliableMarginRightVal==null&&window.getComputedStyle){body=document.getElementsByTagName("body")[0];if(!body)return;container=document.createElement("div");div=document.createElement("div");container.style.cssText=containerStyles;body.appendChild(container).appendChild(div);marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width=
"0";div.style.width="1px";reliableMarginRightVal=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight);body.removeChild(container)}return reliableMarginRightVal}});function computeStyleTests(){var container,div,body=document.getElementsByTagName("body")[0];if(!body)return;container=document.createElement("div");div=document.createElement("div");container.style.cssText=containerStyles;body.appendChild(container).appendChild(div);div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;"+
"position:absolute;display:block;padding:1px;border:1px;width:4px;"+"margin-top:1%;top:1%";jQuery.swap(body,body.style.zoom!=null?{zoom:1}:{},function(){boxSizingVal=div.offsetWidth===4});boxSizingReliableVal=true;pixelPositionVal=false;reliableMarginRightVal=true;if(window.getComputedStyle){pixelPositionVal=(window.getComputedStyle(div,null)||{}).top!=="1%";boxSizingReliableVal=(window.getComputedStyle(div,null)||{width:"4px"}).width==="4px"}body.removeChild(container);div=body=null}})();jQuery.swap=
function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret};var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform=
{letterSpacing:0,fontWeight:400},cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style)return name;var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style)return name}return origName}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style)continue;values[index]=jQuery._data(elem,
"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none")elem.style.display="";if(elem.style.display===""&&isHidden(elem))values[index]=jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName))}else if(!values[index]){hidden=isHidden(elem);if(display&&display!=="none"||!hidden)jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style)continue;if(!show||elem.style.display==="none"||
elem.style.display==="")elem.style.display=show?values[index]||"":"none"}return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin")val+=jQuery.css(elem,extra+cssExpand[i],true,styles);if(isBorderBox){if(extra===
"content")val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="margin")val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding")val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=support.boxSizing()&&jQuery.css(elem,
"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null)val=elem.style[name];if(rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===
""?"1":ret}}}},cssNumber:{"columnCount":true,"fillOpacity":true,"fontWeight":true,"lineHeight":true,"opacity":true,"order":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style)return;var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));
hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number"}if(value==null||value!==value)return;if(type==="number"&&!jQuery.cssNumber[origName])value+="px";if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0)style[name]="inherit";if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined)try{style[name]="";
style[name]=value}catch(e){}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined)return ret;return style[name]}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks)val=hooks.get(elem,true,extra);if(val===undefined)val=curCSS(elem,name,styles);if(val==="normal"&&name in
cssNormalTransform)val=cssNormalTransform[name];if(extra===""||extra){num=parseFloat(val);return extra===true||jQuery.isNumeric(num)?num||0:val}return val}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return elem.offsetWidth===0&&rdisplayswap.test(jQuery.css(elem,"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){var styles=
extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,support.boxSizing()&&jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles):0)}}});if(!support.opacity)jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?
"alpha(opacity="+value*100+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if((value>=1||value==="")&&jQuery.trim(filter.replace(ralpha,""))===""&&style.removeAttribute){style.removeAttribute("filter");if(value===""||currentStyle&&!currentStyle.filter)return}style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity}};jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed)return jQuery.swap(elem,
{"display":"inline-block"},curCSS,[elem,"marginRight"])});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}};if(!rmargin.test(prefix))jQuery.cssHooks[prefix+suffix].set=setPositiveNumber});jQuery.fn.extend({css:function(name,value){return access(this,
function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],false,styles);return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state){if(typeof state==="boolean")return state?this.show():this.hide();return this.each(function(){if(isHidden(this))jQuery(this).show();
else jQuery(this).hide()})}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):
Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration)this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);else this.pos=eased=percent;this.now=(this.end-this.start)*eased+this.start;if(this.options.step)this.options.step.call(this.elem,this.now,this);if(hooks&&hooks.set)hooks.set(this);else Tween.propHooks._default.set(this);return this}};Tween.prototype.init.prototype=Tween.prototype;
Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null))return tween.elem[tween.prop];result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop])jQuery.fx.step[tween.prop](tween);else if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop]))jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);
else tween.elem[tween.prop]=tween.now}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode)tween.elem[tween.prop]=tween.now}};jQuery.easing={linear:function(p){return p},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2}};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],
tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||unit!=="px"&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3];parts=parts||[];start=+target||1;do{scale=scale||".5";start=start/scale;jQuery.style(tween.elem,prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&scale!==
1&&--maxIterations)}if(parts){start=tween.start=+start||+target||0;tween.unit=unit;tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]}return tween}]};function createFxNow(){setTimeout(function(){fxNow=undefined});return fxNow=jQuery.now()}function genFx(type,includeWidth){var which,attrs={height:type},i=0;includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth)attrs.opacity=attrs.width=type;return attrs}function createTween(value,
prop,animation){var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++)if(tween=collection[index].call(animation,prop,value))return tween}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,dDisplay,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=jQuery._data(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=
0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued)oldfire()}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length)hooks.empty.fire()})})}if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];display=jQuery.css(elem,"display");dDisplay=defaultDisplay(elem.nodeName);if(display==="none")display=dDisplay;if(display==="inline"&&jQuery.css(elem,"float")===
"none")if(!support.inlineBlockNeedsLayout||dDisplay==="inline")style.display="inline-block";else style.zoom=1}if(opts.overflow){style.overflow="hidden";if(!support.shrinkWrapBlocks())anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}for(prop in props){value=props[prop];if(rfxtypes.exec(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show"))if(value==="show"&&dataShow&&dataShow[prop]!==undefined)hidden=
true;else continue;orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}}if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden"in dataShow)hidden=dataShow.hidden}else dataShow=jQuery._data(elem,"fxshow",{});if(toggle)dataShow.hidden=!hidden;if(hidden)jQuery(elem).show();else anim.done(function(){jQuery(elem).hide()});anim.done(function(){var prop;jQuery._removeData(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(prop in orig){tween=createTween(hidden?dataShow[prop]:
0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=
hooks.expand(value);delete props[name];for(index in value)if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}else specialEasing[name]=easing}}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return false;var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/
animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++)animation.tweens[index].run(percent);deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length)return remaining;else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),
duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;stopped=true;for(;index<length;index++)animation.tweens[index].run(1);if(gotoEnd)deferred.resolveWith(elem,[animation,gotoEnd]);else deferred.rejectWith(elem,[animation,gotoEnd]);return this}}),
props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result)return result}jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start))animation.opts.start.call(elem,animation);jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}
jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else props=props.split(" ");var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback)}},prefilter:function(callback,prepend){if(prepend)animationPrefilters.unshift(callback);else animationPrefilters.push(callback)}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed===
"object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true)opt.queue="fx";opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old))opt.old.call(this);if(opt.queue)jQuery.dequeue(this,
opt.queue)};return opt};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||jQuery._data(this,"finish"))anim.stop(true)};doAnimation.finish=doAnimation;return empty||optall.queue===
false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false)this.queue(type||"fx",[]);return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index){if(data[index]&&data[index].stop)stopQueue(data[index])}else for(index in data)if(data[index]&&
data[index].stop&&rrun.test(index))stopQueue(data[index]);for(index=timers.length;index--;)if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}if(dequeue||!gotoEnd)jQuery.dequeue(this,type)})},finish:function(type){if(type!==false)type=type||"fx";return this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:
0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop)hooks.stop.call(this,true);for(index=timers.length;index--;)if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1)}for(index=0;index<length;index++)if(queue[index]&&queue[index].finish)queue[index].finish.call(this);delete data.finish})}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==
null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.timers=[];jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;fxNow=jQuery.now();for(;i<
timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer)timers.splice(i--,1)}if(!timers.length)jQuery.fx.stop();fxNow=undefined};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer())jQuery.fx.start();else jQuery.timers.pop()};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId)timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval)};jQuery.fx.stop=function(){clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,
type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})};(function(){var a,input,select,opt,div=document.createElement("div");div.setAttribute("className","t");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";a=div.getElementsByTagName("a")[0];select=document.createElement("select");opt=select.appendChild(document.createElement("option"));
input=div.getElementsByTagName("input")[0];a.style.cssText="top:1px";support.getSetAttribute=div.className!=="t";support.style=/top/.test(a.getAttribute("style"));support.hrefNormalized=a.getAttribute("href")==="/a";support.checkOn=!!input.value;support.optSelected=opt.selected;support.enctype=!!document.createElement("form").enctype;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.setAttribute("value","");support.input=input.getAttribute("value")===
"";input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t";a=input=select=opt=div=null})();var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined)return ret;ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=
jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1)return;if(isFunction)val=value.call(this,i,jQuery(this).val());else val=value;if(val==null)val="";else if(typeof val==="number")val+="";else if(jQuery.isArray(val))val=jQuery.map(val,function(value){return value==null?"":value+""});hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined)this.value=val})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=
jQuery.find.attr(elem,"value");return val!=null?val:jQuery.text(elem)}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=
jQuery(option).val();if(one)return value;values.push(value)}}return values},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(jQuery.inArray(jQuery.valHooks.option.get(option),values)>=0)try{option.selected=optionSet=true}catch(_){option.scrollHeight}else option.selected=false}if(!optionSet)elem.selectedIndex=-1;return options}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,
value){if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}};if(!support.checkOn)jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}});var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=support.getSetAttribute,getSetInput=support.input;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,
name)})}});jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2)return;if(typeof elem.getAttribute===strundefined)return jQuery.prop(elem,name,value);if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)}if(value!==undefined)if(value===null)jQuery.removeAttr(elem,name);else if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined)return ret;
else{elem.setAttribute(name,value+"");return value}else if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null)return ret;else{ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&elem.nodeType===1)while(name=attrNames[i++]){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name))if(getSetInput&&getSetAttribute||!ruseDefault.test(name))elem[propName]=false;else elem[jQuery.camelCase("default-"+
name)]=elem[propName]=false;else jQuery.attr(elem,name,"");elem.removeAttribute(getSetAttribute?name:propName)}},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val)elem.value=val;return value}}}}});boolHook={set:function(elem,value,name){if(value===false)jQuery.removeAttr(elem,name);else if(getSetInput&&getSetAttribute||!ruseDefault.test(name))elem.setAttribute(!getSetAttribute&&
jQuery.propFix[name]||name,name);else elem[jQuery.camelCase("default-"+name)]=elem[name]=true;return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=getSetInput&&getSetAttribute||!ruseDefault.test(name)?function(elem,name,isXML){var ret,handle;if(!isXML){handle=attrHandle[name];attrHandle[name]=ret;ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;attrHandle[name]=handle}return ret}:function(elem,
name,isXML){if(!isXML)return elem[jQuery.camelCase("default-"+name)]?name.toLowerCase():null}});if(!getSetInput||!getSetAttribute)jQuery.attrHooks.value={set:function(elem,value,name){if(jQuery.nodeName(elem,"input"))elem.defaultValue=value;else return nodeHook&&nodeHook.set(elem,value,name)}};if(!getSetAttribute){nodeHook={set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret)elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name));ret.value=value+="";if(name==="value"||
value===elem.getAttribute(name))return value}};attrHandle.id=attrHandle.name=attrHandle.coords=function(elem,name,isXML){var ret;if(!isXML)return(ret=elem.getAttributeNode(name))&&ret.value!==""?ret.value:null};jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);if(ret&&ret.specified)return ret.value},set:nodeHook.set};jQuery.attrHooks.contenteditable={set:function(elem,value,name){nodeHook.set(elem,value===""?false:value,name)}};jQuery.each(["width","height"],function(i,
name){jQuery.attrHooks[name]={set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value}}}})}if(!support.style)jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||undefined},set:function(elem,value){return elem.style.cssText=value+""}};var rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){name=
jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name]}catch(e){}})}});jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2)return;notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined)return hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?
ret:elem[name]=value;else return hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}}});if(!support.hrefNormalized)jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}});if(!support.optSelected)jQuery.propHooks.selected=
{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode)parent.parentNode.selectedIndex}return null}};jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});if(!support.enctype)jQuery.propFix.enctype="encoding";var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,i=0,
len=this.length,proceed=typeof value==="string"&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ");if(cur){j=0;while(clazz=classes[j++])if(cur.indexOf(" "+clazz+" ")<0)cur+=clazz+" ";finalValue=jQuery.trim(cur);if(elem.className!==finalValue)elem.className=finalValue}}}return this},
removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,i=0,len=this.length,proceed=arguments.length===0||typeof value==="string"&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"");if(cur){j=0;while(clazz=classes[j++])while(cur.indexOf(" "+clazz+
" ")>=0)cur=cur.replace(" "+clazz+" "," ");finalValue=value?jQuery.trim(cur):"";if(elem.className!==finalValue)elem.className=finalValue}}}return this},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string")return stateVal?this.addClass(value):this.removeClass(value);if(jQuery.isFunction(value))return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)});return this.each(function(){if(type==="string"){var className,
i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];while(className=classNames[i++])if(self.hasClass(className))self.removeClass(className);else self.addClass(className)}else if(type===strundefined||type==="boolean"){if(this.className)jQuery._data(this,"__className__",this.className);this.className=this.className||value===false?"":jQuery._data(this,"__className__")||""}})},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++)if(this[i].nodeType===1&&(" "+
this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return true;return false}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||
fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now();var rquery=/\?/;var rvalidtokens=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
jQuery.parseJSON=function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data+"");var requireNonComma,depth=null,str=jQuery.trim(data+"");return str&&!jQuery.trim(str.replace(rvalidtokens,function(token,comma,open,close){if(requireNonComma&&comma)depth=0;if(depth===0)return token;requireNonComma=open||comma;depth+=!close-!open;return""}))?Function("return "+str)():jQuery.error("Invalid JSON: "+data)};jQuery.parseXML=function(data){var xml,tmp;if(!data||typeof data!=="string")return null;
try{if(window.DOMParser){tmp=new DOMParser;xml=tmp.parseFromString(data,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data)}}catch(e){xml=undefined}if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length)jQuery.error("Invalid XML: "+data);return xml};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=
/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression=
"*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))while(dataType=dataTypes[i++])if(dataType.charAt(0)==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;
inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else if(seekingTransport)return!(selected=dataTypeOrTransport)});return selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,
src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)if(src[key]!==undefined)(flatOptions[key]?target:deep||(deep={}))[key]=src[key];if(deep)jQuery.extend(true,target,deep);return target}function ajaxHandleResponses(s,jqXHR,responses){var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined)ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}if(ct)for(type in contents)if(contents[type]&&
contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType)firstDataType=type}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0])dataTypes.unshift(finalDataType);return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters=
{},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];current=dataTypes.shift();while(current){if(s.responseFields[current])jqXHR[s.responseFields[current]]=response;if(!prev&&isSuccess&&s.dataFilter)response=s.dataFilter(response,s.dataType);prev=current;current=dataTypes.shift();if(current)if(current==="*")current=prev;else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv)for(conv2 in converters){tmp=
conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true)conv=converters[conv2];else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1])}break}}}if(conv!==true)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}return{state:"success",data:response}}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,
type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},
flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},
options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString))responseHeaders[match[1].toLowerCase()]=
match[2]}match=responseHeaders[key.toLowerCase()]}return match==null?null:match},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){if(!state)s.mimeType=type;return this},statusCode:function(map){var code;if(map)if(state<2)for(code in map)statusCode[code]=[statusCode[code],
map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;if(transport)transport.abort(finalText);done(0,finalText);return this}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||
[""];if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?"80":"443"))!==(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443"))))}if(s.data&&s.processData&&typeof s.data!=="string")s.data=jQuery.param(s.data,s.traditional);inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2)return jqXHR;fireGlobals=s.global;if(fireGlobals&&jQuery.active++===0)jQuery.event.trigger("ajaxStart");
s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data;delete s.data}if(s.cache===false)s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++}if(s.ifModified){if(jQuery.lastModified[cacheURL])jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);if(jQuery.etag[cacheURL])jqXHR.setRequestHeader("If-None-Match",
jQuery.etag[cacheURL])}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType)jqXHR.setRequestHeader("Content-Type",s.contentType);jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2))return jqXHR.abort();strAbort="abort";for(i in{success:1,
error:1,complete:1})jqXHR[i](s[i]);transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport)done(-1,"No Transport");else{jqXHR.readyState=1;if(fireGlobals)globalEventContext.trigger("ajaxSend",[jqXHR,s]);if(s.async&&s.timeout>0)timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout);try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2)done(-1,e);else throw e;}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,
response,modified,statusText=nativeStatusText;if(state===2)return;state=2;if(timeoutTimer)clearTimeout(timeoutTimer);transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses)response=ajaxHandleResponses(s,jqXHR,responses);response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified)jQuery.lastModified[cacheURL]=modified;modified=jqXHR.getResponseHeader("etag");
if(modified)jQuery.etag[cacheURL]=modified}if(status===204||s.type==="HEAD")statusText="nocontent";else if(status===304)statusText="notmodified";else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0)status=0}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess)deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);else deferred.rejectWith(callbackContext,
[jqXHR,statusText,error]);jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals)globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]);completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active)jQuery.event.trigger("ajaxStop")}}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,
undefined,callback,"script")}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}});jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,
type:"GET",dataType:"script",async:false,global:false,"throws":true})};jQuery.fn.extend({wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode)wrap.insertBefore(this[0]);wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapInner(html.call(this,
i))});return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length)contents.wrapAll(html);else self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body"))jQuery(this).replaceWith(this.childNodes)}).end()}});jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=
0&&elem.offsetHeight<=0||!support.reliableHiddenOffsets()&&(elem.style&&elem.style.display||jQuery.css(elem,"display"))==="none"};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix))add(prefix,
v);else buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add)});else if(!traditional&&jQuery.type(obj)==="object")for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add);else add(prefix,obj)}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value==null?"":value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined)traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;
if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&
rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.ajaxSettings.xhr=window.ActiveXObject!==undefined?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&createStandardXHR()||
createActiveXHR()}:createStandardXHR;var xhrId=0,xhrCallbacks={},xhrSupported=jQuery.ajaxSettings.xhr();if(window.ActiveXObject)jQuery(window).on("unload",function(){for(var key in xhrCallbacks)xhrCallbacks[key](undefined,true)});support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;xhrSupported=support.ajax=!!xhrSupported;if(xhrSupported)jQuery.ajaxTransport(function(options){if(!options.crossDomain||support.cors){var callback;return{send:function(headers,complete){var i,xhr=options.xhr(),
id=++xhrId;xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];if(options.mimeType&&xhr.overrideMimeType)xhr.overrideMimeType(options.mimeType);if(!options.crossDomain&&!headers["X-Requested-With"])headers["X-Requested-With"]="XMLHttpRequest";for(i in headers)if(headers[i]!==undefined)xhr.setRequestHeader(i,headers[i]+"");xhr.send(options.hasContent&&options.data||null);callback=function(_,isAbort){var status,
statusText,responses;if(callback&&(isAbort||xhr.readyState===4)){delete xhrCallbacks[id];callback=undefined;xhr.onreadystatechange=jQuery.noop;if(isAbort){if(xhr.readyState!==4)xhr.abort()}else{responses={};status=xhr.status;if(typeof xhr.responseText==="string")responses.text=xhr.responseText;try{statusText=xhr.statusText}catch(e){statusText=""}if(!status&&options.isLocal&&!options.crossDomain)status=responses.text?200:404;else if(status===1223)status=204}}if(responses)complete(status,statusText,
responses,xhr.getAllResponseHeaders())};if(!options.async)callback();else if(xhr.readyState===4)setTimeout(callback);else xhr.onreadystatechange=xhrCallbacks[id]=callback},abort:function(){if(callback)callback(undefined,true)}}}});function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined)s.cache=false;if(s.crossDomain){s.type="GET";s.global=false}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script");script.async=true;if(s.scriptCharset)script.charset=
s.scriptCharset;script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(script.parentNode)script.parentNode.removeChild(script);script=null;if(!isAbort)callback(200,"success")}};head.insertBefore(script,head.firstChild)},abort:function(){if(script)script.onload(undefined,true)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",
jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?
s.jsonpCallback():s.jsonpCallback;if(jsonProp)s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName);else if(s.jsonp!==false)s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName;s.converters["script json"]=function(){if(!responseContainer)jQuery.error(callbackName+" was not called");return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=
originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten))overwritten(responseContainer[0]);responseContainer=overwritten=undefined});return"script"}});jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string")return null;if(typeof context==="boolean"){keepScripts=context;context=false}context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed)return[context.createElement(parsed[1])];
parsed=jQuery.buildFragment([data],context,scripts);if(scripts&&scripts.length)jQuery(scripts).remove();return jQuery.merge([],parsed.childNodes)};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load)return _load.apply(this,arguments);var selector,response,type,self=this,off=url.indexOf(" ");if(off>=0){selector=url.slice(off,url.length);url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else if(params&&typeof params===
"object")type="POST";if(self.length>0)jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])});return this};jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=
window.document.documentElement;function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static")elem.style.position="relative";curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=
(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options))options=options.call(elem,i,curOffset);if(options.top!=null)props.top=options.top-curOffset.top+curTop;if(options.left!=null)props.left=options.left-curOffset.left+curLeft;if("using"in options)options.using.call(elem,
props);else curElem.css(props)}};jQuery.fn.extend({offset:function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(!doc)return;docElem=doc.documentElement;if(!jQuery.contains(docElem,elem))return box;if(typeof elem.getBoundingClientRect!==strundefined)box=elem.getBoundingClientRect();win=getWindow(doc);return{top:box.top+(win.pageYOffset||docElem.scrollTop)-
(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}},position:function(){if(!this[0])return;var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];if(jQuery.css(elem,"position")==="fixed")offset=elem.getBoundingClientRect();else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html"))parentOffset=offsetParent.offset();parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=
jQuery.css(offsetParent[0],"borderLeftWidth",true)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||docElem;while(offsetParent&&!jQuery.nodeName(offsetParent,"html")&&jQuery.css(offsetParent,"position")==="static")offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}});jQuery.each({scrollLeft:"pageXOffset",
scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined)return win?prop in win?win[prop]:win.document.documentElement[method]:elem[method];if(win)win.scrollTo(!top?val:jQuery(win).scrollLeft(),top?val:jQuery(win).scrollTop());else elem[method]=val},method,val,arguments.length,null)}});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,
function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,
function(elem,type,value){var doc;if(jQuery.isWindow(elem))return elem.document.documentElement["client"+name];if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});jQuery.fn.size=function(){return this.length};jQuery.fn.andSelf=jQuery.fn.addBack;
if(typeof define==="function"&&define.amd)define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery)window.$=_$;if(deep&&window.jQuery===jQuery)window.jQuery=_jQuery;return jQuery};if(typeof noGlobal===strundefined)window.jQuery=window.$=jQuery;return jQuery});(function(jQuery,window,undefined){var matched,browser;jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(opr)[\/]([\w.]+)/.exec(ua)||/(chrome)[ \/]([\w.]+)/.exec(ua)||/(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];var platform_match=/(ipad)/.exec(ua)||
/(iphone)/.exec(ua)||/(android)/.exec(ua)||/(windows phone)/.exec(ua)||/(win)/.exec(ua)||/(mac)/.exec(ua)||/(linux)/.exec(ua)||/(cros)/i.exec(ua)||[];return{browser:match[3]||match[1]||"",version:match[2]||"0",platform:platform_match[0]||""}};matched=jQuery.uaMatch(window.navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version;browser.versionNumber=parseInt(matched.version)}if(matched.platform)browser[matched.platform]=true;if(browser.android||
browser.ipad||browser.iphone||browser["windows phone"])browser.mobile=true;if(browser.cros||browser.mac||browser.linux||browser.win)browser.desktop=true;if(browser.chrome||browser.opr||browser.safari)browser.webkit=true;if(browser.rv){var ie="msie";matched.browser=ie;browser[ie]=true}if(browser.opr){var opera="opera";matched.browser=opera;browser[opera]=true}if(browser.safari&&browser.android){var android="android";matched.browser=android;browser[android]=true}browser.name=matched.browser;browser.platform=
matched.platform;jQuery.browser=browser})(jQuery,window);if(!this.JSON)this.JSON={};
(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=
/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,
mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function")value=value.toJSON(key);if(typeof rep==="function")value=rep.call(holder,key,value);switch(typeof value){case "string":return quote(value);case "number":return isFinite(value)?String(value):"null";case "boolean":case "null":return String(value);case "object":if(!value)return"null";gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=
1)partial[i]=str(i,value)||"null";v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v)partial.push(quote(k)+(gap?": ":":")+v)}}}else for(k in value)if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v)partial.push(quote(k)+(gap?": ":":")+v)}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+
gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function")JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number")for(i=0;i<space;i+=1)indent+=" ";else if(typeof space==="string")indent=space;rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number"))throw new Error("JSON.stringify");return str("",{"":value})};if(typeof JSON.parse!=="function")JSON.parse=
function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object")for(k in value)if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined)value[k]=v;else delete value[k]}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse");}})();(function(){var slice=Array.prototype.slice;function update(array,args){var arrayLength=array.length,length=args.length;while(length--)array[arrayLength+length]=args[length];return array}function merge(array,args){array=slice.call(array,0);return update(array,args)}function argumentNames(){var names=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return names.length==1&&!names[0]?[]:names}function bind(context){if(arguments.length<
2&&typeof arguments[0]==="undefined")return this;var __method=this,args=slice.call(arguments,1);return function(){var a=merge(args,arguments);return __method.apply(context,a)}}$.extend(Function.prototype,{bind:bind,argumentNames:argumentNames})})();var falseFunction=function(){return false};$.generateId=function(){return arguments.callee.prefix+arguments.callee.count++};$.generateId.prefix="jq_";$.generateId.count=0;$.fn.generateId=function(){return this.each(function(){this.id=this.id||$.generateId()})};
$.extend($.fn.truncate=function(width,options){options=$.extend({maxIterations:10},options||{});return this.each(function(){var scrollWidth=$(this).outerWidth();var iterations=0;var maxIterations=options.maxIterations;var originalHtml=$(this).html();var stepSize=width/maxIterations;while(scrollWidth>width&&iterations++<maxIterations){var newHtml=originalHtml.substring(0,Math.max(0,originalHtml.length-stepSize*iterations))+"...";$(this).html(newHtml);scrollWidth=$(this).outerWidth()}})});
$.extend($.fn.maybeScrollIntoView=function(that){return;var $that=$(that);return this.each(function(){var $self=$(this);var thisOffset=$self.offset();var thatOffset=$that.offset();var visible=thisOffset.top>=thatOffset.top&&thisOffset.left>=thatOffset.left&&thisOffset.top<=thatOffset.top+$that.height()&&thisOffset.left<=thatOffset.left+$that.width();if(!visible)$self[0].scrollIntoView()})});
window.Utility={uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var random=Math.random()*16|0;var hex=c=="x"?random:random&3|8;return hex.toString(16)}).toLowerCase()},isVeryLikelyJustSafari:function(){return!!(!/chrome/i.test(navigator.userAgent)&&$.browser.safari)},isVeryLikelyJustMac:function(){return/mac/i.test(navigator.userAgent)},onDeckContentFactory:function(jQuerySelector){return $(jQuerySelector).clone().removeAttr("id")},escape:function(unescaped){if(unescaped)return unescaped.replace(/&/g,
"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");else return unescaped},buildXhr:function(){try{if(typeof XMLHttpRequest=="undefined"){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){throw new Error("Could not build activex xhr: "+e);}}else return new XMLHttpRequest}catch(e){throw new Error("Could not build xhr: "+e);}},Klass:{defaultBase:{memoize:function(attr,
fun,context){this[attr]=this[attr]||fun.call(context||null);return this[attr]},returning:function(a,fun){if(fun)fun(a);return a},autoBind:function(attrs){for(var i=0;i<attrs.length;i++){var attr=attrs[i];this["bound"+attr.charAt(0).toUpperCase()+attr.substring(1)]=this[attr].bind(this)}},callForProperties:function(obj){for(var attr in obj)if(this[attr])this[attr](obj[attr])}},appendBase:function(prot){return $.extend({},this.defaultBase,prot)},create:function(){var prot=arguments[0]||{};var r=function(){var args=
arguments;if(this.initialize)this.initialize.apply(this,args)};r.prototype=this.appendBase(prot);return r}},generateHTMLTableRowElement:function(contentArray){var rowElement=document.createElement("tr");for(var i=0;i<contentArray.length;i++){var cell=document.createElement("td");cell.appendChild(document.createTextNode(contentArray[i]));rowElement.appendChild(cell)}return rowElement},openOtherConsole:function(path,anchors){var baseUrl=this.proxyHostName()+path;var regionParam=S3Console.ViewModel.PropertiesPanel.awsRegion();
window.open(baseUrl+(regionParam?"?region="+regionParam:"")+(anchors?"#"+anchors:""),"_blank")},proxyHostName:function(){var endIndex=document.referrer.indexOf("/s3/home");var proxyHostName="";if(endIndex!=-1)proxyHostName=document.referrer.substr(0,endIndex);return proxyHostName}};(function(ns){var Manager=Utility.Klass.create({defaultOptions:function(){return{singleUseWall:true,forceShowOnTotalFailure:true}},initialize:function(opts){this.FadeOutAnimationTime=450;this.FadeInAnimationTime=1500;this.banners={};this.activeBanners=[];this.autoBind(["hideWall","updateWallTitle","updateWallInstructions"]);this.hasBeenBound=false;this.singleUseDone=false;this.titles={single:"We have detected an issue that may prevent the Amazon S3 Console from loading correctly.",many:"We have detected an issues that may prevent the Amazon S3 Console from loading correctly."};
this.text={help:'Please visit the <a href="http://status.aws.amazon.com/">AWS Service Health Dashboard</a> to monitor S3 availability issues.',buttons:{hideWall:"Close This Warning"},totalFailure:"We have detected an issue that has prevented the Amazon S3 Console from loading correctly."};this.callForProperties($.extend({},this.defaultOptions(),opts))},forceShowOnTotalFailure:function(shouldShow){return this.memoize("cachedForceShowOnTotalFailure",this.returning.bind(this,shouldShow))},totalFailure:function(){this.alternateTitle(this.text.totalFailure);
this.domElt().addClass("fatal");if(this.forceShowOnTotalFailure())this.singleUseDone=false;if(this.activeBanners.length==0)this.createAndShow({})},singleUseWall:function(isSingleUse){return this.memoize("cachedSingleUse",this.returning.bind(this,isSingleUse))},bindEvents:function(){if(!this.hasBeenBound){this.closerElt().click(this.boundHideWall);this.hasBeenBound=true}},hideWall:function(){this.domElt().fadeOut(this.FadeOutAnimationTime,function(){for(var i=0;i<this.activeBanners.length;i++)this.removeFromPage(this.activeBanners[i]);
this.activeBanners=[]}.bind(this))},updateWallTitle:function(){this.titleElt().html(this.canonicalTitle())},updateWallInstructions:function(){this.instructionsElt().html(this.canonicalInstructions())},alternateTitle:function(title){if(typeof title!=="undefined"){this.cachedAlternateTitle=title;setTimeout(this.boundUpdateWallTitle,1)}return this.cachedAlternateTitle},alternateInstructions:function(instructions){if(typeof instructions!=="undefined"){this.cachedAlternateInstructions=instructions;setTimeout(this.boundUpdateWallInstructions,
1)}return this.cachedAlternateInstructions},canonicalTitle:function(){if(this.alternateTitle())return this.alternateTitle();else if(this.activeBanners.length>=2)return this.titles.many;else return this.titles.single},canonicalInstructions:function(){if(this.alternateInstructions())return this.alternateInstructions();else return this.text.help},maybeShowWall:function(){if(this.domElt().has(":hidden")){this.domElt().fadeIn(this.FadeInAnimationTime);this.bindEvents()}},maybeAdjustStyling:function(){if(this.activeBanners.length==
0||this.activeBanners.length==1&&this.activeBanners[0].isEmpty())this.titleElt().css({"line-height":"30px"});else this.titleElt().css({"line-height":"inherit"})},domElt:function(){return this.memoize("cachedDomElt",function(){var dom=$("<div></div>").addClass("banner-man").generateId().append($("<div/>").addClass("banner-main").append($("<div/>").addClass("icon").html("&nbsp;")).append($("<div/>").addClass("head").append($("<div/>").addClass("title").html(this.titles.single)).append($("<ul/>").addClass("container").addClass("clearfix")))).append($("<div/>").addClass("clear")).append($("<div/>").addClass("help").append($("<div/>").addClass("helpText").html(this.text.help)).append($("<div/>").addClass("actions").append(Ui.button($("<div/>").attr("button-align",
"right").html(this.text.buttons.hideWall),{click:this.boundHideWall}).jQueryElt()))).hide();dom.appendTo($(document.body));return dom}.bind(this))},titleElt:function(){return this.domElt().find(".title")},instructionsElt:function(){return this.domElt().find(".helpText")},bannerContainer:function(){return this.domElt().find(".container")},closerElt:function(){return this.domElt().find(".closer a")},create:function(opts){var b=new Banner($.extend({},opts||{},{manager:this}));this.add(b);return b},createAndShow:function(opts){var b=
this.create(opts);b.show();return b},add:function(b){this.banners[b.id()]=b},removeFromPage:function(b){try{b.domElt().detach()}catch(e){}return b},afterShown:function(b){},show:function(b){if(this.singleUseWall()&&this.singleUseDone)return b;if(!b.isEmpty())b.domElt().show().appendTo(this.bannerContainer());this.maybeShowWall();this.activeBanners.push(b);this.updateWallTitle();this.maybeAdjustStyling();if(this.singleUseWall())this.singleUseDone=true;return b},hide:function(b){b.domElt().hide();return b},
click:function(b){this.hide(b);return b}});var Banner=Utility.Klass.create({defaultOptions:function(){return{id:Utility.uuid(),message:"",subject:""}},initialize:function(opts){this.callForProperties($.extend({},this.defaultOptions(),opts||{}));this.autoBind(["show","hide","afterShown","removeFromPage","click"])},id:function(id){return this.memoize("cachedID",this.returning.bind(this,id))},subject:function(subject){return this.memoize("cachedSubject",this.returning.bind(this,subject||this.defaultOptions().message))},
manager:function(manager){return this.memoize("cachedManager",this.returning.bind(this,manager))},message:function(message){return this.memoize("cachedMessage",this.returning.bind(this,message||this.defaultOptions().message))},forceShow:function(forceShow){return this.memoize("cachedForceShow",this.returning.bind(this,forceShow||this.defaultOptions().forceShow))},domElt:function(){return this.memoize("cachedDomElt",function(){return $("<li></li>").addClass("banner").generateId().append($("<span/>").append($("<span/>").addClass("banner-subject").html(this.subject())).append(" ").append($("<span/>").addClass("banner-message").html(this.message())))}.bind(this))},
show:function(){this.manager().show(this)},afterShown:function(){this.manager().afterShown(this)},removeFromPage:function(){this.manager().removeFromPage(this)},hide:function(){this.manager().hide(this)},click:function(e){this.manager().click(this,e)},isEmpty:function(){return this.message().length==0&&this.subject().length==0}});ns.MessageMan=new Manager({singleUseWall:false});ns.BannerMan=new Manager;Flow.module("MessageMan").dependsOn(["document::ready"]).on("dependencies::met","ready");Flow.module("BannerMan").dependsOn(["document::ready"]).on("dependencies::met",
"ready")})(window);window.Logging={log:function(metricName,value,details,pageId,unit){if(AWSC.Clog)AWSC.Clog.log(metricName,value,details,pageId,unit)},startTimer:function(metricName){if(AWSC.Timer)AWSC.Timer.start(metricName)},stopTimer:function(metricName){if(AWSC.Timer)AWSC.Timer.stop(metricName)}};
(function(ns){var Diagnostics=function(){if(this.initialize){var args=arguments;this.initialize.apply(this,args)}};Diagnostics.prototype={initialize:function(){this.XHR=this.constructXHR()},constructXHR:function(){var MyXHR=null;try{if(typeof XMLHttpRequest=="undefined")MyXHR=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return null}};else MyXHR=XMLHttpRequest}catch(e){}return MyXHR},
buildStringForLogging:function(payload){var json=null;if(window.JSON&&JSON.stringify){if(FlowUtil.typeOf(payload.tale[1])=="array"){var objs=payload.tale[1];var parts=[];for(var obj in objs)parts.push(JSON.stringify(objs[obj]).replace(/\\u000a/g,"~"));payload.tale[1]=parts.join(";")}payload.tale=payload.tale.join(";").replace(/\n/g,"~");json=JSON.stringify(payload)}else{if(FlowUtil.typeOf(payload.tale[1])!="string")payload.tale[1]="fatal-json-not-available";payload.tale=payload.tale.join(";").replace(/\n/g,
"~");var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var quote=function(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?
c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'};json="{";var pairs=[];for(attr in payload){var val=payload[attr];pairs.push([quote(attr),quote(val)].join(":"))}json+=pairs.join(",");json+="}"}return json},tattle:function(scope,cause,tale){if(!Configuration.useTattle)return;tale=["useVersion="+Configuration.useVersion,tale||""];var payload={requestId:Utility.uuid(),sessionId:Configuration.sessionId,scope:scope,cause:cause,tale:tale,throwable:"[null]"};var json=this.buildStringForLogging(payload);
var xhr=new this.XHR;xhr.open("POST",Configuration.tattlePath);try{xhr.send(json)}catch(e){console.log("Error tattling",e)}}};ns.Diagnostics=new Diagnostics;ns.Diagnostics.tattle("S3Console.Login","console-hit");Logging.log("Console-Hit",1)})(window);
(function(ns){var MaxPersistentCrumbs=32;var MaxCrumbs=256;var MaxSlidingCrumbs=MaxCrumbs-MaxPersistentCrumbs;var BreadcrumbFirstReportTimeout=250;var BreadcrumbReportTimeout=3E3;var Breadcrumbs=function(options){this.initialize(options)};Breadcrumbs.prototype={initialize:function(options){this.scope=options.scope;this.persistentCrumbs=[];this.usingPersistentCrumbs=true;this.slidingCrumbs=[];this.crumbs=this.persistentCrumbs;this.truncated=false;this.finished=false;this.boundReportLoop=this.reportLoop.bind(this);
this.reportLoopTimeout=setTimeout(this.boundReportLoop,BreadcrumbFirstReportTimeout)},add:function(){if(this.finished)return;var messages=[];for(var i=0;i<arguments.length;i++)messages.push(arguments[i]);this.crumbs.push({timestamp:(new Date).getTime(),messages:messages});if(this.usingPersistentCrumbs&&this.persistentCrumbs.length>=MaxPersistentCrumbs){this.usingPersistentCrumbs=false;this.crumbs=this.slidingCrumbs}else while(this.crumbs.length>MaxSlidingCrumbs){this.truncated=true;this.crumbs.shift()}this.shouldReport=
true},report:function(){if(!this.shouldReport)return;var joined=[{marker:"--PERSISTED--"}].concat(this.persistentCrumbs);if(this.slidingCrumbs.length>0)joined=joined.concat([{marker:"--SLIDING--"}],this.slidingCrumbs);Diagnostics.tattle(this.scope,"breadcrumbs",joined);var breadcrumbs=["useVersion="+Configuration.useVersion,joined||""];Logging.log("Login-Breadcrumbs",1,Diagnostics.buildStringForLogging({tale:breadcrumbs}));this.shouldReport=false},reportLoop:function(){this.report();if(!this.finished)this.reportLoopTimeout=
setTimeout(this.boundReportLoop,BreadcrumbReportTimeout);else this.reportLoopTimeout=null},finish:function(){this.finished=true}};ns.Breadcrumbs=new Breadcrumbs({scope:"S3Console.Login"});if(window.$)$(document).ready(ns.Breadcrumbs.add.bind(ns.Breadcrumbs,"Document.Ready"))})(window.Diagnostics);(function(){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var d=window.Crypto={};var a=d.util={rotl:function(h,g){return h<<g|h>>>32-g},rotr:function(h,g){return h<<32-g|h>>>g},endian:function(h){if(h.constructor==Number)return a.rotl(h,8)&16711935|a.rotl(h,24)&4278255360;for(var g=0;g<h.length;g++)h[g]=a.endian(h[g]);return h},randomBytes:function(h){for(var g=[];h>0;h--)g.push(Math.floor(Math.random()*256));return g},bytesToWords:function(h){for(var k=[],j=0,g=0;j<h.length;j++,
g+=8)k[g>>>5]|=h[j]<<24-g%32;return k},wordsToBytes:function(i){for(var h=[],g=0;g<i.length*32;g+=8)h.push(i[g>>>5]>>>24-g%32&255);return h},bytesToHex:function(g){for(var j=[],h=0;h<g.length;h++){j.push((g[h]>>>4).toString(16));j.push((g[h]&15).toString(16))}return j.join("")},hexToBytes:function(h){for(var g=[],i=0;i<h.length;i+=2)g.push(parseInt(h.substr(i,2),16));return g},bytesToBase64:function(h){if(typeof btoa=="function")return btoa(e.bytesToString(h));for(var g=[],l=0;l<h.length;l+=3){var m=
h[l]<<16|h[l+1]<<8|h[l+2];for(var k=0;k<4;k++)if(l*8+k*6<=h.length*8)g.push(c.charAt(m>>>6*(3-k)&63));else g.push("=")}return g.join("")},base64ToBytes:function(h){if(typeof atob=="function")return e.stringToBytes(atob(h));h=h.replace(/[^A-Z0-9+\/]/ig,"");for(var g=[],j=0,k=0;j<h.length;k=++j%4){if(k==0)continue;g.push((c.indexOf(h.charAt(j-1))&Math.pow(2,-2*k+8)-1)<<k*2|c.indexOf(h.charAt(j))>>>6-k*2)}return g}};d.mode={};var b=d.charenc={};var f=b.UTF8={stringToBytes:function(g){return e.stringToBytes(unescape(encodeURIComponent(g)))},
bytesToString:function(g){return decodeURIComponent(escape(e.bytesToString(g)))}};var e=b.Binary={stringToBytes:function(j){for(var g=[],h=0;h<j.length;h++)g.push(j.charCodeAt(h));return g},bytesToString:function(g){for(var j=[],h=0;h<g.length;h++)j.push(String.fromCharCode(g[h]));return j.join("")}}})();
(function(){var f=Crypto,a=f.util,b=f.charenc,e=b.UTF8,d=b.Binary;var c=f.SHA1=function(i,g){var h=a.wordsToBytes(c._sha1(i));return g&&g.asBytes?h:g&&g.asString?d.bytesToString(h):a.bytesToHex(h)};c._sha1=function(o){if(o.constructor==String)o=e.stringToBytes(o);var v=a.bytesToWords(o),x=o.length*8,p=[],r=1732584193,q=-271733879,k=-1732584194,h=271733878,g=-1009589776;v[x>>5]|=128<<24-x%32;v[(x+64>>>9<<4)+15]=x;for(var z=0;z<v.length;z+=16){var E=r,D=q,C=k,B=h,A=g;for(var y=0;y<80;y++){if(y<16)p[y]=
v[z+y];else{var u=p[y-3]^p[y-8]^p[y-14]^p[y-16];p[y]=u<<1|u>>>31}var s=(r<<5|r>>>27)+g+(p[y]>>>0)+(y<20?(q&k|~q&h)+1518500249:y<40?(q^k^h)+1859775393:y<60?(q&k|q&h|k&h)-1894007588:(q^k^h)-899497514);g=h;h=k;k=q<<30|q>>>2;q=r;r=s}r+=E;q+=D;k+=C;h+=B;g+=A}return[r,q,k,h,g]};c._blocksize=16})();(function(){var e=Crypto,a=e.util,b=e.charenc,d=b.UTF8,c=b.Binary;e.HMAC=function(l,m,k,h){if(m.constructor==String)m=d.stringToBytes(m);if(k.constructor==String)k=d.stringToBytes(k);if(k.length>l._blocksize*4)k=l(k,{asBytes:true});var g=k.slice(0),n=k.slice(0);for(var j=0;j<l._blocksize*4;j++){g[j]^=92;n[j]^=54}var f=l(g.concat(l(n.concat(m),{asBytes:true})),{asBytes:true});return h&&h.asBytes?f:h&&h.asString?c.bytesToString(f):a.bytesToHex(f)}})();(function(){var base64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var Crypto=window.Crypto4={};var util=Crypto.util={rotl:function(n,b){return n<<b|n>>>32-b},rotr:function(n,b){return n<<32-b|n>>>b},endian:function(n){if(n.constructor==Number)return util.rotl(n,8)&16711935|util.rotl(n,24)&4278255360;for(var i=0;i<n.length;i++)n[i]=util.endian(n[i]);return n},randomBytes:function(n){for(var bytes=[];n>0;n--)bytes.push(Math.floor(Math.random()*256));return bytes},bytesToWords:function(bytes){for(var words=
[],i=0,b=0;i<bytes.length;i++,b+=8)words[b>>>5]|=bytes[i]<<24-b%32;return words},wordsToBytes:function(words){for(var bytes=[],b=0;b<words.length*32;b+=8)bytes.push(words[b>>>5]>>>24-b%32&255);return bytes},bytesToHex:function(bytes){for(var hex=[],i=0;i<bytes.length;i++){hex.push((bytes[i]>>>4).toString(16));hex.push((bytes[i]&15).toString(16))}return hex.join("")},hexToBytes:function(hex){for(var bytes=[],c=0;c<hex.length;c+=2)bytes.push(parseInt(hex.substr(c,2),16));return bytes},bytesToBase64:function(bytes){if(typeof btoa==
"function")return btoa(Binary.bytesToString(bytes));for(var base64=[],i=0;i<bytes.length;i+=3){var triplet=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2];for(var j=0;j<4;j++)if(i*8+j*6<=bytes.length*8)base64.push(base64map.charAt(triplet>>>6*(3-j)&63));else base64.push("=")}return base64.join("")},base64ToBytes:function(base64){if(typeof atob=="function")return Binary.stringToBytes(atob(base64));base64=base64.replace(/[^A-Z0-9+\/]/ig,"");for(var bytes=[],i=0,imod4=0;i<base64.length;imod4=++i%4){if(imod4==
0)continue;bytes.push((base64map.indexOf(base64.charAt(i-1))&Math.pow(2,-2*imod4+8)-1)<<imod4*2|base64map.indexOf(base64.charAt(i))>>>6-imod4*2)}return bytes}};var charenc=Crypto.charenc={};var UTF8=charenc.UTF8={stringToBytes:function(str){return Binary.stringToBytes(unescape(encodeURIComponent(str)))},bytesToString:function(bytes){return decodeURIComponent(escape(Binary.bytesToString(bytes)))}};var Binary=charenc.Binary={stringToBytes:function(str){for(var bytes=[],i=0;i<str.length;i++)bytes.push(str.charCodeAt(i)&
255);return bytes},bytesToString:function(bytes){for(var str=[],i=0;i<bytes.length;i++)str.push(String.fromCharCode(bytes[i]));return str.join("")}}})();(function(){var C=Crypto4,util=C.util,charenc=C.charenc,UTF8=charenc.UTF8,Binary=charenc.Binary;C.HMAC=function(hasher,message,key,options){if(message.constructor==String)message=UTF8.stringToBytes(message);if(key.constructor==String)key=UTF8.stringToBytes(key);if(key.length>hasher._blocksize*4)key=hasher(key,{asBytes:true});var okey=typeof Uint8Array!="undefined"?util.copyUint8(key,hasher._blocksize*4):key.slice(0);var ikey=typeof Uint8Array!="undefined"?util.copyUint8(key,hasher._blocksize*4):key.slice(0);
for(var i=0;i<hasher._blocksize*4;i++){okey[i]^=92;ikey[i]^=54}var hmacbytes=hasher(util.concat(okey,hasher(util.concat(ikey,message),{asBytes:true})),{asBytes:true});return options&&options.asBytes?hmacbytes:options&&options.asString?Binary.bytesToString(hmacbytes):util.bytesToHex(hmacbytes)};util.concat=function(a,b){if(typeof(Uint8Array!="undefined")){var cnct=new Uint8Array(a.length+b.length);cnct.set(a,0);cnct.set(b,a.length);return cnct}else return a.concat(b)};util.copyUint8=function(a,targetSize){if(a.length>
targetSize)targetSize=a.length;var copied=new Uint8Array(targetSize);copied.set(a);return copied}})();(function(){var C=Crypto4,util=C.util,charenc=C.charenc,UTF8=charenc.UTF8,Binary=charenc.Binary;var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,
2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var SHA256=C.SHA256=function(message,options){var digestbytes=util.wordsToBytes(SHA256._sha256(message));return options&&options.asBytes?digestbytes:options&&options.asString?Binary.bytesToString(digestbytes):util.bytesToHex(digestbytes)};
SHA256._sha256=function(message){if(message.constructor==String)message=UTF8.stringToBytes(message);var m=util.bytesToWords(message),l=message.length*8,H=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],w=[],a,b,c,d,e,f,g,h,i,j,t1,t2;m[l>>5]|=128<<24-l%32;m[(l+64>>9<<4)+15]=l;for(var i=0;i<m.length;i+=16){a=H[0];b=H[1];c=H[2];d=H[3];e=H[4];f=H[5];g=H[6];h=H[7];for(var j=0;j<64;j++){if(j<16)w[j]=m[j+i];else{var gamma0x=w[j-15],gamma1x=w[j-2],gamma0=(gamma0x<<
25|gamma0x>>>7)^(gamma0x<<14|gamma0x>>>18)^gamma0x>>>3,gamma1=(gamma1x<<15|gamma1x>>>17)^(gamma1x<<13|gamma1x>>>19)^gamma1x>>>10;w[j]=gamma0+(w[j-7]>>>0)+gamma1+(w[j-16]>>>0)}var ch=e&f^~e&g,maj=a&b^a&c^b&c,sigma0=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),sigma1=(e<<26|e>>>6)^(e<<21|e>>>11)^(e<<7|e>>>25);t1=(h>>>0)+sigma1+ch+K[j]+(w[j]>>>0);t2=sigma0+maj;h=g;g=f;f=e;e=d+t1;d=c;c=b;b=a;a=t1+t2}H[0]+=a;H[1]+=b;H[2]+=c;H[3]+=d;H[4]+=e;H[5]+=f;H[6]+=g;H[7]+=h}return H};SHA256._blocksize=16;SHA256._digestsize=
32})();(function(){var c=Crypto4;c.HEX=function(txt){var hex="";for(var i=0;i<txt.length;i++)hex+=""+txt.charCodeAt(i).toString(16);return hex}})();jQuery.ui||function($){$.ui={version:"1.8",plugin:{add:function(module,option,set){var proto=$.ui[module].prototype;for(var i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]])}},call:function(instance,name,args){var set=instance.plugins[name];if(!set||!instance.element[0].parentNode)return;for(var i=0;i<set.length;i++)if(instance.options[set[i][0]])set[i][1].apply(instance.element,args)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&
16:a!==b&&a.contains(b)},hasScroll:function(el,a){if($(el).css("overflow")=="hidden")return false;var scroll=a&&a=="left"?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0)return true;el[scroll]=1;has=el[scroll]>0;el[scroll]=0;return has},isOverAxis:function(x,reference,size){return x>reference&&x<reference+size},isOver:function(y,x,top,left,height,width){return $.ui.isOverAxis(y,top,height)&&$.ui.isOverAxis(x,left,width)},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,
END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};$.fn.extend({_focus:$.fn.focus,focus:function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();fn&&fn.call(elem)},delay)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable",
"off").css("-webkit-user-select","").css("-moz-user-select","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable","on").css("-webkit-user-select","none").css("-moz-user-select","none").bind("selectstart.ui",function(){return false})},scrollParent:function(){var scrollParent;if($.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position")))scrollParent=this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.css(this,
"position",1))&&/(auto|scroll)/.test($.css(this,"overflow",1)+$.css(this,"overflow-y",1)+$.css(this,"overflow-x",1))}).eq(0);else scrollParent=this.parents().filter(function(){return/(auto|scroll)/.test($.css(this,"overflow",1)+$.css(this,"overflow-y",1)+$.css(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length){var elem=$(this[0]),position,
value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position=="absolute"||position=="relative"||position=="fixed"){value=parseInt(elem.css("zIndex"));if(!isNaN(value)&&value!=0)return value}elem=elem.parent()}}return 0}});$.extend($.expr[":"],{data:function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){var nodeName=element.nodeName.toLowerCase(),tabIndex=$.attr(element,"tabindex");return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:
"a"==nodeName||"area"==nodeName?element.href||!isNaN(tabIndex):!isNaN(tabIndex))&&!$(element)["area"==nodeName?"parents":"closest"](":hidden").length},tabbable:function(element){var tabIndex=$.attr(element,"tabindex");return(isNaN(tabIndex)||tabIndex>=0)&&$(element).is(":focusable")}})}(jQuery);
(function($){var _remove=$.fn.remove;$.fn.remove=function(selector,keepData){return this.each(function(){if(!keepData)if(!selector||$.filter(selector,[this]).length)$("*",this).add(this).each(function(){$(this).triggerHandler("remove")});return _remove.call($(this),selector,keepData)})};$.widget=function(name,base,prototype){var namespace=name.split(".")[0],fullName;name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget}$.expr[":"][fullName]=function(elem){return!!$.data(elem,
name)};$[namespace]=$[namespace]||{};$[namespace][name]=function(options,element){if(arguments.length)this._createWidget(options,element)};var basePrototype=new base;basePrototype.options=$.extend({},basePrototype.options);$[namespace][name].prototype=$.extend(true,basePrototype,{namespace:namespace,widgetName:name,widgetEventPrefix:$[namespace][name].prototype.widgetEventPrefix||name,widgetBaseClass:fullName},prototype);$.widget.bridge(name,$[namespace][name])};$.widget.bridge=function(name,object){$.fn[name]=
function(options){var isMethodCall=typeof options==="string",args=Array.prototype.slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.extend.apply(null,[true,options].concat(args)):options;if(isMethodCall&&options.substring(0,1)==="_")return returnValue;if(isMethodCall)this.each(function(){var instance=$.data(this,name),methodValue=instance&&$.isFunction(instance[options])?instance[options].apply(instance,args):instance;if(methodValue!==instance&&methodValue!==undefined){returnValue=
methodValue;return false}});else this.each(function(){var instance=$.data(this,name);if(instance){if(options)instance.option(options);instance._init()}else $.data(this,name,new object(options,this))});return returnValue}};$.Widget=function(options,element){if(arguments.length)this._createWidget(options,element)};$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(options,element){this.element=$(element).data(this.widgetName,this);this.options=
$.extend(true,{},this.options,$.metadata&&$.metadata.get(element)[this.widgetName],options);var self=this;this.element.bind("remove."+this.widgetName,function(){self.destroy()});this._create();this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled")},widget:function(){return this.element},
option:function(key,value){var options=key,self=this;if(arguments.length===0)return $.extend({},self.options);if(typeof key==="string"){if(value===undefined)return this.options[key];options={};options[key]=value}$.each(options,function(key,value){self._setOption(key,value)});return self},_setOption:function(key,value){this.options[key]=value;if(key==="disabled")this.widget()[value?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+this.namespace+"-state-disabled").attr("aria-disabled",
value);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(type,event,data){var callback=this.options[type];event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();data=data||{};if(event.originalEvent)for(var i=$.event.props.length,prop;i;){prop=$.event.props[--i];event[prop]=event.originalEvent[prop]}this.element.trigger(event,data);return!($.isFunction(callback)&&
callback.call(this.element[0],event,data)===false||event.isDefaultPrevented())}}})(jQuery);
(function($){$.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var self=this;this.element.bind("mousedown."+this.widgetName,function(event){return self._mouseDown(event)}).bind("click."+this.widgetName,function(event){if(self._preventClickEvent){self._preventClickEvent=false;event.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(event){event.originalEvent=
event.originalEvent||{};if(event.originalEvent.mouseHandled)return;this._mouseStarted&&this._mouseUp(event);this._mouseDownEvent=event;var self=this,btnIsLeft=event.which==1,elIsCancel=typeof this.options.cancel=="string"?$(event.target).parents().add(event.target).filter(this.options.cancel).length:false;if(!btnIsLeft||elIsCancel||!this._mouseCapture(event))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){self.mouseDelayMet=true},
this.options.delay);if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(event)!==false;if(!this._mouseStarted){event.preventDefault();return true}}if(this._cancelCurrentMouseDown){this._cancelCurrentMouseDown=false;return true}this._mouseMoveDelegate=function(event){return self._mouseMove(event)};this._mouseUpDelegate=function(event){return self._mouseUp(event)};$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,
this._mouseUpDelegate);$.browser.safari||$.browser.mozilla||event.preventDefault();event.originalEvent.mouseHandled=true;return true},_mouseMove:function(event){if($.browser.msie&&!event.button)return this._mouseUp(event);if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault()}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==false;this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)}return!this._mouseStarted},
_mouseUp:function(event){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=event.target==this._mouseDownEvent.target;this._mouseStop(event)}return false},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(event){return this.mouseDelayMet},
_mouseStart:function(event){},_mouseDrag:function(event){},_mouseStop:function(event){},_mouseCapture:function(event){return true}})})(jQuery);
(function($){$.ui=$.ui||{};var horizontalPositions=/left|center|right/,horizontalDefault="center",verticalPositions=/top|center|bottom/,verticalDefault="center",_position=$.fn.position,_offset=$.fn.offset;$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var target=$(options.of),collision=(options.collision||"flip").split(" "),offset=options.offset?options.offset.split(" "):[0,0],targetWidth,targetHeight,basePosition;if(options.of.nodeType===
9){targetWidth=target.width();targetHeight=target.height();basePosition={top:0,left:0}}else if(options.of.scrollTo&&options.of.document){targetWidth=target.width();targetHeight=target.height();basePosition={top:target.scrollTop(),left:target.scrollLeft()}}else if(options.of.preventDefault){options.at="left top";targetWidth=targetHeight=0;basePosition={top:options.of.pageY,left:options.of.pageX}}else{targetWidth=target.outerWidth();targetHeight=target.outerHeight();basePosition=target.offset()}$.each(["my",
"at"],function(){var pos=(options[this]||"").split(" ");if(pos.length===1)pos=horizontalPositions.test(pos[0])?pos.concat([verticalDefault]):verticalPositions.test(pos[0])?[horizontalDefault].concat(pos):[horizontalDefault,verticalDefault];pos[0]=horizontalPositions.test(pos[0])?pos[0]:horizontalDefault;pos[1]=verticalPositions.test(pos[1])?pos[1]:verticalDefault;options[this]=pos});if(collision.length===1)collision[1]=collision[0];offset[0]=parseInt(offset[0],10)||0;if(offset.length===1)offset[1]=
offset[0];offset[1]=parseInt(offset[1],10)||0;if(options.at[0]==="right")basePosition.left+=targetWidth;else if(options.at[0]===horizontalDefault)basePosition.left+=targetWidth/2;if(options.at[1]==="bottom")basePosition.top+=targetHeight;else if(options.at[1]===verticalDefault)basePosition.top+=targetHeight/2;basePosition.left+=offset[0];basePosition.top+=offset[1];return this.each(function(){var elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),position=$.extend({},basePosition);
if(options.my[0]==="right")position.left-=elemWidth;else if(options.my[0]===horizontalDefault)position.left-=elemWidth/2;if(options.my[1]==="bottom")position.top-=elemHeight;else if(options.my[1]===verticalDefault)position.top-=elemHeight/2;$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]])$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,offset:offset,my:options.my,at:options.at})});if($.fn.bgiframe)elem.bgiframe();
elem.offset($.extend(position,{using:options.using}))})};$.ui.position={fit:{left:function(position,data){var win=$(window),over=position.left+data.elemWidth-win.width()-win.scrollLeft();position.left=over>0?position.left-over:Math.max(0,position.left)},top:function(position,data){var win=$(window),over=position.top+data.elemHeight-win.height()-win.scrollTop();position.top=over>0?position.top-over:Math.max(0,position.top)}},flip:{left:function(position,data){if(data.at[0]==="center")return;var win=
$(window),over=position.left+data.elemWidth-win.width()-win.scrollLeft(),myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,offset=-2*data.offset[0];position.left+=position.left<0?myOffset+data.targetWidth+offset:over>0?myOffset-data.targetWidth+offset:0},top:function(position,data){if(data.at[1]==="center")return;var win=$(window),over=position.top+data.elemHeight-win.height()-win.scrollTop(),myOffset=data.my[1]==="top"?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:
0,atOffset=data.at[1]==="top"?data.targetHeight:-data.targetHeight,offset=-2*data.offset[1];position.top+=position.top<0?myOffset+data.targetHeight+offset:over>0?myOffset+atOffset+offset:0}}};if(!$.offset.setOffset){$.offset.setOffset=function(elem,options){if(/static/.test($.css(elem,"position")))elem.style.position="relative";var curElem=$(elem),curOffset=curElem.offset(),curTop=parseInt($.css(elem,"top",true),10)||0,curLeft=parseInt($.css(elem,"left",true),10)||0,props={top:options.top-curOffset.top+
curTop,left:options.left-curOffset.left+curLeft};if("using"in options)options.using.call(elem,props);else curElem.css(props)};$.fn.offset=function(options){var elem=this[0];if(!elem||!elem.ownerDocument)return null;if(options)return this.each(function(){$.offset.setOffset(this,options)});return _offset.call(this)}}})(jQuery);
(function($){$.widget("ui.draggable",$.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable"+" ui-draggable-dragging"+" ui-draggable-disabled");this._mouseDestroy();return this},_mouseCapture:function(event){var o=
this.options;if(this.helper||o.disabled||$(event.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(event);if(!this.handle)return false;return true},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this._cacheHelperProportions();if($.ui.ddmanager)$.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset=
{top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);if(o.containment)this._setContainment();if(this._trigger("start",event)===false){this._clear();
return false}this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,event);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(event,true);return true},_mouseDrag:function(event,noPropagation){this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp({});return false}this.position=ui.position}if(!this.options.axis||
this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);return false},_mouseStop:function(event){var dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour)dropped=$.ui.ddmanager.drop(this,event);if(this.dropped){dropped=this.dropped;this.dropped=false}if(!this.element[0]||!this.element[0].parentNode)return false;if(this.options.revert==
"invalid"&&!dropped||this.options.revert=="valid"&&dropped||this.options.revert===true||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped)){var self=this;$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(self._trigger("stop",event)!==false)self._clear()})}else if(this._trigger("stop",event)!==false)this._clear();return false},cancel:function(){if(this.helper.is(".ui-draggable-dragging"))this._mouseUp({});else this._clear();
return this},_getHandle:function(event){var handle=!this.options.handle||!$(this.options.handle,this.element).length?true:false;$(this.options.handle,this.element).find("*").addBack().each(function(){if(this==event.target)handle=true});return handle},_createHelper:function(event){var o=this.options;var helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):o.helper=="clone"?this.element.clone():this.element;if(!helper.parents("body").length)helper.appendTo(o.appendTo=="parent"?this.element[0].parentNode:
o.appendTo);if(helper[0]!=this.element[0]&&!/(fixed|absolute)/.test(helper.css("position")))helper.css("position","absolute");return helper},_adjustOffsetFromHelper:function(obj){if(typeof obj=="string")obj=obj.split(" ");if($.isArray(obj))obj={left:+obj[0],top:+obj[1]||0};if("left"in obj)this.offset.click.left=obj.left+this.margins.left;if("right"in obj)this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;if("top"in obj)this.offset.click.top=obj.top+this.margins.top;if("bottom"in
obj)this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==
"html"&&$.browser.msie)po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins=
{left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o=this.options;if(o.containment=="parent")o.containment=this.helper[0].parentNode;if(o.containment=="document"||o.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,
$(o.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,($(o.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(o.containment)&&o.containment.constructor!=Array){var ce=$(o.containment)[0];if(!ce)return;var co=$(o.containment).offset();var over=$(ce).css("overflow")!="hidden";this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),
10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||
0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}else if(o.containment.constructor==Array)this.containment=o.containment},_convertPositionTo:function(d,pos){if(!pos)pos=this.position;var mod=d=="absolute"?1:-1;var o=this.options,scroll=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+
this.offset.relative.top*mod+this.offset.parent.top*mod-($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod),left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod)}},_generatePosition:function(event){var o=
this.options,scroll=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);var pageX=event.pageX;var pageY=event.pageY;if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0])pageX=this.containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<this.containment[1])pageY=this.containment[1]+
this.offset.click.top;if(event.pageX-this.offset.click.left>this.containment[2])pageX=this.containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>this.containment[3])pageY=this.containment[3]+this.offset.click.top}if(o.grid){var top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?!(top-this.offset.click.top<this.containment[1]||top-this.offset.click.top>this.containment[3])?top:!(top-this.offset.click.top<this.containment[1])?
top-o.grid[1]:top+o.grid[1]:top;var left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?!(left-this.offset.click.left<this.containment[0]||left-this.offset.click.left>this.containment[2])?left:!(left-this.offset.click.left<this.containment[0])?left-o.grid[0]:left+o.grid[0]:left}}return{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition==
"fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+($.browser.safari&&$.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval)this.helper.remove();this.helper=null;this.cancelHelperRemoval=
false},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui]);if(type=="drag")this.positionAbs=this._convertPositionTo("absolute");return $.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(event){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});$.extend($.ui.draggable,{version:"1.8"});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=
$(this).data("draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[];$(o.connectToSortable).each(function(){var sortable=$.data(this,"sortable");if(sortable&&!sortable.options.disabled){inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert});sortable._refreshItems();sortable._trigger("activate",event,uiSortable)}})},stop:function(event,ui){var inst=$(this).data("draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,
function(){if(this.instance.isOver){this.instance.isOver=0;inst.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(event);this.instance.options.helper=this.instance.options._helper;if(inst.options.helper=="original")this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",event,uiSortable)}})},drag:function(event,ui){var inst=
$(this).data("draggable"),self=this;var checkPos=function(o){var dyClick=this.offset.click.top,dxClick=this.offset.click.left;var helperTop=this.positionAbs.top,helperLeft=this.positionAbs.left;var itemHeight=o.height,itemWidth=o.width;var itemTop=o.top,itemLeft=o.left;return $.ui.isOver(helperTop+dyClick,helperLeft+dxClick,itemTop,itemLeft,itemHeight,itemWidth)};$.each(inst.sortables,function(i){this.instance.positionAbs=inst.positionAbs;this.instance.helperProportions=inst.helperProportions;this.instance.offset.click=
inst.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=$(self).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return ui.helper[0]};event.target=this.instance.currentItem[0];this.instance._mouseCapture(event,true);this.instance._mouseStart(event,true,true);this.instance.offset.click.top=
inst.offset.click.top;this.instance.offset.click.left=inst.offset.click.left;this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top;inst._trigger("toSortable",event);inst.dropped=this.instance.element;inst.currentItem=inst.element;this.instance.fromOutside=inst}if(this.instance.currentItem)this.instance._mouseDrag(event)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=
true;this.instance.options.revert=false;this.instance._trigger("out",event,this.instance._uiHash(this.instance));this.instance._mouseStop(event,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder)this.instance.placeholder.remove();inst._trigger("fromSortable",event);inst.dropped=false}})}});$.ui.plugin.add("draggable","cursor",{start:function(event,ui){var t=$("body"),o=$(this).data("draggable").options;if(t.css("cursor"))o._cursor=
t.css("cursor");t.css("cursor",o.cursor)},stop:function(event,ui){var o=$(this).data("draggable").options;if(o._cursor)$("body").css("cursor",o._cursor)}});$.ui.plugin.add("draggable","iframeFix",{start:function(event,ui){var o=$(this).data("draggable").options;$(o.iframeFix===true?"iframe":o.iframeFix).each(function(){$('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css($(this).offset()).appendTo("body")})},
stop:function(event,ui){$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("draggable").options;if(t.css("opacity"))o._opacity=t.css("opacity");t.css("opacity",o.opacity)},stop:function(event,ui){var o=$(this).data("draggable").options;if(o._opacity)$(ui.helper).css("opacity",o._opacity)}});$.ui.plugin.add("draggable","scroll",{start:function(event,ui){var i=$(this).data("draggable");
if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!="HTML")i.overflowOffset=i.scrollParent.offset()},drag:function(event,ui){var i=$(this).data("draggable"),o=i.options,scrolled=false;if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!="HTML"){if(!o.axis||o.axis!="x")if(i.overflowOffset.top+i.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity)i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity)i.scrollParent[0].scrollTop=
scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed;if(!o.axis||o.axis!="y")if(i.overflowOffset.left+i.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity)i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity)i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed}else{if(!o.axis||o.axis!="x")if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()-
o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);if(!o.axis||o.axis!="y")if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)}if(scrolled!==false&&
$.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(i,event)}});$.ui.plugin.add("draggable","snap",{start:function(event,ui){var i=$(this).data("draggable"),o=i.options;i.snapElements=[];$(o.snap.constructor!=String?o.snap.items||":data(draggable)":o.snap).each(function(){var $t=$(this);var $o=$t.offset();if(this!=i.element[0])i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui){var inst=$(this).data("draggable"),
o=inst.options;var d=o.snapTolerance;var x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(var i=inst.snapElements.length-1;i>=0;i--){var l=inst.snapElements[i].left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top,b=t+inst.snapElements[i].height;if(!(l-d<x1&&x1<r+d&&t-d<y1&&y1<b+d||l-d<x1&&x1<r+d&&t-d<y2&&y2<b+d||l-d<x2&&x2<r+d&&t-d<y1&&y1<b+d||l-d<x2&&x2<r+d&&t-d<y2&&y2<b+d)){if(inst.snapElements[i].snapping)inst.options.snap.release&&
inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item}));inst.snapElements[i].snapping=false;continue}if(o.snapMode!="inner"){var ts=Math.abs(t-y2)<=d;var bs=Math.abs(b-y1)<=d;var ls=Math.abs(l-x2)<=d;var rs=Math.abs(r-x1)<=d;if(ts)ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top;if(bs)ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top;if(ls)ui.position.left=
inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left;if(rs)ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left}var first=ts||bs||ls||rs;if(o.snapMode!="outer"){var ts=Math.abs(t-y1)<=d;var bs=Math.abs(b-y2)<=d;var ls=Math.abs(l-x1)<=d;var rs=Math.abs(r-x2)<=d;if(ts)ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top;if(bs)ui.position.top=inst._convertPositionTo("relative",{top:b-
inst.helperProportions.height,left:0}).top-inst.margins.top;if(ls)ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left;if(rs)ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left}if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first))inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item}));inst.snapElements[i].snapping=
ts||bs||ls||rs||first}}});$.ui.plugin.add("draggable","stack",{start:function(event,ui){var o=$(this).data("draggable").options;var group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});if(!group.length)return;var min=parseInt(group[0].style.zIndex)||0;$(group).each(function(i){this.style.zIndex=min+i});this[0].style.zIndex=min+group.length}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),
o=$(this).data("draggable").options;if(t.css("zIndex"))o._zIndex=t.css("zIndex");t.css("zIndex",o.zIndex)},stop:function(event,ui){var o=$(this).data("draggable").options;if(o._zIndex)$(ui.helper).css("zIndex",o._zIndex)}})})(jQuery);
(function($){$.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var o=this.options,accept=o.accept;this.isover=0;this.isout=1;this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[];
$.ui.ddmanager.droppables[o.scope].push(this);o.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];for(var i=0;i<drop.length;i++)if(drop[i]==this)drop.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(key,value){if(key=="accept")this.accept=$.isFunction(value)?value:function(d){return d.is(value)};$.Widget.prototype._setOption.apply(this,
arguments)},_activate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass)this.element.addClass(this.options.activeClass);draggable&&this._trigger("activate",event,this.ui(draggable))},_deactivate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass)this.element.removeClass(this.options.activeClass);draggable&&this._trigger("deactivate",event,this.ui(draggable))},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||
draggable.element)[0]==this.element[0])return;if(this.accept.call(this.element[0],draggable.currentItem||draggable.element)){if(this.options.hoverClass)this.element.addClass(this.options.hoverClass);this._trigger("over",event,this.ui(draggable))}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return;if(this.accept.call(this.element[0],draggable.currentItem||draggable.element)){if(this.options.hoverClass)this.element.removeClass(this.options.hoverClass);
this._trigger("out",event,this.ui(draggable))}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return false;var childrenIntersection=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var inst=$.data(this,"droppable");if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope==draggable.options.scope&&inst.accept.call(inst.element[0],draggable.currentItem||
draggable.element)&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance)){childrenIntersection=true;return false}});if(childrenIntersection)return false;if(this.accept.call(this.element[0],draggable.currentItem||draggable.element)){if(this.options.activeClass)this.element.removeClass(this.options.activeClass);if(this.options.hoverClass)this.element.removeClass(this.options.hoverClass);this._trigger("drop",event,this.ui(draggable));return this.element}return false},
ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}});$.extend($.ui.droppable,{version:"1.8"});$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset)return false;var x1=(draggable.positionAbs||draggable.position.absolute).left,x2=x1+draggable.helperProportions.width,y1=(draggable.positionAbs||draggable.position.absolute).top,y2=y1+draggable.helperProportions.height;var l=droppable.offset.left,r=l+droppable.proportions.width,
t=droppable.offset.top,b=t+droppable.proportions.height;switch(toleranceMode){case "fit":return l<x1&&x2<r&&t<y1&&y2<b;break;case "intersect":return l<x1+draggable.helperProportions.width/2&&x2-draggable.helperProportions.width/2<r&&t<y1+draggable.helperProportions.height/2&&y2-draggable.helperProportions.height/2<b;break;case "pointer":var draggableLeft=(draggable.positionAbs||draggable.position.absolute).left+(draggable.clickOffset||draggable.offset.click).left,draggableTop=(draggable.positionAbs||
draggable.position.absolute).top+(draggable.clickOffset||draggable.offset.click).top,isOver=$.ui.isOver(draggableTop,draggableLeft,t,l,droppable.proportions.height,droppable.proportions.width);return isOver;break;case "touch":return(y1>=t&&y1<=b||y2>=t&&y2<=b||y1<t&&y2>b)&&(x1>=l&&x1<=r||x2>=l&&x2<=r||x1<l&&x2>r);break;default:return false;break}};$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var m=$.ui.ddmanager.droppables[t.options.scope]||[];var type=event?
event.type:null;var list=(t.currentItem||t.element).find(":data(droppable)").addBack();droppablesLoop:for(var i=0;i<m.length;i++){if(m[i].options.disabled||t&&!m[i].accept.call(m[i].element[0],t.currentItem||t.element))continue;for(var j=0;j<list.length;j++)if(list[j]==m[i].element[0]){m[i].proportions.height=0;continue droppablesLoop}m[i].visible=m[i].element.css("display")!="none";if(!m[i].visible)continue;m[i].offset=m[i].element.offset();m[i].proportions={width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight};
if(type=="mousedown")m[i]._activate.call(m[i],event)}},drop:function(draggable,event){var dropped=false;$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options)return;if(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance))dropped=dropped||this._drop.call(this,event);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)){this.isout=1;this.isover=0;this._deactivate.call(this,
event)}});return dropped},drag:function(draggable,event){if(draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,event);$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var intersects=$.ui.intersect(draggable,this,this.options.tolerance);var c=!intersects&&this.isover==1?"isout":intersects&&this.isover==0?"isover":null;if(!c)return;var parentInstance;if(this.options.greedy){var parent=this.element.parents(":data(droppable):eq(0)");
if(parent.length){parentInstance=$.data(parent[0],"droppable");parentInstance.greedyChild=c=="isover"?1:0}}if(parentInstance&&c=="isover"){parentInstance["isover"]=0;parentInstance["isout"]=1;parentInstance._out.call(parentInstance,event)}this[c]=1;this[c=="isout"?"isover":"isout"]=0;this[c=="isover"?"_over":"_out"].call(this,event);if(parentInstance&&c=="isout"){parentInstance["isout"]=0;parentInstance["isover"]=1;parentInstance._over.call(parentInstance,event)}})}}})(jQuery);
(function($){$.widget("ui.resizable",$.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var self=this,o=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){if(/relative/.test(this.element.css("position"))&&$.browser.opera)this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap($('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),
top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=
this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",
nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var n=this.handles.split(",");this.handles={};for(var i=0;i<n.length;i++){var handle=$.trim(n[i]),hname="ui-resizable-"+handle;var axis=$('<div class="ui-resizable-handle '+hname+'"></div>');if(/sw|se|ne|nw/.test(handle))axis.css({zIndex:++o.zIndex});if("se"==handle)axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[handle]=".ui-resizable-"+handle;this.element.append(axis)}}this._renderAxis=
function(target){target=target||this.element;for(var i in this.handles){if(this.handles[i].constructor==String)this.handles[i]=$(this.handles[i],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var axis=$(this.handles[i],this.element),padWrapper=0;padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();var padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");
target.css(padPos,padWrapper);this._proportionallyResize()}if(!$(this.handles[i]).length)continue}};this._renderAxis(this.element);this._handles=$(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!self.resizing){if(this.className)var axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);self.axis=axis&&axis[1]?axis[1]:"se"}});if(o.autoHide){this._handles.hide();$(this.element).addClass("ui-resizable-autohide").hover(function(){$(this).removeClass("ui-resizable-autohide");
self._handles.show()},function(){if(!self.resizing){$(this).addClass("ui-resizable-autohide");self._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var _destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){_destroy(this.element);var wrapper=this.element;wrapper.after(this.originalElement.css({position:wrapper.css("position"),
width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this},_mouseCapture:function(event){var handle=false;for(var i in this.handles)if($(this.handles[i])[0]==event.target)handle=true;return!this.options.disabled&&handle},_mouseStart:function(event){var o=this.options,iniPos=this.element.position(),el=this.element;this.resizing=true;this.documentScroll=
{top:$(document).scrollTop(),left:$(document).scrollLeft()};if(el.is(".ui-draggable")||/absolute/.test(el.css("position")))el.css({position:"absolute",top:iniPos.top,left:iniPos.left});if($.browser.opera&&/relative/.test(el.css("position")))el.css({position:"relative",top:"auto",left:"auto"});this._renderProxy();var curleft=num(this.helper.css("left")),curtop=num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0}this.offset=
this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalPosition={left:curleft,top:curtop};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=typeof o.aspectRatio==
"number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1;var cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor",cursor=="auto"?this.axis+"-resize":cursor);el.addClass("ui-resizable-resizing");this._propagate("start",event);return true},_mouseDrag:function(event){var el=this.helper,o=this.options,props={},self=this,smp=this.originalMousePosition,a=this.axis;var dx=event.pageX-smp.left||0,dy=event.pageY-smp.top||0;var trigger=this._change[a];if(!trigger)return false;
var data=trigger.apply(this,[event,dx,dy]),ie6=$.browser.msie&&$.browser.version<7,csdif=this.sizeDiff;if(this._aspectRatio||event.shiftKey)data=this._updateRatio(data,event);data=this._respectSize(data,event);this._propagate("resize",event);el.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length)this._proportionallyResize();this._updateCache(data);this._trigger("resize",event,
this.ui());return false},_mouseStop:function(event){this.resizing=false;var o=this.options,self=this;if(this._helper){var pr=this._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:self.sizeDiff.height,soffsetw=ista?0:self.sizeDiff.width;var s={width:self.size.width-soffsetw,height:self.size.height-soffseth},left=parseInt(self.element.css("left"),10)+(self.position.left-self.originalPosition.left)||null,top=parseInt(self.element.css("top"),
10)+(self.position.top-self.originalPosition.top)||null;if(!o.animate)this.element.css($.extend(s,{top:top,left:left}));self.helper.height(self.size.height);self.helper.width(self.size.width);if(this._helper&&!o.animate)this._proportionallyResize()}$("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper)this.helper.remove();return false},_updateCache:function(data){var o=this.options;this.offset=this.helper.offset();if(isNumber(data.left))this.position.left=
data.left;if(isNumber(data.top))this.position.top=data.top;if(isNumber(data.height))this.size.height=data.height;if(isNumber(data.width))this.size.width=data.width},_updateRatio:function(data,event){var o=this.options,cpos=this.position,csize=this.size,a=this.axis;if(data.height)data.width=csize.height*this.aspectRatio;else if(data.width)data.height=csize.width/this.aspectRatio;if(a=="sw"){data.left=cpos.left+(csize.width-data.width);data.top=null}if(a=="nw"){data.top=cpos.top+(csize.height-data.height);
data.left=cpos.left+(csize.width-data.width)}return data},_respectSize:function(data,event){var el=this.helper,o=this.options,pRatio=this._aspectRatio||event.shiftKey,a=this.axis,ismaxw=isNumber(data.width)&&o.maxWidth&&o.maxWidth<data.width,ismaxh=isNumber(data.height)&&o.maxHeight&&o.maxHeight<data.height,isminw=isNumber(data.width)&&o.minWidth&&o.minWidth>data.width,isminh=isNumber(data.height)&&o.minHeight&&o.minHeight>data.height;if(isminw)data.width=o.minWidth;if(isminh)data.height=o.minHeight;
if(ismaxw)data.width=o.maxWidth;if(ismaxh)data.height=o.maxHeight;var dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height;var cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw&&cw)data.left=dw-o.minWidth;if(ismaxw&&cw)data.left=dw-o.maxWidth;if(isminh&&ch)data.top=dh-o.minHeight;if(ismaxh&&ch)data.top=dh-o.maxHeight;var isNotwh=!data.width&&!data.height;if(isNotwh&&!data.left&&data.top)data.top=null;else if(isNotwh&&!data.top&&data.left)data.left=null;return data},
_proportionallyResize:function(){var o=this.options;if(!this._proportionallyResizeElements.length)return;var element=this.helper||this.element;for(var i=0;i<this._proportionallyResizeElements.length;i++){var prel=this._proportionallyResizeElements[i];if(!this.borderDif){var b=[prel.css("borderTopWidth"),prel.css("borderRightWidth"),prel.css("borderBottomWidth"),prel.css("borderLeftWidth")],p=[prel.css("paddingTop"),prel.css("paddingRight"),prel.css("paddingBottom"),prel.css("paddingLeft")];this.borderDif=
$.map(b,function(v,i){var border=parseInt(v,10)||0,padding=parseInt(p[i],10)||0;return border+padding})}if($.browser.msie&&!!($(element).is(":hidden")||$(element).parents(":hidden").length))continue;prel.css({height:element.height()-this.borderDif[0]-this.borderDif[2]||0,width:element.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$('<div style="overflow:hidden;"></div>');
var ie6=$.browser.msie&&$.browser.version<7,ie6offset=ie6?1:0,pxyoffset=ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+pxyoffset,height:this.element.outerHeight()+pxyoffset,position:"absolute",left:this.elementOffset.left-ie6offset+"px",top:this.elementOffset.top-ie6offset+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(event,dx,dy){return{width:this.originalSize.width+dx}},w:function(event,
dx,dy){var o=this.options,cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx}},n:function(event,dx,dy){var o=this.options,cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy}},s:function(event,dx,dy){return{height:this.originalSize.height+dy}},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,
arguments),this._change.w.apply(this,[event,dx,dy]))},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);n!="resize"&&this._trigger(n,event,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,
helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});$.extend($.ui.resizable,{version:"1.8"});$.ui.plugin.add("resizable","alsoResize",{start:function(event,ui){var self=$(this).data("resizable"),o=self.options;var _store=function(exp){$(exp).each(function(){$(this).data("resizable-alsoresize",{width:parseInt($(this).width(),10),height:parseInt($(this).height(),10),left:parseInt($(this).css("left"),10),top:parseInt($(this).css("top"),
10)})})};if(typeof o.alsoResize=="object"&&!o.alsoResize.parentNode)if(o.alsoResize.length){o.alsoResize=o.alsoResize[0];_store(o.alsoResize)}else $.each(o.alsoResize,function(exp,c){_store(exp)});else _store(o.alsoResize)},resize:function(event,ui){var self=$(this).data("resizable"),o=self.options,os=self.originalSize,op=self.originalPosition;var delta={height:self.size.height-os.height||0,width:self.size.width-os.width||0,top:self.position.top-op.top||0,left:self.position.left-op.left||0},_alsoResize=
function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("resizable-alsoresize"),style={},css=c&&c.length?c:["width","height","top","left"];$.each(css||["width","height","top","left"],function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0)style[prop]=sum||null});if(/relative/.test(el.css("position"))&&$.browser.opera){self._revertToRelativePosition=true;el.css({position:"absolute",top:"auto",left:"auto"})}el.css(style)})};if(typeof o.alsoResize=="object"&&!o.alsoResize.nodeType)$.each(o.alsoResize,
function(exp,c){_alsoResize(exp,c)});else _alsoResize(o.alsoResize)},stop:function(event,ui){var self=$(this).data("resizable");if(self._revertToRelativePosition&&$.browser.opera){self._revertToRelativePosition=false;el.css({position:"relative"})}$(this).removeData("resizable-alsoresize-start")}});$.ui.plugin.add("resizable","animate",{stop:function(event,ui){var self=$(this).data("resizable"),o=self.options;var pr=self._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),
soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:self.sizeDiff.height,soffsetw=ista?0:self.sizeDiff.width;var style={width:self.size.width-soffsetw,height:self.size.height-soffseth},left=parseInt(self.element.css("left"),10)+(self.position.left-self.originalPosition.left)||null,top=parseInt(self.element.css("top"),10)+(self.position.top-self.originalPosition.top)||null;self.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data=
{width:parseInt(self.element.css("width"),10),height:parseInt(self.element.css("height"),10),top:parseInt(self.element.css("top"),10),left:parseInt(self.element.css("left"),10)};if(pr&&pr.length)$(pr[0]).css({width:data.width,height:data.height});self._updateCache(data);self._propagate("resize",event)}})}});$.ui.plugin.add("resizable","containment",{start:function(event,ui){var self=$(this).data("resizable"),o=self.options,el=self.element;var oc=o.containment,ce=oc instanceof $?oc.get(0):/parent/.test(oc)?
el.parent().get(0):oc;if(!ce)return;self.containerElement=$(ce);if(/document/.test(oc)||oc==document){self.containerOffset={left:0,top:0};self.containerPosition={left:0,top:0};self.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}}else{var element=$(ce),p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=num(element.css("padding"+name))});self.containerOffset=element.offset();self.containerPosition=
element.position();self.containerSize={height:element.innerHeight()-p[3],width:element.innerWidth()-p[1]};var co=self.containerOffset,ch=self.containerSize.height,cw=self.containerSize.width,width=$.ui.hasScroll(ce,"left")?ce.scrollWidth:cw,height=$.ui.hasScroll(ce)?ce.scrollHeight:ch;self.parentData={element:ce,left:co.left,top:co.top,width:width,height:height}}},resize:function(event,ui){var self=$(this).data("resizable"),o=self.options,ps=self.containerSize,co=self.containerOffset,cs=self.size,
cp=self.position,pRatio=self._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=self.containerElement;if(ce[0]!=document&&/static/.test(ce.css("position")))cop=co;if(cp.left<(self._helper?co.left:0)){self.size.width=self.size.width+(self._helper?self.position.left-co.left:self.position.left-cop.left);if(pRatio)self.size.height=self.size.width/o.aspectRatio;self.position.left=o.helper?co.left:0}if(cp.top<(self._helper?co.top:0)){self.size.height=self.size.height+(self._helper?self.position.top-co.top:
self.position.top);if(pRatio)self.size.width=self.size.height*o.aspectRatio;self.position.top=self._helper?co.top:0}self.offset.left=self.parentData.left+self.position.left;self.offset.top=self.parentData.top+self.position.top;var woset=Math.abs((self._helper?self.offset.left-cop.left:self.offset.left-cop.left)+self.sizeDiff.width),hoset=Math.abs((self._helper?self.offset.top-cop.top:self.offset.top-co.top)+self.sizeDiff.height);var isParent=self.containerElement.get(0)==self.element.parent().get(0),
isOffsetRelative=/relative|absolute/.test(self.containerElement.css("position"));if(isParent&&isOffsetRelative)woset-=self.parentData.left;if(woset+self.size.width>=self.parentData.width){self.size.width=self.parentData.width-woset;if(pRatio)self.size.height=self.size.width/self.aspectRatio}if(hoset+self.size.height>=self.parentData.height){self.size.height=self.parentData.height-hoset;if(pRatio)self.size.width=self.size.height*self.aspectRatio}},stop:function(event,ui){var self=$(this).data("resizable"),
o=self.options,cp=self.position,co=self.containerOffset,cop=self.containerPosition,ce=self.containerElement;var helper=$(self.helper),ho=helper.offset(),w=helper.outerWidth()-self.sizeDiff.width,h=helper.outerHeight()-self.sizeDiff.height;if(self._helper&&!o.animate&&/relative/.test(ce.css("position")))$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});if(self._helper&&!o.animate&&/static/.test(ce.css("position")))$(this).css({left:ho.left-cop.left-co.left,width:w,height:h})}});$.ui.plugin.add("resizable",
"ghost",{start:function(event,ui){var self=$(this).data("resizable"),o=self.options,cs=self.size;self.ghost=self.originalElement.clone();self.ghost.css({opacity:0.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof o.ghost=="string"?o.ghost:"");self.ghost.appendTo(self.helper)},resize:function(event,ui){var self=$(this).data("resizable"),o=self.options;if(self.ghost)self.ghost.css({position:"relative",height:self.size.height,
width:self.size.width})},stop:function(event,ui){var self=$(this).data("resizable"),o=self.options;if(self.ghost&&self.helper)self.helper.get(0).removeChild(self.ghost.get(0))}});$.ui.plugin.add("resizable","grid",{resize:function(event,ui){var self=$(this).data("resizable"),o=self.options,cs=self.size,os=self.originalSize,op=self.originalPosition,a=self.axis,ratio=o._aspectRatio||event.shiftKey;o.grid=typeof o.grid=="number"?[o.grid,o.grid]:o.grid;var ox=Math.round((cs.width-os.width)/(o.grid[0]||
1))*(o.grid[0]||1),oy=Math.round((cs.height-os.height)/(o.grid[1]||1))*(o.grid[1]||1);if(/^(se|s|e)$/.test(a)){self.size.width=os.width+ox;self.size.height=os.height+oy}else if(/^(ne)$/.test(a)){self.size.width=os.width+ox;self.size.height=os.height+oy;self.position.top=op.top-oy}else if(/^(sw)$/.test(a)){self.size.width=os.width+ox;self.size.height=os.height+oy;self.position.left=op.left-ox}else{self.size.width=os.width+ox;self.size.height=os.height+oy;self.position.top=op.top-oy;self.position.left=
op.left-ox}}});var num=function(v){return parseInt(v,10)||0};var isNumber=function(value){return!isNaN(parseInt(value,10))}})(jQuery);
(function($){$.widget("ui.selectable",$.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var self=this;this.element.addClass("ui-selectable");this.dragged=false;var selectees;this.refresh=function(){selectees=$(self.options.filter,self.element[0]);selectees.each(function(){var $this=$(this);var pos=$this.offset();$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+
$this.outerHeight(),startselected:false,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")})})};this.refresh();this.selectees=selectees.addClass("ui-selectee");this._mouseInit({preventClickEvents:false});this.helper=$(document.createElement("div")).css("opacity","0.3").addClass("ui-selectable-helper").addClass("ui-corner-all")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");
this._mouseDestroy();return this},_mouseStart:function(event){var self=this;this.opos=[event.pageX,event.pageY];if(this.options.disabled)return;var options=this.options;this.selectees=$(options.filter,this.element[0]);if(this.element[0]==event.target){this._cancelCurrentMouseDown=true;return true}if(self.options.shouldAllowSelection){self._preventDrag=true;if(!self.options.shouldAllowSelection(event))return false}this._trigger("start",event);if(!event.shiftKey){$(options.appendTo).append(this.helper);
this.helper.css({"z-index":100,"position":"absolute","left":event.clientX-2,"top":event.clientY-2,"width":0,"height":0})}if(options.autoRefresh)this.refresh();this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=true;if(!event.metaKey&&!event.shiftKey){selectee.$element.removeClass("ui-selected");selectee.selected=false;selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;self._trigger("unselecting",event,{unselecting:selectee.element})}});
var newlySelecting=null;$(event.target).parents().addBack().each(function(){var selectee=$.data(this,"selectable-item");if(selectee){selectee.$element.removeClass("ui-unselecting").addClass("ui-selecting");selectee.unselecting=false;selectee.selecting=true;selectee.selected=true;self._trigger("selecting",event,{selecting:selectee.element});newlySelecting=selectee.$element;return false}});if(event.shiftKey){var selected=this.selectees.filter(".ui-selected");if(selected.length){var first=selected.filter(":first");
var last=selected.filter(":last");var info={isAfterFirst:false,isAfterLast:false,isBeforeFirst:false,isBeforeLast:false};newlySelecting.prevAll(".ui-selected").each(function(){if($(this)[0]==first[0])info.isAfterFirst=true;if($(this)[0]==last[0])info.isAfterLast=true});newlySelecting.nextAll(".ui-selected").each(function(){if($(this)[0]==first[0])info.isBeforeFirst=true;if($(this)[0]==last[0])info.isBeforeLast=true});var isBefore=info.isBeforeFirst&&info.isBeforeLast;var isBetween=info.isAfterFirst&&
info.isBeforeLast;var isAfter=info.isAfterFirst&&info.isAfterLast;if(isBefore)for(var current=newlySelecting.next();current.length&&current[0]!=last[0];current=current.next()){current.addClass("ui-selecting");self._trigger("selecting",event,{selecting:current[0]})}else if(isBetween)for(var current=first.next();current.length&&current[0]!=newlySelecting[0];current=current.next()){current.addClass("ui-selecting");self._trigger("selecting",event,{selecting:current[0]})}else if(isAfter)for(var current=
newlySelecting.prev();current.length&&current[0]!=first[0];current=current.prev()){current.addClass("ui-selecting");self._trigger("selecting",event,{selecting:current[0]})}}this._preventDrag=true}},_mouseDrag:function(event){var self=this;this.dragged=true;if(this.options.disabled)return;if(this._preventDrag)return;var options=this.options;var x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;if(x1>x2){var tmp=x2;x2=x1;x1=tmp}if(y1>y2){var tmp=y2;y2=y1;y1=tmp}this.helper.css({left:x1,
top:y1,width:x2-x1,height:y2-y1});this.selectees.each(function(){var selectee=$.data(this,"selectable-item");if(!selectee||selectee.element==self.element[0])return;var hit=false;if(options.tolerance=="touch")hit=!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1);else if(options.tolerance=="fit")hit=selectee.left>x1&&selectee.right<x2&&selectee.top>y1&&selectee.bottom<y2;if(hit){if(selectee.selected){selectee.$element.removeClass("ui-selected");selectee.selected=false}if(selectee.unselecting){selectee.$element.removeClass("ui-unselecting");
selectee.unselecting=false}if(!selectee.selecting){selectee.$element.addClass("ui-selecting");selectee.selecting=true;self._trigger("selecting",event,{selecting:selectee.element})}}else{if(selectee.selecting)if(event.metaKey&&selectee.startselected){selectee.$element.removeClass("ui-selecting");selectee.selecting=false;selectee.$element.addClass("ui-selected");selectee.selected=true}else{selectee.$element.removeClass("ui-selecting");selectee.selecting=false;if(selectee.startselected){selectee.$element.addClass("ui-unselecting");
selectee.unselecting=true}self._trigger("unselecting",event,{unselecting:selectee.element})}if(selectee.selected)if(!event.metaKey&&!selectee.startselected){selectee.$element.removeClass("ui-selected");selectee.selected=false;selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;self._trigger("unselecting",event,{unselecting:selectee.element})}}});return true},_mouseStop:function(event){var self=this;this.dragged=false;this._preventDrag=false;var options=this.options;$(".ui-unselecting",
this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-unselecting");selectee.unselecting=false;selectee.startselected=false;self._trigger("unselected",event,{unselected:selectee.element})});$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-selecting").addClass("ui-selected");selectee.selecting=false;selectee.selected=true;selectee.startselected=true;self._trigger("selected",
event,{selected:selectee.element})});this._trigger("stop",event);this.helper.remove();return false}});$.extend($.ui.selectable,{version:"1.8"})})(jQuery);
(function($){$.widget("ui.sortable",$.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var o=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData("sortable-item");return this},_mouseCapture:function(event,overrideHandle){if(this.reverting)return false;if(this.options.disabled||
this.options.type=="static")return false;this._refreshItems(event);var currentItem=null,self=this,nodes=$(event.target).parents().each(function(){if($.data(this,"sortable-item")==self){currentItem=$(this);return false}});if($.data(event.target,"sortable-item")==self)currentItem=$(event.target);if(!currentItem)return false;if(this.options.handle&&!overrideHandle){var validHandle=false;$(this.options.handle,currentItem).find("*").addBack().each(function(){if(this==event.target)validHandle=true});if(!validHandle)return false}this.currentItem=
currentItem;this._removeCurrentsFromItems();return true},_mouseStart:function(event,overrideHandle,noActivation){var o=this.options,self=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=
this.helper.css("position");$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0])this.currentItem.hide();
this._createPlaceholder();if(o.containment)this._setContainment();if(o.cursor){if($("body").css("cursor"))this._storedCursor=$("body").css("cursor");$("body").css("cursor",o.cursor)}if(o.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",o.opacity)}if(o.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",o.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=
this.scrollParent.offset();this._trigger("start",event,this._uiHash());if(!this._preserveHelperProportions)this._cacheHelperProportions();if(!noActivation)for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",event,self._uiHash(this));if($.ui.ddmanager)$.ui.ddmanager.current=this;if($.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,event);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(event);return true},_mouseDrag:function(event){this.position=
this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var o=this.options,scrolled=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity)this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-this.overflowOffset.top<o.scrollSensitivity)this.scrollParent[0].scrollTop=
scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity)this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-this.overflowOffset.left<o.scrollSensitivity)this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed}else{if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()-
o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)}if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,
event)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item);if(!intersection)continue;if(itemElement!=this.currentItem[0]&&this.placeholder[intersection==1?"next":"prev"]()[0]!=
itemElement&&!$.ui.contains(this.placeholder[0],itemElement)&&(this.options.type=="semi-dynamic"?!$.ui.contains(this.element[0],itemElement):true)){this.direction=intersection==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(item))this._rearrange(event,item);else break;this._trigger("change",event,this._uiHash());break}}this._contactContainers(event);if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);this._trigger("sort",event,this._uiHash());this.lastPositionAbs=this.positionAbs;
return false},_mouseStop:function(event,noPropagation){if(!event)return;if($.ui.ddmanager&&!this.options.dropBehaviour)$.ui.ddmanager.drop(this,event);if(this.options.revert){var self=this;var cur=self.placeholder.offset();self.reverting=true;$(this.helper).animate({left:cur.left-this.offset.parent.left-self.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:cur.top-this.offset.parent.top-self.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},
parseInt(this.options.revert,10)||500,function(){self._clear(event)})}else this._clear(event,noPropagation);return false},cancel:function(){var self=this;if(this.dragging){this._mouseUp();if(this.options.helper=="original")this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");else this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,self._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",
null,self._uiHash(this));this.containers[i].containerCache.over=0}}}if(this.placeholder[0].parentNode)this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.options.helper!="original"&&this.helper&&this.helper[0].parentNode)this.helper.remove();$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev)$(this.domPosition.prev).after(this.currentItem);else $(this.domPosition.parent).prepend(this.currentItem);return this},serialize:function(o){var items=
this._getItemsAsjQuery(o&&o.connected);var str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[-=_](.+)/);if(res)str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]))});return str.join("&")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected);var ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")});return ret},_intersectsWith:function(item){var x1=this.positionAbs.left,
x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height;var l=item.left,r=l+item.width,t=item.top,b=t+item.height;var dyClick=this.offset.click.top,dxClick=this.offset.click.left;var isOverElement=y1+dyClick>t&&y1+dyClick<b&&x1+dxClick>l&&x1+dxClick<r;if(this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"])return isOverElement;
else return l<x1+this.helperProportions.width/2&&x2-this.helperProportions.width/2<r&&t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b},_intersectsWithPointer:function(item){var isOverElementHeight=$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),
horizontalDirection=this._getDragHorizontalDirection();if(!isOverElement)return false;return this.floating?horizontalDirection&&horizontalDirection=="right"||verticalDirection=="down"?2:1:verticalDirection&&(verticalDirection=="down"?2:1)},_intersectsWithSides:function(item){var isOverBottomHalf=$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+item.width/2,item.width),
verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection)return horizontalDirection=="right"&&isOverRightHalf||horizontalDirection=="left"&&!isOverRightHalf;else return verticalDirection&&(verticalDirection=="down"&&isOverBottomHalf||verticalDirection=="up"&&!isOverBottomHalf)},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!=0&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=
this.positionAbs.left-this.lastPositionAbs.left;return delta!=0&&(delta>0?"right":"left")},refresh:function(event){this._refreshItems(event);this.refreshPositions();return this},_connectWith:function(){var options=this.options;return options.connectWith.constructor==String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){var self=this;var items=[];var queries=[];var connectWith=this._connectWith();if(connectWith&&connected)for(var i=connectWith.length-1;i>=0;i--){var cur=
$(connectWith[i]);for(var j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],"sortable");if(inst&&inst!=this&&!inst.options.disabled)queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst])}}queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(var i=queries.length-1;i>=0;i--)queries[i][0].each(function(){items.push(this)});return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data(sortable-item)");for(var i=0;i<this.items.length;i++)for(var j=0;j<list.length;j++)if(list[j]==this.items[i].item[0])this.items.splice(i,1)},_refreshItems:function(event){this.items=[];this.containers=[this];var items=this.items;var self=this;var queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],
event,{item:this.currentItem}):$(this.options.items,this.element),this]];var connectWith=this._connectWith();if(connectWith)for(var i=connectWith.length-1;i>=0;i--){var cur=$(connectWith[i]);for(var j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],"sortable");if(inst&&inst!=this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst)}}}for(var i=
queries.length-1;i>=0;i--){var targetData=queries[i][1];var _queries=queries[i][0];for(var j=0,queriesLength=_queries.length;j<queriesLength;j++){var item=$(_queries[j]);item.data("sortable-item",targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0})}}},refreshPositions:function(fast){if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();for(var i=this.items.length-1;i>=0;i--){var item=this.items[i];var t=this.options.toleranceElement?$(this.options.toleranceElement,
item.item):item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight()}var p=t.offset();item.left=p.left;item.top=p.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();
this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(that){var self=that||this,o=self.options;if(!o.placeholder||o.placeholder.constructor==String){var className=o.placeholder;o.placeholder={element:function(){var el=$(document.createElement(self.currentItem[0].nodeName)).addClass(className||self.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!className)el.style.visibility="hidden";
return el},update:function(container,p){if(className&&!o.forcePlaceholderSize)return;if(!p.height())p.height(self.currentItem.innerHeight()-parseInt(self.currentItem.css("paddingTop")||0,10)-parseInt(self.currentItem.css("paddingBottom")||0,10));if(!p.width())p.width(self.currentItem.innerWidth()-parseInt(self.currentItem.css("paddingLeft")||0,10)-parseInt(self.currentItem.css("paddingRight")||0,10))}}}self.placeholder=$(o.placeholder.element.call(self.element,self.currentItem));self.currentItem.after(self.placeholder);
o.placeholder.update(self,self.placeholder)},_contactContainers:function(event){var innermostContainer=null,innermostIndex=null;for(var i=this.containers.length-1;i>=0;i--){if($.ui.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.ui.contains(this.containers[i].element[0],innermostContainer.element[0]))continue;innermostContainer=this.containers[i];innermostIndex=i}else if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",
event,this._uiHash(this));this.containers[i].containerCache.over=0}}if(!innermostContainer)return;if(this.containers.length===1){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1}else if(this.currentContainer!=this.containers[innermostIndex]){var dist=1E4;var itemWithLeastDistance=null;var base=this.positionAbs[this.containers[innermostIndex].floating?"left":"top"];for(var j=this.items.length-1;j>=0;j--){if(!$.ui.contains(this.containers[innermostIndex].element[0],
this.items[j].item[0]))continue;var cur=this.items[j][this.containers[innermostIndex].floating?"left":"top"];if(Math.abs(cur-base)<dist){dist=Math.abs(cur-base);itemWithLeastDistance=this.items[j]}}if(!itemWithLeastDistance&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[innermostIndex];itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger("change",event,this._uiHash());
this.containers[innermostIndex]._trigger("change",event,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=this.options;var helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):o.helper=="clone"?this.currentItem.clone():this.currentItem;if(!helper.parents("body").length)$(o.appendTo!=
"parent"?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);if(helper[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(helper[0].style.width==""||o.forceHelperSize)helper.width(this.currentItem.width());if(helper[0].style.height==""||o.forceHelperSize)helper.height(this.currentItem.height());return helper},
_adjustOffsetFromHelper:function(obj){if(typeof obj=="string")obj=obj.split(" ");if($.isArray(obj))obj={left:+obj[0],top:+obj[1]||0};if("left"in obj)this.offset.click.left=obj.left+this.margins.left;if("right"in obj)this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;if("top"in obj)this.offset.click.top=obj.top+this.margins.top;if("bottom"in obj)this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=
this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&$.browser.msie)po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+
(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),
10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o=this.options;if(o.containment=="parent")o.containment=this.helper[0].parentNode;if(o.containment=="document"||o.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$(o.containment=="document"?document:window).width()-this.helperProportions.width-
this.margins.left,($(o.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(o.containment)){var ce=$(o.containment)[0];var co=$(o.containment).offset();var over=$(ce).css("overflow")!="hidden";this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+
(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(d,
pos){if(!pos)pos=this.position;var mod=d=="absolute"?1:-1;var o=this.options,scroll=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-($.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*
mod),left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-($.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod)}},_generatePosition:function(event){var o=this.options,scroll=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);
if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();var pageX=event.pageX;var pageY=event.pageY;if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0])pageX=this.containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<this.containment[1])pageY=this.containment[1]+this.offset.click.top;if(event.pageX-this.offset.click.left>this.containment[2])pageX=
this.containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>this.containment[3])pageY=this.containment[3]+this.offset.click.top}if(o.grid){var top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?!(top-this.offset.click.top<this.containment[1]||top-this.offset.click.top>this.containment[3])?top:!(top-this.offset.click.top<this.containment[1])?top-o.grid[1]:top+o.grid[1]:top;var left=this.originalPageX+Math.round((pageX-this.originalPageX)/
o.grid[0])*o.grid[0];pageX=this.containment?!(left-this.offset.click.left<this.containment[0]||left-this.offset.click.left>this.containment[2])?left:!(left-this.offset.click.left<this.containment[0])?left-o.grid[0]:left+o.grid[0]:left}}return{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+($.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+($.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?i.item[0]:i.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var self=this,counter=this.counter;window.setTimeout(function(){if(counter==self.counter)self.refreshPositions(!hardRefresh)},
0)},_clear:function(event,noPropagation){this.reverting=false;var delayedTriggers=[],self=this;if(!this._noFinalSort&&this.currentItem[0].parentNode)this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!noPropagation)delayedTriggers.push(function(event){this._trigger("receive",
event,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!noPropagation)delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash())});if(!$.ui.contains(this.element[0],this.currentItem[0])){if(!noPropagation)delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash())});for(var i=this.containers.length-1;i>=0;i--)if($.ui.contains(this.containers[i].element[0],
this.currentItem[0])&&!noPropagation){delayedTriggers.push(function(c){return function(event){c._trigger("receive",event,this._uiHash(this))}}.call(this,this.containers[i]));delayedTriggers.push(function(c){return function(event){c._trigger("update",event,this._uiHash(this))}}.call(this,this.containers[i]))}}for(var i=this.containers.length-1;i>=0;i--){if(!noPropagation)delayedTriggers.push(function(c){return function(event){c._trigger("deactivate",event,this._uiHash(this))}}.call(this,this.containers[i]));
if(this.containers[i].containerCache.over){delayedTriggers.push(function(c){return function(event){c._trigger("out",event,this._uiHash(this))}}.call(this,this.containers[i]));this.containers[i].containerCache.over=0}}if(this._storedCursor)$("body").css("cursor",this._storedCursor);if(this._storedOpacity)this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!noPropagation){this._trigger("beforeStop",
event,this._uiHash());for(var i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return false}if(!noPropagation)this._trigger("beforeStop",event,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!=this.currentItem[0])this.helper.remove();this.helper=null;if(!noPropagation){for(var i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}this.fromOutside=
false;return true},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false)this.cancel()},_uiHash:function(inst){var self=inst||this;return{helper:self.helper,placeholder:self.placeholder||$([]),position:self.position,originalPosition:self.originalPosition,offset:self.positionAbs,item:self.currentItem,sender:inst?inst.element:null}}});$.extend($.ui.sortable,{version:"1.8"})})(jQuery);
(function($){$.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},_create:function(){var o=this.options,self=this;this.running=0;this.element.addClass("ui-accordion ui-widget ui-helper-reset");
if(this.element[0].nodeName=="UL")this.element.children("li").addClass("ui-accordion-li-fix");this.headers=this.element.find(o.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){$(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){$(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){$(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){$(this).removeClass("ui-state-focus")});
this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(o.navigation){var current=this.element.find("a").filter(o.navigationFilter);if(current.length){var header=current.closest(".ui-accordion-header");if(header.length)this.active=header;else this.active=current.closest(".ui-accordion-content").prev()}}this.active=this._findActive(this.active||o.active).toggleClass("ui-state-default").toggleClass("ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");
this.active.next().addClass("ui-accordion-content-active");this._createIcons();if($.browser.msie)this.element.find("a").css("zoom","1");this.resize();this.element.attr("role","tablist");this.headers.attr("role","tab").bind("keydown",function(event){return self._keydown(event)}).next().attr("role","tabpanel");this.headers.not(this.active||"").attr("aria-expanded","false").attr("tabIndex","-1").next().hide();if(!this.active.length)this.headers.eq(0).attr("tabIndex","0");else this.active.attr("aria-expanded",
"true").attr("tabIndex","0");if(!$.browser.safari)this.headers.find("a").attr("tabIndex","-1");if(o.event)this.headers.bind(o.event+".accordion",function(event){self._clickHandler.call(self,event,this);event.preventDefault()})},_createIcons:function(){var o=this.options;if(o.icons){$("<span/>").addClass("ui-icon "+o.icons.header).prependTo(this.headers);this.active.find(".ui-icon").toggleClass(o.icons.header).toggleClass(o.icons.headerSelected);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();
this.element.removeClass("ui-accordion-icons")},destroy:function(){var o=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role").unbind(".accordion").removeData("accordion");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabindex");this.headers.find("a").removeAttr("tabindex");this._destroyIcons();var contents=
this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active");if(o.autoHeight||o.fillHeight)contents.css("height","");return this},_setOption:function(key,value){$.Widget.prototype._setOption.apply(this,arguments);if(key=="active")this.activate(value);if(key=="icons"){this._destroyIcons();if(value)this._createIcons()}},_keydown:function(event){var o=this.options,keyCode=$.ui.keyCode;if(o.disabled||
event.altKey||event.ctrlKey)return;var length=this.headers.length;var currentIndex=this.headers.index(event.target);var toFocus=false;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._clickHandler({target:event.target},event.target);event.preventDefault()}if(toFocus){$(event.target).attr("tabIndex","-1");
$(toFocus).attr("tabIndex","0");toFocus.focus();return false}return true},resize:function(){var o=this.options,maxHeight;if(o.fillSpace){if($.browser.msie){var defOverflow=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}maxHeight=this.element.parent().height();if($.browser.msie)this.element.parent().css("overflow",defOverflow);this.headers.each(function(){maxHeight-=$(this).outerHeight(true)});this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-
$(this).innerHeight()+$(this).height()))}).css("overflow","auto")}else if(o.autoHeight){maxHeight=0;this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).height())}).height(maxHeight)}return this},activate:function(index){this.options.active=index;var active=this._findActive(index)[0];this._clickHandler({target:active},active);return this},_findActive:function(selector){return selector?typeof selector=="number"?this.headers.filter(":eq("+selector+")"):this.headers.not(this.headers.not(selector)):
selector===false?$([]):this.headers.filter(":eq(0)")},_clickHandler:function(event,target){var o=this.options;if(o.disabled)return;if(!event.target){if(!o.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(o.icons.headerSelected).addClass(o.icons.header);this.active.next().addClass("ui-accordion-content-active");var toHide=this.active.next(),data={options:o,newHeader:$([]),oldHeader:o.active,newContent:$([]),
oldContent:toHide},toShow=this.active=$([]);this._toggle(toShow,toHide,data);return}var clicked=$(event.currentTarget||target);var clickedIsActive=clicked[0]==this.active[0];o.active=o.collapsible&&clickedIsActive?false:$(".ui-accordion-header",this.element).index(clicked);if(this.running||!o.collapsible&&clickedIsActive)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(o.icons.headerSelected).addClass(o.icons.header);
if(!clickedIsActive){clicked.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find(".ui-icon").removeClass(o.icons.header).addClass(o.icons.headerSelected);clicked.next().addClass("ui-accordion-content-active")}var toShow=clicked.next(),toHide=this.active.next(),data={options:o,newHeader:clickedIsActive&&o.collapsible?$([]):clicked,oldHeader:this.active,newContent:clickedIsActive&&o.collapsible?$([]):toShow,oldContent:toHide},down=this.headers.index(this.active[0])>
this.headers.index(clicked[0]);this.active=clickedIsActive?$([]):clicked;this._toggle(toShow,toHide,data,clickedIsActive,down);return},_toggle:function(toShow,toHide,data,clickedIsActive,down){var o=this.options,self=this;this.toShow=toShow;this.toHide=toHide;this.data=data;var complete=function(){if(!self)return;return self._completed.apply(self,arguments)};this._trigger("changestart",null,this.data);this.running=toHide.size()===0?toShow.size():toHide.size();if(o.animated){var animOptions={};if(o.collapsible&&
clickedIsActive)animOptions={toShow:$([]),toHide:toHide,complete:complete,down:down,autoHeight:o.autoHeight||o.fillSpace};else animOptions={toShow:toShow,toHide:toHide,complete:complete,down:down,autoHeight:o.autoHeight||o.fillSpace};if(!o.proxied)o.proxied=o.animated;if(!o.proxiedDuration)o.proxiedDuration=o.duration;o.animated=$.isFunction(o.proxied)?o.proxied(animOptions):o.proxied;o.duration=$.isFunction(o.proxiedDuration)?o.proxiedDuration(animOptions):o.proxiedDuration;var animations=$.ui.accordion.animations,
duration=o.duration,easing=o.animated;if(easing&&!animations[easing]&&!$.easing[easing])easing="slide";if(!animations[easing])animations[easing]=function(options){this.slide(options,{easing:easing,duration:duration||700})};animations[easing](animOptions)}else{if(o.collapsible&&clickedIsActive)toShow.toggle();else{toHide.hide();toShow.show()}complete(true)}toHide.prev().attr("aria-expanded","false").attr("tabIndex","-1").blur();toShow.prev().attr("aria-expanded","true").attr("tabIndex","0").focus()},
_completed:function(cancel){var o=this.options;this.running=cancel?0:--this.running;if(this.running)return;if(o.clearStyle)this.toShow.add(this.toHide).css({height:"",overflow:""});this.toHide.removeClass("ui-accordion-content-active");this._trigger("change",null,this.data)}});$.extend($.ui.accordion,{version:"1.8",animations:{slide:function(options,additions){options=$.extend({easing:"swing",duration:300},options,additions);if(!options.toHide.size()){options.toShow.animate({height:"show"},options);
return}if(!options.toShow.size()){options.toHide.animate({height:"hide"},options);return}var overflow=options.toShow.css("overflow"),percentDone=0,showProps={},hideProps={},fxAttrs=["height","paddingTop","paddingBottom"],originalWidth;var s=options.toShow;originalWidth=s[0].style.width;s.width(parseInt(s.parent().width(),10)-parseInt(s.css("paddingLeft"),10)-parseInt(s.css("paddingRight"),10)-(parseInt(s.css("borderLeftWidth"),10)||0)-(parseInt(s.css("borderRightWidth"),10)||0));$.each(fxAttrs,function(i,
prop){hideProps[prop]="hide";var parts=(""+$.css(options.toShow[0],prop)).match(/^([\d+-.]+)(.*)$/);showProps[prop]={value:parts[1],unit:parts[2]||"px"}});options.toShow.css({height:0,overflow:"hidden"}).show();options.toHide.filter(":hidden").each(options.complete).end().filter(":visible").animate(hideProps,{step:function(now,settings){if(settings.prop=="height")percentDone=settings.end-settings.start===0?0:(settings.now-settings.start)/(settings.end-settings.start);options.toShow[0].style[settings.prop]=
percentDone*showProps[settings.prop].value+showProps[settings.prop].unit},duration:options.duration,easing:options.easing,complete:function(){if(!options.autoHeight)options.toShow.css("height","");options.toShow.css("width",originalWidth);options.toShow.css({overflow:overflow});options.complete()}})},bounceslide:function(options){this.slide(options,{easing:options.down?"easeOutBounce":"swing",duration:options.down?1E3:200})}}})})(jQuery);
(function($){$.widget("ui.autocomplete",{options:{minLength:1,delay:300},_create:function(){var self=this,doc=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(event){var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:self._move("previousPage",event);break;case keyCode.PAGE_DOWN:self._move("nextPage",event);break;case keyCode.UP:self._move("previous",
event);event.preventDefault();break;case keyCode.DOWN:self._move("next",event);event.preventDefault();break;case keyCode.ENTER:if(self.menu.active)event.preventDefault();case keyCode.TAB:if(!self.menu.active)return;self.menu.select();break;case keyCode.ESCAPE:self.element.val(self.term);self.close(event);break;case keyCode.SHIFT:case keyCode.CONTROL:case 18:break;default:clearTimeout(self.searching);self.searching=setTimeout(function(){self.search(null,event)},self.options.delay);break}}).bind("focus.autocomplete",
function(){self.previous=self.element.val()}).bind("blur.autocomplete",function(event){clearTimeout(self.searching);self.closing=setTimeout(function(){self.close(event)},150)});this._initSource();this.response=function(){return self._response.apply(self,arguments)};this.menu=$("<ul></ul>").addClass("ui-autocomplete").appendTo("body",doc).menu({focus:function(event,ui){var item=ui.item.data("item.autocomplete");if(false!==self._trigger("focus",null,{item:item}))self.element.val(item.value)},selected:function(event,
ui){var item=ui.item.data("item.autocomplete");if(false!==self._trigger("select",event,{item:item}))self.element.val(item.value);self.close(event);self.previous=self.element.val();if(self.element[0]!==doc.activeElement)self.element.focus()},blur:function(event,ui){if(self.menu.element.is(":visible"))self.element.val(self.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");if($.fn.bgiframe)this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input ui-widget ui-widget-content").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");
this.menu.element.remove();$.Widget.prototype.destroy.call(this)},_setOption:function(key){$.Widget.prototype._setOption.apply(this,arguments);if(key==="source")this._initSource()},_initSource:function(){var array,url;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){var matcher=new RegExp($.ui.autocomplete.escapeRegex(request.term),"i");response($.grep(array,function(value){return matcher.test(value.label||value.value||value)}))}}else if(typeof this.options.source===
"string"){url=this.options.source;this.source=function(request,response){$.getJSON(url,request,response)}}else this.source=this.options.source},search:function(value,event){value=value!=null?value:this.element.val();if(value.length<this.options.minLength)return this.close(event);clearTimeout(this.closing);if(this._trigger("search")===false)return;return this._search(value)},_search:function(value){this.term=this.element.addClass("ui-autocomplete-loading").val();this.source({term:value},this.response)},
_response:function(content){if(content.length){content=this._normalize(content);this._suggest(content);this._trigger("open")}else this.close();this.element.removeClass("ui-autocomplete-loading")},close:function(event){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this._trigger("close",event);this.menu.element.hide();this.menu.deactivate()}if(this.previous!==this.element.val())this._trigger("change",event)},_normalize:function(items){if(items.length&&items[0].label&&items[0].value)return items;
return $.map(items,function(item){if(typeof item==="string")return{label:item,value:item};return $.extend({label:item.label||item.value,value:item.value||item.label},item)})},_suggest:function(items){var ul=this.menu.element.empty().zIndex(this.element.zIndex()+1),menuWidth,textWidth;this._renderMenu(ul,items);this.menu.deactivate();this.menu.refresh();this.menu.element.show().position({my:"left top",at:"left bottom",of:this.element,collision:"flip"});menuWidth=ul.width("").width();textWidth=this.element.width();
ul.width(Math.max(menuWidth,textWidth))},_renderMenu:function(ul,items){var self=this;$.each(items,function(index,item){self._renderItem(ul,item)})},_renderItem:function(ul,item){return $("<li></li>").data("item.autocomplete",item).append("<a>"+item.label+"</a>").appendTo(ul)},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,event);return}if(this.menu.first()&&/^previous/.test(direction)||this.menu.last()&&/^next/.test(direction)){this.element.val(this.term);
this.menu.deactivate();return}this.menu[direction]()},widget:function(){return this.menu.element}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")}})})(jQuery);
(function($){$.widget("ui.menu",{_create:function(){var self=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(e){e.preventDefault();self.select()});this.refresh()},refresh:function(){var self=this;var items=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");items.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(){self.activate($(this).parent())}).mouseleave(function(){self.deactivate()})},
activate:function(item){this.deactivate();if(this.hasScroll()){var offset=item.offset().top-this.element.offset().top,scroll=this.element.attr("scrollTop"),elementHeight=this.element.height();if(offset<0)this.element.attr("scrollTop",scroll+offset);else if(offset>elementHeight)this.element.attr("scrollTop",scroll+offset-elementHeight+item.height())}this.active=item.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",null,{item:item})},deactivate:function(){if(!this.active)return;
this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null},next:function(){this.move("next","li:first")},previous:function(){this.move("prev","li:last")},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(direction,edge){if(!this.active){this.activate(this.element.children(edge));return}var next=this.active[direction]();if(next.length)this.activate(next);
else this.activate(this.element.children(edge))},nextPage:function(){if(this.hasScroll()){if(!this.active||this.last()){this.activate(this.element.children(":first"));return}var base=this.active.offset().top,height=this.element.height(),result=this.element.children("li").filter(function(){var close=$(this).offset().top-base-height+$(this).height();return close<10&&close>-10});if(!result.length)result=this.element.children(":last");this.activate(result)}else this.activate(this.element.children(!this.active||
this.last()?":first":":last"))},previousPage:function(){if(this.hasScroll()){if(!this.active||this.first()){this.activate(this.element.children(":last"));return}var base=this.active.offset().top,height=this.element.height();result=this.element.children("li").filter(function(){var close=$(this).offset().top-base+height-$(this).height();return close<10&&close>-10});if(!result.length)result=this.element.children(":first");this.activate(result)}else this.activate(this.element.children(!this.active||this.first()?
":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(){this._trigger("selected",null,{item:this.active})}})})(jQuery);
(function($){var lastActive,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",otherClasses="ui-state-hover ui-state-active "+"ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon ui-button-text-only",formResetHandler=function(event){$(":ui-button",event.target.form).each(function(){var inst=$(this).data("button");setTimeout(function(){inst.refresh()},1)})},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);if(name)if(form)radios=
$(form).find("[name='"+name+"']");else radios=$("[name='"+name+"']",radio.ownerDocument).filter(function(){return!this.form});return radios};$.widget("ui.button",{options:{text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",formResetHandler);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var self=this,options=this.options,toggleButton=this.type==="checkbox"||this.type==="radio",
hoverClass="ui-state-hover"+(!toggleButton?" ui-state-active":""),focusClass="ui-state-focus";if(options.label===null)options.label=this.buttonElement.html();if(this.element.is(":disabled"))options.disabled=true;this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter.button",function(){if(options.disabled)return;$(this).addClass("ui-state-hover");if(this===lastActive)$(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(options.disabled)return;$(this).removeClass(hoverClass)}).bind("focus.button",
function(){$(this).addClass(focusClass)}).bind("blur.button",function(){$(this).removeClass(focusClass)});if(toggleButton)this.element.bind("change.button",function(){self.refresh()});if(this.type==="checkbox")this.buttonElement.bind("click.button",function(){if(options.disabled)return false;$(this).toggleClass("ui-state-active");self.buttonElement.attr("aria-pressed",self.element[0].checked)});else if(this.type==="radio")this.buttonElement.bind("click.button",function(){if(options.disabled)return false;
$(this).addClass("ui-state-active");self.buttonElement.attr("aria-pressed",true);var radio=self.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",false)});else{this.buttonElement.bind("mousedown.button",function(){if(options.disabled)return false;$(this).addClass("ui-state-active");lastActive=this;$(document).one("mouseup",function(){lastActive=null})}).bind("mouseup.button",function(){if(options.disabled)return false;
$(this).removeClass("ui-state-active")}).bind("keydown.button",function(event){if(options.disabled)return false;if(event.keyCode==$.ui.keyCode.SPACE||event.keyCode==$.ui.keyCode.ENTER)$(this).addClass("ui-state-active")}).bind("keyup.button",function(){$(this).removeClass("ui-state-active")});if(this.buttonElement.is("a"))this.buttonElement.keyup(function(event){if(event.keyCode===$.ui.keyCode.SPACE)$(this).click()})}this._setOption("disabled",options.disabled)},_determineButtonType:function(){if(this.element.is(":checkbox"))this.type=
"checkbox";else if(this.element.is(":radio"))this.type="radio";else if(this.element.is("input"))this.type="input";else this.type="button";if(this.type==="checkbox"||this.type==="radio"){this.buttonElement=this.element.parents().last().find("[for='"+this.element.attr("id")+"']");this.element.addClass("ui-helper-hidden-accessible");var checked=this.element.is(":checked");if(checked)this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",checked)}else this.buttonElement=
this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(baseClasses+" "+otherClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle)this.buttonElement.removeAttr("title");$.Widget.prototype.destroy.call(this)},_setOption:function(key,value){$.Widget.prototype._setOption.apply(this,arguments);if(key==="disabled")if(value)this.element.attr("disabled",
true);else this.element.removeAttr("disabled");this._resetButton()},refresh:function(){var isDisabled=this.element.is(":disabled");if(isDisabled!==this.options.disabled)this._setOption("disabled",isDisabled);if(this.type==="radio")radioGroup(this.element[0]).each(function(){if($(this).is(":checked"))$(this).button("widget").addClass("ui-state-active").attr("aria-pressed",true);else $(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",false)});else if(this.type==="checkbox")if(this.element.is(":checked"))this.buttonElement.addClass("ui-state-active").attr("aria-pressed",
true);else this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",false)},_resetButton:function(){if(this.type==="input"){if(this.options.label)this.element.val(this.options.label);return}var buttonElement=this.buttonElement,buttonText=$("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary;if(icons.primary||icons.secondary){buttonElement.addClass("ui-button-text-icon"+
(multipleIcons?"s":""));if(icons.primary)buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>");if(icons.secondary)buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>");if(!this.options.text){buttonElement.addClass(multipleIcons?"ui-button-icons-only":"ui-button-icon-only").removeClass("ui-button-text-icons ui-button-text-icon");if(!this.hasTitle)buttonElement.attr("title",buttonText)}}else buttonElement.addClass("ui-button-text-only")}});
$.widget("ui.buttonset",{_create:function(){this.element.addClass("ui-buttonset");this._init()},_init:function(){this.refresh()},_setOption:function(key,value){if(key==="disabled")this.buttons.button("option",key,value);$.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(":button, :submit, :reset, :checkbox, :radio, a, :data(button)").filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()},
destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");$.Widget.prototype.destroy.call(this)}})})(jQuery);
(function($){var uiDialogClasses="ui-dialog "+"ui-widget "+"ui-widget-content "+"ui-corner-all ";$.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:"center",resizable:true,show:null,stack:true,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");var self=this,options=self.options,title=
options.title||self.originalTitle||"&#160;",titleId=$.ui.dialog.getTitleId(self.element),uiDialog=(self.uiDialog=$("<div></div>")).appendTo(document.body).hide().addClass(uiDialogClasses+options.dialogClass).css({zIndex:options.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(event){if(options.closeOnEscape&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){self.close(event);event.preventDefault()}}).attr({role:"dialog","aria-labelledby":titleId}).mousedown(function(event){self.moveToTop(false,
event)}),uiDialogContent=self.element.show().removeAttr("title").addClass("ui-dialog-content "+"ui-widget-content").appendTo(uiDialog),uiDialogTitlebar=(self.uiDialogTitlebar=$("<div></div>")).addClass("ui-dialog-titlebar "+"ui-widget-header "+"ui-corner-all "+"ui-helper-clearfix").prependTo(uiDialog),uiDialogTitlebarClose=$('<a href="#"></a>').addClass("ui-dialog-titlebar-close "+"ui-corner-all").attr("role","button").hover(function(){uiDialogTitlebarClose.addClass("ui-state-hover")},function(){uiDialogTitlebarClose.removeClass("ui-state-hover")}).focus(function(){uiDialogTitlebarClose.addClass("ui-state-focus")}).blur(function(){uiDialogTitlebarClose.removeClass("ui-state-focus")}).click(function(event){self.close(event);
return false}).appendTo(uiDialogTitlebar),uiDialogTitlebarCloseText=(self.uiDialogTitlebarCloseText=$("<span></span>")).addClass("ui-icon "+"ui-icon-closethick").text(options.closeText).appendTo(uiDialogTitlebarClose),uiDialogTitle=$("<span></span>").addClass("ui-dialog-title").attr("id",titleId).html(title).prependTo(uiDialogTitlebar);if($.isFunction(options.beforeclose)&&!$.isFunction(options.beforeClose))options.beforeClose=options.beforeclose;uiDialogTitlebar.find("*").add(uiDialogTitlebar).disableSelection();
if(options.draggable&&$.fn.draggable)self._makeDraggable();if(options.resizable&&$.fn.resizable)self._makeResizable();self._createButtons(options.buttons);self._isOpen=false;if($.fn.bgiframe)uiDialog.bgiframe()},_init:function(){if(this.options.autoOpen)this.open()},destroy:function(){var self=this;if(self.overlay)self.overlay.destroy();self.uiDialog.hide();self.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");self.uiDialog.remove();
if(self.originalTitle)self.element.attr("title",self.originalTitle);return self},widget:function(){return this.uiDialog},close:function(event){var self=this,maxZ;if(false===self._trigger("beforeClose",event))return;if(self.overlay)self.overlay.destroy();self.uiDialog.unbind("keypress.ui-dialog");self._isOpen=false;if(self.options.hide)self.uiDialog.hide(self.options.hide,function(){self._trigger("close",event)});else{self.uiDialog.hide();self._trigger("close",event)}$.ui.dialog.overlay.resize();if(self.options.modal){maxZ=
0;$(".ui-dialog").each(function(){if(this!==self.uiDialog[0])maxZ=Math.max(maxZ,$(this).css("z-index"))});$.ui.dialog.maxZ=maxZ}return self},isOpen:function(){return this._isOpen},moveToTop:function(force,event){var self=this,options=self.options,saveScroll;if(options.modal&&!force||!options.stack&&!options.modal)return self._trigger("focus",event);if(options.zIndex>$.ui.dialog.maxZ)$.ui.dialog.maxZ=options.zIndex;if(self.overlay){$.ui.dialog.maxZ+=1;self.overlay.$el.css("z-index",$.ui.dialog.overlay.maxZ=
$.ui.dialog.maxZ)}saveScroll={scrollTop:self.element.attr("scrollTop"),scrollLeft:self.element.attr("scrollLeft")};$.ui.dialog.maxZ+=1;self.uiDialog.css("z-index",$.ui.dialog.maxZ);self.element.attr(saveScroll);self._trigger("focus",event);return self},open:function(){if(this._isOpen)return;var self=this,options=self.options,uiDialog=self.uiDialog;self.overlay=options.modal?new $.ui.dialog.overlay(self):null;if(uiDialog.next().length)uiDialog.appendTo("body");self._size();self._position(options.position);
uiDialog.show(options.show);self.moveToTop(true);if(options.modal)uiDialog.bind("keypress.ui-dialog",function(event){if(event.keyCode!==$.ui.keyCode.TAB)return;var tabbables=$(":tabbable",this),first=tabbables.filter(":first"),last=tabbables.filter(":last");if(event.target===last[0]&&!event.shiftKey){first.focus(1);return false}else if(event.target===first[0]&&event.shiftKey){last.focus(1);return false}});$([]).add(uiDialog.find(".ui-dialog-content :tabbable:first")).add(uiDialog.find(".ui-dialog-buttonpane :tabbable:first")).add(uiDialog).filter(":first").focus();
self._trigger("open");self._isOpen=true;return self},_createButtons:function(buttons){var self=this,hasButtons=false,uiDialogButtonPane=$("<div></div>").addClass("ui-dialog-buttonpane "+"ui-widget-content "+"ui-helper-clearfix");self.uiDialog.find(".ui-dialog-buttonpane").remove();if(typeof buttons==="object"&&buttons!==null)$.each(buttons,function(){return!(hasButtons=true)});if(hasButtons){$.each(buttons,function(name,fn){var button=$('<button type="button"></button>').text(name).click(function(){fn.apply(self.element[0],
arguments)}).appendTo(uiDialogButtonPane);if($.fn.button)button.button()});uiDialogButtonPane.appendTo(self.uiDialog)}},_makeDraggable:function(){var self=this,options=self.options,doc=$(document),heightBeforeDrag;function filteredUi(ui){return{position:ui.position,offset:ui.offset}}self.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){heightBeforeDrag=options.height==="auto"?"auto":$(this).height();
$(this).height($(this).height()).addClass("ui-dialog-dragging");self._trigger("dragStart",event,filteredUi(ui))},drag:function(event,ui){self._trigger("drag",event,filteredUi(ui))},stop:function(event,ui){options.position=[ui.position.left-doc.scrollLeft(),ui.position.top-doc.scrollTop()];$(this).removeClass("ui-dialog-dragging").height(heightBeforeDrag);self._trigger("dragStop",event,filteredUi(ui));$.ui.dialog.overlay.resize()}})},_makeResizable:function(handles){handles=handles===undefined?this.options.resizable:
handles;var self=this,options=self.options,position=self.uiDialog.css("position"),resizeHandles=typeof handles==="string"?handles:"n,e,s,w,se,sw,ne,nw";function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size}}self.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:self.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:self._minHeight(),handles:resizeHandles,
start:function(event,ui){$(this).addClass("ui-dialog-resizing");self._trigger("resizeStart",event,filteredUi(ui))},resize:function(event,ui){self._trigger("resize",event,filteredUi(ui))},stop:function(event,ui){$(this).removeClass("ui-dialog-resizing");options.height=$(this).height();options.width=$(this).width();self._trigger("resizeStop",event,filteredUi(ui));$.ui.dialog.overlay.resize()}}).css("position",position).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var options=
this.options;if(options.height==="auto")return options.minHeight;else return Math.min(options.minHeight,options.height)},_position:function(position){var myAt=[],offset=[0,0],isVisible;position=position||$.ui.dialog.prototype.options.position;if(typeof position==="string"||typeof position==="object"&&"0"in position){myAt=position.split?position.split(" "):[position[0],position[1]];if(myAt.length===1)myAt[1]=myAt[0];$.each(["left","top"],function(i,offsetPosition){if(+myAt[i]===myAt[i]){offset[i]=
myAt[i];myAt[i]=offsetPosition}})}else if(typeof position==="object"){if("left"in position){myAt[0]="left";offset[0]=position.left}else if("right"in position){myAt[0]="right";offset[0]=-position.right}if("top"in position){myAt[1]="top";offset[1]=position.top}else if("bottom"in position){myAt[1]="bottom";offset[1]=-position.bottom}}isVisible=this.uiDialog.is(":visible");if(!isVisible)this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position({my:myAt.join(" "),at:myAt.join(" "),offset:offset.join(" "),
of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;if(topOffset<0)$(this).css("top",pos.top-topOffset)}});if(!isVisible)this.uiDialog.hide()},_setOption:function(key,value){var self=this,uiDialog=self.uiDialog,isResizable=uiDialog.is(":data(resizable)"),resize=false;switch(key){case "beforeclose":key="beforeClose";break;case "buttons":self._createButtons(value);break;case "closeText":self.uiDialogTitlebarCloseText.text(""+value);break;case "dialogClass":uiDialog.removeClass(self.options.dialogClass).addClass(uiDialogClasses+
value);break;case "disabled":if(value)uiDialog.addClass("ui-dialog-disabled");else uiDialog.removeClass("ui-dialog-disabled");break;case "draggable":if(value)self._makeDraggable();else uiDialog.draggable("destroy");break;case "height":resize=true;break;case "maxHeight":if(isResizable)uiDialog.resizable("option","maxHeight",value);resize=true;break;case "maxWidth":if(isResizable)uiDialog.resizable("option","maxWidth",value);resize=true;break;case "minHeight":if(isResizable)uiDialog.resizable("option",
"minHeight",value);resize=true;break;case "minWidth":if(isResizable)uiDialog.resizable("option","minWidth",value);resize=true;break;case "position":self._position(value);break;case "resizable":if(isResizable&&!value)uiDialog.resizable("destroy");if(isResizable&&typeof value==="string")uiDialog.resizable("option","handles",value);if(!isResizable&&value!==false)self._makeResizable(value);break;case "title":$(".ui-dialog-title",self.uiDialogTitlebar).html(""+(value||"&#160;"));break;case "width":resize=
true;break}$.Widget.prototype._setOption.apply(self,arguments);if(resize)self._size()},_size:function(){var options=this.options,nonContentHeight;this.element.css("width","auto").hide();nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).height();this.element.css(options.height==="auto"?{minHeight:Math.max(options.minHeight-nonContentHeight,0),height:"auto"}:{minHeight:0,height:Math.max(options.height-nonContentHeight,0)}).show();if(this.uiDialog.is(":data(resizable)"))this.uiDialog.resizable("option",
"minHeight",this._minHeight())}});$.extend($.ui.dialog,{version:"1.8",uuid:0,maxZ:0,getTitleId:function($el){var id=$el.attr("id");if(!id){this.uuid+=1;id=this.uuid}return"ui-dialog-title-"+id},overlay:function(dialog){this.$el=$.ui.dialog.overlay.create(dialog)}});$.extend($.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:$.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(event){return event+".dialog-overlay"}).join(" "),create:function(dialog){if(this.instances.length===
0){setTimeout(function(){if($.ui.dialog.overlay.instances.length)$(document).bind($.ui.dialog.overlay.events,function(event){return $(event.target).zIndex()>=$.ui.dialog.overlay.maxZ})},1);$(document).bind("keydown.dialog-overlay",function(event){if(dialog.options.closeOnEscape&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){dialog.close(event);event.preventDefault()}});$(window).bind("resize.dialog-overlay",$.ui.dialog.overlay.resize)}var $el=(this.oldInstances.pop()||$("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),
height:this.height()});if($.fn.bgiframe)$el.bgiframe();this.instances.push($el);return $el},destroy:function($el){this.oldInstances.push(this.instances.splice($.inArray($el,this.instances),1)[0]);if(this.instances.length===0)$([document,window]).unbind(".dialog-overlay");$el.remove();var maxZ=0;$.each(this.instances,function(){maxZ=Math.max(maxZ,this.css("z-index"))});this.maxZ=maxZ},height:function(){var scrollHeight,offsetHeight;if($.browser.msie&&$.browser.version<7){scrollHeight=Math.max(document.documentElement.scrollHeight,
document.body.scrollHeight);offsetHeight=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(scrollHeight<offsetHeight)return $(window).height()+"px";else return scrollHeight+"px"}else return $(document).height()+"px"},width:function(){var scrollWidth,offsetWidth;if($.browser.msie&&$.browser.version<7){scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(scrollWidth<
offsetWidth)return $(window).width()+"px";else return scrollWidth+"px"}else return $(document).width()+"px"},resize:function(){var $overlays=$([]);$.each($.ui.dialog.overlay.instances,function(){$overlays=$overlays.add(this)});$overlays.css({width:0,height:0}).css({width:$.ui.dialog.overlay.width(),height:$.ui.dialog.overlay.height()})}});$.extend($.ui.dialog.overlay.prototype,{destroy:function(){$.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
(function($){var numPages=5;$.widget("ui.slider",$.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var self=this,o=this.options;this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all");
if(o.disabled)this.element.addClass("ui-slider-disabled ui-disabled");this.range=$([]);if(o.range){if(o.range===true){this.range=$("<div></div>");if(!o.values)o.values=[this._valueMin(),this._valueMin()];if(o.values.length&&o.values.length!=2)o.values=[o.values[0],o.values[0]]}else this.range=$("<div></div>");this.range.appendTo(this.element).addClass("ui-slider-range");if(o.range=="min"||o.range=="max")this.range.addClass("ui-slider-range-"+o.range);this.range.addClass("ui-widget-header")}if($(".ui-slider-handle",
this.element).length==0)$('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle");if(o.values&&o.values.length)while($(".ui-slider-handle",this.element).length<o.values.length)$('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle");this.handles=$(".ui-slider-handle",this.element).addClass("ui-state-default"+" ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(event){event.preventDefault()}).hover(function(){if(!o.disabled)$(this).addClass("ui-state-hover")},
function(){$(this).removeClass("ui-state-hover")}).focus(function(){if(!o.disabled){$(".ui-slider .ui-state-focus").removeClass("ui-state-focus");$(this).addClass("ui-state-focus")}else $(this).blur()}).blur(function(){$(this).removeClass("ui-state-focus")});this.handles.each(function(i){$(this).data("index.ui-slider-handle",i)});this.handles.keydown(function(event){var ret=true;var index=$(this).data("index.ui-slider-handle");if(self.options.disabled)return;switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:ret=
false;if(!self._keySliding){self._keySliding=true;$(this).addClass("ui-state-active");self._start(event,index)}break}var curVal,newVal,step=self._step();if(self.options.values&&self.options.values.length)curVal=newVal=self.values(index);else curVal=newVal=self.value();switch(event.keyCode){case $.ui.keyCode.HOME:newVal=self._valueMin();break;case $.ui.keyCode.END:newVal=self._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=curVal+(self._valueMax()-self._valueMin())/numPages;break;case $.ui.keyCode.PAGE_DOWN:newVal=
curVal-(self._valueMax()-self._valueMin())/numPages;break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal==self._valueMax())return;newVal=curVal+step;break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal==self._valueMin())return;newVal=curVal-step;break}self._slide(event,index,newVal);return ret}).keyup(function(event){var index=$(this).data("index.ui-slider-handle");if(self._keySliding){self._keySliding=false;self._stop(event,index);self._change(event,index);$(this).removeClass("ui-state-active")}});
this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-slider-disabled"+" ui-widget"+" ui-widget-content"+" ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(event){var o=this.options;if(o.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=
this.element.offset();var position={x:event.pageX,y:event.pageY};var normValue=this._normValueFromMouse(position);var distance=this._valueMax()-this._valueMin()+1,closestHandle;var self=this,index;this.handles.each(function(i){var thisDistance=Math.abs(normValue-self.values(i));if(distance>thisDistance){distance=thisDistance;closestHandle=$(this);index=i}});if(o.range==true&&this.values(1)==o.min)closestHandle=$(this.handles[++index]);this._start(event,index);this._mouseSliding=true;self._handleIndex=
index;closestHandle.addClass("ui-state-active").focus();var offset=closestHandle.offset();var mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-closestHandle.width()/2,top:event.pageY-offset.top-closestHandle.height()/2-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)};normValue=this._normValueFromMouse(position);
this._slide(event,index,normValue);this._animateOff=true;return true},_mouseStart:function(event){return true},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY};var normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false},_mouseStop:function(event){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=
null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation=="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(position){var pixelTotal,pixelMouse;if("horizontal"==this.orientation){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:
0)}var percentMouse=pixelMouse/pixelTotal;if(percentMouse>1)percentMouse=1;if(percentMouse<0)percentMouse=0;if("vertical"==this.orientation)percentMouse=1-percentMouse;var valueTotal=this._valueMax()-this._valueMin(),valueMouse=percentMouse*valueTotal,valueMouseModStep=valueMouse%this.options.step,normValue=this._valueMin()+valueMouse-valueMouseModStep;if(valueMouseModStep>this.options.step/2)normValue+=this.options.step;return parseFloat(normValue.toFixed(5))},_start:function(event,index){var uiHash=
{handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}this._trigger("start",event,uiHash)},_slide:function(event,index,newVal){var handle=this.handles[index];if(this.options.values&&this.options.values.length){var otherVal=this.values(index?0:1);if(this.options.values.length==2&&this.options.range===true&&(index==0&&newVal>otherVal||index==1&&newVal<otherVal))newVal=otherVal;if(newVal!=this.values(index)){var newValues=
this.values();newValues[index]=newVal;var allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues});var otherVal=this.values(index?0:1);if(allowed!==false)this.values(index,newVal,true)}}else if(newVal!=this.value()){var allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal});if(allowed!==false)this.value(newVal)}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=
this.values(index);uiHash.values=this.values()}this._trigger("stop",event,uiHash)},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}this._trigger("change",event,uiHash)}},value:function(newValue){if(arguments.length){this.options.value=this._trimValue(newValue);this._refreshValue();this._change(null,0)}return this._value()},
values:function(index,newValue){if(arguments.length>1){this.options.values[index]=this._trimValue(newValue);this._refreshValue();this._change(null,index)}if(arguments.length)if($.isArray(arguments[0])){var vals=this.options.values,newValues=arguments[0];for(var i=0,l=vals.length;i<l;i++){vals[i]=this._trimValue(newValues[i]);this._change(null,i)}this._refreshValue()}else if(this.options.values&&this.options.values.length)return this._values(index);else return this.value();else return this._values()},
_setOption:function(key,value){var i,valsLength=0;if(jQuery.isArray(this.options.values))valsLength=this.options.values.length;$.Widget.prototype._setOption.apply(this,arguments);switch(key){case "disabled":if(value){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}case "orientation":this._detectOrientation();
this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();for(i=0;i<valsLength;i++)this._change(null,i);this._animateOff=false;break}},_step:function(){var step=this.options.step;return step},_value:function(){var val=this.options.value;val=this._trimValue(val);
return val},_values:function(index){if(arguments.length){var val=this.options.values[index];val=this._trimValue(val);return val}else{var vals=this.options.values.slice();for(var i=0,l=vals.length;i<l;i++)vals[i]=this._trimValue(vals[i]);return vals}},_trimValue:function(val){if(val<this._valueMin())val=this._valueMin();if(val>this._valueMax())val=this._valueMax();return val},_valueMin:function(){var valueMin=this.options.min;return valueMin},_valueMax:function(){var valueMax=this.options.max;return valueMax},
_refreshValue:function(){var oRange=this.options.range,o=this.options,self=this;var animate=!this._animateOff?o.animate:false;if(this.options.values&&this.options.values.length){var vp0,vp1;this.handles.each(function(i,j){var valPercent=(self.values(i)-self._valueMin())/(self._valueMax()-self._valueMin())*100;var _set={};_set[self.orientation=="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(self.options.range===true)if(self.orientation=="horizontal"){i==
0&&self.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);i==1&&self.range[animate?"animate":"css"]({width:valPercent-lastValPercent+"%"},{queue:false,duration:o.animate})}else{i==0&&self.range.stop(1,1)[animate?"animate":"css"]({bottom:valPercent+"%"},o.animate);i==1&&self.range[animate?"animate":"css"]({height:valPercent-lastValPercent+"%"},{queue:false,duration:o.animate})}lastValPercent=valPercent})}else{var value=this.value(),valueMin=this._valueMin(),valueMax=this._valueMax(),
valPercent=valueMax!=valueMin?(value-valueMin)/(valueMax-valueMin)*100:0;var _set={};_set[self.orientation=="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);oRange=="min"&&this.orientation=="horizontal"&&this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);oRange=="max"&&this.orientation=="horizontal"&&this.range[animate?"animate":"css"]({width:100-valPercent+"%"},{queue:false,duration:o.animate});oRange=="min"&&
this.orientation=="vertical"&&this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);oRange=="max"&&this.orientation=="vertical"&&this.range[animate?"animate":"css"]({height:100-valPercent+"%"},{queue:false,duration:o.animate})}}});$.extend($.ui.slider,{version:"1.8"})})(jQuery);
(function($){var tabId=0,listId=0;$.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'},_create:function(){this._tabify(true)},_setOption:function(key,value){if(key=="selected"){if(this.options.collapsible&&
value==this.options.selected)return;this.select(value)}else{this.options[key]=value;this._tabify()}},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+ ++tabId},_sanitizeSelector:function(hash){return hash.replace(/:/g,"\\:")},_cookie:function(){var cookie=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++listId);return $.cookie.apply(null,[cookie].concat($.makeArray(arguments)))},_ui:function(tab,panel){return{tab:tab,
panel:panel,index:this.anchors.index(tab)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var el=$(this);el.html(el.data("label.tabs")).removeData("label.tabs")})},_tabify:function(init){this.list=this.element.find("ol,ul").eq(0);this.lis=$("li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return $("a",this)[0]});this.panels=$([]);var self=this,o=this.options;var fragmentId=/^#.+/;this.anchors.each(function(i,
a){var href=$(a).attr("href");var hrefBase=href.split("#")[0],baseEl;if(hrefBase&&(hrefBase===location.toString().split("#")[0]||(baseEl=$("base")[0])&&hrefBase===baseEl.href)){href=a.hash;a.href=href}if(fragmentId.test(href))self.panels=self.panels.add(self._sanitizeSelector(href));else if(href!="#"){$.data(a,"href.tabs",href);$.data(a,"load.tabs",href.replace(/#.*$/,""));var id=self._tabId(a);a.href="#"+id;var $panel=$("#"+id);if(!$panel.length){$panel=$(o.panelTemplate).attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(self.panels[i-
1]||self.list);$panel.data("destroy.tabs",true)}self.panels=self.panels.add($panel)}else o.disabled.push(i)});if(init){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(o.selected===undefined){if(location.hash)this.anchors.each(function(i,a){if(a.hash==
location.hash){o.selected=i;return false}});if(typeof o.selected!="number"&&o.cookie)o.selected=parseInt(self._cookie(),10);if(typeof o.selected!="number"&&this.lis.filter(".ui-tabs-selected").length)o.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));o.selected=o.selected||(this.lis.length?0:-1)}else if(o.selected===null)o.selected=-1;o.selected=o.selected>=0&&this.anchors[o.selected]||o.selected<0?o.selected:0;o.disabled=$.unique(o.disabled.concat($.map(this.lis.filter(".ui-state-disabled"),
function(n,i){return self.lis.index(n)}))).sort();if($.inArray(o.selected,o.disabled)!=-1)o.disabled.splice($.inArray(o.selected,o.disabled),1);this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");if(o.selected>=0&&this.anchors.length){this.panels.eq(o.selected).removeClass("ui-tabs-hide");this.lis.eq(o.selected).addClass("ui-tabs-selected ui-state-active");self.element.queue("tabs",function(){self._trigger("show",null,self._ui(self.anchors[o.selected],self.panels[o.selected]))});
this.load(o.selected)}$(window).bind("unload",function(){self.lis.add(self.anchors).unbind(".tabs");self.lis=self.anchors=self.panels=null})}else o.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));this.element[o.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");if(o.cookie)this._cookie(o.selected,o.cookie);for(var i=0,li;li=this.lis[i];i++)$(li)[$.inArray(i,o.disabled)!=-1&&!$(li).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");if(o.cache===false)this.anchors.removeData("cache.tabs");
this.lis.add(this.anchors).unbind(".tabs");if(o.event!="mouseover"){var addState=function(state,el){if(el.is(":not(.ui-state-disabled)"))el.addClass("ui-state-"+state)};var removeState=function(state,el){el.removeClass("ui-state-"+state)};this.lis.bind("mouseover.tabs",function(){addState("hover",$(this))});this.lis.bind("mouseout.tabs",function(){removeState("hover",$(this))});this.anchors.bind("focus.tabs",function(){addState("focus",$(this).closest("li"))});this.anchors.bind("blur.tabs",function(){removeState("focus",
$(this).closest("li"))})}var hideFx,showFx;if(o.fx)if($.isArray(o.fx)){hideFx=o.fx[0];showFx=o.fx[1]}else hideFx=showFx=o.fx;function resetStyle($el,fx){$el.css({display:""});if(!$.support.opacity&&fx.opacity)$el[0].style.removeAttribute("filter")}var showTab=showFx?function(clicked,$show){$(clicked).closest("li").addClass("ui-tabs-selected ui-state-active");$show.hide().removeClass("ui-tabs-hide").animate(showFx,showFx.duration||"normal",function(){resetStyle($show,showFx);self._trigger("show",null,
self._ui(clicked,$show[0]))})}:function(clicked,$show){$(clicked).closest("li").addClass("ui-tabs-selected ui-state-active");$show.removeClass("ui-tabs-hide");self._trigger("show",null,self._ui(clicked,$show[0]))};var hideTab=hideFx?function(clicked,$hide){$hide.animate(hideFx,hideFx.duration||"normal",function(){self.lis.removeClass("ui-tabs-selected ui-state-active");$hide.addClass("ui-tabs-hide");resetStyle($hide,hideFx);self.element.dequeue("tabs")})}:function(clicked,$hide,$show){self.lis.removeClass("ui-tabs-selected ui-state-active");
$hide.addClass("ui-tabs-hide");self.element.dequeue("tabs")};this.anchors.bind(o.event+".tabs",function(){var el=this,$li=$(this).closest("li"),$hide=self.panels.filter(":not(.ui-tabs-hide)"),$show=$(self._sanitizeSelector(this.hash));if($li.hasClass("ui-tabs-selected")&&!o.collapsible||$li.hasClass("ui-state-disabled")||$li.hasClass("ui-state-processing")||self._trigger("select",null,self._ui(this,$show[0]))===false){this.blur();return false}o.selected=self.anchors.index(this);self.abort();if(o.collapsible)if($li.hasClass("ui-tabs-selected")){o.selected=
-1;if(o.cookie)self._cookie(o.selected,o.cookie);self.element.queue("tabs",function(){hideTab(el,$hide)}).dequeue("tabs");this.blur();return false}else if(!$hide.length){if(o.cookie)self._cookie(o.selected,o.cookie);self.element.queue("tabs",function(){showTab(el,$show)});self.load(self.anchors.index(this));this.blur();return false}if(o.cookie)self._cookie(o.selected,o.cookie);if($show.length){if($hide.length)self.element.queue("tabs",function(){hideTab(el,$hide)});self.element.queue("tabs",function(){showTab(el,
$show)});self.load(self.anchors.index(this))}else throw"jQuery UI Tabs: Mismatching fragment identifier.";if($.browser.msie)this.blur()});this.anchors.bind("click.tabs",function(){return false})},destroy:function(){var o=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var href=
$.data(this,"href.tabs");if(href)this.href=href;var $this=$(this).unbind(".tabs");$.each(["href","load","cache"],function(i,prefix){$this.removeData(prefix+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){if($.data(this,"destroy.tabs"))$(this).remove();else $(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))});
if(o.cookie)this._cookie(null,o.cookie);return this},add:function(url,label,index){if(index===undefined)index=this.anchors.length;var self=this,o=this.options,$li=$(o.tabTemplate.replace(/#\{href\}/g,url).replace(/#\{label\}/g,label)),id=!url.indexOf("#")?url.replace("#",""):this._tabId($("a",$li)[0]);$li.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var $panel=$("#"+id);if(!$panel.length)$panel=$(o.panelTemplate).attr("id",id).data("destroy.tabs",true);$panel.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");
if(index>=this.lis.length){$li.appendTo(this.list);$panel.appendTo(this.list[0].parentNode)}else{$li.insertBefore(this.lis[index]);$panel.insertBefore(this.panels[index])}o.disabled=$.map(o.disabled,function(n,i){return n>=index?++n:n});this._tabify();if(this.anchors.length==1){o.selected=0;$li.addClass("ui-tabs-selected ui-state-active");$panel.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){self._trigger("show",null,self._ui(self.anchors[0],self.panels[0]))});this.load(0)}this._trigger("add",
null,this._ui(this.anchors[index],this.panels[index]));return this},remove:function(index){var o=this.options,$li=this.lis.eq(index).remove(),$panel=this.panels.eq(index).remove();if($li.hasClass("ui-tabs-selected")&&this.anchors.length>1)this.select(index+(index+1<this.anchors.length?1:-1));o.disabled=$.map($.grep(o.disabled,function(n,i){return n!=index}),function(n,i){return n>=index?--n:n});this._tabify();this._trigger("remove",null,this._ui($li.find("a")[0],$panel[0]));return this},enable:function(index){var o=
this.options;if($.inArray(index,o.disabled)==-1)return;this.lis.eq(index).removeClass("ui-state-disabled");o.disabled=$.grep(o.disabled,function(n,i){return n!=index});this._trigger("enable",null,this._ui(this.anchors[index],this.panels[index]));return this},disable:function(index){var self=this,o=this.options;if(index!=o.selected){this.lis.eq(index).addClass("ui-state-disabled");o.disabled.push(index);o.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[index],this.panels[index]))}return this},
select:function(index){if(typeof index=="string")index=this.anchors.index(this.anchors.filter("[href$="+index+"]"));else if(index===null)index=-1;if(index==-1&&this.options.collapsible)index=this.options.selected;this.anchors.eq(index).trigger(this.options.event+".tabs");return this},load:function(index){var self=this,o=this.options,a=this.anchors.eq(index)[0],url=$.data(a,"load.tabs");this.abort();if(!url||this.element.queue("tabs").length!==0&&$.data(a,"cache.tabs")){this.element.dequeue("tabs");
return}this.lis.eq(index).addClass("ui-state-processing");if(o.spinner){var span=$("span",a);span.data("label.tabs",span.html()).html(o.spinner)}this.xhr=$.ajax($.extend({},o.ajaxOptions,{url:url,success:function(r,s){$(self._sanitizeSelector(a.hash)).html(r);self._cleanup();if(o.cache)$.data(a,"cache.tabs",true);self._trigger("load",null,self._ui(self.anchors[index],self.panels[index]));try{o.ajaxOptions.success(r,s)}catch(e){}},error:function(xhr,s,e){self._cleanup();self._trigger("load",null,self._ui(self.anchors[index],
self.panels[index]));try{o.ajaxOptions.error(xhr,s,index,a)}catch(e){}}}));self.element.dequeue("tabs");return this},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},url:function(index,url){this.anchors.eq(index).removeData("cache.tabs").data("load.tabs",url);return this},length:function(){return this.anchors.length}});$.extend($.ui.tabs,
{version:"1.8"});$.extend($.ui.tabs.prototype,{rotation:null,rotate:function(ms,continuing){var self=this,o=this.options;var rotate=self._rotate||(self._rotate=function(e){clearTimeout(self.rotation);self.rotation=setTimeout(function(){var t=o.selected;self.select(++t<self.anchors.length?t:0)},ms);if(e)e.stopPropagation()});var stop=self._unrotate||(self._unrotate=!continuing?function(e){if(e.clientX)self.rotate(null)}:function(e){t=o.selected;rotate()});if(ms){this.element.bind("tabsshow",rotate);
this.anchors.bind(o.event+".tabs",stop);rotate()}else{clearTimeout(self.rotation);this.element.unbind("tabsshow",rotate);this.anchors.unbind(o.event+".tabs",stop);delete this._rotate;delete this._unrotate}return this}})})(jQuery);
(function($){$.extend($.ui,{datepicker:{version:"1.8"}});var PROP_NAME="datepicker";var dpuuid=(new Date).getTime();function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";
this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday",
"Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"show",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,
yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"_default",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=$('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')}
$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",log:function(){if(this.debug)console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=
attrValue}}}var nodeName=target.nodeName.toLowerCase();var inline=nodeName=="div"||nodeName=="span";if(!target.id)target.id="dp"+ ++this.uuid;var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input")this._connectDatepicker(target,inst);else if(inline)this._inlineDatepicker(target,inst)},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,
drawMonth:0,drawYear:0,inline:inline,dpDiv:!inline?this.dpDiv:$('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName))return;this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(event,
key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});this._autoSize(inst);$.data(target,PROP_NAME,inst)},_attachments:function(input,inst){var appendText=this._get(inst,"appendText");var isRTL=this._get(inst,"isRTL");if(inst.append)inst.append.remove();if(appendText){inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>");input[isRTL?"before":"after"](inst.append)}input.unbind("focus",this._showDatepicker);if(inst.trigger)inst.trigger.remove();
var showOn=this._get(inst,"showOn");if(showOn=="focus"||showOn=="both")input.focus(this._showDatepicker);if(showOn=="button"||showOn=="both"){var buttonText=this._get(inst,"buttonText");var buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(buttonImage==""?buttonText:$("<img/>").attr({src:buttonImage,
alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==input[0])$.datepicker._hideDatepicker();else $.datepicker._showDatepicker(input[0]);return false})}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var date=new Date(2009,12-1,20);var dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){var findMax=function(names){var max=0;var maxI=0;for(var i=
0;i<names.length;i++)if(names[i].length>max){max=names[i].length;maxI=i}return maxI};date.setMonth(findMax(this._get(inst,dateFormat.match(/MM/)?"monthNames":"monthNamesShort")));date.setDate(findMax(this._get(inst,dateFormat.match(/DD/)?"dayNames":"dayNamesShort"))+20-date.getDay())}inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName))return;divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.datepicker",
function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst)},_dialogDatepicker:function(input,date,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){var id="dp"+ ++this.uuid;this._dialogInput=$('<input type="text" id="'+id+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');
this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst)}extendRemove(inst.settings,settings||{});date=date&&date.constructor==Date?this._formatDate(inst,date):date;this._dialogInput.val(date);this._pos=pos?pos.length?pos:[pos.pageX,pos.pageY]:null;if(!this._pos){var browserWidth=document.documentElement.clientWidth;var browserHeight=document.documentElement.clientHeight;
var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[browserWidth/2-100+scrollX,browserHeight/2-150+scrollY]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI)$.blockUI(this.dpDiv);$.data(this._dialogInput[0],PROP_NAME,inst);
return this},_destroyDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName))return;var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName=="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(nodeName=="div"||nodeName==
"span")$target.removeClass(this.markerClassName).empty()},_enableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName))return;var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled")}this._disabledInputs=
$.map(this._disabledInputs,function(value){return value==target?null:value})},_disableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName))return;var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+
this._inlineClass);inline.children().addClass("ui-state-disabled")}this._disabledInputs=$.map(this._disabledInputs,function(value){return value==target?null:value});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target)return false;for(var i=0;i<this._disabledInputs.length;i++)if(this._disabledInputs[i]==target)return true;return false},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker";
}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=="string")return name=="defaults"?$.extend({},$.datepicker._defaults):inst?name=="all"?$.extend({},inst.settings):this._get(inst,name):null;var settings=name||{};if(typeof name=="string"){settings={};settings[name]=value}if(inst){if(this._curInst==inst)this._hideDatepicker();var date=this._getDateDatepicker(target,true);extendRemove(inst.settings,settings);this._attachments($(target),
inst);this._autoSize(inst);this._setDateDatepicker(target,date);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst)this._updateDatepicker(inst)},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst)}},_getDateDatepicker:function(target,noDefault){var inst=
this._getInst(target);if(inst&&!inst.inline)this._setDateFromField(inst,noDefault);return inst?this._getDate(inst):null},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target);var handled=true;var isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing)switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:var sel=$("td."+$.datepicker._dayOverClass,inst.dpDiv).add($("td."+$.datepicker._currentClass,inst.dpDiv));
if(sel[0])$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);else $.datepicker._hideDatepicker();return false;break;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 35:if(event.ctrlKey||
event.metaKey)$.datepicker._clearDate(event.target);handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey)$.datepicker._gotoToday(event.target);handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,isRTL?+1:-1,"D");handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey)$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),
"M");break;case 38:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,-7,"D");handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,isRTL?-1:+1,"D");handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey)$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 40:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,
+7,"D");handled=event.ctrlKey||event.metaKey;break;default:handled=false}else if(event.keyCode==36&&event.ctrlKey)$.datepicker._showDatepicker(this);else handled=false;if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){var chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));var chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);
return event.ctrlKey||chr<" "||!chars||chars.indexOf(chr)>-1}},_doKeyUp:function(event){var inst=$.datepicker._getInst(event.target);if(inst.input.val()!=inst.lastVal)try{var date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),inst.input?inst.input.val():null,$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst)}}catch(event){$.datepicker.log(event)}return true},_showDatepicker:function(input){input=
input.target||input;if(input.nodeName.toLowerCase()!="input")input=$("input",input.parentNode)[0];if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input)return;var inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!=inst)$.datepicker._curInst.dpDiv.stop(true,true);var beforeShow=$.datepicker._get(inst,"beforeShow");extendRemove(inst.settings,beforeShow?beforeShow.apply(input,[input,inst]):{});inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);
if($.datepicker._inDialog)input.value="";if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight}var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")=="fixed";return!isFixed});if(isFixed&&$.browser.opera){$.datepicker._pos[0]-=document.documentElement.scrollLeft;$.datepicker._pos[1]-=document.documentElement.scrollTop}var offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.css({position:"absolute",
display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){var showAnim=$.datepicker._get(inst,"showAnim");var duration=$.datepicker._get(inst,"duration");var postProcess=function(){$.datepicker._datepickerShowing=true;var borders=$.datepicker._getBorders(inst.dpDiv);
inst.dpDiv.find("iframe.ui-datepicker-cover").css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})};inst.dpDiv.zIndex($(input).zIndex()+1);if($.effects&&$.effects[showAnim])inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);else inst.dpDiv[showAnim||"show"](showAnim?duration:null,postProcess);if(!showAnim||!duration)postProcess();if(inst.input.is(":visible")&&!inst.input.is(":disabled"))inst.input.focus();$.datepicker._curInst=
inst}},_updateDatepicker:function(inst){var self=this;var borders=$.datepicker._getBorders(inst.dpDiv);inst.dpDiv.empty().append(this._generateHTML(inst)).find("iframe.ui-datepicker-cover").css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1)$(this).removeClass("ui-datepicker-prev-hover");
if(this.className.indexOf("ui-datepicker-next")!=-1)$(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!self._isDisabledDatepicker(inst.inline?inst.dpDiv.parent()[0]:inst.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1)$(this).addClass("ui-datepicker-prev-hover");if(this.className.indexOf("ui-datepicker-next")!=-1)$(this).addClass("ui-datepicker-next-hover")}}).end().find("."+
this._dayOverClass+" a").trigger("mouseover").end();var numMonths=this._getNumberOfMonths(inst);var cols=numMonths[1];var width=17;if(cols>1)inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",width*cols+"em");else inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");
if(inst==$.datepicker._curInst&&$.datepicker._datepickerShowing&&inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled"))inst.input.focus()},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value};return[parseFloat(convert(elem.css("border-left-width"))),parseFloat(convert(elem.css("border-top-width")))]},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth();var dpHeight=inst.dpDiv.outerHeight();var inputWidth=inst.input?
inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=document.documentElement.clientWidth+$(document).scrollLeft();var viewHeight=document.documentElement.clientHeight+$(document).scrollTop();offset.left-=this._get(inst,"isRTL")?dpWidth-inputWidth:0;offset.left-=isFixed&&offset.left==inst.input.offset().left?$(document).scrollLeft():0;offset.top-=isFixed&&offset.top==inst.input.offset().top+inputHeight?$(document).scrollTop():0;offset.left-=Math.min(offset.left,
offset.left+dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+inputHeight):0);return offset},_findPos:function(obj){var inst=this._getInst(obj);var isRTL=this._get(inst,"isRTL");while(obj&&(obj.type=="hidden"||obj.nodeType!=1))obj=obj[isRTL?"previousSibling":"nextSibling"];var position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input){var inst=
this._curInst;if(!inst||input&&inst!=$.data(input,PROP_NAME))return;if(this._datepickerShowing){var showAnim=this._get(inst,"showAnim");var duration=this._get(inst,"duration");var postProcess=function(){$.datepicker._tidyDialog(inst);this._curInst=null};if($.effects&&$.effects[showAnim])inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);else inst.dpDiv[showAnim=="slideDown"?"slideUp":showAnim=="fadeIn"?"fadeOut":"hide"](showAnim?duration:null,postProcess);if(!showAnim)postProcess();
var onClose=this._get(inst,"onClose");if(onClose)onClose.apply(inst.input?inst.input[0]:null,[inst.input?inst.input.val():"",inst]);this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!$.datepicker._curInst)return;
var $target=$(event.target);if($target[0].id!=$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length==0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI))$.datepicker._hideDatepicker()},_adjustDate:function(id,offset,period){var target=$(id);var inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0]))return;this._adjustInstDate(inst,offset+(period==
"M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear}else{var date=new Date;inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst);
this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst._selectingMonthYear=false;inst["selected"+(period=="M"?"Month":"Year")]=inst["draw"+(period=="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},_clickMonthYear:function(id){var target=$(id);var inst=this._getInst(target[0]);if(inst.input&&inst._selectingMonthYear&&!$.browser.msie)inst.input.focus();
inst._selectingMonthYear=!inst._selectingMonthYear},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0]))return;var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))},_clearDate:function(id){var target=$(id);var inst=
this._getInst(target[0]);this._selectDate(target,"")},_selectDate:function(id,dateStr){var target=$(id);var inst=this._getInst(target[0]);dateStr=dateStr!=null?dateStr:this._formatDate(inst);if(inst.input)inst.input.val(dateStr);this._updateAlternate(inst);var onSelect=this._get(inst,"onSelect");if(onSelect)onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst]);else if(inst.input)inst.input.trigger("change");if(inst.inline)this._updateDatepicker(inst);else{this._hideDatepicker();this._lastInput=
inst.input[0];if(typeof inst.input[0]!="object")inst.input.focus();this._lastInput=null}},_updateAlternate:function(inst){var altField=this._get(inst,"altField");if(altField){var altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");var date=this._getDate(inst);var dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[day>0&&day<6,""]},iso8601Week:function(date){var checkDate=
new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/864E5)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null)throw"Invalid arguments";value=typeof value=="object"?value.toString():value+"";if(value=="")return null;var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;var dayNamesShort=
(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)==match;if(matches)iFormat++;return matches};
var getNumber=function(match){lookAhead(match);var size=match=="@"?14:match=="!"?20:match=="y"?4:match=="o"?3:2;var digits=new RegExp("^\\d{1,"+size+"}");var num=value.substring(iValue).match(digits);if(!num)throw"Missing number at position "+iValue;iValue+=num[0].length;return parseInt(num[0],10)};var getName=function(match,shortNames,longNames){var names=lookAhead(match)?longNames:shortNames;for(var i=0;i<names.length;i++)if(value.substr(iValue,names[i].length)==names[i]){iValue+=names[i].length;
return i+1}throw"Unknown name at position "+iValue;};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat))throw"Unexpected literal at position "+iValue;iValue++};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++)if(literal)if(format.charAt(iFormat)=="'"&&!lookAhead("'"))literal=false;else checkLiteral();else switch(format.charAt(iFormat)){case "d":day=getNumber("d");break;case "D":getName("D",dayNamesShort,dayNames);break;case "o":doy=getNumber("o");break;case "m":month=
getNumber("m");break;case "M":month=getName("M",monthNamesShort,monthNames);break;case "y":year=getNumber("y");break;case "@":var date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case "!":var date=new Date((getNumber("!")-this._ticksTo1970)/1E4);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case "'":if(lookAhead("'"))checkLiteral();else literal=true;break;default:checkLiteral()}if(year==-1)year=(new Date).getFullYear();
else if(year<100)year+=(new Date).getFullYear()-(new Date).getFullYear()%100+(year<=shortYearCutoff?0:-100);if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim)break;month++;day-=dim}while(true)}var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day)throw"Invalid date";return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",
RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1E7,formatDate:function(format,date,settings){if(!date)return"";var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;
var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)==match;if(matches)iFormat++;return matches};var formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match))while(num.length<len)num="0"+num;return num};var formatName=function(match,value,shortNames,longNames){return lookAhead(match)?longNames[value]:shortNames[value]};var output="";var literal=false;if(date)for(var iFormat=
0;iFormat<format.length;iFormat++)if(literal)if(format.charAt(iFormat)=="'"&&!lookAhead("'"))literal=false;else output+=format.charAt(iFormat);else switch(format.charAt(iFormat)){case "d":output+=formatNumber("d",date.getDate(),2);break;case "D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case "o":output+=formatNumber("o",(date.getTime()-(new Date(date.getFullYear(),0,0)).getTime())/864E5,3);break;case "m":output+=formatNumber("m",date.getMonth()+1,2);break;case "M":output+=
formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case "y":output+=lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100;break;case "@":output+=date.getTime();break;case "!":output+=date.getTime()*1E4+this._ticksTo1970;break;case "'":if(lookAhead("'"))output+="'";else literal=true;break;default:output+=format.charAt(iFormat)}return output},_possibleChars:function(format){var chars="";var literal=false;var lookAhead=function(match){var matches=iFormat+1<
format.length&&format.charAt(iFormat+1)==match;if(matches)iFormat++;return matches};for(var iFormat=0;iFormat<format.length;iFormat++)if(literal)if(format.charAt(iFormat)=="'"&&!lookAhead("'"))literal=false;else chars+=format.charAt(iFormat);else switch(format.charAt(iFormat)){case "d":case "m":case "y":case "@":chars+="0123456789";break;case "D":case "M":return null;case "'":if(lookAhead("'"))chars+="'";else literal=true;break;default:chars+=format.charAt(iFormat)}return chars},_get:function(inst,
name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()==inst.lastVal)return;var dateFormat=this._get(inst,"dateFormat");var dates=inst.lastVal=inst.input?inst.input.val():null;var date,defaultDate;date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){this.log(event);dates=noDefault?"":dates}inst.selectedDay=
date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=dates?date.getDate():0;inst.currentMonth=dates?date.getMonth():0;inst.currentYear=dates?date.getFullYear():0;this._adjustInstDate(inst)},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date;date.setDate(date.getDate()+
offset);return date};var offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date;var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case "d":case "D":day+=parseInt(matches[1],
10);break;case "w":case "W":day+=parseInt(matches[1],10)*7;break;case "m":case "M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case "y":case "Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)};date=date==null?defaultDate:typeof date=="string"?offsetString(date):typeof date=="number"?isNaN(date)?defaultDate:offsetNumeric(date):date;date=date&&
date.toString()=="Invalid Date"?defaultDate:date;if(date){date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0)}return this._daylightSavingAdjust(date)},_daylightSavingAdjust:function(date){if(!date)return null;date.setHours(date.getHours()>12?date.getHours()+2:0);return date},_setDate:function(inst,date,noChange){var clear=!date;var origMonth=inst.selectedMonth;var origYear=inst.selectedYear;date=this._restrictMinMax(inst,this._determineDate(inst,date,new Date));inst.selectedDay=
inst.currentDay=date.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=date.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=date.getFullYear();if((origMonth!=inst.selectedMonth||origYear!=inst.selectedYear)&&!noChange)this._notifyChange(inst);this._adjustInstDate(inst);if(inst.input)inst.input.val(clear?"":this._formatDate(inst))},_getDate:function(inst){var startDate=!inst.currentYear||inst.input&&inst.input.val()==""?null:this._daylightSavingAdjust(new Date(inst.currentYear,
inst.currentMonth,inst.currentDay));return startDate},_generateHTML:function(inst){var today=new Date;today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,"isRTL");var showButtonPanel=this._get(inst,"showButtonPanel");var hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext");var navigationAsDateFormat=this._get(inst,"navigationAsDateFormat");var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,"showCurrentAtPos");
var stepMonths=this._get(inst,"stepMonths");var isMultiMonth=numMonths[0]!=1||numMonths[1]!=1;var currentDate=this._daylightSavingAdjust(!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay));var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),
maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate()));maxDraw=minDate&&maxDraw<minDate?minDate:maxDraw;while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,"prevText");prevText=!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst));var prev=
this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+inst.id+"', -"+stepMonths+", 'M');\""+' title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>":hideIfNoPrevNext?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>";var nextText=
this._get(inst,"nextText");nextText=!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst));var next=this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+inst.id+"', +"+stepMonths+", 'M');\""+' title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>":
hideIfNoPrevNext?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>";var currentText=this._get(inst,"currentText");var gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today;currentText=!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst));var controls=!inst.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+
dpuuid+'.datepicker._hideDatepicker();">'+this._get(inst,"closeText")+"</button>":"";var buttonPanel=showButtonPanel?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+inst.id+"');\""+">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";var firstDay=parseInt(this._get(inst,
"firstDay"),10);firstDay=isNaN(firstDay)?0:firstDay;var showWeek=this._get(inst,"showWeek");var dayNames=this._get(inst,"dayNames");var dayNamesShort=this._get(inst,"dayNamesShort");var dayNamesMin=this._get(inst,"dayNamesMin");var monthNames=this._get(inst,"monthNames");var monthNamesShort=this._get(inst,"monthNamesShort");var beforeShowDay=this._get(inst,"beforeShowDay");var showOtherMonths=this._get(inst,"showOtherMonths");var selectOtherMonths=this._get(inst,"selectOtherMonths");var calculateWeek=
this._get(inst,"calculateWeek")||this.iso8601Week;var defaultDate=this._getDefaultDate(inst);var html="";for(var row=0;row<numMonths[0];row++){var group="";for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));var cornerClass=" ui-corner-all";var calender="";if(isMultiMonth){calender+='<div class="ui-datepicker-group';if(numMonths[1]>1)switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?
"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break}calender+='">'}calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+(/all|left/.test(cornerClass)&&row==0?isRTL?next:prev:"")+(/all|right/.test(cornerClass)&&row==0?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,
row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var thead=showWeek?'<th class="ui-datepicker-week-col">'+this._get(inst,"weekHeader")+"</th>":"";for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+dayNames[day]+'">'+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==
inst.selectedYear&&drawMonth==inst.selectedMonth)inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var numRows=isMultiMonth?6:Math.ceil((leadDays+daysInMonth)/7);var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+="<tr>";var tbody=!showWeek?"":'<td class="ui-datepicker-week-col">'+this._get(inst,"calculateWeek")(printDate)+"</td>";for(var dow=0;dow<
7;dow++){var daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[true,""];var otherMonth=printDate.getMonth()!=drawMonth;var unselectable=otherMonth&&!selectOtherMonths||!daySettings[0]||minDate&&printDate<minDate||maxDate&&printDate>maxDate;tbody+='<td class="'+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()==
printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()==currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()==today.getTime()?" ui-datepicker-today":""))+'"'+((!otherMonth||showOtherMonths)&&daySettings[2]?' title="'+daySettings[2]+'"':"")+(unselectable?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+
inst.id+"',"+printDate.getMonth()+","+printDate.getFullYear()+', this);return false;"')+">"+(otherMonth&&!showOtherMonths?"&#xa0;":unselectable?'<span class="ui-state-default">'+printDate.getDate()+"</span>":'<a class="ui-state-default'+(printDate.getTime()==today.getTime()?" ui-state-highlight":"")+(printDate.getTime()==currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+'" href="#">'+printDate.getDate()+"</a>")+"</td>";printDate.setDate(printDate.getDate()+1);printDate=
this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="</tbody></table>"+(isMultiMonth?"</div>"+(numMonths[0]>0&&col==numMonths[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");group+=calender}html+=group}html+=buttonPanel+($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,
drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var changeMonth=this._get(inst,"changeMonth");var changeYear=this._get(inst,"changeYear");var showMonthAfterYear=this._get(inst,"showMonthAfterYear");var html='<div class="ui-datepicker-title">';var monthHtml="";if(secondary||!changeMonth)monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+"</span>";else{var inMinYear=minDate&&minDate.getFullYear()==drawYear;var inMaxYear=maxDate&&maxDate.getFullYear()==drawYear;
monthHtml+='<select class="ui-datepicker-month" '+'onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+inst.id+"', this, 'M');\" "+'onclick="DP_jQuery_'+dpuuid+".datepicker._clickMonthYear('#"+inst.id+"');\""+">";for(var month=0;month<12;month++)if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth()))monthHtml+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNamesShort[month]+"</option>";monthHtml+="</select>"}if(!showMonthAfterYear)html+=
monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"");if(secondary||!changeYear)html+='<span class="ui-datepicker-year">'+drawYear+"</span>";else{var years=this._get(inst,"yearRange").split(":");var thisYear=(new Date).getFullYear();var determineYear=function(value){var year=value.match(/c[+-].*/)?drawYear+parseInt(value.substring(1),10):value.match(/[+-].*/)?thisYear+parseInt(value,10):parseInt(value,10);return isNaN(year)?thisYear:year};var year=determineYear(years[0]);var endYear=Math.max(year,
determineYear(years[1]||""));year=minDate?Math.max(year,minDate.getFullYear()):year;endYear=maxDate?Math.min(endYear,maxDate.getFullYear()):endYear;html+='<select class="ui-datepicker-year" '+'onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+inst.id+"', this, 'Y');\" "+'onclick="DP_jQuery_'+dpuuid+".datepicker._clickMonthYear('#"+inst.id+"');\""+">";for(;year<=endYear;year++)html+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>";html+="</select>"}html+=
this._get(inst,"yearSuffix");if(showMonthAfterYear)html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml;html+="</div>";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=="Y"?offset:0);var month=inst.drawMonth+(period=="M"?offset:0);var day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period=="D"?offset:0);var date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=
inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period=="M"||period=="Y")this._notifyChange(inst)},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");date=minDate&&date<minDate?minDate:date;date=maxDate&&date>maxDate?maxDate:date;return date},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange)onChange.apply(inst.input?inst.input[0]:null,[inst.selectedYear,
inst.selectedMonth+1,inst])},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return numMonths==null?[1,1]:typeof numMonths=="number"?[1,numMonths]:numMonths},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return(new Date(year,month,1)).getDay()},_canAdjustMonth:function(inst,offset,curYear,
curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0)date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));return this._isInRange(inst,date)},_isInRange:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");return(!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())},
_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=typeof shortYearCutoff!="string"?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,10);return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;
inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear}var date=day?typeof day=="object"?day:this._daylightSavingAdjust(new Date(year,month,day)):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function extendRemove(target,props){$.extend(target,props);for(var name in props)if(props[name]==null||props[name]==undefined)target[name]=props[name];return target}
function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.fn.datepicker=function(options){if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv);$.datepicker.initialized=true}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&(options=="isDisabled"||options=="getDate"||options=="widget"))return $.datepicker["_"+options+
"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));if(options=="option"&&arguments.length==2&&typeof arguments[1]=="string")return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));return this.each(function(){typeof options=="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})};$.datepicker=new Datepicker;$.datepicker.initialized=false;$.datepicker.uuid=(new Date).getTime();
$.datepicker.version="1.8";window["DP_jQuery_"+dpuuid]=$})(jQuery);
(function($){$.widget("ui.progressbar",{options:{value:0},_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this._valueMin(),"aria-valuemax":this._valueMax(),"aria-valuenow":this._value()});this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove();
$.Widget.prototype.destroy.apply(this,arguments)},value:function(newValue){if(newValue===undefined)return this._value();this._setOption("value",newValue);return this},_setOption:function(key,value){switch(key){case "value":this.options.value=value;this._refreshValue();this._trigger("change");break}$.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var val=this.options.value;if(typeof val!=="number")val=0;if(val<this._valueMin())val=this._valueMin();if(val>this._valueMax())val=
this._valueMax();return val},_valueMin:function(){return-1},_valueMax:function(){return 100},_refreshValue:function(){var value=this.value();if(value==-1)this.valueDiv.removeClass("ui-corner-right").width("0%");else this.valueDiv[value===this._valueMax()?"addClass":"removeClass"]("ui-corner-right").width(value+"%");this.element.attr("aria-valuenow",value)}});$.extend($.ui.progressbar,{version:"1.8"})})(jQuery);
jQuery.effects||function($){$.effects={};$.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(i,attr){$.fx.step[attr]=function(fx){if(!fx.colorInit){fx.start=getColor(fx.elem,attr);fx.end=getRGB(fx.end);fx.colorInit=true}fx.elem.style[attr]="rgb("+Math.max(Math.min(parseInt(fx.pos*(fx.end[0]-fx.start[0])+fx.start[0],10),255),0)+","+Math.max(Math.min(parseInt(fx.pos*(fx.end[1]-fx.start[1])+fx.start[1],10),255),0)+","+Math.max(Math.min(parseInt(fx.pos*
(fx.end[2]-fx.start[2])+fx.start[2],10),255),0)+")"}});function getRGB(color){var result;if(color&&color.constructor==Array&&color.length==3)return color;if(result=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color))return[parseInt(result[1],10),parseInt(result[2],10),parseInt(result[3],10)];if(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color))return[parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,
parseFloat(result[3])*2.55];if(result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color))return[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)];if(result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color))return[parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16)];if(result=/rgba\(0, 0, 0, 0\)/.exec(color))return colors["transparent"];return colors[$.trim(color).toLowerCase()]}function getColor(elem,attr){var color;
do{color=$.css(elem,attr);if(color!=""&&color!="transparent"||$.nodeName(elem,"body"))break;attr="backgroundColor"}while(elem=elem.parentNode);return getRGB(color)}var colors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],
darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,
255,255],yellow:[255,255,0],transparent:[255,255,255]};var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function getElementStyles(){var style=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,newStyle={},key,camelCase;if(style&&style.length&&style[0]&&style[style[0]]){var len=style.length;while(len--){key=style[len];if(typeof style[key]==
"string"){camelCase=key.replace(/\-(\w)/g,function(all,letter){return letter.toUpperCase()});newStyle[camelCase]=style[key]}}}else for(key in style)if(typeof style[key]==="string")newStyle[key]=style[key];return newStyle}function filterStyles(styles){var name,value;for(name in styles){value=styles[name];if(value==null||$.isFunction(value)||name in shorthandStyles||/scrollbar/.test(name)||!/color/i.test(name)&&isNaN(parseFloat(value)))delete styles[name]}return styles}function styleDifference(oldStyle,
newStyle){var diff={_:0},name;for(name in newStyle)if(oldStyle[name]!=newStyle[name])diff[name]=newStyle[name];return diff}$.effects.animateClass=function(value,duration,easing,callback){if($.isFunction(easing)){callback=easing;easing=null}return this.each(function(){var that=$(this),originalStyleAttr=that.attr("style")||" ",originalStyle=filterStyles(getElementStyles.call(this)),newStyle,className=that.attr("className");$.each(classAnimationActions,function(i,action){if(value[action])that[action+
"Class"](value[action])});newStyle=filterStyles(getElementStyles.call(this));that.attr("className",className);that.animate(styleDifference(originalStyle,newStyle),duration,easing,function(){$.each(classAnimationActions,function(i,action){if(value[action])that[action+"Class"](value[action])});if(typeof that.attr("style")=="object"){that.attr("style").cssText="";that.attr("style").cssText=originalStyleAttr}else that.attr("style",originalStyleAttr);if(callback)callback.apply(this,arguments)})})};$.fn.extend({_addClass:$.fn.addClass,
addClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{add:classNames},speed,easing,callback]):this._addClass(classNames)},_removeClass:$.fn.removeClass,removeClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{remove:classNames},speed,easing,callback]):this._removeClass(classNames)},_toggleClass:$.fn.toggleClass,toggleClass:function(classNames,force,speed,easing,callback){if(typeof force=="boolean"||force===
undefined)if(!speed)return this._toggleClass(classNames,force);else return $.effects.animateClass.apply(this,[force?{add:classNames}:{remove:classNames},speed,easing,callback]);else return $.effects.animateClass.apply(this,[{toggle:classNames},force,speed,easing])},switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.apply(this,[{add:add,remove:remove},speed,easing,callback])}});$.extend($.effects,{version:"1.8",save:function(element,set){for(var i=0;i<set.length;i++)if(set[i]!==
null)element.data("ec.storage."+set[i],element[0].style[set[i]])},restore:function(element,set){for(var i=0;i<set.length;i++)if(set[i]!==null)element.css(set[i],element.data("ec.storage."+set[i]))},setMode:function(el,mode){if(mode=="toggle")mode=el.is(":hidden")?"show":"hide";return mode},getBaseline:function(origin,original){var y,x;switch(origin[0]){case "top":y=0;break;case "middle":y=0.5;break;case "bottom":y=1;break;default:y=origin[0]/original.height}switch(origin[1]){case "left":x=0;break;
case "center":x=0.5;break;case "right":x=1;break;default:x=origin[1]/original.width}return{x:x,y:y}},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper"))return element.parent();var props={width:element.outerWidth(true),height:element.outerHeight(true),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});element.wrap(wrapper);wrapper=element.parent();if(element.css("position")==
"static"){wrapper.css({position:"relative"});element.css({position:"relative"})}else{$.extend(props,{position:element.css("position"),zIndex:element.css("z-index")});$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10)))props[pos]="auto"});element.css({position:"relative",top:0,left:0})}return wrapper.css(props).show()},removeWrapper:function(element){if(element.parent().is(".ui-effects-wrapper"))return element.parent().replaceWith(element);
return element},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){unit=element.cssUnit(x);if(unit[0]>0)value[x]=unit[0]*factor+unit[1]});return value}});function _normalizeArguments(effect,options,speed,callback){if(typeof effect=="object"){callback=options;speed=null;options=effect;effect=options.effect}if($.isFunction(options)){callback=options;speed=null;options={}}if($.isFunction(speed)){callback=speed;speed=null}if(typeof options=="number"||$.fx.speeds[options]){callback=
speed;speed=options;options={}}options=options||{};speed=speed||options.duration;speed=$.fx.off?0:typeof speed=="number"?speed:$.fx.speeds[speed]||$.fx.speeds._default;callback=callback||options.complete;return[effect,options,speed,callback]}$.fn.extend({effect:function(effect,options,speed,callback){var args=_normalizeArguments.apply(this,arguments),args2={options:args[1],duration:args[2],callback:args[3]},effectMethod=$.effects[effect];return effectMethod&&!$.fx.off?effectMethod.call(this,args2):
this},_show:$.fn.show,show:function(speed){if(!speed||typeof speed=="number"||$.fx.speeds[speed])return this._show.apply(this,arguments);else{var args=_normalizeArguments.apply(this,arguments);args[1].mode="show";return this.effect.apply(this,args)}},_hide:$.fn.hide,hide:function(speed){if(!speed||typeof speed=="number"||$.fx.speeds[speed])return this._hide.apply(this,arguments);else{var args=_normalizeArguments.apply(this,arguments);args[1].mode="hide";return this.effect.apply(this,args)}},__toggle:$.fn.toggle,
toggle:function(speed){if(!speed||typeof speed=="number"||$.fx.speeds[speed]||typeof speed=="boolean"||$.isFunction(speed))return this.__toggle.apply(this,arguments);else{var args=_normalizeArguments.apply(this,arguments);args[1].mode="toggle";return this.effect.apply(this,args)}},cssUnit:function(key){var style=this.css(key),val=[];$.each(["em","px","%","pt"],function(i,unit){if(style.indexOf(unit)>0)val=[parseFloat(style),unit]});return val}});$.easing.jswing=$.easing.swing;$.extend($.easing,{def:"easeOutQuad",
swing:function(x,t,b,c,d){return $.easing[$.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*(--t*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,
t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b},
easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return t==0?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(x,t,b,c,d){return t==d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-
(t/=d)*t)-1)+b},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*0.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*2*Math.PI/p))+b},easeOutElastic:function(x,t,b,c,d){var s=
1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*0.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*2*Math.PI/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*0.3*1.5;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-0.5*a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*2*Math.PI/p)+b;return a*Math.pow(2,
-10*(t-=1))*Math.sin((t*d-s)*2*Math.PI/p)*0.5+c+b},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*t*t*(((s*=1.525)+1)*t-s)+b;return c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-$.easing.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,
t,b,c,d){if((t/=d)<1/2.75)return c*7.5625*t*t+b;else if(t<2/2.75)return c*(7.5625*(t-=1.5/2.75)*t+0.75)+b;else if(t<2.5/2.75)return c*(7.5625*(t-=2.25/2.75)*t+0.9375)+b;else return c*(7.5625*(t-=2.625/2.75)*t+0.984375)+b},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return $.easing.easeInBounce(x,t*2,0,c,d)*0.5+b;return $.easing.easeOutBounce(x,t*2-d,0,c,d)*0.5+c*0.5+b}})}(jQuery);
(function($){$.effects.blind=function(o){return this.queue(function(){var el=$(this),props=["position","top","left"];var mode=$.effects.setMode(el,o.options.mode||"hide");var direction=o.options.direction||"vertical";$.effects.save(el,props);el.show();var wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});var ref=direction=="vertical"?"height":"width";var distance=direction=="vertical"?wrapper.height():wrapper.width();if(mode=="show")wrapper.css(ref,0);var animation={};animation[ref]=mode==
"show"?distance:0;wrapper.animate(animation,o.duration,o.options.easing,function(){if(mode=="hide")el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(el[0],arguments);el.dequeue()})})}})(jQuery);
(function($){$.effects.bounce=function(o){return this.queue(function(){var el=$(this),props=["position","top","left"];var mode=$.effects.setMode(el,o.options.mode||"effect");var direction=o.options.direction||"up";var distance=o.options.distance||20;var times=o.options.times||5;var speed=o.duration||250;if(/show|hide/.test(mode))props.push("opacity");$.effects.save(el,props);el.show();$.effects.createWrapper(el);var ref=direction=="up"||direction=="down"?"top":"left";var motion=direction=="up"||direction==
"left"?"pos":"neg";var distance=o.options.distance||(ref=="top"?el.outerHeight({margin:true})/3:el.outerWidth({margin:true})/3);if(mode=="show")el.css("opacity",0).css(ref,motion=="pos"?-distance:distance);if(mode=="hide")distance=distance/(times*2);if(mode!="hide")times--;if(mode=="show"){var animation={opacity:1};animation[ref]=(motion=="pos"?"+=":"-=")+distance;el.animate(animation,speed/2,o.options.easing);distance=distance/2;times--}for(var i=0;i<times;i++){var animation1={},animation2={};animation1[ref]=
(motion=="pos"?"-=":"+=")+distance;animation2[ref]=(motion=="pos"?"+=":"-=")+distance;el.animate(animation1,speed/2,o.options.easing).animate(animation2,speed/2,o.options.easing);distance=mode=="hide"?distance*2:distance/2}if(mode=="hide"){var animation={opacity:0};animation[ref]=(motion=="pos"?"-=":"+=")+distance;el.animate(animation,speed/2,o.options.easing,function(){el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments)})}else{var animation1=
{},animation2={};animation1[ref]=(motion=="pos"?"-=":"+=")+distance;animation2[ref]=(motion=="pos"?"+=":"-=")+distance;el.animate(animation1,speed/2,o.options.easing).animate(animation2,speed/2,o.options.easing,function(){$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments)})}el.queue("fx",function(){el.dequeue()});el.dequeue()})}})(jQuery);
(function($){$.effects.clip=function(o){return this.queue(function(){var el=$(this),props=["position","top","left","height","width"];var mode=$.effects.setMode(el,o.options.mode||"hide");var direction=o.options.direction||"vertical";$.effects.save(el,props);el.show();var wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});var animate=el[0].tagName=="IMG"?wrapper:el;var ref={size:direction=="vertical"?"height":"width",position:direction=="vertical"?"top":"left"};var distance=direction=="vertical"?
animate.height():animate.width();if(mode=="show"){animate.css(ref.size,0);animate.css(ref.position,distance/2)}var animation={};animation[ref.size]=mode=="show"?distance:0;animation[ref.position]=mode=="show"?0:distance/2;animate.animate(animation,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){if(mode=="hide")el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(el[0],arguments);el.dequeue()}})})}})(jQuery);
(function($){$.effects.drop=function(o){return this.queue(function(){var el=$(this),props=["position","top","left","opacity"];var mode=$.effects.setMode(el,o.options.mode||"hide");var direction=o.options.direction||"left";$.effects.save(el,props);el.show();$.effects.createWrapper(el);var ref=direction=="up"||direction=="down"?"top":"left";var motion=direction=="up"||direction=="left"?"pos":"neg";var distance=o.options.distance||(ref=="top"?el.outerHeight({margin:true})/2:el.outerWidth({margin:true})/
2);if(mode=="show")el.css("opacity",0).css(ref,motion=="pos"?-distance:distance);var animation={opacity:mode=="show"?1:0};animation[ref]=(mode=="show"?motion=="pos"?"+=":"-=":motion=="pos"?"-=":"+=")+distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){if(mode=="hide")el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);el.dequeue()}})})}})(jQuery);
(function($){$.effects.explode=function(o){return this.queue(function(){var rows=o.options.pieces?Math.round(Math.sqrt(o.options.pieces)):3;var cells=o.options.pieces?Math.round(Math.sqrt(o.options.pieces)):3;o.options.mode=o.options.mode=="toggle"?$(this).is(":visible")?"hide":"show":o.options.mode;var el=$(this).show().css("visibility","hidden");var offset=el.offset();offset.top-=parseInt(el.css("marginTop"),10)||0;offset.left-=parseInt(el.css("marginLeft"),10)||0;var width=el.outerWidth(true);
var height=el.outerHeight(true);for(var i=0;i<rows;i++)for(var j=0;j<cells;j++)el.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(width/cells),top:-i*(height/rows)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:width/cells,height:height/rows,left:offset.left+j*(width/cells)+(o.options.mode=="show"?(j-Math.floor(cells/2))*(width/cells):0),top:offset.top+i*(height/rows)+(o.options.mode=="show"?(i-Math.floor(rows/
2))*(height/rows):0),opacity:o.options.mode=="show"?0:1}).animate({left:offset.left+j*(width/cells)+(o.options.mode=="show"?0:(j-Math.floor(cells/2))*(width/cells)),top:offset.top+i*(height/rows)+(o.options.mode=="show"?0:(i-Math.floor(rows/2))*(height/rows)),opacity:o.options.mode=="show"?1:0},o.duration||500);setTimeout(function(){o.options.mode=="show"?el.css({visibility:"visible"}):el.css({visibility:"visible"}).hide();if(o.callback)o.callback.apply(el[0]);el.dequeue();$("div.ui-effects-explode").remove()},
o.duration||500)})}})(jQuery);
(function($){$.effects.fold=function(o){return this.queue(function(){var el=$(this),props=["position","top","left"];var mode=$.effects.setMode(el,o.options.mode||"hide");var size=o.options.size||15;var horizFirst=!!o.options.horizFirst;var duration=o.duration?o.duration/2:$.fx.speeds._default/2;$.effects.save(el,props);el.show();var wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});var widthFirst=mode=="show"!=horizFirst;var ref=widthFirst?["width","height"]:["height","width"];var distance=
widthFirst?[wrapper.width(),wrapper.height()]:[wrapper.height(),wrapper.width()];var percent=/([0-9]+)%/.exec(size);if(percent)size=parseInt(percent[1],10)/100*distance[mode=="hide"?0:1];if(mode=="show")wrapper.css(horizFirst?{height:0,width:size}:{height:size,width:0});var animation1={},animation2={};animation1[ref[0]]=mode=="show"?distance[0]:size;animation2[ref[1]]=mode=="show"?distance[1]:0;wrapper.animate(animation1,duration,o.options.easing).animate(animation2,duration,o.options.easing,function(){if(mode==
"hide")el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(el[0],arguments);el.dequeue()})})}})(jQuery);
(function($){$.effects.highlight=function(o){return this.queue(function(){var elem=$(this),props=["backgroundImage","backgroundColor","opacity"],mode=$.effects.setMode(elem,o.options.mode||"show"),animation={backgroundColor:elem.css("backgroundColor")};if(mode=="hide")animation.opacity=0;$.effects.save(elem,props);elem.show().css({backgroundImage:"none",backgroundColor:o.options.color||"#ffff99"}).animate(animation,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){mode==
"hide"&&elem.hide();$.effects.restore(elem,props);mode=="show"&&!$.support.opacity&&this.style.removeAttribute("filter");o.callback&&o.callback.apply(this,arguments);elem.dequeue()}})})}})(jQuery);
(function($){$.effects.pulsate=function(o){return this.queue(function(){var elem=$(this),mode=$.effects.setMode(elem,o.options.mode||"show");times=(o.options.times||5)*2-1;duration=o.duration?o.duration/2:$.fx.speeds._default/2,isVisible=elem.is(":visible"),animateTo=0;if(!isVisible){elem.css("opacity",0).show();animateTo=1}if(mode=="hide"&&isVisible||mode=="show"&&!isVisible)times--;for(var i=0;i<times;i++){elem.animate({opacity:animateTo},duration,o.options.easing);animateTo=(animateTo+1)%2}elem.animate({opacity:animateTo},
duration,o.options.easing,function(){if(animateTo==0)elem.hide();o.callback&&o.callback.apply(this,arguments)});elem.queue("fx",function(){elem.dequeue()}).dequeue()})}})(jQuery);
(function($){$.effects.puff=function(o){return this.queue(function(){var elem=$(this),mode=$.effects.setMode(elem,o.options.mode||"hide"),percent=parseInt(o.options.percent,10)||150,factor=percent/100,original={height:elem.height(),width:elem.width()};$.extend(o.options,{fade:true,mode:mode,percent:mode=="hide"?percent:100,from:mode=="hide"?original:{height:original.height*factor,width:original.width*factor}});elem.effect("scale",o.options,o.duration,o.callback);elem.dequeue()})};$.effects.scale=
function(o){return this.queue(function(){var el=$(this);var options=$.extend(true,{},o.options);var mode=$.effects.setMode(el,o.options.mode||"effect");var percent=parseInt(o.options.percent,10)||(parseInt(o.options.percent,10)==0?0:mode=="hide"?0:100);var direction=o.options.direction||"both";var origin=o.options.origin;if(mode!="effect"){options.origin=origin||["middle","center"];options.restore=true}var original={height:el.height(),width:el.width()};el.from=o.options.from||(mode=="show"?{height:0,
width:0}:original);var factor={y:direction!="horizontal"?percent/100:1,x:direction!="vertical"?percent/100:1};el.to={height:original.height*factor.y,width:original.width*factor.x};if(o.options.fade){if(mode=="show"){el.from.opacity=0;el.to.opacity=1}if(mode=="hide"){el.from.opacity=1;el.to.opacity=0}}options.from=el.from;options.to=el.to;options.mode=mode;el.effect("size",options,o.duration,o.callback);el.dequeue()})};$.effects.size=function(o){return this.queue(function(){var el=$(this),props=["position",
"top","left","width","height","overflow","opacity"];var props1=["position","top","left","overflow","opacity"];var props2=["width","height","overflow"];var cProps=["fontSize"];var vProps=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var hProps=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var mode=$.effects.setMode(el,o.options.mode||"effect");var restore=o.options.restore||false;var scale=o.options.scale||"both";var origin=o.options.origin;var original=
{height:el.height(),width:el.width()};el.from=o.options.from||original;el.to=o.options.to||original;if(origin){var baseline=$.effects.getBaseline(origin,original);el.from.top=(original.height-el.from.height)*baseline.y;el.from.left=(original.width-el.from.width)*baseline.x;el.to.top=(original.height-el.to.height)*baseline.y;el.to.left=(original.width-el.to.width)*baseline.x}var factor={from:{y:el.from.height/original.height,x:el.from.width/original.width},to:{y:el.to.height/original.height,x:el.to.width/
original.width}};if(scale=="box"||scale=="both"){if(factor.from.y!=factor.to.y){props=props.concat(vProps);el.from=$.effects.setTransition(el,vProps,factor.from.y,el.from);el.to=$.effects.setTransition(el,vProps,factor.to.y,el.to)}if(factor.from.x!=factor.to.x){props=props.concat(hProps);el.from=$.effects.setTransition(el,hProps,factor.from.x,el.from);el.to=$.effects.setTransition(el,hProps,factor.to.x,el.to)}}if(scale=="content"||scale=="both")if(factor.from.y!=factor.to.y){props=props.concat(cProps);
el.from=$.effects.setTransition(el,cProps,factor.from.y,el.from);el.to=$.effects.setTransition(el,cProps,factor.to.y,el.to)}$.effects.save(el,restore?props:props1);el.show();$.effects.createWrapper(el);el.css("overflow","hidden").css(el.from);if(scale=="content"||scale=="both"){vProps=vProps.concat(["marginTop","marginBottom"]).concat(cProps);hProps=hProps.concat(["marginLeft","marginRight"]);props2=props.concat(vProps).concat(hProps);el.find("*[width]").each(function(){child=$(this);if(restore)$.effects.save(child,
props2);var c_original={height:child.height(),width:child.width()};child.from={height:c_original.height*factor.from.y,width:c_original.width*factor.from.x};child.to={height:c_original.height*factor.to.y,width:c_original.width*factor.to.x};if(factor.from.y!=factor.to.y){child.from=$.effects.setTransition(child,vProps,factor.from.y,child.from);child.to=$.effects.setTransition(child,vProps,factor.to.y,child.to)}if(factor.from.x!=factor.to.x){child.from=$.effects.setTransition(child,hProps,factor.from.x,
child.from);child.to=$.effects.setTransition(child,hProps,factor.to.x,child.to)}child.css(child.from);child.animate(child.to,o.duration,o.options.easing,function(){if(restore)$.effects.restore(child,props2)})})}el.animate(el.to,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){if(el.to.opacity===0)el.css("opacity",el.from.opacity);if(mode=="hide")el.hide();$.effects.restore(el,restore?props:props1);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);
el.dequeue()}})})}})(jQuery);
(function($){$.effects.shake=function(o){return this.queue(function(){var el=$(this),props=["position","top","left"];var mode=$.effects.setMode(el,o.options.mode||"effect");var direction=o.options.direction||"left";var distance=o.options.distance||20;var times=o.options.times||3;var speed=o.duration||o.options.duration||140;$.effects.save(el,props);el.show();$.effects.createWrapper(el);var ref=direction=="up"||direction=="down"?"top":"left";var motion=direction=="up"||direction=="left"?"pos":"neg";
var animation={},animation1={},animation2={};animation[ref]=(motion=="pos"?"-=":"+=")+distance;animation1[ref]=(motion=="pos"?"+=":"-=")+distance*2;animation2[ref]=(motion=="pos"?"-=":"+=")+distance*2;el.animate(animation,speed,o.options.easing);for(var i=1;i<times;i++)el.animate(animation1,speed,o.options.easing).animate(animation2,speed,o.options.easing);el.animate(animation1,speed,o.options.easing).animate(animation,speed/2,o.options.easing,function(){$.effects.restore(el,props);$.effects.removeWrapper(el);
if(o.callback)o.callback.apply(this,arguments)});el.queue("fx",function(){el.dequeue()});el.dequeue()})}})(jQuery);
(function($){$.effects.slide=function(o){return this.queue(function(){var el=$(this),props=["position","top","left"];var mode=$.effects.setMode(el,o.options.mode||"show");var direction=o.options.direction||"left";$.effects.save(el,props);el.show();$.effects.createWrapper(el).css({overflow:"hidden"});var ref=direction=="up"||direction=="down"?"top":"left";var motion=direction=="up"||direction=="left"?"pos":"neg";var distance=o.options.distance||(ref=="top"?el.outerHeight({margin:true}):el.outerWidth({margin:true}));
if(mode=="show")el.css(ref,motion=="pos"?-distance:distance);var animation={};animation[ref]=(mode=="show"?motion=="pos"?"+=":"-=":motion=="pos"?"-=":"+=")+distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){if(mode=="hide")el.hide();$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);el.dequeue()}})})}})(jQuery);
(function($){$.effects.transfer=function(o){return this.queue(function(){var elem=$(this),target=$(o.options.to),endPosition=target.offset(),animation={top:endPosition.top,left:endPosition.left,height:target.innerHeight(),width:target.innerWidth()},startPosition=elem.offset(),transfer=$('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(o.options.className).css({top:startPosition.top,left:startPosition.left,height:elem.innerHeight(),width:elem.innerWidth(),position:"absolute"}).animate(animation,
o.duration,o.options.easing,function(){transfer.remove();o.callback&&o.callback.apply(elem[0],arguments);elem.dequeue()})})}})(jQuery);(function($){var helper,visible,timeout1,keepMessage;$.fn.message=function(param){if(typeof param!="string"){message=param.text;keepMessage=true;initPermMessageHelper()}else{message=$.trim(param||this.text());keepMessage=false;clearTimeout(timeout1);initHelper()}helper.find("div:first").html(message);helper.show().animate({opacity:$.message.defaults.opacity},$.message.defaults.fadeInDuration).center({vertical:false,horizontal:true});visible=true;active=false;if(!keepMessage)timeout1=setTimeout(function(){visible=
false},$.message.defaults.minDuration+$.message.defaults.displayDurationPerCharacter*Math.sqrt(message.length))};function initPermMessageHelper(){if(!helper){helper=$($.message.defaults.template).appendTo(document.body);helper.shadow();Ui.transformToConsoleButton($(".button",helper));$(".button",helper).click(fadeOutHelperNow)}}function initHelper(){if(!helper){helper=$($.message.defaults.template).appendTo(document.body);helper.shadow();Ui.transformToConsoleButton($(".button",helper));$(".button",
helper).click(fadeOutHelperNow);$(window).bind("mousemove click keypress",fadeOutHelper)}}function fadeOutHelper(){if(helper.is(":visible")&&!helper.is(":animated")&&!visible)helper.animate({opacity:0},$.message.defaults.fadeOutDuration,function(){$(this).hide()})}function fadeOutHelperNow(){if(helper.is(":visible"))helper.animate({opacity:0},$.message.defaults.fadeOutDuration,function(){$(this).hide()})}$.message={};$.message.defaults={opacity:1,fadeOutDuration:500,fadeInDuration:200,displayDurationPerCharacter:125,
minDuration:2500,totalTimeout:6E3,template:'<div class="jquery-message ui-big-corner-all"><img src="'+CB.resolve("graphics/message-info.png")+'" /><div class="jquery-message-text"></div><div class="button">OK</div></div>',permTemplate:'<div class="jquery-message ui-big-corner-all"><img src="'+CB.resolve("graphics/message-info.png")+'" /><div class="jquery-message-text"></div></div>'}})(jQuery);(function($){$.fn.extend({shadow:function(options){var options=$.extend({offsetX:"2px",offsetY:"3px",blurRadius:"10px",shadowColor:"#000000",remove:false},options);if(options.remove)return this.each(function(){$(this).css("box-shadow","");$(this).css("-moz-box-shadow","");$(this).css("-webkit-box-shadow","")});else return this.each(function(){var o=options;$(this).css("box-shadow"," "+o.offsetX+" "+o.offsetY+" "+o.blurRadius+" "+o.shadowColor);$(this).css("-moz-box-shadow"," "+o.offsetX+" "+o.offsetY+
" "+o.blurRadius+" "+o.shadowColor);$(this).css("-webkit-box-shadow"," "+o.offsetX+" "+o.offsetY+" "+o.blurRadius+" "+o.shadowColor)})}})})(jQuery);if(jQuery)(function(){var currentMenu=null;$.extend($.fn,{contextMenu:function(o,callback){if(o.createMenu==undefined)return false;if(o.destroyMenu==undefined)return false;if(o.inSpeed==undefined)o.inSpeed=150;if(o.outSpeed==undefined)o.outSpeed=75;if(o.inSpeed==0)o.inSpeed=-1;if(o.outSpeed==0)o.outSpeed=-1;$(this).bind("contextmenu",function(e){var self=$(this);self.trigger("beforeContextMenu");if(currentMenu!=null)currentMenu.destroy();var menuElement=o.createMenu($(e.target));if(!menuElement||
!menuElement.length)return;menuElement.addClass("contextMenu");var d={},x,y;if(self.innerHeight){d.pageYOffset=self.pageYOffset;d.pageXOffset=self.pageXOffset;d.innerHeight=self.innerHeight;d.innerWidth=self.innerWidth}else if(document.documentElement&&document.documentElement.clientHeight){d.pageYOffset=document.documentElement.scrollTop;d.pageXOffset=document.documentElement.scrollLeft;d.innerHeight=document.documentElement.clientHeight;d.innerWidth=document.documentElement.clientWidth}else if(document.body){d.pageYOffset=
document.body.scrollTop;d.pageXOffset=document.body.scrollLeft;d.innerHeight=document.body.clientHeight;d.innerWidth=document.body.clientWidth}e.pageX?x=e.pageX:x=e.clientX+d.scrollLeft;e.pageY?y=e.pageY:x=e.clientY+d.scrollTop;var menu={element:menuElement,destroy:function(){menuElement.find("LI A").unbind("click");$(document).unbind("click",menu.documentClick);menuElement.fadeOut(o.outSpeed,o.destroyMenu);currentMenu=null;Ui.Keyboard.restoreFocus()},keypress:function(e){var keyCode=e.keyCode;if(keyCode==
27){menu.destroy();return false}else if(keyCode>=37&&keyCode<=40)return false;return Ui.Keyboard.keypressCatchall(e)},documentClick:function(e){menu.destroy()}};menuElement.css({top:-1E3,left:-1E3}).fadeIn(o.inSpeed,function(){$(document).bind("click",menu.documentClick)});var menuWidth=$(menuElement).width();var menuHeight=$(menuElement).height();var docWidth=$(document).width();var docHeight=$(document).height();if(x+menuWidth>=docWidth)x=docWidth-menuWidth-2;if(y+menuHeight>=docHeight)y=docHeight-
menuHeight-2;menuElement.css({top:y,left:x});menuElement.find("A").mouseover(function(){menuElement.find("LI.hover").removeClass("hover");$(this).parent().addClass("hover")}).mouseout(function(){menuElement.find("LI.hover").removeClass("hover")});self.trigger("contextMenu");menuElement.find("LI[disabled!=true] A").one("click",function(){menu.destroy();if(callback)callback($(this).attr("action"),self)});menuElement.find("LI[disabled=true] A").bind("click",function(){return false});Ui.Keyboard.saveAndSetFocus(menu);
currentMenu=menu;return false});return $(self)}});$(document).on("selectablestart",".ui-selectable",function(){if(currentMenu!=null)currentMenu.destroy()})})(jQuery);/*
 free
 @param bool vertical, bool horizontal
 @contribution Paulo Radichi

*/
jQuery.fn.center=function(params){var options={vertical:true,horizontal:true};op=jQuery.extend(options,params);return this.each(function(){var $self=jQuery(this);var width=$self.width();var height=$self.height();var paddingTop=parseInt($self.css("padding-top"));if(isNaN(paddingTop))paddingTop=0;var paddingBottom=parseInt($self.css("padding-bottom"));if(isNaN(paddingBottom))paddingBottom=0;var borderTop=parseInt($self.css("border-top-width"));if(isNaN(borderTop))borderTop=0;var borderBottom=parseInt($self.css("border-bottom-width"));
if(isNaN(borderBottom))borderBottom=0;var mediaBorder=(borderTop+borderBottom)/2;var mediaPadding=(paddingTop+paddingBottom)/2;var positionType=$self.parent().css("position");var halfWidth=width/2*-1;var halfHeight=height/2*-1-mediaPadding-mediaBorder;var cssProp={position:"absolute"};if(op.vertical){cssProp.height=height;cssProp.top="50%";cssProp.marginTop=halfHeight}if(op.horizontal){cssProp.width=width;cssProp.left="50%";cssProp.marginLeft=halfWidth}if(positionType=="static")$self.parent().css("position",
"relative");$self.css(cssProp)})};!function($){var Tooltip=function(element,options){this.init("tooltip",element,options)};Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut,triggers,trigger,i;this.type=type;this.$element=$(element);this.options=this.getOptions(options);this.enabled=true;triggers=this.options.trigger.split(" ");for(i=triggers.length;i--;){trigger=triggers[i];if(trigger=="click")this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if(trigger!=
"manual"){eventIn=trigger=="hover"?"mouseenter":"focus";eventOut=trigger=="hover"?"mouseleave":"blur";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(options){options=$.extend({},$.fn[this.type].defaults,this.$element.data(),options);if(options.delay&&
typeof options.delay=="number")options.delay={show:options.delay,hide:options.delay};return options},enter:function(e){var defaults=$.fn[this.type].defaults,options={},self;this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value},this);self=$(e.currentTarget)[this.type](options).data(this.type);if(!self.options.delay||!self.options.delay.show)return self.show();clearTimeout(this.timeout);self.hoverState="in";this.timeout=setTimeout(function(){if(self.hoverState==
"in")self.show()},self.options.delay.show)},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);if(this.timeout)clearTimeout(this.timeout);if(!self.options.delay||!self.options.delay.hide)return self.hide();self.hoverState="out";this.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)},show:function(){var $tip,pos,actualWidth,actualHeight,placement,tp,e=$.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(e);
if(e.isDefaultPrevented())return;$tip=this.tip();this.setContent();if(this.options.animation)$tip.addClass("fade");placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;$tip.detach().css({top:0,left:0,display:"block"});this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);pos=this.getPosition();actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;switch(placement){case "bottom":tp=
{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case "top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case "left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case "right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width};break}this.applyPlacement(tp,placement);this.$element.trigger("shown")}},applyPlacement:function(offset,placement){var $tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,
actualWidth,actualHeight,delta,replace;$tip.offset(offset).addClass(placement).addClass("in");actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){offset.top=offset.top+height-actualHeight;replace=true}if(placement=="bottom"||placement=="top"){delta=0;if(offset.left<0){delta=offset.left*-2;offset.left=0;$tip.offset(offset);actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight}this.replaceArrow(delta-width+actualWidth,actualWidth,
"left")}else this.replaceArrow(actualHeight-height,actualHeight,"top");if(replace)$tip.offset(offset)},replaceArrow:function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},setContent:function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")},hide:function(){var that=this,$tip=this.tip(),e=$.Event("hide");this.$element.trigger(e);if(e.isDefaultPrevented())return;
$tip.removeClass("in");function removeWithAnimation(){var timeout=setTimeout(function(){$tip.off($.support.transition.end).detach()},500);$tip.one($.support.transition.end,function(){clearTimeout(timeout);$tip.detach()})}$.support.transition&&this.$tip.hasClass("fade")?removeWithAnimation():$tip.detach();this.$element.trigger("hidden");return this},fixTitle:function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string")$e.attr("data-original-title",$e.attr("title")||
"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var el=this.$element[0];return $.extend({},typeof el.getBoundingClientRect=="function"?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},getTitle:function(){var title,$e=this.$element,o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title},tip:function(){return this.$tip=this.$tip||$(this.options.template)},
arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var self=e?$(e.currentTarget)[this.type](this._options).data(this.type):this;self.tip().hasClass("in")?self.hide():self.show()},destroy:function(){this.hide().$element.off("."+
this.type).removeData(this.type)}};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("tooltip"),options=typeof option=="object"&&option;if(!data)$this.data("tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})};$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.defaults={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
trigger:"hover focus",title:"",delay:0,html:false,container:false};$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this}}(window.jQuery);!function($){var Popover=function(element,options){this.init("popover",element,options)};Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype,{constructor:Popover,setContent:function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content")[this.options.html?"html":"text"](content);$tip.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||
this.getContent()},getContent:function(){var content,$e=this.$element,o=this.options;content=(typeof o.content=="function"?o.content.call($e[0]):o.content)||$e.attr("data-content");return content},tip:function(){if(!this.$tip)this.$tip=$(this.options.template);return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("popover"),options=typeof option==
"object"&&option;if(!data)$this.data("popover",data=new Popover(this,options));if(typeof option=="string")data[option]()})};$.fn.popover.Constructor=Popover;$.fn.popover.defaults=$.extend({},$.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});$.fn.popover.noConflict=function(){$.fn.popover=old;return this}}(window.jQuery);(function(){var DEBUG=true;(function(undefined){var window=this||(0,eval)("this"),document=window["document"],navigator=window["navigator"],jQuery=window["jQuery"],JSON=window["JSON"];(function(factory){if(typeof require==="function"&&typeof exports==="object"&&typeof module==="object"){var target=module["exports"]||exports;factory(target)}else if(typeof define==="function"&&define["amd"])define(["exports"],factory);else factory(window["ko"]={})})(function(koExports){var ko=typeof koExports!=="undefined"?
koExports:{};ko.exportSymbol=function(koPath,object){var tokens=koPath.split(".");var target=ko;for(var i=0;i<tokens.length-1;i++)target=target[tokens[i]];target[tokens[tokens.length-1]]=object};ko.exportProperty=function(owner,publicName,object){owner[publicName]=object};ko.version="3.0.0";ko.exportSymbol("version",ko.version);ko.utils=function(){var objectForEach=function(obj,action){for(var prop in obj)if(obj.hasOwnProperty(prop))action(prop,obj[prop])};var knownEvents={},knownEventTypesByEventName=
{};var keyEventTypeName=navigator&&/Firefox\/2/i.test(navigator.userAgent)?"KeyboardEvent":"UIEvents";knownEvents[keyEventTypeName]=["keyup","keydown","keypress"];knownEvents["MouseEvents"]=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"];objectForEach(knownEvents,function(eventType,knownEventsForType){if(knownEventsForType.length)for(var i=0,j=knownEventsForType.length;i<j;i++)knownEventTypesByEventName[knownEventsForType[i]]=eventType});var eventsThatMustBeRegisteredUsingAttachEvent=
{"propertychange":true};var ieVersion=document&&function(){var version=3,div=document.createElement("div"),iElems=div.getElementsByTagName("i");while(div.innerHTML="<\!--[if gt IE "+ ++version+"]><i></i><![endif]--\>",iElems[0]);return version>4?version:undefined}();var isIe6=ieVersion===6,isIe7=ieVersion===7;function isClickOnCheckableElement(element,eventType){if(ko.utils.tagNameLower(element)!=="input"||!element.type)return false;if(eventType.toLowerCase()!="click")return false;var inputType=element.type;
return inputType=="checkbox"||inputType=="radio"}return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(array,action){for(var i=0,j=array.length;i<j;i++)action(array[i])},arrayIndexOf:function(array,item){if(typeof Array.prototype.indexOf=="function")return Array.prototype.indexOf.call(array,item);for(var i=0,j=array.length;i<j;i++)if(array[i]===item)return i;return-1},arrayFirst:function(array,predicate,predicateOwner){for(var i=0,j=array.length;i<
j;i++)if(predicate.call(predicateOwner,array[i]))return array[i];return null},arrayRemoveItem:function(array,itemToRemove){var index=ko.utils.arrayIndexOf(array,itemToRemove);if(index>=0)array.splice(index,1)},arrayGetDistinctValues:function(array){array=array||[];var result=[];for(var i=0,j=array.length;i<j;i++)if(ko.utils.arrayIndexOf(result,array[i])<0)result.push(array[i]);return result},arrayMap:function(array,mapping){array=array||[];var result=[];for(var i=0,j=array.length;i<j;i++)result.push(mapping(array[i]));
return result},arrayFilter:function(array,predicate){array=array||[];var result=[];for(var i=0,j=array.length;i<j;i++)if(predicate(array[i]))result.push(array[i]);return result},arrayPushAll:function(array,valuesToPush){if(valuesToPush instanceof Array)array.push.apply(array,valuesToPush);else for(var i=0,j=valuesToPush.length;i<j;i++)array.push(valuesToPush[i]);return array},addOrRemoveItem:function(array,value,included){var existingEntryIndex=ko.utils.arrayIndexOf(ko.utils.peekObservable(array),
value);if(existingEntryIndex<0){if(included)array.push(value)}else if(!included)array.splice(existingEntryIndex,1)},extend:function(target,source){if(source)for(var prop in source)if(source.hasOwnProperty(prop))target[prop]=source[prop];return target},objectForEach:objectForEach,objectMap:function(source,mapping){if(!source)return source;var target={};for(var prop in source)if(source.hasOwnProperty(prop))target[prop]=mapping(source[prop],prop,source);return target},emptyDomNode:function(domNode){while(domNode.firstChild)ko.removeNode(domNode.firstChild)},
moveCleanedNodesToContainerElement:function(nodes){var nodesArray=ko.utils.makeArray(nodes);var container=document.createElement("div");for(var i=0,j=nodesArray.length;i<j;i++)container.appendChild(ko.cleanNode(nodesArray[i]));return container},cloneNodes:function(nodesArray,shouldCleanNodes){for(var i=0,j=nodesArray.length,newNodesArray=[];i<j;i++){var clonedNode=nodesArray[i].cloneNode(true);newNodesArray.push(shouldCleanNodes?ko.cleanNode(clonedNode):clonedNode)}return newNodesArray},setDomNodeChildren:function(domNode,
childNodes){ko.utils.emptyDomNode(domNode);if(childNodes)for(var i=0,j=childNodes.length;i<j;i++)domNode.appendChild(childNodes[i])},replaceDomNodes:function(nodeToReplaceOrNodeArray,newNodesArray){var nodesToReplaceArray=nodeToReplaceOrNodeArray.nodeType?[nodeToReplaceOrNodeArray]:nodeToReplaceOrNodeArray;if(nodesToReplaceArray.length>0){var insertionPoint=nodesToReplaceArray[0];var parent=insertionPoint.parentNode;for(var i=0,j=newNodesArray.length;i<j;i++)parent.insertBefore(newNodesArray[i],insertionPoint);
for(var i=0,j=nodesToReplaceArray.length;i<j;i++)ko.removeNode(nodesToReplaceArray[i])}},fixUpContinuousNodeArray:function(continuousNodeArray,parentNode){if(continuousNodeArray.length){parentNode=parentNode.nodeType===8&&parentNode.parentNode||parentNode;while(continuousNodeArray.length&&continuousNodeArray[0].parentNode!==parentNode)continuousNodeArray.splice(0,1);if(continuousNodeArray.length>1){var current=continuousNodeArray[0],last=continuousNodeArray[continuousNodeArray.length-1];continuousNodeArray.length=
0;while(current!==last){continuousNodeArray.push(current);current=current.nextSibling;if(!current)return}continuousNodeArray.push(last)}}return continuousNodeArray},setOptionNodeSelectionState:function(optionNode,isSelected){if(ieVersion<7)optionNode.setAttribute("selected",isSelected);else optionNode.selected=isSelected},stringTrim:function(string){return string===null||string===undefined?"":string.trim?string.trim():string.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringTokenize:function(string,
delimiter){var result=[];var tokens=(string||"").split(delimiter);for(var i=0,j=tokens.length;i<j;i++){var trimmed=ko.utils.stringTrim(tokens[i]);if(trimmed!=="")result.push(trimmed)}return result},stringStartsWith:function(string,startsWith){string=string||"";if(startsWith.length>string.length)return false;return string.substring(0,startsWith.length)===startsWith},domNodeIsContainedBy:function(node,containedByNode){if(node===containedByNode)return true;if(node.nodeType===11)return false;if(containedByNode.contains)return containedByNode.contains(node.nodeType===
3?node.parentNode:node);if(containedByNode.compareDocumentPosition)return(containedByNode.compareDocumentPosition(node)&16)==16;while(node&&node!=containedByNode)node=node.parentNode;return!!node},domNodeIsAttachedToDocument:function(node){return ko.utils.domNodeIsContainedBy(node,node.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(nodes){return!!ko.utils.arrayFirst(nodes,ko.utils.domNodeIsAttachedToDocument)},tagNameLower:function(element){return element&&element.tagName&&
element.tagName.toLowerCase()},registerEventHandler:function(element,eventType,handler){var mustUseAttachEvent=ieVersion&&eventsThatMustBeRegisteredUsingAttachEvent[eventType];if(!mustUseAttachEvent&&typeof jQuery!="undefined"){if(isClickOnCheckableElement(element,eventType)){var originalHandler=handler;handler=function(event,eventData){var jQuerySuppliedCheckedState=this.checked;if(eventData)this.checked=eventData.checkedStateBeforeEvent!==true;originalHandler.call(this,event);this.checked=jQuerySuppliedCheckedState}}jQuery(element)["bind"](eventType,
handler)}else if(!mustUseAttachEvent&&typeof element.addEventListener=="function")element.addEventListener(eventType,handler,false);else if(typeof element.attachEvent!="undefined"){var attachEventHandler=function(event){handler.call(element,event)},attachEventName="on"+eventType;element.attachEvent(attachEventName,attachEventHandler);ko.utils.domNodeDisposal.addDisposeCallback(element,function(){element.detachEvent(attachEventName,attachEventHandler)})}else throw new Error("Browser doesn't support addEventListener or attachEvent");
},triggerEvent:function(element,eventType){if(!(element&&element.nodeType))throw new Error("element must be a DOM node when calling triggerEvent");if(typeof jQuery!="undefined"){var eventData=[];if(isClickOnCheckableElement(element,eventType))eventData.push({checkedStateBeforeEvent:element.checked});jQuery(element)["trigger"](eventType,eventData)}else if(typeof document.createEvent=="function")if(typeof element.dispatchEvent=="function"){var eventCategory=knownEventTypesByEventName[eventType]||"HTMLEvents";
var event=document.createEvent(eventCategory);event.initEvent(eventType,true,true,window,0,0,0,0,0,false,false,false,false,0,element);element.dispatchEvent(event)}else throw new Error("The supplied element doesn't support dispatchEvent");else if(typeof element.fireEvent!="undefined"){if(isClickOnCheckableElement(element,eventType))element.checked=element.checked!==true;element.fireEvent("on"+eventType)}else throw new Error("Browser doesn't support triggering events");},unwrapObservable:function(value){return ko.isObservable(value)?
value():value},peekObservable:function(value){return ko.isObservable(value)?value.peek():value},toggleDomNodeCssClass:function(node,classNames,shouldHaveClass){if(classNames){var cssClassNameRegex=/\S+/g,currentClassNames=node.className.match(cssClassNameRegex)||[];ko.utils.arrayForEach(classNames.match(cssClassNameRegex),function(className){ko.utils.addOrRemoveItem(currentClassNames,className,shouldHaveClass)});node.className=currentClassNames.join(" ")}},setTextContent:function(element,textContent){var value=
ko.utils.unwrapObservable(textContent);if(value===null||value===undefined)value="";var innerTextNode=ko.virtualElements.firstChild(element);if(!innerTextNode||innerTextNode.nodeType!=3||ko.virtualElements.nextSibling(innerTextNode))ko.virtualElements.setDomNodeChildren(element,[document.createTextNode(value)]);else innerTextNode.data=value;ko.utils.forceRefresh(element)},setElementName:function(element,name){element.name=name;if(ieVersion<=7)try{element.mergeAttributes(document.createElement("<input name='"+
element.name+"'/>"),false)}catch(e){}},forceRefresh:function(node){if(ieVersion>=9){var elem=node.nodeType==1?node:node.parentNode;if(elem.style)elem.style.zoom=elem.style.zoom}},ensureSelectElementIsRenderedCorrectly:function(selectElement){if(ieVersion){var originalWidth=selectElement.style.width;selectElement.style.width=0;selectElement.style.width=originalWidth}},range:function(min,max){min=ko.utils.unwrapObservable(min);max=ko.utils.unwrapObservable(max);var result=[];for(var i=min;i<=max;i++)result.push(i);
return result},makeArray:function(arrayLikeObject){var result=[];for(var i=0,j=arrayLikeObject.length;i<j;i++)result.push(arrayLikeObject[i]);return result},isIe6:isIe6,isIe7:isIe7,ieVersion:ieVersion,getFormFields:function(form,fieldName){var fields=ko.utils.makeArray(form.getElementsByTagName("input")).concat(ko.utils.makeArray(form.getElementsByTagName("textarea")));var isMatchingField=typeof fieldName=="string"?function(field){return field.name===fieldName}:function(field){return fieldName.test(field.name)};
var matches=[];for(var i=fields.length-1;i>=0;i--)if(isMatchingField(fields[i]))matches.push(fields[i]);return matches},parseJson:function(jsonString){if(typeof jsonString=="string"){jsonString=ko.utils.stringTrim(jsonString);if(jsonString){if(JSON&&JSON.parse)return JSON.parse(jsonString);return(new Function("return "+jsonString))()}}return null},stringifyJson:function(data,replacer,space){if(!JSON||!JSON.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");
return JSON.stringify(ko.utils.unwrapObservable(data),replacer,space)},postJson:function(urlOrForm,data,options){options=options||{};var params=options["params"]||{};var includeFields=options["includeFields"]||this.fieldsIncludedWithJsonPost;var url=urlOrForm;if(typeof urlOrForm=="object"&&ko.utils.tagNameLower(urlOrForm)==="form"){var originalForm=urlOrForm;url=originalForm.action;for(var i=includeFields.length-1;i>=0;i--){var fields=ko.utils.getFormFields(originalForm,includeFields[i]);for(var j=
fields.length-1;j>=0;j--)params[fields[j].name]=fields[j].value}}data=ko.utils.unwrapObservable(data);var form=document.createElement("form");form.style.display="none";form.action=url;form.method="post";for(var key in data){var input=document.createElement("input");input.name=key;input.value=ko.utils.stringifyJson(ko.utils.unwrapObservable(data[key]));form.appendChild(input)}objectForEach(params,function(key,value){var input=document.createElement("input");input.name=key;input.value=value;form.appendChild(input)});
document.body.appendChild(form);options["submitter"]?options["submitter"](form):form.submit();setTimeout(function(){form.parentNode.removeChild(form)},0)}}}();ko.exportSymbol("utils",ko.utils);ko.exportSymbol("utils.arrayForEach",ko.utils.arrayForEach);ko.exportSymbol("utils.arrayFirst",ko.utils.arrayFirst);ko.exportSymbol("utils.arrayFilter",ko.utils.arrayFilter);ko.exportSymbol("utils.arrayGetDistinctValues",ko.utils.arrayGetDistinctValues);ko.exportSymbol("utils.arrayIndexOf",ko.utils.arrayIndexOf);
ko.exportSymbol("utils.arrayMap",ko.utils.arrayMap);ko.exportSymbol("utils.arrayPushAll",ko.utils.arrayPushAll);ko.exportSymbol("utils.arrayRemoveItem",ko.utils.arrayRemoveItem);ko.exportSymbol("utils.extend",ko.utils.extend);ko.exportSymbol("utils.fieldsIncludedWithJsonPost",ko.utils.fieldsIncludedWithJsonPost);ko.exportSymbol("utils.getFormFields",ko.utils.getFormFields);ko.exportSymbol("utils.peekObservable",ko.utils.peekObservable);ko.exportSymbol("utils.postJson",ko.utils.postJson);ko.exportSymbol("utils.parseJson",
ko.utils.parseJson);ko.exportSymbol("utils.registerEventHandler",ko.utils.registerEventHandler);ko.exportSymbol("utils.stringifyJson",ko.utils.stringifyJson);ko.exportSymbol("utils.range",ko.utils.range);ko.exportSymbol("utils.toggleDomNodeCssClass",ko.utils.toggleDomNodeCssClass);ko.exportSymbol("utils.triggerEvent",ko.utils.triggerEvent);ko.exportSymbol("utils.unwrapObservable",ko.utils.unwrapObservable);ko.exportSymbol("utils.objectForEach",ko.utils.objectForEach);ko.exportSymbol("utils.addOrRemoveItem",
ko.utils.addOrRemoveItem);ko.exportSymbol("unwrap",ko.utils.unwrapObservable);if(!Function.prototype["bind"])Function.prototype["bind"]=function(object){var originalFunction=this,args=Array.prototype.slice.call(arguments),object=args.shift();return function(){return originalFunction.apply(object,args.concat(Array.prototype.slice.call(arguments)))}};ko.utils.domData=new function(){var uniqueId=0;var dataStoreKeyExpandoPropertyName="__ko__"+(new Date).getTime();var dataStore={};function getAll(node,
createIfNotFound){var dataStoreKey=node[dataStoreKeyExpandoPropertyName];var hasExistingDataStore=dataStoreKey&&dataStoreKey!=="null"&&dataStore[dataStoreKey];if(!hasExistingDataStore){if(!createIfNotFound)return undefined;dataStoreKey=node[dataStoreKeyExpandoPropertyName]="ko"+uniqueId++;dataStore[dataStoreKey]={}}return dataStore[dataStoreKey]}return{get:function(node,key){var allDataForNode=getAll(node,false);return allDataForNode===undefined?undefined:allDataForNode[key]},set:function(node,key,
value){if(value===undefined)if(getAll(node,false)===undefined)return;var allDataForNode=getAll(node,true);allDataForNode[key]=value},clear:function(node){var dataStoreKey=node[dataStoreKeyExpandoPropertyName];if(dataStoreKey){delete dataStore[dataStoreKey];node[dataStoreKeyExpandoPropertyName]=null;return true}return false},nextKey:function(){return uniqueId++ +dataStoreKeyExpandoPropertyName}}};ko.exportSymbol("utils.domData",ko.utils.domData);ko.exportSymbol("utils.domData.clear",ko.utils.domData.clear);
ko.utils.domNodeDisposal=new function(){var domDataKey=ko.utils.domData.nextKey();var cleanableNodeTypes={1:true,8:true,9:true};var cleanableNodeTypesWithDescendants={1:true,9:true};function getDisposeCallbacksCollection(node,createIfNotFound){var allDisposeCallbacks=ko.utils.domData.get(node,domDataKey);if(allDisposeCallbacks===undefined&&createIfNotFound){allDisposeCallbacks=[];ko.utils.domData.set(node,domDataKey,allDisposeCallbacks)}return allDisposeCallbacks}function destroyCallbacksCollection(node){ko.utils.domData.set(node,
domDataKey,undefined)}function cleanSingleNode(node){var callbacks=getDisposeCallbacksCollection(node,false);if(callbacks){callbacks=callbacks.slice(0);for(var i=0;i<callbacks.length;i++)callbacks[i](node)}ko.utils.domData.clear(node);if(typeof jQuery=="function"&&typeof jQuery["cleanData"]=="function")jQuery["cleanData"]([node]);if(cleanableNodeTypesWithDescendants[node.nodeType])cleanImmediateCommentTypeChildren(node)}function cleanImmediateCommentTypeChildren(nodeWithChildren){var child,nextChild=
nodeWithChildren.firstChild;while(child=nextChild){nextChild=child.nextSibling;if(child.nodeType===8)cleanSingleNode(child)}}return{addDisposeCallback:function(node,callback){if(typeof callback!="function")throw new Error("Callback must be a function");getDisposeCallbacksCollection(node,true).push(callback)},removeDisposeCallback:function(node,callback){var callbacksCollection=getDisposeCallbacksCollection(node,false);if(callbacksCollection){ko.utils.arrayRemoveItem(callbacksCollection,callback);
if(callbacksCollection.length==0)destroyCallbacksCollection(node)}},cleanNode:function(node){if(cleanableNodeTypes[node.nodeType]){cleanSingleNode(node);if(cleanableNodeTypesWithDescendants[node.nodeType]){var descendants=[];ko.utils.arrayPushAll(descendants,node.getElementsByTagName("*"));for(var i=0,j=descendants.length;i<j;i++)cleanSingleNode(descendants[i])}}return node},removeNode:function(node){ko.cleanNode(node);if(node.parentNode)node.parentNode.removeChild(node)}}};ko.cleanNode=ko.utils.domNodeDisposal.cleanNode;
ko.removeNode=ko.utils.domNodeDisposal.removeNode;ko.exportSymbol("cleanNode",ko.cleanNode);ko.exportSymbol("removeNode",ko.removeNode);ko.exportSymbol("utils.domNodeDisposal",ko.utils.domNodeDisposal);ko.exportSymbol("utils.domNodeDisposal.addDisposeCallback",ko.utils.domNodeDisposal.addDisposeCallback);ko.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",ko.utils.domNodeDisposal.removeDisposeCallback);(function(){var leadingCommentRegex=/^(\s*)<\!--(.*?)--\>/;function simpleHtmlParse(html){var tags=
ko.utils.stringTrim(html).toLowerCase(),div=document.createElement("div");var wrap=tags.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!tags.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!tags.indexOf("<td")||!tags.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];var markup="ignored<div>"+wrap[1]+html+wrap[2]+"</div>";if(typeof window["innerShiv"]=="function")div.appendChild(window["innerShiv"](markup));else div.innerHTML=markup;while(wrap[0]--)div=
div.lastChild;return ko.utils.makeArray(div.lastChild.childNodes)}function jQueryHtmlParse(html){if(jQuery["parseHTML"])return jQuery["parseHTML"](html)||[];else{var elems=jQuery["clean"]([html]);if(elems&&elems[0]){var elem=elems[0];while(elem.parentNode&&elem.parentNode.nodeType!==11)elem=elem.parentNode;if(elem.parentNode)elem.parentNode.removeChild(elem)}return elems}}ko.utils.parseHtmlFragment=function(html){return typeof jQuery!="undefined"?jQueryHtmlParse(html):simpleHtmlParse(html)};ko.utils.setHtml=
function(node,html){ko.utils.emptyDomNode(node);html=ko.utils.unwrapObservable(html);if(html!==null&&html!==undefined){if(typeof html!="string")html=html.toString();if(typeof jQuery!="undefined")jQuery(node)["html"](html);else{var parsedNodes=ko.utils.parseHtmlFragment(html);for(var i=0;i<parsedNodes.length;i++)node.appendChild(parsedNodes[i])}}}})();ko.exportSymbol("utils.parseHtmlFragment",ko.utils.parseHtmlFragment);ko.exportSymbol("utils.setHtml",ko.utils.setHtml);ko.memoization=function(){var memos=
{};function randomMax8HexChars(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function generateRandomId(){return randomMax8HexChars()+randomMax8HexChars()}function findMemoNodes(rootNode,appendToArray){if(!rootNode)return;if(rootNode.nodeType==8){var memoId=ko.memoization.parseMemoText(rootNode.nodeValue);if(memoId!=null)appendToArray.push({domNode:rootNode,memoId:memoId})}else if(rootNode.nodeType==1)for(var i=0,childNodes=rootNode.childNodes,j=childNodes.length;i<j;i++)findMemoNodes(childNodes[i],
appendToArray)}return{memoize:function(callback){if(typeof callback!="function")throw new Error("You can only pass a function to ko.memoization.memoize()");var memoId=generateRandomId();memos[memoId]=callback;return"<\!--[ko_memo:"+memoId+"]--\>"},unmemoize:function(memoId,callbackParams){var callback=memos[memoId];if(callback===undefined)throw new Error("Couldn't find any memo with ID "+memoId+". Perhaps it's already been unmemoized.");try{callback.apply(null,callbackParams||[]);return true}finally{delete memos[memoId]}},
unmemoizeDomNodeAndDescendants:function(domNode,extraCallbackParamsArray){var memos=[];findMemoNodes(domNode,memos);for(var i=0,j=memos.length;i<j;i++){var node=memos[i].domNode;var combinedParams=[node];if(extraCallbackParamsArray)ko.utils.arrayPushAll(combinedParams,extraCallbackParamsArray);ko.memoization.unmemoize(memos[i].memoId,combinedParams);node.nodeValue="";if(node.parentNode)node.parentNode.removeChild(node)}},parseMemoText:function(memoText){var match=memoText.match(/^\[ko_memo\:(.*?)\]$/);
return match?match[1]:null}}}();ko.exportSymbol("memoization",ko.memoization);ko.exportSymbol("memoization.memoize",ko.memoization.memoize);ko.exportSymbol("memoization.unmemoize",ko.memoization.unmemoize);ko.exportSymbol("memoization.parseMemoText",ko.memoization.parseMemoText);ko.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",ko.memoization.unmemoizeDomNodeAndDescendants);ko.extenders={"throttle":function(target,timeout){target["throttleEvaluation"]=timeout;var writeTimeoutInstance=null;
return ko.dependentObservable({"read":target,"write":function(value){clearTimeout(writeTimeoutInstance);writeTimeoutInstance=setTimeout(function(){target(value)},timeout)}})},"notify":function(target,notifyWhen){target["equalityComparer"]=notifyWhen=="always"?null:valuesArePrimitiveAndEqual}};var primitiveTypes={"undefined":1,"boolean":1,"number":1,"string":1};function valuesArePrimitiveAndEqual(a,b){var oldValueIsPrimitive=a===null||typeof a in primitiveTypes;return oldValueIsPrimitive?a===b:false}
function applyExtenders(requestedExtenders){var target=this;if(requestedExtenders)ko.utils.objectForEach(requestedExtenders,function(key,value){var extenderHandler=ko.extenders[key];if(typeof extenderHandler=="function")target=extenderHandler(target,value)||target});return target}ko.exportSymbol("extenders",ko.extenders);ko.subscription=function(target,callback,disposeCallback){this.target=target;this.callback=callback;this.disposeCallback=disposeCallback;ko.exportProperty(this,"dispose",this.dispose)};
ko.subscription.prototype.dispose=function(){this.isDisposed=true;this.disposeCallback()};ko.subscribable=function(){this._subscriptions={};ko.utils.extend(this,ko.subscribable["fn"]);ko.exportProperty(this,"subscribe",this.subscribe);ko.exportProperty(this,"extend",this.extend);ko.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)};var defaultEvent="change";ko.subscribable["fn"]={subscribe:function(callback,callbackTarget,event){event=event||defaultEvent;var boundCallback=callbackTarget?
callback.bind(callbackTarget):callback;var subscription=new ko.subscription(this,boundCallback,function(){ko.utils.arrayRemoveItem(this._subscriptions[event],subscription)}.bind(this));if(!this._subscriptions[event])this._subscriptions[event]=[];this._subscriptions[event].push(subscription);return subscription},"notifySubscribers":function(valueToNotify,event){event=event||defaultEvent;if(this.hasSubscriptionsForEvent(event))try{ko.dependencyDetection.begin();for(var a=this._subscriptions[event].slice(0),
i=0,subscription;subscription=a[i];++i)if(subscription&&subscription.isDisposed!==true)subscription.callback(valueToNotify)}finally{ko.dependencyDetection.end()}},hasSubscriptionsForEvent:function(event){return this._subscriptions[event]&&this._subscriptions[event].length},getSubscriptionsCount:function(){var total=0;ko.utils.objectForEach(this._subscriptions,function(eventName,subscriptions){total+=subscriptions.length});return total},extend:applyExtenders};ko.isSubscribable=function(instance){return instance!=
null&&typeof instance.subscribe=="function"&&typeof instance["notifySubscribers"]=="function"};ko.exportSymbol("subscribable",ko.subscribable);ko.exportSymbol("isSubscribable",ko.isSubscribable);ko.dependencyDetection=function(){var _frames=[];return{begin:function(callback){_frames.push(callback&&{callback:callback,distinctDependencies:[]})},end:function(){_frames.pop()},registerDependency:function(subscribable){if(!ko.isSubscribable(subscribable))throw new Error("Only subscribable things can act as dependencies");
if(_frames.length>0){var topFrame=_frames[_frames.length-1];if(!topFrame||ko.utils.arrayIndexOf(topFrame.distinctDependencies,subscribable)>=0)return;topFrame.distinctDependencies.push(subscribable);topFrame.callback(subscribable)}},ignore:function(callback,callbackTarget,callbackArgs){try{_frames.push(null);return callback.apply(callbackTarget,callbackArgs||[])}finally{_frames.pop()}}}}();ko.observable=function(initialValue){var _latestValue=initialValue;function observable(){if(arguments.length>
0){if(!observable["equalityComparer"]||!observable["equalityComparer"](_latestValue,arguments[0])){observable.valueWillMutate();_latestValue=arguments[0];if(DEBUG)observable._latestValue=_latestValue;observable.valueHasMutated()}return this}else{ko.dependencyDetection.registerDependency(observable);return _latestValue}}if(DEBUG)observable._latestValue=_latestValue;ko.subscribable.call(observable);observable.peek=function(){return _latestValue};observable.valueHasMutated=function(){observable["notifySubscribers"](_latestValue)};
observable.valueWillMutate=function(){observable["notifySubscribers"](_latestValue,"beforeChange")};ko.utils.extend(observable,ko.observable["fn"]);ko.exportProperty(observable,"peek",observable.peek);ko.exportProperty(observable,"valueHasMutated",observable.valueHasMutated);ko.exportProperty(observable,"valueWillMutate",observable.valueWillMutate);return observable};ko.observable["fn"]={"equalityComparer":valuesArePrimitiveAndEqual};var protoProperty=ko.observable.protoProperty="__ko_proto__";ko.observable["fn"][protoProperty]=
ko.observable;ko.hasPrototype=function(instance,prototype){if(instance===null||instance===undefined||instance[protoProperty]===undefined)return false;if(instance[protoProperty]===prototype)return true;return ko.hasPrototype(instance[protoProperty],prototype)};ko.isObservable=function(instance){return ko.hasPrototype(instance,ko.observable)};ko.isWriteableObservable=function(instance){if(typeof instance=="function"&&instance[protoProperty]===ko.observable)return true;if(typeof instance=="function"&&
instance[protoProperty]===ko.dependentObservable&&instance.hasWriteFunction)return true;return false};ko.exportSymbol("observable",ko.observable);ko.exportSymbol("isObservable",ko.isObservable);ko.exportSymbol("isWriteableObservable",ko.isWriteableObservable);ko.observableArray=function(initialValues){initialValues=initialValues||[];if(typeof initialValues!="object"||!("length"in initialValues))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");
var result=ko.observable(initialValues);ko.utils.extend(result,ko.observableArray["fn"]);return result.extend({"trackArrayChanges":true})};ko.observableArray["fn"]={"remove":function(valueOrPredicate){var underlyingArray=this.peek();var removedValues=[];var predicate=typeof valueOrPredicate=="function"&&!ko.isObservable(valueOrPredicate)?valueOrPredicate:function(value){return value===valueOrPredicate};for(var i=0;i<underlyingArray.length;i++){var value=underlyingArray[i];if(predicate(value)){if(removedValues.length===
0)this.valueWillMutate();removedValues.push(value);underlyingArray.splice(i,1);i--}}if(removedValues.length)this.valueHasMutated();return removedValues},"removeAll":function(arrayOfValues){if(arrayOfValues===undefined){var underlyingArray=this.peek();var allValues=underlyingArray.slice(0);this.valueWillMutate();underlyingArray.splice(0,underlyingArray.length);this.valueHasMutated();return allValues}if(!arrayOfValues)return[];return this["remove"](function(value){return ko.utils.arrayIndexOf(arrayOfValues,
value)>=0})},"destroy":function(valueOrPredicate){var underlyingArray=this.peek();var predicate=typeof valueOrPredicate=="function"&&!ko.isObservable(valueOrPredicate)?valueOrPredicate:function(value){return value===valueOrPredicate};this.valueWillMutate();for(var i=underlyingArray.length-1;i>=0;i--){var value=underlyingArray[i];if(predicate(value))underlyingArray[i]["_destroy"]=true}this.valueHasMutated()},"destroyAll":function(arrayOfValues){if(arrayOfValues===undefined)return this["destroy"](function(){return true});
if(!arrayOfValues)return[];return this["destroy"](function(value){return ko.utils.arrayIndexOf(arrayOfValues,value)>=0})},"indexOf":function(item){var underlyingArray=this();return ko.utils.arrayIndexOf(underlyingArray,item)},"replace":function(oldItem,newItem){var index=this["indexOf"](oldItem);if(index>=0){this.valueWillMutate();this.peek()[index]=newItem;this.valueHasMutated()}}};ko.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(methodName){ko.observableArray["fn"][methodName]=
function(){var underlyingArray=this.peek();this.valueWillMutate();this.cacheDiffForKnownOperation(underlyingArray,methodName,arguments);var methodCallResult=underlyingArray[methodName].apply(underlyingArray,arguments);this.valueHasMutated();return methodCallResult}});ko.utils.arrayForEach(["slice"],function(methodName){ko.observableArray["fn"][methodName]=function(){var underlyingArray=this();return underlyingArray[methodName].apply(underlyingArray,arguments)}});ko.exportSymbol("observableArray",
ko.observableArray);var arrayChangeEventName="arrayChange";ko.extenders["trackArrayChanges"]=function(target){if(target.cacheDiffForKnownOperation)return;var trackingChanges=false,cachedDiff=null,pendingNotifications=0,underlyingSubscribeFunction=target.subscribe;target.subscribe=target["subscribe"]=function(callback,callbackTarget,event){if(event===arrayChangeEventName)trackChanges();return underlyingSubscribeFunction.apply(this,arguments)};function trackChanges(){if(trackingChanges)return;trackingChanges=
true;var underlyingNotifySubscribersFunction=target["notifySubscribers"];target["notifySubscribers"]=function(valueToNotify,event){if(!event||event===defaultEvent)++pendingNotifications;return underlyingNotifySubscribersFunction.apply(this,arguments)};var previousContents=[].concat(target.peek()||[]);cachedDiff=null;target.subscribe(function(currentContents){currentContents=[].concat(currentContents||[]);if(target.hasSubscriptionsForEvent(arrayChangeEventName)){var changes=getChanges(previousContents,
currentContents);if(changes.length)target["notifySubscribers"](changes,arrayChangeEventName)}previousContents=currentContents;cachedDiff=null;pendingNotifications=0})}function getChanges(previousContents,currentContents){if(!cachedDiff||pendingNotifications>1)cachedDiff=ko.utils.compareArrays(previousContents,currentContents,{"sparse":true});return cachedDiff}target.cacheDiffForKnownOperation=function(rawArray,operationName,args){if(!trackingChanges||pendingNotifications)return;var diff=[],arrayLength=
rawArray.length,argsLength=args.length,offset=0;function pushDiff(status,value,index){diff.push({"status":status,"value":value,"index":index})}switch(operationName){case "push":offset=arrayLength;case "unshift":for(var index=0;index<argsLength;index++)pushDiff("added",args[index],offset+index);break;case "pop":offset=arrayLength-1;case "shift":if(arrayLength)pushDiff("deleted",rawArray[offset],offset);break;case "splice":var startIndex=Math.min(Math.max(0,args[0]<0?arrayLength+args[0]:args[0]),arrayLength),
endDeleteIndex=argsLength===1?arrayLength:Math.min(startIndex+(args[1]||0),arrayLength),endAddIndex=startIndex+argsLength-2,endIndex=Math.max(endDeleteIndex,endAddIndex);for(var index=startIndex,argsIndex=2;index<endIndex;++index,++argsIndex){if(index<endDeleteIndex)pushDiff("deleted",rawArray[index],index);if(index<endAddIndex)pushDiff("added",args[argsIndex],index)}break;default:return}cachedDiff=diff}};ko.dependentObservable=function(evaluatorFunctionOrOptions,evaluatorFunctionTarget,options){var _latestValue,
_hasBeenEvaluated=false,_isBeingEvaluated=false,_suppressDisposalUntilDisposeWhenReturnsFalse=false,readFunction=evaluatorFunctionOrOptions;if(readFunction&&typeof readFunction=="object"){options=readFunction;readFunction=options["read"]}else{options=options||{};if(!readFunction)readFunction=options["read"]}if(typeof readFunction!="function")throw new Error("Pass a function that returns the value of the ko.computed");function addSubscriptionToDependency(subscribable){_subscriptionsToDependencies.push(subscribable.subscribe(evaluatePossiblyAsync))}
function disposeAllSubscriptionsToDependencies(){ko.utils.arrayForEach(_subscriptionsToDependencies,function(subscription){subscription.dispose()});_subscriptionsToDependencies=[]}function evaluatePossiblyAsync(){var throttleEvaluationTimeout=dependentObservable["throttleEvaluation"];if(throttleEvaluationTimeout&&throttleEvaluationTimeout>=0){clearTimeout(evaluationTimeoutInstance);evaluationTimeoutInstance=setTimeout(evaluateImmediate,throttleEvaluationTimeout)}else evaluateImmediate()}function evaluateImmediate(){if(_isBeingEvaluated)return;
if(disposeWhen&&disposeWhen()){if(!_suppressDisposalUntilDisposeWhenReturnsFalse){dispose();_hasBeenEvaluated=true;return}}else _suppressDisposalUntilDisposeWhenReturnsFalse=false;_isBeingEvaluated=true;try{var disposalCandidates=ko.utils.arrayMap(_subscriptionsToDependencies,function(item){return item.target});ko.dependencyDetection.begin(function(subscribable){var inOld;if((inOld=ko.utils.arrayIndexOf(disposalCandidates,subscribable))>=0)disposalCandidates[inOld]=undefined;else addSubscriptionToDependency(subscribable)});
var newValue=evaluatorFunctionTarget?readFunction.call(evaluatorFunctionTarget):readFunction();for(var i=disposalCandidates.length-1;i>=0;i--)if(disposalCandidates[i])_subscriptionsToDependencies.splice(i,1)[0].dispose();_hasBeenEvaluated=true;if(!dependentObservable["equalityComparer"]||!dependentObservable["equalityComparer"](_latestValue,newValue)){dependentObservable["notifySubscribers"](_latestValue,"beforeChange");_latestValue=newValue;if(DEBUG)dependentObservable._latestValue=_latestValue;
dependentObservable["notifySubscribers"](_latestValue)}}finally{ko.dependencyDetection.end();_isBeingEvaluated=false}if(!_subscriptionsToDependencies.length)dispose()}function dependentObservable(){if(arguments.length>0){if(typeof writeFunction==="function")writeFunction.apply(evaluatorFunctionTarget,arguments);else throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}else{if(!_hasBeenEvaluated)evaluateImmediate();
ko.dependencyDetection.registerDependency(dependentObservable);return _latestValue}}function peek(){if(!_hasBeenEvaluated)evaluateImmediate();return _latestValue}function isActive(){return!_hasBeenEvaluated||_subscriptionsToDependencies.length>0}var writeFunction=options["write"],disposeWhenNodeIsRemoved=options["disposeWhenNodeIsRemoved"]||options.disposeWhenNodeIsRemoved||null,disposeWhenOption=options["disposeWhen"]||options.disposeWhen,disposeWhen=disposeWhenOption,dispose=disposeAllSubscriptionsToDependencies,
_subscriptionsToDependencies=[],evaluationTimeoutInstance=null;if(!evaluatorFunctionTarget)evaluatorFunctionTarget=options["owner"];dependentObservable.peek=peek;dependentObservable.getDependenciesCount=function(){return _subscriptionsToDependencies.length};dependentObservable.hasWriteFunction=typeof options["write"]==="function";dependentObservable.dispose=function(){dispose()};dependentObservable.isActive=isActive;ko.subscribable.call(dependentObservable);ko.utils.extend(dependentObservable,ko.dependentObservable["fn"]);
ko.exportProperty(dependentObservable,"peek",dependentObservable.peek);ko.exportProperty(dependentObservable,"dispose",dependentObservable.dispose);ko.exportProperty(dependentObservable,"isActive",dependentObservable.isActive);ko.exportProperty(dependentObservable,"getDependenciesCount",dependentObservable.getDependenciesCount);if(disposeWhenNodeIsRemoved){_suppressDisposalUntilDisposeWhenReturnsFalse=true;if(disposeWhenNodeIsRemoved.nodeType)disposeWhen=function(){return!ko.utils.domNodeIsAttachedToDocument(disposeWhenNodeIsRemoved)||
disposeWhenOption&&disposeWhenOption()}}if(options["deferEvaluation"]!==true)evaluateImmediate();if(disposeWhenNodeIsRemoved&&isActive()){dispose=function(){ko.utils.domNodeDisposal.removeDisposeCallback(disposeWhenNodeIsRemoved,dispose);disposeAllSubscriptionsToDependencies()};ko.utils.domNodeDisposal.addDisposeCallback(disposeWhenNodeIsRemoved,dispose)}return dependentObservable};ko.isComputed=function(instance){return ko.hasPrototype(instance,ko.dependentObservable)};var protoProp=ko.observable.protoProperty;
ko.dependentObservable[protoProp]=ko.observable;ko.dependentObservable["fn"]={"equalityComparer":valuesArePrimitiveAndEqual};ko.dependentObservable["fn"][protoProp]=ko.dependentObservable;ko.exportSymbol("dependentObservable",ko.dependentObservable);ko.exportSymbol("computed",ko.dependentObservable);ko.exportSymbol("isComputed",ko.isComputed);(function(){var maxNestedObservableDepth=10;ko.toJS=function(rootObject){if(arguments.length==0)throw new Error("When calling ko.toJS, pass the object you want to convert.");
return mapJsObjectGraph(rootObject,function(valueToMap){for(var i=0;ko.isObservable(valueToMap)&&i<maxNestedObservableDepth;i++)valueToMap=valueToMap();return valueToMap})};ko.toJSON=function(rootObject,replacer,space){var plainJavaScriptObject=ko.toJS(rootObject);return ko.utils.stringifyJson(plainJavaScriptObject,replacer,space)};function mapJsObjectGraph(rootObject,mapInputCallback,visitedObjects){visitedObjects=visitedObjects||new objectLookup;rootObject=mapInputCallback(rootObject);var canHaveProperties=
typeof rootObject=="object"&&rootObject!==null&&rootObject!==undefined&&!(rootObject instanceof Date)&&!(rootObject instanceof String)&&!(rootObject instanceof Number)&&!(rootObject instanceof Boolean);if(!canHaveProperties)return rootObject;var outputProperties=rootObject instanceof Array?[]:{};visitedObjects.save(rootObject,outputProperties);visitPropertiesOrArrayEntries(rootObject,function(indexer){var propertyValue=mapInputCallback(rootObject[indexer]);switch(typeof propertyValue){case "boolean":case "number":case "string":case "function":outputProperties[indexer]=
propertyValue;break;case "object":case "undefined":var previouslyMappedValue=visitedObjects.get(propertyValue);outputProperties[indexer]=previouslyMappedValue!==undefined?previouslyMappedValue:mapJsObjectGraph(propertyValue,mapInputCallback,visitedObjects);break}});return outputProperties}function visitPropertiesOrArrayEntries(rootObject,visitorCallback){if(rootObject instanceof Array){for(var i=0;i<rootObject.length;i++)visitorCallback(i);if(typeof rootObject["toJSON"]=="function")visitorCallback("toJSON")}else for(var propertyName in rootObject)visitorCallback(propertyName)}
function objectLookup(){this.keys=[];this.values=[]}objectLookup.prototype={constructor:objectLookup,save:function(key,value){var existingIndex=ko.utils.arrayIndexOf(this.keys,key);if(existingIndex>=0)this.values[existingIndex]=value;else{this.keys.push(key);this.values.push(value)}},get:function(key){var existingIndex=ko.utils.arrayIndexOf(this.keys,key);return existingIndex>=0?this.values[existingIndex]:undefined}}})();ko.exportSymbol("toJS",ko.toJS);ko.exportSymbol("toJSON",ko.toJSON);(function(){var hasDomDataExpandoProperty=
"__ko__hasDomDataOptionValue__";ko.selectExtensions={readValue:function(element){switch(ko.utils.tagNameLower(element)){case "option":if(element[hasDomDataExpandoProperty]===true)return ko.utils.domData.get(element,ko.bindingHandlers.options.optionValueDomDataKey);return ko.utils.ieVersion<=7?element.getAttributeNode("value")&&element.getAttributeNode("value").specified?element.value:element.text:element.value;case "select":return element.selectedIndex>=0?ko.selectExtensions.readValue(element.options[element.selectedIndex]):
undefined;default:return element.value}},writeValue:function(element,value){switch(ko.utils.tagNameLower(element)){case "option":switch(typeof value){case "string":ko.utils.domData.set(element,ko.bindingHandlers.options.optionValueDomDataKey,undefined);if(hasDomDataExpandoProperty in element)delete element[hasDomDataExpandoProperty];element.value=value;break;default:ko.utils.domData.set(element,ko.bindingHandlers.options.optionValueDomDataKey,value);element[hasDomDataExpandoProperty]=true;element.value=
typeof value==="number"?value:"";break}break;case "select":if(value==="")value=undefined;if(value===null||value===undefined)element.selectedIndex=-1;for(var i=element.options.length-1;i>=0;i--)if(ko.selectExtensions.readValue(element.options[i])==value){element.selectedIndex=i;break}if(!(element.size>1)&&element.selectedIndex===-1)element.selectedIndex=0;break;default:if(value===null||value===undefined)value="";element.value=value;break}}}})();ko.exportSymbol("selectExtensions",ko.selectExtensions);
ko.exportSymbol("selectExtensions.readValue",ko.selectExtensions.readValue);ko.exportSymbol("selectExtensions.writeValue",ko.selectExtensions.writeValue);ko.expressionRewriting=function(){var javaScriptReservedWords=["true","false","null","undefined"];var javaScriptAssignmentTarget=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;function getWriteableValue(expression){if(ko.utils.arrayIndexOf(javaScriptReservedWords,expression)>=0)return false;var match=expression.match(javaScriptAssignmentTarget);
return match===null?false:match[1]?"Object("+match[1]+")"+match[2]:expression}var stringDouble='"(?:[^"\\\\]|\\\\.)*"',stringSingle="'(?:[^'\\\\]|\\\\.)*'",stringRegexp="/(?:[^/\\\\]|\\\\.)*/w*",specials=",\"'{}()/:[\\]",everyThingElse="[^\\s:,/][^"+specials+"]*[^\\s"+specials+"]",oneNotSpace="[^\\s]",bindingToken=RegExp(stringDouble+"|"+stringSingle+"|"+stringRegexp+"|"+everyThingElse+"|"+oneNotSpace,"g"),divisionLookBehind=/[\])"'A-Za-z0-9_$]+$/,keywordRegexLookBehind={"in":1,"return":1,"typeof":1};
function parseObjectLiteral(objectLiteralString){var str=ko.utils.stringTrim(objectLiteralString);if(str.charCodeAt(0)===123)str=str.slice(1,-1);var result=[],toks=str.match(bindingToken),key,values,depth=0;if(toks){toks.push(",");for(var i=0,tok;tok=toks[i];++i){var c=tok.charCodeAt(0);if(c===44){if(depth<=0){if(key)result.push(values?{key:key,value:values.join("")}:{"unknown":key});key=values=depth=0;continue}}else if(c===58){if(!values)continue}else if(c===47&&i&&tok.length>1){var match=toks[i-
1].match(divisionLookBehind);if(match&&!keywordRegexLookBehind[match[0]]){str=str.substr(str.indexOf(tok)+1);toks=str.match(bindingToken);toks.push(",");i=-1;tok="/"}}else if(c===40||c===123||c===91)++depth;else if(c===41||c===125||c===93)--depth;else if(!key&&!values){key=c===34||c===39?tok.slice(1,-1):tok;continue}if(values)values.push(tok);else values=[tok]}}return result}var twoWayBindings={};function preProcessBindings(bindingsStringOrKeyValueArray,bindingOptions){bindingOptions=bindingOptions||
{};function processKeyValue(key,val){var writableVal;function callPreprocessHook(obj){return obj&&obj["preprocess"]?val=obj["preprocess"](val,key,processKeyValue):true}if(!callPreprocessHook(ko["getBindingHandler"](key)))return;if(twoWayBindings[key]&&(writableVal=getWriteableValue(val)))propertyAccessorResultStrings.push("'"+key+"':function(_z){"+writableVal+"=_z}");if(makeValueAccessors)val="function(){return "+val+" }";resultStrings.push("'"+key+"':"+val)}var resultStrings=[],propertyAccessorResultStrings=
[],makeValueAccessors=bindingOptions["valueAccessors"],keyValueArray=typeof bindingsStringOrKeyValueArray==="string"?parseObjectLiteral(bindingsStringOrKeyValueArray):bindingsStringOrKeyValueArray;ko.utils.arrayForEach(keyValueArray,function(keyValue){processKeyValue(keyValue.key||keyValue["unknown"],keyValue.value)});if(propertyAccessorResultStrings.length)processKeyValue("_ko_property_writers","{"+propertyAccessorResultStrings.join(",")+"}");return resultStrings.join(",")}return{bindingRewriteValidators:[],
twoWayBindings:twoWayBindings,parseObjectLiteral:parseObjectLiteral,preProcessBindings:preProcessBindings,keyValueArrayContainsKey:function(keyValueArray,key){for(var i=0;i<keyValueArray.length;i++)if(keyValueArray[i]["key"]==key)return true;return false},writeValueToProperty:function(property,allBindings,key,value,checkIfDifferent){if(!property||!ko.isObservable(property)){var propWriters=allBindings.get("_ko_property_writers");if(propWriters&&propWriters[key])propWriters[key](value)}else if(ko.isWriteableObservable(property)&&
(!checkIfDifferent||property.peek()!==value))property(value)}}}();ko.exportSymbol("expressionRewriting",ko.expressionRewriting);ko.exportSymbol("expressionRewriting.bindingRewriteValidators",ko.expressionRewriting.bindingRewriteValidators);ko.exportSymbol("expressionRewriting.parseObjectLiteral",ko.expressionRewriting.parseObjectLiteral);ko.exportSymbol("expressionRewriting.preProcessBindings",ko.expressionRewriting.preProcessBindings);ko.exportSymbol("expressionRewriting._twoWayBindings",ko.expressionRewriting.twoWayBindings);
ko.exportSymbol("jsonExpressionRewriting",ko.expressionRewriting);ko.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",ko.expressionRewriting.preProcessBindings);(function(){var commentNodesHaveTextProperty=document&&document.createComment("test").text==="<\!--test--\>";var startCommentRegex=commentNodesHaveTextProperty?/^<\!--\s*ko(?:\s+([\s\S]+))?\s*--\>$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/;var endCommentRegex=commentNodesHaveTextProperty?/^<\!--\s*\/ko\s*--\>$/:/^\s*\/ko\s*$/;var htmlTagsWithOptionallyClosingChildren=
{"ul":true,"ol":true};function isStartComment(node){return node.nodeType==8&&startCommentRegex.test(commentNodesHaveTextProperty?node.text:node.nodeValue)}function isEndComment(node){return node.nodeType==8&&endCommentRegex.test(commentNodesHaveTextProperty?node.text:node.nodeValue)}function getVirtualChildren(startComment,allowUnbalanced){var currentNode=startComment;var depth=1;var children=[];while(currentNode=currentNode.nextSibling){if(isEndComment(currentNode)){depth--;if(depth===0)return children}children.push(currentNode);
if(isStartComment(currentNode))depth++}if(!allowUnbalanced)throw new Error("Cannot find closing comment tag to match: "+startComment.nodeValue);return null}function getMatchingEndComment(startComment,allowUnbalanced){var allVirtualChildren=getVirtualChildren(startComment,allowUnbalanced);if(allVirtualChildren){if(allVirtualChildren.length>0)return allVirtualChildren[allVirtualChildren.length-1].nextSibling;return startComment.nextSibling}else return null}function getUnbalancedChildTags(node){var childNode=
node.firstChild,captureRemaining=null;if(childNode){do if(captureRemaining)captureRemaining.push(childNode);else if(isStartComment(childNode)){var matchingEndComment=getMatchingEndComment(childNode,true);if(matchingEndComment)childNode=matchingEndComment;else captureRemaining=[childNode]}else if(isEndComment(childNode))captureRemaining=[childNode];while(childNode=childNode.nextSibling)}return captureRemaining}ko.virtualElements={allowedBindings:{},childNodes:function(node){return isStartComment(node)?
getVirtualChildren(node):node.childNodes},emptyNode:function(node){if(!isStartComment(node))ko.utils.emptyDomNode(node);else{var virtualChildren=ko.virtualElements.childNodes(node);for(var i=0,j=virtualChildren.length;i<j;i++)ko.removeNode(virtualChildren[i])}},setDomNodeChildren:function(node,childNodes){if(!isStartComment(node))ko.utils.setDomNodeChildren(node,childNodes);else{ko.virtualElements.emptyNode(node);var endCommentNode=node.nextSibling;for(var i=0,j=childNodes.length;i<j;i++)endCommentNode.parentNode.insertBefore(childNodes[i],
endCommentNode)}},prepend:function(containerNode,nodeToPrepend){if(!isStartComment(containerNode))if(containerNode.firstChild)containerNode.insertBefore(nodeToPrepend,containerNode.firstChild);else containerNode.appendChild(nodeToPrepend);else containerNode.parentNode.insertBefore(nodeToPrepend,containerNode.nextSibling)},insertAfter:function(containerNode,nodeToInsert,insertAfterNode){if(!insertAfterNode)ko.virtualElements.prepend(containerNode,nodeToInsert);else if(!isStartComment(containerNode))if(insertAfterNode.nextSibling)containerNode.insertBefore(nodeToInsert,
insertAfterNode.nextSibling);else containerNode.appendChild(nodeToInsert);else containerNode.parentNode.insertBefore(nodeToInsert,insertAfterNode.nextSibling)},firstChild:function(node){if(!isStartComment(node))return node.firstChild;if(!node.nextSibling||isEndComment(node.nextSibling))return null;return node.nextSibling},nextSibling:function(node){if(isStartComment(node))node=getMatchingEndComment(node);if(node.nextSibling&&isEndComment(node.nextSibling))return null;return node.nextSibling},hasBindingValue:isStartComment,
virtualNodeBindingValue:function(node){var regexMatch=(commentNodesHaveTextProperty?node.text:node.nodeValue).match(startCommentRegex);return regexMatch?regexMatch[1]:null},normaliseVirtualElementDomStructure:function(elementVerified){if(!htmlTagsWithOptionallyClosingChildren[ko.utils.tagNameLower(elementVerified)])return;var childNode=elementVerified.firstChild;if(childNode){do if(childNode.nodeType===1){var unbalancedTags=getUnbalancedChildTags(childNode);if(unbalancedTags){var nodeToInsertBefore=
childNode.nextSibling;for(var i=0;i<unbalancedTags.length;i++)if(nodeToInsertBefore)elementVerified.insertBefore(unbalancedTags[i],nodeToInsertBefore);else elementVerified.appendChild(unbalancedTags[i])}}while(childNode=childNode.nextSibling)}}}})();ko.exportSymbol("virtualElements",ko.virtualElements);ko.exportSymbol("virtualElements.allowedBindings",ko.virtualElements.allowedBindings);ko.exportSymbol("virtualElements.emptyNode",ko.virtualElements.emptyNode);ko.exportSymbol("virtualElements.insertAfter",
ko.virtualElements.insertAfter);ko.exportSymbol("virtualElements.prepend",ko.virtualElements.prepend);ko.exportSymbol("virtualElements.setDomNodeChildren",ko.virtualElements.setDomNodeChildren);(function(){var defaultBindingAttributeName="data-bind";ko.bindingProvider=function(){this.bindingCache={}};ko.utils.extend(ko.bindingProvider.prototype,{"nodeHasBindings":function(node){switch(node.nodeType){case 1:return node.getAttribute(defaultBindingAttributeName)!=null;case 8:return ko.virtualElements.hasBindingValue(node);
default:return false}},"getBindings":function(node,bindingContext){var bindingsString=this["getBindingsString"](node,bindingContext);return bindingsString?this["parseBindingsString"](bindingsString,bindingContext,node):null},"getBindingAccessors":function(node,bindingContext){var bindingsString=this["getBindingsString"](node,bindingContext);return bindingsString?this["parseBindingsString"](bindingsString,bindingContext,node,{"valueAccessors":true}):null},"getBindingsString":function(node,bindingContext){switch(node.nodeType){case 1:return node.getAttribute(defaultBindingAttributeName);
case 8:return ko.virtualElements.virtualNodeBindingValue(node);default:return null}},"parseBindingsString":function(bindingsString,bindingContext,node,options){try{var bindingFunction=createBindingsStringEvaluatorViaCache(bindingsString,this.bindingCache,options);return bindingFunction(bindingContext,node)}catch(ex){ex.message="Unable to parse bindings.\nBindings value: "+bindingsString+"\nMessage: "+ex.message;throw ex;}}});ko.bindingProvider["instance"]=new ko.bindingProvider;function createBindingsStringEvaluatorViaCache(bindingsString,
cache,options){var cacheKey=bindingsString+(options&&options["valueAccessors"]||"");return cache[cacheKey]||(cache[cacheKey]=createBindingsStringEvaluator(bindingsString,options))}function createBindingsStringEvaluator(bindingsString,options){var rewrittenBindings=ko.expressionRewriting.preProcessBindings(bindingsString,options),functionBody="with($context){with($data||{}){return{"+rewrittenBindings+"}}}";return new Function("$context","$element",functionBody)}})();ko.exportSymbol("bindingProvider",
ko.bindingProvider);(function(){ko.bindingHandlers={};var bindingDoesNotRecurseIntoElementTypes={"script":true};ko["getBindingHandler"]=function(bindingKey){return ko.bindingHandlers[bindingKey]};ko.bindingContext=function(dataItemOrAccessor,parentContext,dataItemAlias,extendCallback){function updateContext(){var dataItem=isFunc?dataItemOrAccessor():dataItemOrAccessor;if(parentContext){if(parentContext._subscribable)parentContext._subscribable();ko.utils.extend(self,parentContext);if(subscribable)self._subscribable=
subscribable}else{self["$parents"]=[];self["$root"]=dataItem;self["ko"]=ko}self["$rawData"]=dataItemOrAccessor;self["$data"]=dataItem;if(dataItemAlias)self[dataItemAlias]=dataItem;if(extendCallback)extendCallback(self,parentContext,dataItem);return self["$data"]}function disposeWhen(){return nodes&&!ko.utils.anyDomNodeIsAttachedToDocument(nodes)}var self=this,isFunc=typeof dataItemOrAccessor=="function",nodes,subscribable=ko.dependentObservable(updateContext,null,{disposeWhen:disposeWhen,disposeWhenNodeIsRemoved:true});
if(subscribable.isActive()){self._subscribable=subscribable;subscribable["equalityComparer"]=null;nodes=[];subscribable._addNode=function(node){nodes.push(node);ko.utils.domNodeDisposal.addDisposeCallback(node,function(node){ko.utils.arrayRemoveItem(nodes,node);if(!nodes.length){subscribable.dispose();self._subscribable=subscribable=undefined}})}}};ko.bindingContext.prototype["createChildContext"]=function(dataItemOrAccessor,dataItemAlias,extendCallback){return new ko.bindingContext(dataItemOrAccessor,
this,dataItemAlias,function(self,parentContext){self["$parentContext"]=parentContext;self["$parent"]=parentContext["$data"];self["$parents"]=(parentContext["$parents"]||[]).slice(0);self["$parents"].unshift(self["$parent"]);if(extendCallback)extendCallback(self)})};ko.bindingContext.prototype["extend"]=function(properties){return new ko.bindingContext(this["$rawData"],this,null,function(self){ko.utils.extend(self,typeof properties=="function"?properties():properties)})};function makeValueAccessor(value){return function(){return value}}
function evaluateValueAccessor(valueAccessor){return valueAccessor()}function makeAccessorsFromFunction(callback){return ko.utils.objectMap(ko.dependencyDetection.ignore(callback),function(value,key){return function(){return callback()[key]}})}function makeBindingAccessors(bindings,context,node){if(typeof bindings==="function")return makeAccessorsFromFunction(bindings.bind(null,context,node));else return ko.utils.objectMap(bindings,makeValueAccessor)}function getBindingsAndMakeAccessors(node,context){return makeAccessorsFromFunction(this["getBindings"].bind(this,
node,context))}function validateThatBindingIsAllowedForVirtualElements(bindingName){var validator=ko.virtualElements.allowedBindings[bindingName];if(!validator)throw new Error("The binding '"+bindingName+"' cannot be used with virtual elements");}function applyBindingsToDescendantsInternal(bindingContext,elementOrVirtualElement,bindingContextsMayDifferFromDomParentElement){var currentChild,nextInQueue=ko.virtualElements.firstChild(elementOrVirtualElement),provider=ko.bindingProvider["instance"],preprocessNode=
provider["preprocessNode"];if(preprocessNode){while(currentChild=nextInQueue){nextInQueue=ko.virtualElements.nextSibling(currentChild);preprocessNode.call(provider,currentChild)}nextInQueue=ko.virtualElements.firstChild(elementOrVirtualElement)}while(currentChild=nextInQueue){nextInQueue=ko.virtualElements.nextSibling(currentChild);applyBindingsToNodeAndDescendantsInternal(bindingContext,currentChild,bindingContextsMayDifferFromDomParentElement)}}function applyBindingsToNodeAndDescendantsInternal(bindingContext,
nodeVerified,bindingContextMayDifferFromDomParentElement){var shouldBindDescendants=true;var isElement=nodeVerified.nodeType===1;if(isElement)ko.virtualElements.normaliseVirtualElementDomStructure(nodeVerified);var shouldApplyBindings=isElement&&bindingContextMayDifferFromDomParentElement||ko.bindingProvider["instance"]["nodeHasBindings"](nodeVerified);if(shouldApplyBindings)shouldBindDescendants=applyBindingsToNodeInternal(nodeVerified,null,bindingContext,bindingContextMayDifferFromDomParentElement)["shouldBindDescendants"];
if(shouldBindDescendants&&!bindingDoesNotRecurseIntoElementTypes[ko.utils.tagNameLower(nodeVerified)])applyBindingsToDescendantsInternal(bindingContext,nodeVerified,!isElement)}var boundElementDomDataKey=ko.utils.domData.nextKey();function topologicalSortBindings(bindings){var result=[],bindingsConsidered={},cyclicDependencyStack=[];ko.utils.objectForEach(bindings,function pushBinding(bindingKey){if(!bindingsConsidered[bindingKey]){var binding=ko["getBindingHandler"](bindingKey);if(binding){if(binding["after"]){cyclicDependencyStack.push(bindingKey);
ko.utils.arrayForEach(binding["after"],function(bindingDependencyKey){if(bindings[bindingDependencyKey])if(ko.utils.arrayIndexOf(cyclicDependencyStack,bindingDependencyKey)!==-1)throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+cyclicDependencyStack.join(", "));else pushBinding(bindingDependencyKey)});cyclicDependencyStack.pop()}result.push({key:bindingKey,handler:binding})}bindingsConsidered[bindingKey]=true}});return result}function applyBindingsToNodeInternal(node,
sourceBindings,bindingContext,bindingContextMayDifferFromDomParentElement){var alreadyBound=ko.utils.domData.get(node,boundElementDomDataKey);if(!sourceBindings){if(alreadyBound)throw Error("You cannot apply bindings multiple times to the same element.");ko.utils.domData.set(node,boundElementDomDataKey,true)}if(!alreadyBound&&bindingContextMayDifferFromDomParentElement)ko.storedBindingContextForNode(node,bindingContext);var bindings;if(sourceBindings&&typeof sourceBindings!=="function")bindings=sourceBindings;
else{var provider=ko.bindingProvider["instance"],getBindings=provider["getBindingAccessors"]||getBindingsAndMakeAccessors;if(sourceBindings||bindingContext._subscribable){var bindingsUpdater=ko.dependentObservable(function(){bindings=sourceBindings?sourceBindings(bindingContext,node):getBindings.call(provider,node,bindingContext);if(bindings&&bindingContext._subscribable)bindingContext._subscribable();return bindings},null,{disposeWhenNodeIsRemoved:node});if(!bindings||!bindingsUpdater.isActive())bindingsUpdater=
null}else bindings=ko.dependencyDetection.ignore(getBindings,provider,[node,bindingContext])}var bindingHandlerThatControlsDescendantBindings;if(bindings){var getValueAccessor=bindingsUpdater?function(bindingKey){return function(){return evaluateValueAccessor(bindingsUpdater()[bindingKey])}}:function(bindingKey){return bindings[bindingKey]};function allBindings(){return ko.utils.objectMap(bindingsUpdater?bindingsUpdater():bindings,evaluateValueAccessor)}allBindings["get"]=function(key){return bindings[key]&&
evaluateValueAccessor(getValueAccessor(key))};allBindings["has"]=function(key){return key in bindings};var orderedBindings=topologicalSortBindings(bindings);ko.utils.arrayForEach(orderedBindings,function(bindingKeyAndHandler){var handlerInitFn=bindingKeyAndHandler.handler["init"],handlerUpdateFn=bindingKeyAndHandler.handler["update"],bindingKey=bindingKeyAndHandler.key;if(node.nodeType===8)validateThatBindingIsAllowedForVirtualElements(bindingKey);try{if(typeof handlerInitFn=="function")ko.dependencyDetection.ignore(function(){var initResult=
handlerInitFn(node,getValueAccessor(bindingKey),allBindings,bindingContext["$data"],bindingContext);if(initResult&&initResult["controlsDescendantBindings"]){if(bindingHandlerThatControlsDescendantBindings!==undefined)throw new Error("Multiple bindings ("+bindingHandlerThatControlsDescendantBindings+" and "+bindingKey+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");bindingHandlerThatControlsDescendantBindings=bindingKey}});
if(typeof handlerUpdateFn=="function")ko.dependentObservable(function(){handlerUpdateFn(node,getValueAccessor(bindingKey),allBindings,bindingContext["$data"],bindingContext)},null,{disposeWhenNodeIsRemoved:node})}catch(ex){ex.message='Unable to process binding "'+bindingKey+": "+bindings[bindingKey]+'"\nMessage: '+ex.message;throw ex;}})}return{"shouldBindDescendants":bindingHandlerThatControlsDescendantBindings===undefined}}var storedBindingContextDomDataKey=ko.utils.domData.nextKey();ko.storedBindingContextForNode=
function(node,bindingContext){if(arguments.length==2){ko.utils.domData.set(node,storedBindingContextDomDataKey,bindingContext);if(bindingContext._subscribable)bindingContext._subscribable._addNode(node)}else return ko.utils.domData.get(node,storedBindingContextDomDataKey)};function getBindingContext(viewModelOrBindingContext){return viewModelOrBindingContext&&viewModelOrBindingContext instanceof ko.bindingContext?viewModelOrBindingContext:new ko.bindingContext(viewModelOrBindingContext)}ko.applyBindingAccessorsToNode=
function(node,bindings,viewModelOrBindingContext){if(node.nodeType===1)ko.virtualElements.normaliseVirtualElementDomStructure(node);return applyBindingsToNodeInternal(node,bindings,getBindingContext(viewModelOrBindingContext),true)};ko.applyBindingsToNode=function(node,bindings,viewModelOrBindingContext){var context=getBindingContext(viewModelOrBindingContext);return ko.applyBindingAccessorsToNode(node,makeBindingAccessors(bindings,context,node),context)};ko.applyBindingsToDescendants=function(viewModelOrBindingContext,
rootNode){if(rootNode.nodeType===1||rootNode.nodeType===8)applyBindingsToDescendantsInternal(getBindingContext(viewModelOrBindingContext),rootNode,true)};ko.applyBindings=function(viewModelOrBindingContext,rootNode){if(rootNode&&rootNode.nodeType!==1&&rootNode.nodeType!==8)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");rootNode=rootNode||window.document.body;applyBindingsToNodeAndDescendantsInternal(getBindingContext(viewModelOrBindingContext),
rootNode,true)};ko.contextFor=function(node){switch(node.nodeType){case 1:case 8:var context=ko.storedBindingContextForNode(node);if(context)return context;if(node.parentNode)return ko.contextFor(node.parentNode);break}return undefined};ko.dataFor=function(node){var context=ko.contextFor(node);return context?context["$data"]:undefined};ko.exportSymbol("bindingHandlers",ko.bindingHandlers);ko.exportSymbol("applyBindings",ko.applyBindings);ko.exportSymbol("applyBindingsToDescendants",ko.applyBindingsToDescendants);
ko.exportSymbol("applyBindingAccessorsToNode",ko.applyBindingAccessorsToNode);ko.exportSymbol("applyBindingsToNode",ko.applyBindingsToNode);ko.exportSymbol("contextFor",ko.contextFor);ko.exportSymbol("dataFor",ko.dataFor)})();var attrHtmlToJavascriptMap={"class":"className","for":"htmlFor"};ko.bindingHandlers["attr"]={"update":function(element,valueAccessor,allBindings){var value=ko.utils.unwrapObservable(valueAccessor())||{};ko.utils.objectForEach(value,function(attrName,attrValue){attrValue=ko.utils.unwrapObservable(attrValue);
var toRemove=attrValue===false||attrValue===null||attrValue===undefined;if(toRemove)element.removeAttribute(attrName);if(ko.utils.ieVersion<=8&&attrName in attrHtmlToJavascriptMap){attrName=attrHtmlToJavascriptMap[attrName];if(toRemove)element.removeAttribute(attrName);else element[attrName]=attrValue}else if(!toRemove)element.setAttribute(attrName,attrValue.toString());if(attrName==="name")ko.utils.setElementName(element,toRemove?"":attrValue.toString())})}};(function(){ko.bindingHandlers["checked"]=
{"after":["value","attr"],"init":function(element,valueAccessor,allBindings){function checkedValue(){return allBindings["has"]("checkedValue")?ko.utils.unwrapObservable(allBindings.get("checkedValue")):element.value}function updateModel(){var isChecked=element.checked,elemValue=useCheckedValue?checkedValue():isChecked;if(!shouldSet)return;if(isRadio&&!isChecked)return;var modelValue=ko.dependencyDetection.ignore(valueAccessor);if(isValueArray)if(oldElemValue!==elemValue){if(isChecked){ko.utils.addOrRemoveItem(modelValue,
elemValue,true);ko.utils.addOrRemoveItem(modelValue,oldElemValue,false)}oldElemValue=elemValue}else ko.utils.addOrRemoveItem(modelValue,elemValue,isChecked);else ko.expressionRewriting.writeValueToProperty(modelValue,allBindings,"checked",elemValue,true)}function updateView(){var modelValue=ko.utils.unwrapObservable(valueAccessor());if(isValueArray)element.checked=ko.utils.arrayIndexOf(modelValue,checkedValue())>=0;else if(isCheckbox)element.checked=modelValue;else element.checked=checkedValue()===
modelValue}var isCheckbox=element.type=="checkbox",isRadio=element.type=="radio";if(!isCheckbox&&!isRadio)return;var isValueArray=isCheckbox&&ko.utils.unwrapObservable(valueAccessor())instanceof Array,oldElemValue=isValueArray?checkedValue():undefined,useCheckedValue=isRadio||isValueArray,shouldSet=false;if(isRadio&&!element.name)ko.bindingHandlers["uniqueName"]["init"](element,function(){return true});ko.dependentObservable(updateModel,null,{disposeWhenNodeIsRemoved:element});ko.utils.registerEventHandler(element,
"click",updateModel);ko.dependentObservable(updateView,null,{disposeWhenNodeIsRemoved:element});shouldSet=true}};ko.expressionRewriting.twoWayBindings["checked"]=true;ko.bindingHandlers["checkedValue"]={"update":function(element,valueAccessor){element.value=ko.utils.unwrapObservable(valueAccessor())}}})();var classesWrittenByBindingKey="__ko__cssValue";ko.bindingHandlers["css"]={"update":function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());if(typeof value=="object")ko.utils.objectForEach(value,
function(className,shouldHaveClass){shouldHaveClass=ko.utils.unwrapObservable(shouldHaveClass);ko.utils.toggleDomNodeCssClass(element,className,shouldHaveClass)});else{value=String(value||"");ko.utils.toggleDomNodeCssClass(element,element[classesWrittenByBindingKey],false);element[classesWrittenByBindingKey]=value;ko.utils.toggleDomNodeCssClass(element,value,true)}}};ko.bindingHandlers["enable"]={"update":function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());if(value&&
element.disabled)element.removeAttribute("disabled");else if(!value&&!element.disabled)element.disabled=true}};ko.bindingHandlers["disable"]={"update":function(element,valueAccessor){ko.bindingHandlers["enable"]["update"](element,function(){return!ko.utils.unwrapObservable(valueAccessor())})}};function makeEventHandlerShortcut(eventName){ko.bindingHandlers[eventName]={"init":function(element,valueAccessor,allBindings,viewModel,bindingContext){var newValueAccessor=function(){var result={};result[eventName]=
valueAccessor();return result};return ko.bindingHandlers["event"]["init"].call(this,element,newValueAccessor,allBindings,viewModel,bindingContext)}}}ko.bindingHandlers["event"]={"init":function(element,valueAccessor,allBindings,viewModel,bindingContext){var eventsToHandle=valueAccessor()||{};ko.utils.objectForEach(eventsToHandle,function(eventName){if(typeof eventName=="string")ko.utils.registerEventHandler(element,eventName,function(event){var handlerReturnValue;var handlerFunction=valueAccessor()[eventName];
if(!handlerFunction)return;try{var argsForHandler=ko.utils.makeArray(arguments);viewModel=bindingContext["$data"];argsForHandler.unshift(viewModel);handlerReturnValue=handlerFunction.apply(viewModel,argsForHandler)}finally{if(handlerReturnValue!==true)if(event.preventDefault)event.preventDefault();else event.returnValue=false}var bubble=allBindings.get(eventName+"Bubble")!==false;if(!bubble){event.cancelBubble=true;if(event.stopPropagation)event.stopPropagation()}})})}};ko.bindingHandlers["foreach"]=
{makeTemplateValueAccessor:function(valueAccessor){return function(){var modelValue=valueAccessor(),unwrappedValue=ko.utils.peekObservable(modelValue);if(!unwrappedValue||typeof unwrappedValue.length=="number")return{"foreach":modelValue,"templateEngine":ko.nativeTemplateEngine.instance};ko.utils.unwrapObservable(modelValue);return{"foreach":unwrappedValue["data"],"as":unwrappedValue["as"],"includeDestroyed":unwrappedValue["includeDestroyed"],"afterAdd":unwrappedValue["afterAdd"],"beforeRemove":unwrappedValue["beforeRemove"],
"afterRender":unwrappedValue["afterRender"],"beforeMove":unwrappedValue["beforeMove"],"afterMove":unwrappedValue["afterMove"],"templateEngine":ko.nativeTemplateEngine.instance}}},"init":function(element,valueAccessor,allBindings,viewModel,bindingContext){return ko.bindingHandlers["template"]["init"](element,ko.bindingHandlers["foreach"].makeTemplateValueAccessor(valueAccessor))},"update":function(element,valueAccessor,allBindings,viewModel,bindingContext){return ko.bindingHandlers["template"]["update"](element,
ko.bindingHandlers["foreach"].makeTemplateValueAccessor(valueAccessor),allBindings,viewModel,bindingContext)}};ko.expressionRewriting.bindingRewriteValidators["foreach"]=false;ko.virtualElements.allowedBindings["foreach"]=true;var hasfocusUpdatingProperty="__ko_hasfocusUpdating";var hasfocusLastValue="__ko_hasfocusLastValue";ko.bindingHandlers["hasfocus"]={"init":function(element,valueAccessor,allBindings){var handleElementFocusChange=function(isFocused){element[hasfocusUpdatingProperty]=true;var ownerDoc=
element.ownerDocument;if("activeElement"in ownerDoc){var active;try{active=ownerDoc.activeElement}catch(e){active=ownerDoc.body}isFocused=active===element}var modelValue=valueAccessor();ko.expressionRewriting.writeValueToProperty(modelValue,allBindings,"hasfocus",isFocused,true);element[hasfocusLastValue]=isFocused;element[hasfocusUpdatingProperty]=false};var handleElementFocusIn=handleElementFocusChange.bind(null,true);var handleElementFocusOut=handleElementFocusChange.bind(null,false);ko.utils.registerEventHandler(element,
"focus",handleElementFocusIn);ko.utils.registerEventHandler(element,"focusin",handleElementFocusIn);ko.utils.registerEventHandler(element,"blur",handleElementFocusOut);ko.utils.registerEventHandler(element,"focusout",handleElementFocusOut)},"update":function(element,valueAccessor){var value=!!ko.utils.unwrapObservable(valueAccessor());if(!element[hasfocusUpdatingProperty]&&element[hasfocusLastValue]!==value){value?element.focus():element.blur();ko.dependencyDetection.ignore(ko.utils.triggerEvent,
null,[element,value?"focusin":"focusout"])}}};ko.expressionRewriting.twoWayBindings["hasfocus"]=true;ko.bindingHandlers["hasFocus"]=ko.bindingHandlers["hasfocus"];ko.expressionRewriting.twoWayBindings["hasFocus"]=true;ko.bindingHandlers["html"]={"init":function(){return{"controlsDescendantBindings":true}},"update":function(element,valueAccessor){ko.utils.setHtml(element,valueAccessor())}};var withIfDomDataKey=ko.utils.domData.nextKey();function makeWithIfBinding(bindingKey,isWith,isNot,makeContextCallback){ko.bindingHandlers[bindingKey]=
{"init":function(element){ko.utils.domData.set(element,withIfDomDataKey,{});return{"controlsDescendantBindings":true}},"update":function(element,valueAccessor,allBindings,viewModel,bindingContext){var withIfData=ko.utils.domData.get(element,withIfDomDataKey),dataValue=ko.utils.unwrapObservable(valueAccessor()),shouldDisplay=!isNot!==!dataValue,isFirstRender=!withIfData.savedNodes,needsRefresh=isFirstRender||isWith||shouldDisplay!==withIfData.didDisplayOnLastUpdate;if(needsRefresh){if(isFirstRender)withIfData.savedNodes=
ko.utils.cloneNodes(ko.virtualElements.childNodes(element),true);if(shouldDisplay){if(!isFirstRender)ko.virtualElements.setDomNodeChildren(element,ko.utils.cloneNodes(withIfData.savedNodes));ko.applyBindingsToDescendants(makeContextCallback?makeContextCallback(bindingContext,dataValue):bindingContext,element)}else ko.virtualElements.emptyNode(element);withIfData.didDisplayOnLastUpdate=shouldDisplay}}};ko.expressionRewriting.bindingRewriteValidators[bindingKey]=false;ko.virtualElements.allowedBindings[bindingKey]=
true}makeWithIfBinding("if");makeWithIfBinding("ifnot",false,true);makeWithIfBinding("with",true,false,function(bindingContext,dataValue){return bindingContext["createChildContext"](dataValue)});ko.bindingHandlers["options"]={"init":function(element){if(ko.utils.tagNameLower(element)!=="select")throw new Error("options binding applies only to SELECT elements");while(element.length>0)element.remove(0);return{"controlsDescendantBindings":true}},"update":function(element,valueAccessor,allBindings){function selectedOptions(){return ko.utils.arrayFilter(element.options,
function(node){return node.selected})}var selectWasPreviouslyEmpty=element.length==0;var previousScrollTop=!selectWasPreviouslyEmpty&&element.multiple?element.scrollTop:null;var unwrappedArray=ko.utils.unwrapObservable(valueAccessor());var includeDestroyed=allBindings.get("optionsIncludeDestroyed");var captionPlaceholder={};var captionValue;var previousSelectedValues;if(element.multiple)previousSelectedValues=ko.utils.arrayMap(selectedOptions(),ko.selectExtensions.readValue);else previousSelectedValues=
element.selectedIndex>=0?[ko.selectExtensions.readValue(element.options[element.selectedIndex])]:[];if(unwrappedArray){if(typeof unwrappedArray.length=="undefined")unwrappedArray=[unwrappedArray];var filteredArray=ko.utils.arrayFilter(unwrappedArray,function(item){return includeDestroyed||item===undefined||item===null||!ko.utils.unwrapObservable(item["_destroy"])});if(allBindings["has"]("optionsCaption")){captionValue=ko.utils.unwrapObservable(allBindings.get("optionsCaption"));if(captionValue!==
null&&captionValue!==undefined)filteredArray.unshift(captionPlaceholder)}}else unwrappedArray=[];function applyToObject(object,predicate,defaultValue){var predicateType=typeof predicate;if(predicateType=="function")return predicate(object);else if(predicateType=="string")return object[predicate];else return defaultValue}var itemUpdate=false;function optionForArrayItem(arrayEntry,index,oldOptions){if(oldOptions.length){previousSelectedValues=oldOptions[0].selected?[ko.selectExtensions.readValue(oldOptions[0])]:
[];itemUpdate=true}var option=document.createElement("option");if(arrayEntry===captionPlaceholder){ko.utils.setTextContent(option,allBindings.get("optionsCaption"));ko.selectExtensions.writeValue(option,undefined)}else{var optionValue=applyToObject(arrayEntry,allBindings.get("optionsValue"),arrayEntry);ko.selectExtensions.writeValue(option,ko.utils.unwrapObservable(optionValue));var optionText=applyToObject(arrayEntry,allBindings.get("optionsText"),optionValue);ko.utils.setTextContent(option,optionText)}return[option]}
function setSelectionCallback(arrayEntry,newOptions){if(previousSelectedValues.length){var isSelected=ko.utils.arrayIndexOf(previousSelectedValues,ko.selectExtensions.readValue(newOptions[0]))>=0;ko.utils.setOptionNodeSelectionState(newOptions[0],isSelected);if(itemUpdate&&!isSelected)ko.dependencyDetection.ignore(ko.utils.triggerEvent,null,[element,"change"])}}var callback=setSelectionCallback;if(allBindings["has"]("optionsAfterRender"))callback=function(arrayEntry,newOptions){setSelectionCallback(arrayEntry,
newOptions);ko.dependencyDetection.ignore(allBindings.get("optionsAfterRender"),null,[newOptions[0],arrayEntry!==captionPlaceholder?arrayEntry:undefined])};ko.utils.setDomNodeChildrenFromArrayMapping(element,filteredArray,optionForArrayItem,null,callback);var selectionChanged;if(element.multiple)selectionChanged=previousSelectedValues.length&&selectedOptions().length<previousSelectedValues.length;else selectionChanged=previousSelectedValues.length&&element.selectedIndex>=0?ko.selectExtensions.readValue(element.options[element.selectedIndex])!==
previousSelectedValues[0]:previousSelectedValues.length||element.selectedIndex>=0;if(selectionChanged)ko.dependencyDetection.ignore(ko.utils.triggerEvent,null,[element,"change"]);ko.utils.ensureSelectElementIsRenderedCorrectly(element);if(previousScrollTop&&Math.abs(previousScrollTop-element.scrollTop)>20)element.scrollTop=previousScrollTop}};ko.bindingHandlers["options"].optionValueDomDataKey=ko.utils.domData.nextKey();ko.bindingHandlers["selectedOptions"]={"after":["options","foreach"],"init":function(element,
valueAccessor,allBindings){ko.utils.registerEventHandler(element,"change",function(){var value=valueAccessor(),valueToWrite=[];ko.utils.arrayForEach(element.getElementsByTagName("option"),function(node){if(node.selected)valueToWrite.push(ko.selectExtensions.readValue(node))});ko.expressionRewriting.writeValueToProperty(value,allBindings,"selectedOptions",valueToWrite)})},"update":function(element,valueAccessor){if(ko.utils.tagNameLower(element)!="select")throw new Error("values binding applies only to SELECT elements");
var newValue=ko.utils.unwrapObservable(valueAccessor());if(newValue&&typeof newValue.length=="number")ko.utils.arrayForEach(element.getElementsByTagName("option"),function(node){var isSelected=ko.utils.arrayIndexOf(newValue,ko.selectExtensions.readValue(node))>=0;ko.utils.setOptionNodeSelectionState(node,isSelected)})}};ko.expressionRewriting.twoWayBindings["selectedOptions"]=true;ko.bindingHandlers["style"]={"update":function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor()||
{});ko.utils.objectForEach(value,function(styleName,styleValue){styleValue=ko.utils.unwrapObservable(styleValue);element.style[styleName]=styleValue||""})}};ko.bindingHandlers["submit"]={"init":function(element,valueAccessor,allBindings,viewModel,bindingContext){if(typeof valueAccessor()!="function")throw new Error("The value for a submit binding must be a function");ko.utils.registerEventHandler(element,"submit",function(event){var handlerReturnValue;var value=valueAccessor();try{handlerReturnValue=
value.call(bindingContext["$data"],element)}finally{if(handlerReturnValue!==true)if(event.preventDefault)event.preventDefault();else event.returnValue=false}})}};ko.bindingHandlers["text"]={"init":function(){return{"controlsDescendantBindings":true}},"update":function(element,valueAccessor){ko.utils.setTextContent(element,valueAccessor())}};ko.virtualElements.allowedBindings["text"]=true;ko.bindingHandlers["uniqueName"]={"init":function(element,valueAccessor){if(valueAccessor()){var name="ko_unique_"+
++ko.bindingHandlers["uniqueName"].currentIndex;ko.utils.setElementName(element,name)}}};ko.bindingHandlers["uniqueName"].currentIndex=0;ko.bindingHandlers["value"]={"after":["options","foreach"],"init":function(element,valueAccessor,allBindings){var eventsToCatch=["change"];var requestedEventsToCatch=allBindings.get("valueUpdate");var propertyChangedFired=false;if(requestedEventsToCatch){if(typeof requestedEventsToCatch=="string")requestedEventsToCatch=[requestedEventsToCatch];ko.utils.arrayPushAll(eventsToCatch,
requestedEventsToCatch);eventsToCatch=ko.utils.arrayGetDistinctValues(eventsToCatch)}var valueUpdateHandler=function(){propertyChangedFired=false;var modelValue=valueAccessor();var elementValue=ko.selectExtensions.readValue(element);ko.expressionRewriting.writeValueToProperty(modelValue,allBindings,"value",elementValue)};var ieAutoCompleteHackNeeded=ko.utils.ieVersion&&element.tagName.toLowerCase()=="input"&&element.type=="text"&&element.autocomplete!="off"&&(!element.form||element.form.autocomplete!=
"off");if(ieAutoCompleteHackNeeded&&ko.utils.arrayIndexOf(eventsToCatch,"propertychange")==-1){ko.utils.registerEventHandler(element,"propertychange",function(){propertyChangedFired=true});ko.utils.registerEventHandler(element,"blur",function(){if(propertyChangedFired)valueUpdateHandler()})}ko.utils.arrayForEach(eventsToCatch,function(eventName){var handler=valueUpdateHandler;if(ko.utils.stringStartsWith(eventName,"after")){handler=function(){setTimeout(valueUpdateHandler,0)};eventName=eventName.substring("after".length)}ko.utils.registerEventHandler(element,
eventName,handler)})},"update":function(element,valueAccessor){var valueIsSelectOption=ko.utils.tagNameLower(element)==="select";var newValue=ko.utils.unwrapObservable(valueAccessor());var elementValue=ko.selectExtensions.readValue(element);var valueHasChanged=newValue!==elementValue;if(valueHasChanged){var applyValueAction=function(){ko.selectExtensions.writeValue(element,newValue)};applyValueAction();if(valueIsSelectOption)if(newValue!==ko.selectExtensions.readValue(element))ko.dependencyDetection.ignore(ko.utils.triggerEvent,
null,[element,"change"]);else setTimeout(applyValueAction,0)}}};ko.expressionRewriting.twoWayBindings["value"]=true;ko.bindingHandlers["visible"]={"update":function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());var isCurrentlyVisible=!(element.style.display=="none");if(value&&!isCurrentlyVisible)element.style.display="";else if(!value&&isCurrentlyVisible)element.style.display="none"}};makeEventHandlerShortcut("click");ko.templateEngine=function(){};ko.templateEngine.prototype["renderTemplateSource"]=
function(templateSource,bindingContext,options){throw new Error("Override renderTemplateSource");};ko.templateEngine.prototype["createJavaScriptEvaluatorBlock"]=function(script){throw new Error("Override createJavaScriptEvaluatorBlock");};ko.templateEngine.prototype["makeTemplateSource"]=function(template,templateDocument){if(typeof template=="string"){templateDocument=templateDocument||document;var elem=templateDocument.getElementById(template);if(!elem)throw new Error("Cannot find template with ID "+
template);return new ko.templateSources.domElement(elem)}else if(template.nodeType==1||template.nodeType==8)return new ko.templateSources.anonymousTemplate(template);else throw new Error("Unknown template type: "+template);};ko.templateEngine.prototype["renderTemplate"]=function(template,bindingContext,options,templateDocument){var templateSource=this["makeTemplateSource"](template,templateDocument);return this["renderTemplateSource"](templateSource,bindingContext,options)};ko.templateEngine.prototype["isTemplateRewritten"]=
function(template,templateDocument){if(this["allowTemplateRewriting"]===false)return true;return this["makeTemplateSource"](template,templateDocument)["data"]("isRewritten")};ko.templateEngine.prototype["rewriteTemplate"]=function(template,rewriterCallback,templateDocument){var templateSource=this["makeTemplateSource"](template,templateDocument);var rewritten=rewriterCallback(templateSource["text"]());templateSource["text"](rewritten);templateSource["data"]("isRewritten",true)};ko.exportSymbol("templateEngine",
ko.templateEngine);ko.templateRewriting=function(){var memoizeDataBindingAttributeSyntaxRegex=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi;var memoizeVirtualContainerBindingSyntaxRegex=/<\!--\s*ko\b\s*([\s\S]*?)\s*--\>/g;function validateDataBindValuesForRewriting(keyValueArray){var allValidators=ko.expressionRewriting.bindingRewriteValidators;for(var i=0;i<keyValueArray.length;i++){var key=keyValueArray[i]["key"];if(allValidators.hasOwnProperty(key)){var validator=
allValidators[key];if(typeof validator==="function"){var possibleErrorMessage=validator(keyValueArray[i]["value"]);if(possibleErrorMessage)throw new Error(possibleErrorMessage);}else if(!validator)throw new Error("This template engine does not support the '"+key+"' binding within its templates");}}}function constructMemoizedTagReplacement(dataBindAttributeValue,tagToRetain,nodeName,templateEngine){var dataBindKeyValueArray=ko.expressionRewriting.parseObjectLiteral(dataBindAttributeValue);validateDataBindValuesForRewriting(dataBindKeyValueArray);
var rewrittenDataBindAttributeValue=ko.expressionRewriting.preProcessBindings(dataBindKeyValueArray,{"valueAccessors":true});var applyBindingsToNextSiblingScript="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+rewrittenDataBindAttributeValue+" } })()},'"+nodeName.toLowerCase()+"')";return templateEngine["createJavaScriptEvaluatorBlock"](applyBindingsToNextSiblingScript)+tagToRetain}return{ensureTemplateIsRewritten:function(template,templateEngine,templateDocument){if(!templateEngine["isTemplateRewritten"](template,
templateDocument))templateEngine["rewriteTemplate"](template,function(htmlString){return ko.templateRewriting.memoizeBindingAttributeSyntax(htmlString,templateEngine)},templateDocument)},memoizeBindingAttributeSyntax:function(htmlString,templateEngine){return htmlString.replace(memoizeDataBindingAttributeSyntaxRegex,function(){return constructMemoizedTagReplacement(arguments[4],arguments[1],arguments[2],templateEngine)}).replace(memoizeVirtualContainerBindingSyntaxRegex,function(){return constructMemoizedTagReplacement(arguments[1],
"<\!-- ko --\>","#comment",templateEngine)})},applyMemoizedBindingsToNextSibling:function(bindings,nodeName){return ko.memoization.memoize(function(domNode,bindingContext){var nodeToBind=domNode.nextSibling;if(nodeToBind&&nodeToBind.nodeName.toLowerCase()===nodeName)ko.applyBindingAccessorsToNode(nodeToBind,bindings,bindingContext)})}}}();ko.exportSymbol("__tr_ambtns",ko.templateRewriting.applyMemoizedBindingsToNextSibling);(function(){ko.templateSources={};ko.templateSources.domElement=function(element){this.domElement=
element};ko.templateSources.domElement.prototype["text"]=function(){var tagNameLower=ko.utils.tagNameLower(this.domElement),elemContentsProperty=tagNameLower==="script"?"text":tagNameLower==="textarea"?"value":"innerHTML";if(arguments.length==0)return this.domElement[elemContentsProperty];else{var valueToWrite=arguments[0];if(elemContentsProperty==="innerHTML")ko.utils.setHtml(this.domElement,valueToWrite);else this.domElement[elemContentsProperty]=valueToWrite}};var dataDomDataPrefix=ko.utils.domData.nextKey()+
"_";ko.templateSources.domElement.prototype["data"]=function(key){if(arguments.length===1)return ko.utils.domData.get(this.domElement,dataDomDataPrefix+key);else ko.utils.domData.set(this.domElement,dataDomDataPrefix+key,arguments[1])};var anonymousTemplatesDomDataKey=ko.utils.domData.nextKey();ko.templateSources.anonymousTemplate=function(element){this.domElement=element};ko.templateSources.anonymousTemplate.prototype=new ko.templateSources.domElement;ko.templateSources.anonymousTemplate.prototype.constructor=
ko.templateSources.anonymousTemplate;ko.templateSources.anonymousTemplate.prototype["text"]=function(){if(arguments.length==0){var templateData=ko.utils.domData.get(this.domElement,anonymousTemplatesDomDataKey)||{};if(templateData.textData===undefined&&templateData.containerData)templateData.textData=templateData.containerData.innerHTML;return templateData.textData}else{var valueToWrite=arguments[0];ko.utils.domData.set(this.domElement,anonymousTemplatesDomDataKey,{textData:valueToWrite})}};ko.templateSources.domElement.prototype["nodes"]=
function(){if(arguments.length==0){var templateData=ko.utils.domData.get(this.domElement,anonymousTemplatesDomDataKey)||{};return templateData.containerData}else{var valueToWrite=arguments[0];ko.utils.domData.set(this.domElement,anonymousTemplatesDomDataKey,{containerData:valueToWrite})}};ko.exportSymbol("templateSources",ko.templateSources);ko.exportSymbol("templateSources.domElement",ko.templateSources.domElement);ko.exportSymbol("templateSources.anonymousTemplate",ko.templateSources.anonymousTemplate)})();
(function(){var _templateEngine;ko.setTemplateEngine=function(templateEngine){if(templateEngine!=undefined&&!(templateEngine instanceof ko.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");_templateEngine=templateEngine};function invokeForEachNodeInContinuousRange(firstNode,lastNode,action){var node,nextInQueue=firstNode,firstOutOfRangeNode=ko.virtualElements.nextSibling(lastNode);while(nextInQueue&&(node=nextInQueue)!==firstOutOfRangeNode){nextInQueue=ko.virtualElements.nextSibling(node);
action(node,nextInQueue)}}function activateBindingsOnContinuousNodeArray(continuousNodeArray,bindingContext){if(continuousNodeArray.length){var firstNode=continuousNodeArray[0],lastNode=continuousNodeArray[continuousNodeArray.length-1],parentNode=firstNode.parentNode,provider=ko.bindingProvider["instance"],preprocessNode=provider["preprocessNode"];if(preprocessNode){invokeForEachNodeInContinuousRange(firstNode,lastNode,function(node,nextNodeInRange){var nodePreviousSibling=node.previousSibling;var newNodes=
preprocessNode.call(provider,node);if(newNodes){if(node===firstNode)firstNode=newNodes[0]||nextNodeInRange;if(node===lastNode)lastNode=newNodes[newNodes.length-1]||nodePreviousSibling}});continuousNodeArray.length=0;if(!firstNode)return;if(firstNode===lastNode)continuousNodeArray.push(firstNode);else{continuousNodeArray.push(firstNode,lastNode);ko.utils.fixUpContinuousNodeArray(continuousNodeArray,parentNode)}}invokeForEachNodeInContinuousRange(firstNode,lastNode,function(node){if(node.nodeType===
1||node.nodeType===8)ko.applyBindings(bindingContext,node)});invokeForEachNodeInContinuousRange(firstNode,lastNode,function(node){if(node.nodeType===1||node.nodeType===8)ko.memoization.unmemoizeDomNodeAndDescendants(node,[bindingContext])});ko.utils.fixUpContinuousNodeArray(continuousNodeArray,parentNode)}}function getFirstNodeFromPossibleArray(nodeOrNodeArray){return nodeOrNodeArray.nodeType?nodeOrNodeArray:nodeOrNodeArray.length>0?nodeOrNodeArray[0]:null}function executeTemplate(targetNodeOrNodeArray,
renderMode,template,bindingContext,options){options=options||{};var firstTargetNode=targetNodeOrNodeArray&&getFirstNodeFromPossibleArray(targetNodeOrNodeArray);var templateDocument=firstTargetNode&&firstTargetNode.ownerDocument;var templateEngineToUse=options["templateEngine"]||_templateEngine;ko.templateRewriting.ensureTemplateIsRewritten(template,templateEngineToUse,templateDocument);var renderedNodesArray=templateEngineToUse["renderTemplate"](template,bindingContext,options,templateDocument);if(typeof renderedNodesArray.length!=
"number"||renderedNodesArray.length>0&&typeof renderedNodesArray[0].nodeType!="number")throw new Error("Template engine must return an array of DOM nodes");var haveAddedNodesToParent=false;switch(renderMode){case "replaceChildren":ko.virtualElements.setDomNodeChildren(targetNodeOrNodeArray,renderedNodesArray);haveAddedNodesToParent=true;break;case "replaceNode":ko.utils.replaceDomNodes(targetNodeOrNodeArray,renderedNodesArray);haveAddedNodesToParent=true;break;case "ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+
renderMode);}if(haveAddedNodesToParent){activateBindingsOnContinuousNodeArray(renderedNodesArray,bindingContext);if(options["afterRender"])ko.dependencyDetection.ignore(options["afterRender"],null,[renderedNodesArray,bindingContext["$data"]])}return renderedNodesArray}ko.renderTemplate=function(template,dataOrBindingContext,options,targetNodeOrNodeArray,renderMode){options=options||{};if((options["templateEngine"]||_templateEngine)==undefined)throw new Error("Set a template engine before calling renderTemplate");
renderMode=renderMode||"replaceChildren";if(targetNodeOrNodeArray){var firstTargetNode=getFirstNodeFromPossibleArray(targetNodeOrNodeArray);var whenToDispose=function(){return!firstTargetNode||!ko.utils.domNodeIsAttachedToDocument(firstTargetNode)};var activelyDisposeWhenNodeIsRemoved=firstTargetNode&&renderMode=="replaceNode"?firstTargetNode.parentNode:firstTargetNode;return ko.dependentObservable(function(){var bindingContext=dataOrBindingContext&&dataOrBindingContext instanceof ko.bindingContext?
dataOrBindingContext:new ko.bindingContext(ko.utils.unwrapObservable(dataOrBindingContext));var templateName=typeof template=="function"?template(bindingContext["$data"],bindingContext):template;var renderedNodesArray=executeTemplate(targetNodeOrNodeArray,renderMode,templateName,bindingContext,options);if(renderMode=="replaceNode"){targetNodeOrNodeArray=renderedNodesArray;firstTargetNode=getFirstNodeFromPossibleArray(targetNodeOrNodeArray)}},null,{disposeWhen:whenToDispose,disposeWhenNodeIsRemoved:activelyDisposeWhenNodeIsRemoved})}else return ko.memoization.memoize(function(domNode){ko.renderTemplate(template,
dataOrBindingContext,options,domNode,"replaceNode")})};ko.renderTemplateForEach=function(template,arrayOrObservableArray,options,targetNode,parentBindingContext){var arrayItemContext;var executeTemplateForArrayItem=function(arrayValue,index){arrayItemContext=parentBindingContext["createChildContext"](arrayValue,options["as"],function(context){context["$index"]=index});var templateName=typeof template=="function"?template(arrayValue,arrayItemContext):template;return executeTemplate(null,"ignoreTargetNode",
templateName,arrayItemContext,options)};var activateBindingsCallback=function(arrayValue,addedNodesArray,index){activateBindingsOnContinuousNodeArray(addedNodesArray,arrayItemContext);if(options["afterRender"])options["afterRender"](addedNodesArray,arrayValue)};return ko.dependentObservable(function(){var unwrappedArray=ko.utils.unwrapObservable(arrayOrObservableArray)||[];if(typeof unwrappedArray.length=="undefined")unwrappedArray=[unwrappedArray];var filteredArray=ko.utils.arrayFilter(unwrappedArray,
function(item){return options["includeDestroyed"]||item===undefined||item===null||!ko.utils.unwrapObservable(item["_destroy"])});ko.dependencyDetection.ignore(ko.utils.setDomNodeChildrenFromArrayMapping,null,[targetNode,filteredArray,executeTemplateForArrayItem,options,activateBindingsCallback])},null,{disposeWhenNodeIsRemoved:targetNode})};var templateComputedDomDataKey=ko.utils.domData.nextKey();function disposeOldComputedAndStoreNewOne(element,newComputed){var oldComputed=ko.utils.domData.get(element,
templateComputedDomDataKey);if(oldComputed&&typeof oldComputed.dispose=="function")oldComputed.dispose();ko.utils.domData.set(element,templateComputedDomDataKey,newComputed&&newComputed.isActive()?newComputed:undefined)}ko.bindingHandlers["template"]={"init":function(element,valueAccessor){var bindingValue=ko.utils.unwrapObservable(valueAccessor());if(typeof bindingValue=="string"||bindingValue["name"])ko.virtualElements.emptyNode(element);else{var templateNodes=ko.virtualElements.childNodes(element),
container=ko.utils.moveCleanedNodesToContainerElement(templateNodes);(new ko.templateSources.anonymousTemplate(element))["nodes"](container)}return{"controlsDescendantBindings":true}},"update":function(element,valueAccessor,allBindings,viewModel,bindingContext){var templateName=ko.utils.unwrapObservable(valueAccessor()),options={},shouldDisplay=true,dataValue,templateComputed=null;if(typeof templateName!="string"){options=templateName;templateName=ko.utils.unwrapObservable(options["name"]);if("if"in
options)shouldDisplay=ko.utils.unwrapObservable(options["if"]);if(shouldDisplay&&"ifnot"in options)shouldDisplay=!ko.utils.unwrapObservable(options["ifnot"]);dataValue=ko.utils.unwrapObservable(options["data"])}if("foreach"in options){var dataArray=shouldDisplay&&options["foreach"]||[];templateComputed=ko.renderTemplateForEach(templateName||element,dataArray,options,element,bindingContext)}else if(!shouldDisplay)ko.virtualElements.emptyNode(element);else{var innerBindingContext="data"in options?bindingContext["createChildContext"](dataValue,
options["as"]):bindingContext;templateComputed=ko.renderTemplate(templateName||element,innerBindingContext,options,element)}disposeOldComputedAndStoreNewOne(element,templateComputed)}};ko.expressionRewriting.bindingRewriteValidators["template"]=function(bindingValue){var parsedBindingValue=ko.expressionRewriting.parseObjectLiteral(bindingValue);if(parsedBindingValue.length==1&&parsedBindingValue[0]["unknown"])return null;if(ko.expressionRewriting.keyValueArrayContainsKey(parsedBindingValue,"name"))return null;
return"This template engine does not support anonymous templates nested within its templates"};ko.virtualElements.allowedBindings["template"]=true})();ko.exportSymbol("setTemplateEngine",ko.setTemplateEngine);ko.exportSymbol("renderTemplate",ko.renderTemplate);ko.utils.compareArrays=function(){var statusNotInOld="added",statusNotInNew="deleted";function compareArrays(oldArray,newArray,options){options=typeof options==="boolean"?{"dontLimitMoves":options}:options||{};oldArray=oldArray||[];newArray=
newArray||[];if(oldArray.length<=newArray.length)return compareSmallArrayToBigArray(oldArray,newArray,statusNotInOld,statusNotInNew,options);else return compareSmallArrayToBigArray(newArray,oldArray,statusNotInNew,statusNotInOld,options)}function compareSmallArrayToBigArray(smlArray,bigArray,statusNotInSml,statusNotInBig,options){var myMin=Math.min,myMax=Math.max,editDistanceMatrix=[],smlIndex,smlIndexMax=smlArray.length,bigIndex,bigIndexMax=bigArray.length,compareRange=bigIndexMax-smlIndexMax||1,
maxDistance=smlIndexMax+bigIndexMax+1,thisRow,lastRow,bigIndexMaxForRow,bigIndexMinForRow;for(smlIndex=0;smlIndex<=smlIndexMax;smlIndex++){lastRow=thisRow;editDistanceMatrix.push(thisRow=[]);bigIndexMaxForRow=myMin(bigIndexMax,smlIndex+compareRange);bigIndexMinForRow=myMax(0,smlIndex-1);for(bigIndex=bigIndexMinForRow;bigIndex<=bigIndexMaxForRow;bigIndex++)if(!bigIndex)thisRow[bigIndex]=smlIndex+1;else if(!smlIndex)thisRow[bigIndex]=bigIndex+1;else if(smlArray[smlIndex-1]===bigArray[bigIndex-1])thisRow[bigIndex]=
lastRow[bigIndex-1];else{var northDistance=lastRow[bigIndex]||maxDistance;var westDistance=thisRow[bigIndex-1]||maxDistance;thisRow[bigIndex]=myMin(northDistance,westDistance)+1}}var editScript=[],meMinusOne,notInSml=[],notInBig=[];for(smlIndex=smlIndexMax,bigIndex=bigIndexMax;smlIndex||bigIndex;){meMinusOne=editDistanceMatrix[smlIndex][bigIndex]-1;if(bigIndex&&meMinusOne===editDistanceMatrix[smlIndex][bigIndex-1])notInSml.push(editScript[editScript.length]={"status":statusNotInSml,"value":bigArray[--bigIndex],
"index":bigIndex});else if(smlIndex&&meMinusOne===editDistanceMatrix[smlIndex-1][bigIndex])notInBig.push(editScript[editScript.length]={"status":statusNotInBig,"value":smlArray[--smlIndex],"index":smlIndex});else{--bigIndex;--smlIndex;if(!options["sparse"])editScript.push({"status":"retained","value":bigArray[bigIndex]})}}if(notInSml.length&&notInBig.length){var limitFailedCompares=smlIndexMax*10,failedCompares,a,d,notInSmlItem,notInBigItem;for(failedCompares=a=0;(options["dontLimitMoves"]||failedCompares<
limitFailedCompares)&&(notInSmlItem=notInSml[a]);a++){for(d=0;notInBigItem=notInBig[d];d++)if(notInSmlItem["value"]===notInBigItem["value"]){notInSmlItem["moved"]=notInBigItem["index"];notInBigItem["moved"]=notInSmlItem["index"];notInBig.splice(d,1);failedCompares=d=0;break}failedCompares+=d}}return editScript.reverse()}return compareArrays}();ko.exportSymbol("utils.compareArrays",ko.utils.compareArrays);(function(){function mapNodeAndRefreshWhenChanged(containerNode,mapping,valueToMap,callbackAfterAddingNodes,
index){var mappedNodes=[];var dependentObservable=ko.dependentObservable(function(){var newMappedNodes=mapping(valueToMap,index,ko.utils.fixUpContinuousNodeArray(mappedNodes,containerNode))||[];if(mappedNodes.length>0){ko.utils.replaceDomNodes(mappedNodes,newMappedNodes);if(callbackAfterAddingNodes)ko.dependencyDetection.ignore(callbackAfterAddingNodes,null,[valueToMap,newMappedNodes,index])}mappedNodes.splice(0,mappedNodes.length);ko.utils.arrayPushAll(mappedNodes,newMappedNodes)},null,{disposeWhenNodeIsRemoved:containerNode,
disposeWhen:function(){return!ko.utils.anyDomNodeIsAttachedToDocument(mappedNodes)}});return{mappedNodes:mappedNodes,dependentObservable:dependentObservable.isActive()?dependentObservable:undefined}}var lastMappingResultDomDataKey=ko.utils.domData.nextKey();ko.utils.setDomNodeChildrenFromArrayMapping=function(domNode,array,mapping,options,callbackAfterAddingNodes){array=array||[];options=options||{};var isFirstExecution=ko.utils.domData.get(domNode,lastMappingResultDomDataKey)===undefined;var lastMappingResult=
ko.utils.domData.get(domNode,lastMappingResultDomDataKey)||[];var lastArray=ko.utils.arrayMap(lastMappingResult,function(x){return x.arrayEntry});var editScript=ko.utils.compareArrays(lastArray,array,options["dontLimitMoves"]);var newMappingResult=[];var lastMappingResultIndex=0;var newMappingResultIndex=0;var nodesToDelete=[];var itemsToProcess=[];var itemsForBeforeRemoveCallbacks=[];var itemsForMoveCallbacks=[];var itemsForAfterAddCallbacks=[];var mapData;function itemMovedOrRetained(editScriptIndex,
oldPosition){mapData=lastMappingResult[oldPosition];if(newMappingResultIndex!==oldPosition)itemsForMoveCallbacks[editScriptIndex]=mapData;mapData.indexObservable(newMappingResultIndex++);ko.utils.fixUpContinuousNodeArray(mapData.mappedNodes,domNode);newMappingResult.push(mapData);itemsToProcess.push(mapData)}function callCallback(callback,items){if(callback)for(var i=0,n=items.length;i<n;i++)if(items[i])ko.utils.arrayForEach(items[i].mappedNodes,function(node){callback(node,i,items[i].arrayEntry)})}
for(var i=0,editScriptItem,movedIndex;editScriptItem=editScript[i];i++){movedIndex=editScriptItem["moved"];switch(editScriptItem["status"]){case "deleted":if(movedIndex===undefined){mapData=lastMappingResult[lastMappingResultIndex];if(mapData.dependentObservable)mapData.dependentObservable.dispose();nodesToDelete.push.apply(nodesToDelete,ko.utils.fixUpContinuousNodeArray(mapData.mappedNodes,domNode));if(options["beforeRemove"]){itemsForBeforeRemoveCallbacks[i]=mapData;itemsToProcess.push(mapData)}}lastMappingResultIndex++;
break;case "retained":itemMovedOrRetained(i,lastMappingResultIndex++);break;case "added":if(movedIndex!==undefined)itemMovedOrRetained(i,movedIndex);else{mapData={arrayEntry:editScriptItem["value"],indexObservable:ko.observable(newMappingResultIndex++)};newMappingResult.push(mapData);itemsToProcess.push(mapData);if(!isFirstExecution)itemsForAfterAddCallbacks[i]=mapData}break}}callCallback(options["beforeMove"],itemsForMoveCallbacks);ko.utils.arrayForEach(nodesToDelete,options["beforeRemove"]?ko.cleanNode:
ko.removeNode);for(var i=0,nextNode=ko.virtualElements.firstChild(domNode),lastNode,node;mapData=itemsToProcess[i];i++){if(!mapData.mappedNodes)ko.utils.extend(mapData,mapNodeAndRefreshWhenChanged(domNode,mapping,mapData.arrayEntry,callbackAfterAddingNodes,mapData.indexObservable));for(var j=0;node=mapData.mappedNodes[j];nextNode=node.nextSibling,lastNode=node,j++)if(node!==nextNode)ko.virtualElements.insertAfter(domNode,node,lastNode);if(!mapData.initialized&&callbackAfterAddingNodes){callbackAfterAddingNodes(mapData.arrayEntry,
mapData.mappedNodes,mapData.indexObservable);mapData.initialized=true}}callCallback(options["beforeRemove"],itemsForBeforeRemoveCallbacks);callCallback(options["afterMove"],itemsForMoveCallbacks);callCallback(options["afterAdd"],itemsForAfterAddCallbacks);ko.utils.domData.set(domNode,lastMappingResultDomDataKey,newMappingResult)}})();ko.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",ko.utils.setDomNodeChildrenFromArrayMapping);ko.nativeTemplateEngine=function(){this["allowTemplateRewriting"]=
false};ko.nativeTemplateEngine.prototype=new ko.templateEngine;ko.nativeTemplateEngine.prototype.constructor=ko.nativeTemplateEngine;ko.nativeTemplateEngine.prototype["renderTemplateSource"]=function(templateSource,bindingContext,options){var useNodesIfAvailable=!(ko.utils.ieVersion<9),templateNodesFunc=useNodesIfAvailable?templateSource["nodes"]:null,templateNodes=templateNodesFunc?templateSource["nodes"]():null;if(templateNodes)return ko.utils.makeArray(templateNodes.cloneNode(true).childNodes);
else{var templateText=templateSource["text"]();return ko.utils.parseHtmlFragment(templateText)}};ko.nativeTemplateEngine.instance=new ko.nativeTemplateEngine;ko.setTemplateEngine(ko.nativeTemplateEngine.instance);ko.exportSymbol("nativeTemplateEngine",ko.nativeTemplateEngine);(function(){ko.jqueryTmplTemplateEngine=function(){var jQueryTmplVersion=this.jQueryTmplVersion=function(){if(typeof jQuery=="undefined"||!jQuery["tmpl"])return 0;try{if(jQuery["tmpl"]["tag"]["tmpl"]["open"].toString().indexOf("__")>=
0)return 2}catch(ex){}return 1}();function ensureHasReferencedJQueryTemplates(){if(jQueryTmplVersion<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");}function executeTemplate(compiledTemplate,data,jQueryTemplateOptions){return jQuery["tmpl"](compiledTemplate,data,jQueryTemplateOptions)}this["renderTemplateSource"]=function(templateSource,bindingContext,options){options=options||{};ensureHasReferencedJQueryTemplates();var precompiled=templateSource["data"]("precompiled");
if(!precompiled){var templateText=templateSource["text"]()||"";templateText="{{ko_with $item.koBindingContext}}"+templateText+"{{/ko_with}}";precompiled=jQuery["template"](null,templateText);templateSource["data"]("precompiled",precompiled)}var data=[bindingContext["$data"]];var jQueryTemplateOptions=jQuery["extend"]({"koBindingContext":bindingContext},options["templateOptions"]);var resultNodes=executeTemplate(precompiled,data,jQueryTemplateOptions);resultNodes["appendTo"](document.createElement("div"));
jQuery["fragments"]={};return resultNodes};this["createJavaScriptEvaluatorBlock"]=function(script){return"{{ko_code ((function() { return "+script+" })()) }}"};this["addTemplate"]=function(templateName,templateMarkup){document.write("<script type='text/html' id='"+templateName+"'>"+templateMarkup+"<"+"/script>")};if(jQueryTmplVersion>0){jQuery["tmpl"]["tag"]["ko_code"]={open:"__.push($1 || '');"};jQuery["tmpl"]["tag"]["ko_with"]={open:"with($1) {",close:"} "}}};ko.jqueryTmplTemplateEngine.prototype=
new ko.templateEngine;ko.jqueryTmplTemplateEngine.prototype.constructor=ko.jqueryTmplTemplateEngine;var jqueryTmplTemplateEngineInstance=new ko.jqueryTmplTemplateEngine;if(jqueryTmplTemplateEngineInstance.jQueryTmplVersion>0)ko.setTemplateEngine(jqueryTmplTemplateEngineInstance);ko.exportSymbol("jqueryTmplTemplateEngine",ko.jqueryTmplTemplateEngine)})()})})()})();(function(factory){if(typeof require==="function"&&typeof exports==="object"&&typeof module==="object")factory(require("knockout"),exports);else if(typeof define==="function"&&define["amd"])define(["knockout","exports"],factory);else factory(ko,ko.mapping={})})(function(ko,exports){var DEBUG=true;var mappingProperty="__ko_mapping__";var realKoDependentObservable=ko.dependentObservable;var mappingNesting=0;var dependentObservables;var visitedObjects;var recognizedRootProperties=["create","update",
"key","arrayChanged"];var emptyReturn={};var _defaultOptions={include:["_destroy"],ignore:[],copy:[],observe:[]};var defaultOptions=_defaultOptions;function unionArrays(x,y){var obj={};for(var i=x.length-1;i>=0;--i)obj[x[i]]=x[i];for(var i=y.length-1;i>=0;--i)obj[y[i]]=y[i];var res=[];for(var k in obj)res.push(obj[k]);return res}function extendObject(destination,source){var destType;for(var key in source)if(source.hasOwnProperty(key)&&source[key]){destType=exports.getType(destination[key]);if(key&&
destination[key]&&destType!=="array"&&destType!=="string")extendObject(destination[key],source[key]);else{var bothArrays=exports.getType(destination[key])==="array"&&exports.getType(source[key])==="array";if(bothArrays)destination[key]=unionArrays(destination[key],source[key]);else destination[key]=source[key]}}}function merge(obj1,obj2){var merged={};extendObject(merged,obj1);extendObject(merged,obj2);return merged}exports.isMapped=function(viewModel){var unwrapped=ko.utils.unwrapObservable(viewModel);
return unwrapped&&unwrapped[mappingProperty]};exports.fromJS=function(jsObject){if(arguments.length==0)throw new Error("When calling ko.fromJS, pass the object you want to convert.");try{if(!mappingNesting++){dependentObservables=[];visitedObjects=new objectLookup}var options;var target;if(arguments.length==2)if(arguments[1][mappingProperty])target=arguments[1];else options=arguments[1];if(arguments.length==3){options=arguments[1];target=arguments[2]}if(target)options=merge(options,target[mappingProperty]);
options=fillOptions(options);var result=updateViewModel(target,jsObject,options);if(target)result=target;if(!--mappingNesting)while(dependentObservables.length){var DO=dependentObservables.pop();if(DO){DO();DO.__DO["throttleEvaluation"]=DO["throttleEvaluation"]}}result[mappingProperty]=merge(result[mappingProperty],options);return result}catch(e){mappingNesting=0;throw e;}};exports.fromJSON=function(jsonString){var parsed=ko.utils.parseJson(jsonString);arguments[0]=parsed;return exports.fromJS.apply(this,
arguments)};exports.updateFromJS=function(viewModel){throw new Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!");};exports.updateFromJSON=function(viewModel){throw new Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!");};exports.toJS=function(rootObject,options){if(!defaultOptions)exports.resetDefaultOptions();if(arguments.length==0)throw new Error("When calling ko.mapping.toJS, pass the object you want to convert.");
if(exports.getType(defaultOptions.ignore)!=="array")throw new Error("ko.mapping.defaultOptions().ignore should be an array.");if(exports.getType(defaultOptions.include)!=="array")throw new Error("ko.mapping.defaultOptions().include should be an array.");if(exports.getType(defaultOptions.copy)!=="array")throw new Error("ko.mapping.defaultOptions().copy should be an array.");options=fillOptions(options,rootObject[mappingProperty]);return exports.visitModel(rootObject,function(x){return ko.utils.unwrapObservable(x)},
options)};exports.toJSON=function(rootObject,options){var plainJavaScriptObject=exports.toJS(rootObject,options);return ko.utils.stringifyJson(plainJavaScriptObject)};exports.defaultOptions=function(){if(arguments.length>0)defaultOptions=arguments[0];else return defaultOptions};exports.resetDefaultOptions=function(){defaultOptions={include:_defaultOptions.include.slice(0),ignore:_defaultOptions.ignore.slice(0),copy:_defaultOptions.copy.slice(0)}};exports.getType=function(x){if(x&&typeof x==="object"){if(x.constructor===
Date)return"date";if(x.constructor===Array)return"array"}return typeof x};function fillOptions(rawOptions,otherOptions){var options=merge({},rawOptions);for(var i=recognizedRootProperties.length-1;i>=0;i--){var property=recognizedRootProperties[i];if(!options[property])continue;if(!(options[""]instanceof Object))options[""]={};options[""][property]=options[property];delete options[property]}if(otherOptions){options.ignore=mergeArrays(otherOptions.ignore,options.ignore);options.include=mergeArrays(otherOptions.include,
options.include);options.copy=mergeArrays(otherOptions.copy,options.copy);options.observe=mergeArrays(otherOptions.observe,options.observe)}options.ignore=mergeArrays(options.ignore,defaultOptions.ignore);options.include=mergeArrays(options.include,defaultOptions.include);options.copy=mergeArrays(options.copy,defaultOptions.copy);options.observe=mergeArrays(options.observe,defaultOptions.observe);options.mappedProperties=options.mappedProperties||{};options.copiedProperties=options.copiedProperties||
{};return options}function mergeArrays(a,b){if(exports.getType(a)!=="array")if(exports.getType(a)==="undefined")a=[];else a=[a];if(exports.getType(b)!=="array")if(exports.getType(b)==="undefined")b=[];else b=[b];return ko.utils.arrayGetDistinctValues(a.concat(b))}function withProxyDependentObservable(dependentObservables,callback){var localDO=ko.dependentObservable;ko.dependentObservable=function(read,owner,options){options=options||{};if(read&&typeof read=="object")options=read;var realDeferEvaluation=
options.deferEvaluation;var isRemoved=false;var wrap=function(DO){var tmp=ko.dependentObservable;ko.dependentObservable=realKoDependentObservable;var isWriteable=ko.isWriteableObservable(DO);ko.dependentObservable=tmp;var wrapped=realKoDependentObservable({read:function(){if(!isRemoved){ko.utils.arrayRemoveItem(dependentObservables,DO);isRemoved=true}return DO.apply(DO,arguments)},write:isWriteable&&function(val){return DO(val)},deferEvaluation:true});if(DEBUG)wrapped._wrapper=true;wrapped.__DO=DO;
return wrapped};options.deferEvaluation=true;var realDependentObservable=new realKoDependentObservable(read,owner,options);if(!realDeferEvaluation){realDependentObservable=wrap(realDependentObservable);dependentObservables.push(realDependentObservable)}return realDependentObservable};ko.dependentObservable.fn=realKoDependentObservable.fn;ko.computed=ko.dependentObservable;var result=callback();ko.dependentObservable=localDO;ko.computed=ko.dependentObservable;return result}function updateViewModel(mappedRootObject,
rootObject,options,parentName,parent,parentPropertyName,mappedParent){var isArray=exports.getType(ko.utils.unwrapObservable(rootObject))==="array";parentPropertyName=parentPropertyName||"";if(exports.isMapped(mappedRootObject)){var previousMapping=ko.utils.unwrapObservable(mappedRootObject)[mappingProperty];options=merge(previousMapping,options)}var callbackParams={data:rootObject,parent:mappedParent||parent};var hasCreateCallback=function(){return options[parentName]&&options[parentName].create instanceof
Function};var createCallback=function(data){return withProxyDependentObservable(dependentObservables,function(){if(ko.utils.unwrapObservable(parent)instanceof Array)return options[parentName].create({data:data||callbackParams.data,parent:callbackParams.parent,skip:emptyReturn});else return options[parentName].create({data:data||callbackParams.data,parent:callbackParams.parent})})};var hasUpdateCallback=function(){return options[parentName]&&options[parentName].update instanceof Function};var updateCallback=
function(obj,data){var params={data:data||callbackParams.data,parent:callbackParams.parent,target:ko.utils.unwrapObservable(obj)};if(ko.isWriteableObservable(obj))params.observable=obj;return options[parentName].update(params)};var alreadyMapped=visitedObjects.get(rootObject);if(alreadyMapped)return alreadyMapped;parentName=parentName||"";if(!isArray)if(!canHaveProperties(rootObject))switch(exports.getType(rootObject)){case "function":if(hasUpdateCallback())if(ko.isWriteableObservable(rootObject)){rootObject(updateCallback(rootObject));
mappedRootObject=rootObject}else mappedRootObject=updateCallback(rootObject);else mappedRootObject=rootObject;break;default:if(ko.isWriteableObservable(mappedRootObject))if(hasUpdateCallback()){var valueToWrite=updateCallback(mappedRootObject);mappedRootObject(valueToWrite);return valueToWrite}else{var valueToWrite=ko.utils.unwrapObservable(rootObject);mappedRootObject(valueToWrite);return valueToWrite}else{var hasCreateOrUpdateCallback=hasCreateCallback()||hasUpdateCallback();if(hasCreateCallback())mappedRootObject=
createCallback();else mappedRootObject=ko.observable(ko.utils.unwrapObservable(rootObject));if(hasUpdateCallback())mappedRootObject(updateCallback(mappedRootObject));if(hasCreateOrUpdateCallback)return mappedRootObject}}else{mappedRootObject=ko.utils.unwrapObservable(mappedRootObject);if(!mappedRootObject)if(hasCreateCallback()){var result=createCallback();if(hasUpdateCallback())result=updateCallback(result);return result}else{if(hasUpdateCallback())return updateCallback(result);mappedRootObject=
{}}if(hasUpdateCallback())mappedRootObject=updateCallback(mappedRootObject);visitedObjects.save(rootObject,mappedRootObject);if(hasUpdateCallback())return mappedRootObject;visitPropertiesOrArrayEntries(rootObject,function(indexer){var fullPropertyName=parentPropertyName.length?parentPropertyName+"."+indexer:indexer;if(ko.utils.arrayIndexOf(options.ignore,fullPropertyName)!=-1)return;if(ko.utils.arrayIndexOf(options.copy,fullPropertyName)!=-1){mappedRootObject[indexer]=rootObject[indexer];return}if(typeof rootObject[indexer]!=
"object"&&typeof rootObject[indexer]!="array"&&options.observe.length>0&&ko.utils.arrayIndexOf(options.observe,fullPropertyName)==-1){mappedRootObject[indexer]=rootObject[indexer];options.copiedProperties[fullPropertyName]=true;return}var prevMappedProperty=visitedObjects.get(rootObject[indexer]);var retval=updateViewModel(mappedRootObject[indexer],rootObject[indexer],options,indexer,mappedRootObject,fullPropertyName,mappedRootObject);var value=prevMappedProperty||retval;if(options.observe.length>
0&&ko.utils.arrayIndexOf(options.observe,fullPropertyName)==-1){mappedRootObject[indexer]=value();options.copiedProperties[fullPropertyName]=true;return}if(ko.isWriteableObservable(mappedRootObject[indexer])){value=ko.utils.unwrapObservable(value);if(mappedRootObject[indexer]()!==value)mappedRootObject[indexer](value)}else{value=mappedRootObject[indexer]===undefined?value:ko.utils.unwrapObservable(value);mappedRootObject[indexer]=value}options.mappedProperties[fullPropertyName]=true})}else{var changes=
[];var hasKeyCallback=false;var keyCallback=function(x){return x};if(options[parentName]&&options[parentName].key){keyCallback=options[parentName].key;hasKeyCallback=true}if(!ko.isObservable(mappedRootObject)){mappedRootObject=ko.observableArray([]);mappedRootObject.mappedRemove=function(valueOrPredicate){var predicate=typeof valueOrPredicate=="function"?valueOrPredicate:function(value){return value===keyCallback(valueOrPredicate)};return mappedRootObject.remove(function(item){return predicate(keyCallback(item))})};
mappedRootObject.mappedRemoveAll=function(arrayOfValues){var arrayOfKeys=filterArrayByKey(arrayOfValues,keyCallback);return mappedRootObject.remove(function(item){return ko.utils.arrayIndexOf(arrayOfKeys,keyCallback(item))!=-1})};mappedRootObject.mappedDestroy=function(valueOrPredicate){var predicate=typeof valueOrPredicate=="function"?valueOrPredicate:function(value){return value===keyCallback(valueOrPredicate)};return mappedRootObject.destroy(function(item){return predicate(keyCallback(item))})};
mappedRootObject.mappedDestroyAll=function(arrayOfValues){var arrayOfKeys=filterArrayByKey(arrayOfValues,keyCallback);return mappedRootObject.destroy(function(item){return ko.utils.arrayIndexOf(arrayOfKeys,keyCallback(item))!=-1})};mappedRootObject.mappedIndexOf=function(item){var keys=filterArrayByKey(mappedRootObject(),keyCallback);var key=keyCallback(item);return ko.utils.arrayIndexOf(keys,key)};mappedRootObject.mappedGet=function(item){return mappedRootObject()[mappedRootObject.mappedIndexOf(item)]};
mappedRootObject.mappedCreate=function(value){if(mappedRootObject.mappedIndexOf(value)!==-1)throw new Error("There already is an object with the key that you specified.");var item=hasCreateCallback()?createCallback(value):value;if(hasUpdateCallback()){var newValue=updateCallback(item,value);if(ko.isWriteableObservable(item))item(newValue);else item=newValue}mappedRootObject.push(item);return item}}var currentArrayKeys=filterArrayByKey(ko.utils.unwrapObservable(mappedRootObject),keyCallback).sort();
var newArrayKeys=filterArrayByKey(rootObject,keyCallback);if(hasKeyCallback)newArrayKeys.sort();var editScript=ko.utils.compareArrays(currentArrayKeys,newArrayKeys);var ignoreIndexOf={};var i,j;var unwrappedRootObject=ko.utils.unwrapObservable(rootObject);var itemsByKey={};var optimizedKeys=true;for(i=0,j=unwrappedRootObject.length;i<j;i++){var key=keyCallback(unwrappedRootObject[i]);if(key===undefined||key instanceof Object){optimizedKeys=false;break}itemsByKey[key]=unwrappedRootObject[i]}var newContents=
[];var passedOver=0;for(i=0,j=editScript.length;i<j;i++){var key=editScript[i];var mappedItem;var fullPropertyName=parentPropertyName+"["+i+"]";switch(key.status){case "added":var item=optimizedKeys?itemsByKey[key.value]:getItemByKey(ko.utils.unwrapObservable(rootObject),key.value,keyCallback);mappedItem=updateViewModel(undefined,item,options,parentName,mappedRootObject,fullPropertyName,parent);if(!hasCreateCallback())mappedItem=ko.utils.unwrapObservable(mappedItem);var index=ignorableIndexOf(ko.utils.unwrapObservable(rootObject),
item,ignoreIndexOf);if(mappedItem===emptyReturn)passedOver++;else newContents[index-passedOver]=mappedItem;ignoreIndexOf[index]=true;break;case "retained":var item=optimizedKeys?itemsByKey[key.value]:getItemByKey(ko.utils.unwrapObservable(rootObject),key.value,keyCallback);mappedItem=getItemByKey(mappedRootObject,key.value,keyCallback);updateViewModel(mappedItem,item,options,parentName,mappedRootObject,fullPropertyName,parent);var index=ignorableIndexOf(ko.utils.unwrapObservable(rootObject),item,
ignoreIndexOf);newContents[index]=mappedItem;ignoreIndexOf[index]=true;break;case "deleted":mappedItem=getItemByKey(mappedRootObject,key.value,keyCallback);break}changes.push({event:key.status,item:mappedItem})}mappedRootObject(newContents);if(options[parentName]&&options[parentName].arrayChanged)ko.utils.arrayForEach(changes,function(change){options[parentName].arrayChanged(change.event,change.item)})}return mappedRootObject}function ignorableIndexOf(array,item,ignoreIndices){for(var i=0,j=array.length;i<
j;i++){if(ignoreIndices[i]===true)continue;if(array[i]===item)return i}return null}function mapKey(item,callback){var mappedItem;if(callback)mappedItem=callback(item);if(exports.getType(mappedItem)==="undefined")mappedItem=item;return ko.utils.unwrapObservable(mappedItem)}function getItemByKey(array,key,callback){array=ko.utils.unwrapObservable(array);for(var i=0,j=array.length;i<j;i++){var item=array[i];if(mapKey(item,callback)===key)return item}throw new Error("When calling ko.update*, the key '"+
key+"' was not found!");}function filterArrayByKey(array,callback){return ko.utils.arrayMap(ko.utils.unwrapObservable(array),function(item){if(callback)return mapKey(item,callback);else return item})}function visitPropertiesOrArrayEntries(rootObject,visitorCallback){if(exports.getType(rootObject)==="array")for(var i=0;i<rootObject.length;i++)visitorCallback(i);else for(var propertyName in rootObject)visitorCallback(propertyName)}function canHaveProperties(object){var type=exports.getType(object);
return(type==="object"||type==="array")&&object!==null}function getPropertyName(parentName,parent,indexer){var propertyName=parentName||"";if(exports.getType(parent)==="array"){if(parentName)propertyName+="["+indexer+"]"}else{if(parentName)propertyName+=".";propertyName+=indexer}return propertyName}exports.visitModel=function(rootObject,callback,options){options=options||{};options.visitedObjects=options.visitedObjects||new objectLookup;var mappedRootObject;var unwrappedRootObject=ko.utils.unwrapObservable(rootObject);
if(!canHaveProperties(unwrappedRootObject))return callback(rootObject,options.parentName);else{options=fillOptions(options,unwrappedRootObject[mappingProperty]);callback(rootObject,options.parentName);mappedRootObject=exports.getType(unwrappedRootObject)==="array"?[]:{}}options.visitedObjects.save(rootObject,mappedRootObject);var parentName=options.parentName;visitPropertiesOrArrayEntries(unwrappedRootObject,function(indexer){if(options.ignore&&ko.utils.arrayIndexOf(options.ignore,indexer)!=-1)return;
var propertyValue=unwrappedRootObject[indexer];options.parentName=getPropertyName(parentName,unwrappedRootObject,indexer);if(ko.utils.arrayIndexOf(options.copy,indexer)===-1)if(ko.utils.arrayIndexOf(options.include,indexer)===-1)if(unwrappedRootObject[mappingProperty]&&unwrappedRootObject[mappingProperty].mappedProperties&&!unwrappedRootObject[mappingProperty].mappedProperties[indexer]&&unwrappedRootObject[mappingProperty].copiedProperties&&!unwrappedRootObject[mappingProperty].copiedProperties[indexer]&&
!(exports.getType(unwrappedRootObject)==="array"))return;var outputProperty;switch(exports.getType(ko.utils.unwrapObservable(propertyValue))){case "object":case "array":case "undefined":var previouslyMappedValue=options.visitedObjects.get(propertyValue);mappedRootObject[indexer]=exports.getType(previouslyMappedValue)!=="undefined"?previouslyMappedValue:exports.visitModel(propertyValue,callback,options);break;default:mappedRootObject[indexer]=callback(propertyValue,options.parentName)}});return mappedRootObject};
function simpleObjectLookup(){var keys=[];var values=[];this.save=function(key,value){var existingIndex=ko.utils.arrayIndexOf(keys,key);if(existingIndex>=0)values[existingIndex]=value;else{keys.push(key);values.push(value)}};this.get=function(key){var existingIndex=ko.utils.arrayIndexOf(keys,key);var value=existingIndex>=0?values[existingIndex]:undefined;return value}}function objectLookup(){var buckets={};var findBucket=function(key){var bucketKey;try{bucketKey=key}catch(e){bucketKey="$$$"}var bucket=
buckets[bucketKey];if(bucket===undefined){bucket=new simpleObjectLookup;buckets[bucketKey]=bucket}return bucket};this.save=function(key,value){findBucket(key).save(key,value)};this.get=function(key){return findBucket(key).get(key)}}});ko.numericObservable=function(initialValue){var _actual=ko.observable(initialValue);var result=ko.dependentObservable({read:function(){return _actual()},write:function(newValue){var parsedValue=parseFloat(newValue);_actual(isNaN(parsedValue)?newValue:parsedValue)}});return result};
ko.bindingHandlers.imgAssets={init:function(element,valueAccessor){var value=ko.unwrap(valueAccessor());var localizedSuffix="";if(window.Configuration.localeToGraphicSuffixMap&&window.Configuration.localeToGraphicSuffixMap[window.Configuration.locale])localizedSuffix=window.Configuration.localeToGraphicSuffixMap[window.Configuration.locale];var maybeTransformToLocalizedAssetName=value.replace("_locale",localizedSuffix);$(element).attr("src",CB.resolve(maybeTransformToLocalizedAssetName.toString()))}};
ko.bindingHandlers.popover={init:function(element,valueAccessor){var value=ko.unwrap(valueAccessor());$(element).popover({placement:value.placement,trigger:"manual",title:value.title,content:value.content,html:value.html,container:"body"}).mouseenter(function(){var _this=this;$(_this).addClass("hover");setTimeout(function(){if($(_this).hasClass("hover")){$(_this).popover("show");$(".popover").mouseleave(function(){$(_this).popover("hide")})}},300)}).mouseleave(function(){var _this=this;$(_this).removeClass("hover");
setTimeout(function(){if(!$(".popover:hover").length)$(_this).popover("hide")},300)})},update:function(element,valueAccessor){$(element).data("popover").options.content=valueAccessor()["content"]}};
ko.bindingHandlers.select2={init:function(element,valueAccessor,allBindings){var select2options=valueAccessor();if(allBindings.has("dataSelected")&&allBindings.has("optionsEnum")){var dataSelected=allBindings.get("dataSelected");var optionsEnum=allBindings.get("optionsEnum");select2options["initSelection"]=function(element,callback){var data=[];$(element.val().split(",")).each(function(){if(optionsEnum[this])data.push(optionsEnum[this])});callback(data)};var processQuery=function(element,options){var results=
[];if(options.matcher(options.term,element.text))results.push(element);else if(element.children)for(var childCount=0;childCount<element.children.length;childCount++)results=results.concat(processQuery(element.children[childCount],options));return results};select2options["query"]=function(options){var results=[];vals=select2options.data;for(var elementCount=0;elementCount<vals.length;elementCount++)results=results.concat(processQuery(vals[elementCount],options));var result={results:results,more:false};
options.callback(result)};dataSelected.subscribe(function(newValue){$(element).select2("val",newValue)});$(element).change(function(){var selectedValuesInUI=$(this).val();if(selectedValuesInUI)dataSelected(selectedValuesInUI.split(","));else dataSelected([])})}if(allBindings.has("value")){var value=allBindings.get("value");value.subscribe(function(newValue){$(element).select2("val",newValue)})}$(element).select2(select2options);ko.utils.domNodeDisposal.addDisposeCallback(element,function(){$(element).select2("destroy")})},
update:function(element){$(element).trigger("change")}};function ChangeTracker(objectToTrack,hashFunction){hashFunction=hashFunction||ko.mapping.toJSON;var lastCleanState=ko.observable(hashFunction(objectToTrack));var result={somethingHasChanged:ko.dependentObservable(function(){return hashFunction(objectToTrack)!=lastCleanState()}),markCurrentStateAsClean:function(){lastCleanState(hashFunction(objectToTrack))}};return function(){return result}};(function($){$.widget("ui.combobox",{_create:function(){var self=this;var select=this.element.hide();var input=this.$input=$("<input>");this.element.addClass("ui-shadowed-select");input.insertAfter(select).autocomplete({source:function(request,response){var matcher=new RegExp(request.term,"i");response(select.children("option").map(function(){var text=$(this).text();if(!request.term||matcher.test(text))return{id:$(this).val(),label:"<strong>"+Utility.escape(text.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+
request.term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"$1"))+"</strong>",value:text}}))},delay:0,select:function(e,ui){if(!ui.item){$(this).val("");return false}$(this).focus();select.val(ui.item.id);self._trigger("selected",null,{item:select.find("[value='"+ui.item.id+"']")});self._value=Utility.escape($(this).val());self.element.trigger("change")},minLength:0,change:function(e,ui){self._value=Utility.escape($(this).val());self.element.trigger("change")}}).addClass("ui-widget ui-widget-content ui-corner-left");
var initialValue=$("option:selected",select).text();if(initialValue){input.val(initialValue);self._value=Utility.escape(initialValue)}var button=this.$button=$("<button>&nbsp;</button>").insertAfter(input).button({icons:{primary:"ui-icon-triangle-1-s"},text:false}).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon").css("left","-1px").click(function(){if(this.closeAutocomplete())return;input.autocomplete("search","");input.focus()}.bind(this));this.redraw()},closeAutocomplete:function(){var input=
this.$input;if(input&&input.autocomplete("widget").is(":visible")){input.autocomplete("close");return true}return false},redraw:function(){this.$button.height(this.$input.outerHeight()||18).position({my:"left center",at:"right center",of:this.$input,offset:"-1 0"});if(Math.abs(this.$input.position().left+this.$input.outerWidth()-this.$button.position().left)-1>1)this.$button.css("left","-1px")},editable:function(editable){if(!editable)if($.browser.webkit)this.$input.disableSelection().css("cursor",
"default");else this.$input.prop("disabled",true);else if($.browser.webkit)this.$input.enableSelection().css("cursor","");else this.$input.prop("disabled",false)},disable:function(flag){if(flag){if($.browser.webkit)this.$input.disableSelection().css("cursor","default");this.$input.prop("disabled",true);this.element.prop("disabled",true);this.$button.get(0).disabled=true;this.closeAutocomplete()}else{if($.browser.webkit)this.$input.enableSelection().css("cursor","");this.$input.prop("disabled",false);
this.element.prop("disabled",false);this.$button.get(0).disabled=false}},value:function(){return this.$input.val()},destroy:function(){this.$input.remove();this.$button.remove();$.Widget.prototype.destroy.call(this);return this},setValue:function(value){var select=this.element;var item=select.find("option[value='"+value+"']");if(item){var text=item.text();select.val(Utility.escape(item.val()));this.$input.val(text);this._value=Utility.escape(text);select.trigger("change")}}})})(jQuery);(function($){if(typeof $.fn.each2=="undefined")$.extend($.fn,{each2:function(c){var j=$([0]),i=-1,l=this.length;while(++i<l&&(j.context=j[0]=this[i])&&c.call(j[0],i,j)!==false);return this}})})(jQuery);
(function($,undefined){if(window.Select2!==undefined)return;var KEY,AbstractSelect2,SingleSelect2,MultiSelect2,nextUid,sizer,lastMousePosition={x:0,y:0},$document,scrollBarDimensions,KEY={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(k){k=k.which?k.which:k;switch(k){case KEY.LEFT:case KEY.RIGHT:case KEY.UP:case KEY.DOWN:return true}return false},isControl:function(e){var k=e.which;
switch(k){case KEY.SHIFT:case KEY.CTRL:case KEY.ALT:return true}if(e.metaKey)return true;return false},isFunctionKey:function(k){k=k.which?k.which:k;return k>=112&&k<=123}},MEASURE_SCROLLBAR_TEMPLATE="<div class='select2-measure-scrollbar'></div>",DIACRITICS={"\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\u00c4":"A",
"\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u00c7":"C",
"\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E","\u011a":"E",
"\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H",
"\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K",
"\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N",
"\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O",
"\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R",
"\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U","\u0168":"U",
"\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W",
"\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a",
"\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av",
"\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e",
"\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g",
"\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i",
"\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l",
"\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o",
"\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p",
"\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\u00df":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s",
"\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u",
"\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y",
"\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9",
"\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"};$document=$(document);nextUid=function(){var counter=1;return function(){return counter++}}();function reinsertElement(element){var placeholder=$(document.createTextNode(""));element.before(placeholder);placeholder.before(element);placeholder.remove()}function stripDiacritics(str){function match(a){return DIACRITICS[a]||a}return str.replace(/[^\u0000-\u007E]/g,
match)}function indexOf(value,array){var i=0,l=array.length;for(;i<l;i=i+1)if(equal(value,array[i]))return i;return-1}function measureScrollbar(){var $template=$(MEASURE_SCROLLBAR_TEMPLATE);$template.appendTo("body");var dim={width:$template.width()-$template[0].clientWidth,height:$template.height()-$template[0].clientHeight};$template.remove();return dim}function equal(a,b){if(a===b)return true;if(a===undefined||b===undefined)return false;if(a===null||b===null)return false;if(a.constructor===String)return a+
""===b+"";if(b.constructor===String)return b+""===a+"";return false}function splitVal(string,separator){var val,i,l;if(string===null||string.length<1)return[];val=string.split(separator);for(i=0,l=val.length;i<l;i=i+1)val[i]=$.trim(val[i]);return val}function getSideBorderPadding(element){return element.outerWidth(false)-element.width()}function installKeyUpChangeEvent(element){var key="keyup-change-value";element.on("keydown",function(){if($.data(element,key)===undefined)$.data(element,key,element.val())});
element.on("keyup",function(){var val=$.data(element,key);if(val!==undefined&&element.val()!==val){$.removeData(element,key);element.trigger("keyup-change")}})}function installFilteredMouseMove(element){element.on("mousemove",function(e){var lastpos=lastMousePosition;if(lastpos===undefined||lastpos.x!==e.pageX||lastpos.y!==e.pageY)$(e.target).trigger("mousemove-filtered",e)})}function debounce(quietMillis,fn,ctx){ctx=ctx||undefined;var timeout;return function(){var args=arguments;window.clearTimeout(timeout);
timeout=window.setTimeout(function(){fn.apply(ctx,args)},quietMillis)}}function installDebouncedScroll(threshold,element){var notify=debounce(threshold,function(e){element.trigger("scroll-debounced",e)});element.on("scroll",function(e){if(indexOf(e.target,element.get())>=0)notify(e)})}function focus($el){if($el[0]===document.activeElement)return;window.setTimeout(function(){var el=$el[0],pos=$el.val().length,range;$el.focus();var isVisible=el.offsetWidth>0||el.offsetHeight>0;if(isVisible&&el===document.activeElement)if(el.setSelectionRange)el.setSelectionRange(pos,
pos);else if(el.createTextRange){range=el.createTextRange();range.collapse(false);range.select()}},0)}function getCursorInfo(el){el=$(el)[0];var offset=0;var length=0;if("selectionStart"in el){offset=el.selectionStart;length=el.selectionEnd-offset}else if("selection"in document){el.focus();var sel=document.selection.createRange();length=document.selection.createRange().text.length;sel.moveStart("character",-el.value.length);offset=sel.text.length-length}return{offset:offset,length:length}}function killEvent(event){event.preventDefault();
event.stopPropagation()}function killEventImmediately(event){event.preventDefault();event.stopImmediatePropagation()}function measureTextWidth(e){if(!sizer){var style=e[0].currentStyle||window.getComputedStyle(e[0],null);sizer=$(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:style.fontSize,fontFamily:style.fontFamily,fontStyle:style.fontStyle,fontWeight:style.fontWeight,letterSpacing:style.letterSpacing,textTransform:style.textTransform,
whiteSpace:"nowrap"});sizer.attr("class","select2-sizer");$("body").append(sizer)}sizer.text(e.val());return sizer.width()}function syncCssClasses(dest,src,adapter){var classes,replacements=[],adapted;classes=$.trim(dest.attr("class"));if(classes){classes=""+classes;$(classes.split(/\s+/)).each2(function(){if(this.indexOf("select2-")===0)replacements.push(this)})}classes=$.trim(src.attr("class"));if(classes){classes=""+classes;$(classes.split(/\s+/)).each2(function(){if(this.indexOf("select2-")!==
0){adapted=adapter(this);if(adapted)replacements.push(adapted)}})}dest.attr("class",replacements.join(" "))}function markMatch(text,term,markup,escapeMarkup){var match=stripDiacritics(text.toUpperCase()).indexOf(stripDiacritics(term.toUpperCase())),tl=term.length;if(match<0){markup.push(escapeMarkup(text));return}markup.push(escapeMarkup(text.substring(0,match)));markup.push("<span class='select2-match'>");markup.push(escapeMarkup(text.substring(match,match+tl)));markup.push("</span>");markup.push(escapeMarkup(text.substring(match+
tl,text.length)))}function defaultEscapeMarkup(markup){var replace_map={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(markup).replace(/[&<>"'\/\\]/g,function(match){return replace_map[match]})}function ajax(options){var timeout,handler=null,quietMillis=options.quietMillis||100,ajaxUrl=options.url,self=this;return function(query){window.clearTimeout(timeout);timeout=window.setTimeout(function(){var data=options.data,url=ajaxUrl,transport=options.transport||
$.fn.select2.ajaxDefaults.transport,deprecated={type:options.type||"GET",cache:options.cache||false,jsonpCallback:options.jsonpCallback||undefined,dataType:options.dataType||"json"},params=$.extend({},$.fn.select2.ajaxDefaults.params,deprecated);data=data?data.call(self,query.term,query.page,query.context):null;url=typeof url==="function"?url.call(self,query.term,query.page,query.context):url;if(handler&&typeof handler.abort==="function")handler.abort();if(options.params)if($.isFunction(options.params))$.extend(params,
options.params.call(self));else $.extend(params,options.params);$.extend(params,{url:url,dataType:options.dataType,data:data,success:function(data){var results=options.results(data,query.page,query);query.callback(results)},error:function(jqXHR,textStatus,errorThrown){var results={hasError:true,jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown};query.callback(results)}});handler=transport.call(self,params)},quietMillis)}}function local(options){var data=options,dataText,tmp,text=function(item){return""+
item.text};if($.isArray(data)){tmp=data;data={results:tmp}}if($.isFunction(data)===false){tmp=data;data=function(){return tmp}}var dataItem=data();if(dataItem.text){text=dataItem.text;if(!$.isFunction(text)){dataText=dataItem.text;text=function(item){return item[dataText]}}}return function(query){var t=query.term,filtered={results:[]},process;if(t===""){query.callback(data());return}process=function(datum,collection){var group,attr;datum=datum[0];if(datum.children){group={};for(attr in datum)if(datum.hasOwnProperty(attr))group[attr]=
datum[attr];group.children=[];$(datum.children).each2(function(i,childDatum){process(childDatum,group.children)});if(group.children.length||query.matcher(t,text(group),datum))collection.push(group)}else if(query.matcher(t,text(datum),datum))collection.push(datum)};$(data().results).each2(function(i,datum){process(datum,filtered.results)});query.callback(filtered)}}function tags(data){var isFunc=$.isFunction(data);return function(query){var t=query.term,filtered={results:[]};var result=isFunc?data(query):
data;if($.isArray(result)){$(result).each(function(){var isObject=this.text!==undefined,text=isObject?this.text:this;if(t===""||query.matcher(t,text))filtered.results.push(isObject?this:{id:this,text:this})});query.callback(filtered)}}}function checkFormatter(formatter,formatterName){if($.isFunction(formatter))return true;if(!formatter)return false;if(typeof formatter==="string")return true;throw new Error(formatterName+" must be a string, function, or falsy value");}function evaluate(val,context){if($.isFunction(val)){var args=
Array.prototype.slice.call(arguments,2);return val.apply(context,args)}return val}function countResults(results){var count=0;$.each(results,function(i,item){if(item.children)count+=countResults(item.children);else count++});return count}function defaultTokenizer(input,selection,selectCallback,opts){var original=input,dupe=false,token,index,i,l,separator;if(!opts.createSearchChoice||!opts.tokenSeparators||opts.tokenSeparators.length<1)return undefined;while(true){index=-1;for(i=0,l=opts.tokenSeparators.length;i<
l;i++){separator=opts.tokenSeparators[i];index=input.indexOf(separator);if(index>=0)break}if(index<0)break;token=input.substring(0,index);input=input.substring(index+separator.length);if(token.length>0){token=opts.createSearchChoice.call(this,token,selection);if(token!==undefined&&token!==null&&opts.id(token)!==undefined&&opts.id(token)!==null){dupe=false;for(i=0,l=selection.length;i<l;i++)if(equal(opts.id(token),opts.id(selection[i]))){dupe=true;break}if(!dupe)selectCallback(token)}}}if(original!==
input)return input}function cleanupJQueryElements(){var self=this;$.each(arguments,function(i,element){self[element].remove();self[element]=null})}function clazz(SuperClass,methods){var constructor=function(){};constructor.prototype=new SuperClass;constructor.prototype.constructor=constructor;constructor.prototype.parent=SuperClass.prototype;constructor.prototype=$.extend(constructor.prototype,methods);return constructor}AbstractSelect2=clazz(Object,{bind:function(func){var self=this;return function(){func.apply(self,
arguments)}},init:function(opts){var results,search,resultsSelector=".select2-results";this.opts=opts=this.prepareOpts(opts);this.id=opts.id;if(opts.element.data("select2")!==undefined&&opts.element.data("select2")!==null)opts.element.data("select2").destroy();this.container=this.createContainer();this.liveRegion=$("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body);this.containerId="s2id_"+(opts.element.attr("id")||"autogen"+nextUid());this.containerEventName=
this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.container.attr("title",opts.element.attr("title"));this.body=$("body");syncCssClasses(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.attr("style",opts.element.attr("style"));this.container.css(evaluate(opts.containerCss,this.opts.element));this.container.addClass(evaluate(opts.containerCssClass,this.opts.element));this.elementTabIndex=
this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",killEvent);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");syncCssClasses(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(evaluate(opts.dropdownCssClass,this.opts.element));this.dropdown.data("select2",this);this.dropdown.on("click",killEvent);this.results=results=this.container.find(resultsSelector);
this.search=search=this.container.find("input.select2-input");this.queryCount=0;this.resultsPage=0;this.context=null;this.initContainer();this.container.on("click",killEvent);installFilteredMouseMove(this.results);this.dropdown.on("mousemove-filtered",resultsSelector,this.bind(this.highlightUnderEvent));this.dropdown.on("touchstart touchmove touchend",resultsSelector,this.bind(function(event){this._touchEvent=true;this.highlightUnderEvent(event)}));this.dropdown.on("touchmove",resultsSelector,this.bind(this.touchMoved));
this.dropdown.on("touchstart touchend",resultsSelector,this.bind(this.clearTouchMoved));this.dropdown.on("click",this.bind(function(event){if(this._touchEvent){this._touchEvent=false;this.selectHighlighted()}}));installDebouncedScroll(80,this.results);this.dropdown.on("scroll-debounced",resultsSelector,this.bind(this.loadMoreIfNeeded));$(this.container).on("change",".select2-input",function(e){e.stopPropagation()});$(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()});if($.fn.mousewheel)results.mousewheel(function(e,
delta,deltaX,deltaY){var top=results.scrollTop();if(deltaY>0&&top-deltaY<=0){results.scrollTop(0);killEvent(e)}else if(deltaY<0&&results.get(0).scrollHeight-results.scrollTop()+deltaY<=results.height()){results.scrollTop(results.get(0).scrollHeight-results.height());killEvent(e)}});installKeyUpChangeEvent(search);search.on("keyup-change input paste",this.bind(this.updateResults));search.on("focus",function(){search.addClass("select2-focused")});search.on("blur",function(){search.removeClass("select2-focused")});
this.dropdown.on("mouseup",resultsSelector,this.bind(function(e){if($(e.target).closest(".select2-result-selectable").length>0){this.highlightUnderEvent(e);this.selectHighlighted(e)}}));this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()});this.nextSearchTerm=undefined;if($.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource()}if(opts.maximumInputLength!==null)this.search.attr("maxlength",opts.maximumInputLength);var disabled=
opts.element.prop("disabled");if(disabled===undefined)disabled=false;this.enable(!disabled);var readonly=opts.element.prop("readonly");if(readonly===undefined)readonly=false;this.readonly(readonly);scrollBarDimensions=scrollBarDimensions||measureScrollbar();this.autofocus=opts.element.prop("autofocus");opts.element.prop("autofocus",false);if(this.autofocus)this.focus();this.search.attr("placeholder",opts.searchInputPlaceholder)},destroy:function(){var element=this.opts.element,select2=element.data("select2"),
self=this;this.close();if(element.length&&element[0].detachEvent)element.each(function(){this.detachEvent("onpropertychange",self._sync)});if(this.propertyObserver){this.propertyObserver.disconnect();this.propertyObserver=null}this._sync=null;if(select2!==undefined){select2.container.remove();select2.liveRegion.remove();select2.dropdown.remove();element.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||false);if(this.elementTabIndex)element.attr({tabindex:this.elementTabIndex});
else element.removeAttr("tabindex");element.show()}cleanupJQueryElements.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(element){if(element.is("option"))return{id:element.prop("value"),text:element.text(),element:element.get(),css:element.attr("class"),disabled:element.prop("disabled"),locked:equal(element.attr("locked"),"locked")||equal(element.data("locked"),true)};else if(element.is("optgroup"))return{text:element.attr("label"),children:[],element:element.get(),
css:element.attr("class")}},prepareOpts:function(opts){var element,select,idKey,ajaxUrl,self=this;element=opts.element;if(element.get(0).tagName.toLowerCase()==="select")this.select=select=opts.element;if(select)$.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in opts)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});opts=$.extend({},{populateResults:function(container,results,query){var populate,
id=this.opts.id,liveRegion=this.liveRegion;populate=function(results,container,depth){var i,l,result,selectable,disabled,compound,node,label,innerContainer,formatted;results=opts.sortResults(results,container,query);var nodes=[];for(i=0,l=results.length;i<l;i=i+1){result=results[i];disabled=result.disabled===true;selectable=!disabled&&id(result)!==undefined;compound=result.children&&result.children.length>0;node=$("<li></li>");node.addClass("select2-results-dept-"+depth);node.addClass("select2-result");
node.addClass(selectable?"select2-result-selectable":"select2-result-unselectable");if(disabled)node.addClass("select2-disabled");if(compound)node.addClass("select2-result-with-children");node.addClass(self.opts.formatResultCssClass(result));node.attr("role","presentation");label=$(document.createElement("div"));label.addClass("select2-result-label");label.attr("id","select2-result-label-"+nextUid());label.attr("role","option");formatted=opts.formatResult(result,label,query,self.opts.escapeMarkup);
if(formatted!==undefined){label.html(formatted);node.append(label)}if(compound){innerContainer=$("<ul></ul>");innerContainer.addClass("select2-result-sub");populate(result.children,innerContainer,depth+1);node.append(innerContainer)}node.data("select2-data",result);nodes.push(node[0])}container.append(nodes);liveRegion.text(opts.formatMatches(results.length))};populate(results,container,0)}},$.fn.select2.defaults,opts);if(typeof opts.id!=="function"){idKey=opts.id;opts.id=function(e){return e[idKey]}}if($.isArray(opts.element.data("select2Tags"))){if("tags"in
opts)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+opts.element.attr("id");opts.tags=opts.element.data("select2Tags")}if(select){opts.query=this.bind(function(query){var data={results:[],more:false},term=query.term,children,placeholderOption,process;process=function(element,collection){var group;if(element.is("option")){if(query.matcher(term,element.text(),element))collection.push(self.optionToData(element))}else if(element.is("optgroup")){group=self.optionToData(element);
element.children().each2(function(i,elm){process(elm,group.children)});if(group.children.length>0)collection.push(group)}};children=element.children();if(this.getPlaceholder()!==undefined&&children.length>0){placeholderOption=this.getPlaceholderOption();if(placeholderOption)children=children.not(placeholderOption)}children.each2(function(i,elm){process(elm,data.results)});query.callback(data)});opts.id=function(e){return e.id}}else if(!("query"in opts))if("ajax"in opts){ajaxUrl=opts.element.data("ajax-url");
if(ajaxUrl&&ajaxUrl.length>0)opts.ajax.url=ajaxUrl;opts.query=ajax.call(opts.element,opts.ajax)}else if("data"in opts)opts.query=local(opts.data);else if("tags"in opts){opts.query=tags(opts.tags);if(opts.createSearchChoice===undefined)opts.createSearchChoice=function(term){return{id:$.trim(term),text:$.trim(term)}};if(opts.initSelection===undefined)opts.initSelection=function(element,callback){var data=[];$(splitVal(element.val(),opts.separator)).each(function(){var obj={id:this,text:this},tags=opts.tags;
if($.isFunction(tags))tags=tags();$(tags).each(function(){if(equal(this.id,obj.id)){obj=this;return false}});data.push(obj)});callback(data)}}if(typeof opts.query!=="function")throw"query function not defined for Select2 "+opts.element.attr("id");if(opts.createSearchChoicePosition==="top")opts.createSearchChoicePosition=function(list,item){list.unshift(item)};else if(opts.createSearchChoicePosition==="bottom")opts.createSearchChoicePosition=function(list,item){list.push(item)};else if(typeof opts.createSearchChoicePosition!==
"function")throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return opts},monitorSource:function(){var el=this.opts.element,observer,self=this;el.on("change.select2",this.bind(function(e){if(this.opts.element.data("select2-change-triggered")!==true)this.initSelection()}));this._sync=this.bind(function(){var disabled=el.prop("disabled");if(disabled===undefined)disabled=false;this.enable(!disabled);var readonly=el.prop("readonly");if(readonly===undefined)readonly=
false;this.readonly(readonly);syncCssClasses(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(evaluate(this.opts.containerCssClass,this.opts.element));syncCssClasses(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(evaluate(this.opts.dropdownCssClass,this.opts.element))});if(el.length&&el[0].attachEvent)el.each(function(){this.attachEvent("onpropertychange",self._sync)});observer=window.MutationObserver||window.WebKitMutationObserver||
window.MozMutationObserver;if(observer!==undefined){if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}this.propertyObserver=new observer(function(mutations){$.each(mutations,self._sync)});this.propertyObserver.observe(el.get(0),{attributes:true,subtree:false})}},triggerSelect:function(data){var evt=$.Event("select2-selecting",{val:this.id(data),object:data,choice:data});this.opts.element.trigger(evt);return!evt.isDefaultPrevented()},triggerChange:function(details){details=
details||{};details=$.extend({},details,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(details);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange)this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===true},enableInterface:function(){var enabled=this._enabled&&!this._readonly,disabled=!enabled;if(enabled===this.enabledInterface)return false;
this.container.toggleClass("select2-container-disabled",disabled);this.close();this.enabledInterface=enabled;return true},enable:function(enabled){if(enabled===undefined)enabled=true;if(this._enabled===enabled)return;this._enabled=enabled;this.opts.element.prop("disabled",!enabled);this.enableInterface()},disable:function(){this.enable(false)},readonly:function(enabled){if(enabled===undefined)enabled=false;if(this._readonly===enabled)return;this._readonly=enabled;this.opts.element.prop("readonly",
enabled);this.enableInterface()},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):false},positionDropdown:function(){var $dropdown=this.dropdown,offset=this.container.offset(),height=this.container.outerHeight(false),width=this.container.outerWidth(false),dropHeight=$dropdown.outerHeight(false),$window=$(window),windowWidth=$window.width(),windowHeight=$window.height(),viewPortRight=$window.scrollLeft()+windowWidth,viewportBottom=$window.scrollTop()+windowHeight,
dropTop=offset.top+height,dropLeft=offset.left,enoughRoomBelow=dropTop+dropHeight<=viewportBottom,enoughRoomAbove=offset.top-dropHeight>=$window.scrollTop(),dropWidth=$dropdown.outerWidth(false),enoughRoomOnRight=dropLeft+dropWidth<=viewPortRight,aboveNow=$dropdown.hasClass("select2-drop-above"),bodyOffset,above,changeDirection,css,resultsListNode;if(aboveNow){above=true;if(!enoughRoomAbove&&enoughRoomBelow){changeDirection=true;above=false}}else{above=false;if(!enoughRoomBelow&&enoughRoomAbove){changeDirection=
true;above=true}}if(changeDirection){$dropdown.hide();offset=this.container.offset();height=this.container.outerHeight(false);width=this.container.outerWidth(false);dropHeight=$dropdown.outerHeight(false);viewPortRight=$window.scrollLeft()+windowWidth;viewportBottom=$window.scrollTop()+windowHeight;dropTop=offset.top+height;dropLeft=offset.left;dropWidth=$dropdown.outerWidth(false);enoughRoomOnRight=dropLeft+dropWidth<=viewPortRight;$dropdown.show();this.focusSearch()}if(this.opts.dropdownAutoWidth){resultsListNode=
$(".select2-results",$dropdown)[0];$dropdown.addClass("select2-drop-auto-width");$dropdown.css("width","");dropWidth=$dropdown.outerWidth(false)+(resultsListNode.scrollHeight===resultsListNode.clientHeight?0:scrollBarDimensions.width);dropWidth>width?width=dropWidth:dropWidth=width;dropHeight=$dropdown.outerHeight(false);enoughRoomOnRight=dropLeft+dropWidth<=viewPortRight}else this.container.removeClass("select2-drop-auto-width");if(this.body.css("position")!=="static"){bodyOffset=this.body.offset();
dropTop-=bodyOffset.top;dropLeft-=bodyOffset.left}if(!enoughRoomOnRight)dropLeft=offset.left+this.container.outerWidth(false)-dropWidth;css={left:dropLeft,width:width};if(above){css.top=offset.top-dropHeight;css.bottom="auto";this.container.addClass("select2-drop-above");$dropdown.addClass("select2-drop-above")}else{css.top=dropTop;css.bottom="auto";this.container.removeClass("select2-drop-above");$dropdown.removeClass("select2-drop-above")}css=$.extend(css,evaluate(this.opts.dropdownCss,this.opts.element));
$dropdown.css(css)},shouldOpen:function(){var event;if(this.opened())return false;if(this._enabled===false||this._readonly===true)return false;event=$.Event("select2-opening");this.opts.element.trigger(event);return!event.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return false;this.opening();$document.on("mousemove.select2Event",function(e){lastMousePosition.x=
e.pageX;lastMousePosition.y=e.pageY});return true},opening:function(){var cid=this.containerEventName,scroll="scroll."+cid,resize="resize."+cid,orient="orientationchange."+cid,mask;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();if(this.dropdown[0]!==this.body.children().last()[0])this.dropdown.detach().appendTo(this.body);mask=$("#select2-drop-mask");if(mask.length==0){mask=$(document.createElement("div"));mask.attr("id",
"select2-drop-mask").attr("class","select2-drop-mask");mask.hide();mask.appendTo(this.body);mask.on("mousedown touchstart click",function(e){reinsertElement(mask);var dropdown=$("#select2-drop"),self;if(dropdown.length>0){self=dropdown.data("select2");if(self.opts.selectOnBlur)self.selectHighlighted({noFocus:true});self.close();e.preventDefault();e.stopPropagation()}})}if(this.dropdown.prev()[0]!==mask[0])this.dropdown.before(mask);$("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");
mask.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var that=this;this.container.parents().add(window).each(function(){$(this).on(resize+" "+scroll+" "+orient,function(e){if(that.opened())that.positionDropdown()})})},close:function(){if(!this.opened())return;var cid=this.containerEventName,scroll="scroll."+cid,resize="resize."+cid,orient="orientationchange."+cid;this.container.parents().add(window).each(function(){$(this).off(scroll).off(resize).off(orient)});
this.clearDropdownAlignmentPreference();$("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();$document.off("mousemove.select2Event");this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger($.Event("select2-close"))},externalSearch:function(term){this.open();this.search.val(term);this.updateResults(false)},clearSearch:function(){},
getMaximumSelectionSize:function(){return evaluate(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var results=this.results,children,index,child,hb,rb,y,more,topOffset;index=this.highlight();if(index<0)return;if(index==0){results.scrollTop(0);return}children=this.findHighlightableChoices().find(".select2-result-label");child=$(children[index]);topOffset=(child.offset()||{}).top||0;hb=topOffset+child.outerHeight(true);if(index===children.length-1){more=results.find("li.select2-more-results");
if(more.length>0)hb=more.offset().top+more.outerHeight(true)}rb=results.offset().top+results.outerHeight(true);if(hb>rb)results.scrollTop(results.scrollTop()+(hb-rb));y=topOffset-results.offset().top;if(y<0&&child.css("display")!="none")results.scrollTop(results.scrollTop()+y)},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(delta){var choices=this.findHighlightableChoices(),index=this.highlight();
while(index>-1&&index<choices.length){index+=delta;var choice=$(choices[index]);if(choice.hasClass("select2-result-selectable")&&!choice.hasClass("select2-disabled")&&!choice.hasClass("select2-selected")){this.highlight(index);break}}},highlight:function(index){var choices=this.findHighlightableChoices(),choice,data;if(arguments.length===0)return indexOf(choices.filter(".select2-highlighted")[0],choices.get());if(index>=choices.length)index=choices.length-1;if(index<0)index=0;this.removeHighlight();
choice=$(choices[index]);choice.addClass("select2-highlighted");this.search.attr("aria-activedescendant",choice.find(".select2-result-label").attr("id"));this.ensureHighlightVisible();this.liveRegion.text(choice.text());data=choice.data("select2-data");if(data)this.opts.element.trigger({type:"select2-highlight",val:this.id(data),choice:data})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=true},clearTouchMoved:function(){this._touchMoved=
false},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(event){var el=$(event.target).closest(".select2-result-selectable");if(el.length>0&&!el.is(".select2-highlighted")){var choices=this.findHighlightableChoices();this.highlight(choices.index(el))}else if(el.length==0)this.removeHighlight()},loadMoreIfNeeded:function(){var results=this.results,more=results.find("li.select2-more-results"),below,page=this.resultsPage+1,self=this,term=this.search.val(),
context=this.context;if(more.length===0)return;below=more.offset().top-results.offset().top-results.height();if(below<=this.opts.loadMorePadding){more.addClass("select2-active");this.opts.query({element:this.opts.element,term:term,page:page,context:context,matcher:this.opts.matcher,callback:this.bind(function(data){if(!self.opened())return;self.opts.populateResults.call(this,results,data.results,{term:term,page:page,context:context});self.postprocessResults(data,false,false);if(data.more===true){more.detach().appendTo(results).text(evaluate(self.opts.formatLoadMore,
self.opts.element,page+1));window.setTimeout(function(){self.loadMoreIfNeeded()},10)}else more.remove();self.positionDropdown();self.resultsPage=page;self.context=data.context;this.opts.element.trigger({type:"select2-loaded",items:data})})})}},tokenize:function(){},updateResults:function(initial){var search=this.search,results=this.results,opts=this.opts,data,self=this,input,term=search.val(),lastTerm=$.data(this.container,"select2-last-term"),queryNumber;if(initial!==true&&lastTerm&&equal(term,lastTerm))return;
$.data(this.container,"select2-last-term",term);if(initial!==true&&(this.showSearchInput===false||!this.opened()))return;function postRender(){search.removeClass("select2-active");self.positionDropdown();if(results.find(".select2-no-results,.select2-selection-limit,.select2-searching").length)self.liveRegion.text(results.text());else self.liveRegion.text(self.opts.formatMatches(results.find(".select2-result-selectable").length))}function render(html){results.html(html);postRender()}queryNumber=++this.queryCount;
var maxSelSize=this.getMaximumSelectionSize();if(maxSelSize>=1){data=this.data();if($.isArray(data)&&data.length>=maxSelSize&&checkFormatter(opts.formatSelectionTooBig,"formatSelectionTooBig")){render("<li class='select2-selection-limit'>"+evaluate(opts.formatSelectionTooBig,opts.element,maxSelSize)+"</li>");return}}if(search.val().length<opts.minimumInputLength){if(checkFormatter(opts.formatInputTooShort,"formatInputTooShort"))render("<li class='select2-no-results'>"+evaluate(opts.formatInputTooShort,
opts.element,search.val(),opts.minimumInputLength)+"</li>");else render("");if(initial&&this.showSearch)this.showSearch(true);return}if(opts.maximumInputLength&&search.val().length>opts.maximumInputLength){if(checkFormatter(opts.formatInputTooLong,"formatInputTooLong"))render("<li class='select2-no-results'>"+evaluate(opts.formatInputTooLong,opts.element,search.val(),opts.maximumInputLength)+"</li>");else render("");return}if(opts.formatSearching&&this.findHighlightableChoices().length===0)render("<li class='select2-searching'>"+
evaluate(opts.formatSearching,opts.element)+"</li>");search.addClass("select2-active");this.removeHighlight();input=this.tokenize();if(input!=undefined&&input!=null)search.val(input);this.resultsPage=1;opts.query({element:opts.element,term:search.val(),page:this.resultsPage,context:null,matcher:opts.matcher,callback:this.bind(function(data){var def;if(queryNumber!=this.queryCount)return;if(!this.opened()){this.search.removeClass("select2-active");return}if(data.hasError!==undefined&&checkFormatter(opts.formatAjaxError,
"formatAjaxError")){render("<li class='select2-ajax-error'>"+evaluate(opts.formatAjaxError,opts.element,data.jqXHR,data.textStatus,data.errorThrown)+"</li>");return}this.context=data.context===undefined?null:data.context;if(this.opts.createSearchChoice&&search.val()!==""){def=this.opts.createSearchChoice.call(self,search.val(),data.results);if(def!==undefined&&def!==null&&self.id(def)!==undefined&&self.id(def)!==null)if($(data.results).filter(function(){return equal(self.id(this),self.id(def))}).length===
0)this.opts.createSearchChoicePosition(data.results,def)}if(data.results.length===0&&checkFormatter(opts.formatNoMatches,"formatNoMatches")){render("<li class='select2-no-results'>"+evaluate(opts.formatNoMatches,opts.element,search.val())+"</li>");return}results.empty();self.opts.populateResults.call(this,results,data.results,{term:search.val(),page:this.resultsPage,context:null});if(data.more===true&&checkFormatter(opts.formatLoadMore,"formatLoadMore")){results.append("<li class='select2-more-results'>"+
opts.escapeMarkup(evaluate(opts.formatLoadMore,opts.element,this.resultsPage))+"</li>");window.setTimeout(function(){self.loadMoreIfNeeded()},10)}this.postprocessResults(data,initial);postRender();this.opts.element.trigger({type:"select2-loaded",items:data})})})},cancel:function(){this.close()},blur:function(){if(this.opts.selectOnBlur)this.selectHighlighted({noFocus:true});this.close();this.container.removeClass("select2-container-active");if(this.search[0]===document.activeElement)this.search.blur();
this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){focus(this.search)},selectHighlighted:function(options){if(this._touchMoved){this.clearTouchMoved();return}var index=this.highlight(),highlighted=this.results.find(".select2-highlighted"),data=highlighted.closest(".select2-result").data("select2-data");if(data){this.highlight(index);this.onSelect(data,options)}else if(options&&options.noFocus)this.close()},getPlaceholder:function(){var placeholderOption;
return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((placeholderOption=this.getPlaceholderOption())!==undefined?placeholderOption.text():undefined)},getPlaceholderOption:function(){if(this.select){var firstOption=this.select.children("option").first();if(this.opts.placeholderOption!==undefined)return this.opts.placeholderOption==="first"&&firstOption||typeof this.opts.placeholderOption==="function"&&
this.opts.placeholderOption(this.select);else if($.trim(firstOption.text())===""&&firstOption.val()==="")return firstOption}},initContainerWidth:function(){function resolveContainerWidth(){var style,attrs,matches,i,l,attr;if(this.opts.width==="off")return null;else if(this.opts.width==="element")return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px";else if(this.opts.width==="copy"||this.opts.width==="resolve"){style=this.opts.element.attr("style");if(style!==
undefined){attrs=style.split(";");for(i=0,l=attrs.length;i<l;i=i+1){attr=attrs[i].replace(/\s/g,"");matches=attr.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(matches!==null&&matches.length>=1)return matches[1]}}if(this.opts.width==="resolve"){style=this.opts.element.css("width");if(style.indexOf("%")>0)return style;return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}return null}else if($.isFunction(this.opts.width))return this.opts.width();
else return this.opts.width}var width=resolveContainerWidth.call(this);if(width!==null)this.container.css("width",width)}});SingleSelect2=clazz(AbstractSelect2,{createContainer:function(){var container=$(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>",
"</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />",
"   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return container},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments))this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var el,range,len;if(this.opts.minimumResultsForSearch>=0)this.showSearch(true);this.parent.opening.apply(this,arguments);if(this.showSearchInput!==false)this.search.val(this.focusser.val());if(this.opts.shouldFocusInput(this)){this.search.focus();
el=this.search.get(0);if(el.createTextRange){range=el.createTextRange();range.collapse(false);range.select()}else if(el.setSelectionRange){len=this.search.val().length;el.setSelectionRange(len,len)}}if(this.search.val()==="")if(this.nextSearchTerm!=undefined){this.search.val(this.nextSearchTerm);this.search.select()}this.focusser.prop("disabled",true).val("");this.updateResults(true);this.opts.element.trigger($.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,
arguments);this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this))this.focusser.focus()},focus:function(){if(this.opened())this.close();else{this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this))this.focusser.focus()}},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this))this.focusser.focus()},destroy:function(){$("label[for='"+
this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);cleanupJQueryElements.call(this,"selection","focusser")},initContainer:function(){var selection,container=this.container,dropdown=this.dropdown,idSuffix=nextUid(),elementLabel;if(this.opts.minimumResultsForSearch<0)this.showSearch(false);else this.showSearch(true);this.selection=selection=container.find(".select2-choice");this.focusser=container.find(".select2-focusser");selection.find(".select2-chosen").attr("id",
"select2-chosen-"+idSuffix);this.focusser.attr("aria-labelledby","select2-chosen-"+idSuffix);this.results.attr("id","select2-results-"+idSuffix);this.search.attr("aria-owns","select2-results-"+idSuffix);this.focusser.attr("id","s2id_autogen"+idSuffix);elementLabel=$("label[for='"+this.opts.element.attr("id")+"']");this.focusser.prev().text(elementLabel.text()).attr("for",this.focusser.attr("id"));var originalTitle=this.opts.element.attr("title");this.opts.element.attr("title",originalTitle||elementLabel.text());
this.focusser.attr("tabindex",this.elementTabIndex);this.search.attr("id",this.focusser.attr("id")+"_search");this.search.prev().text($("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(229==e.keyCode)return;if(e.which===KEY.PAGE_UP||e.which===KEY.PAGE_DOWN){killEvent(e);return}switch(e.which){case KEY.UP:case KEY.DOWN:this.moveHighlight(e.which===KEY.UP?-1:1);killEvent(e);
return;case KEY.ENTER:this.selectHighlighted();killEvent(e);return;case KEY.TAB:this.selectHighlighted({noFocus:true});return;case KEY.ESC:this.cancel(e);killEvent(e);return}}));this.search.on("blur",this.bind(function(e){if(document.activeElement===this.body.get(0))window.setTimeout(this.bind(function(){if(this.opened())this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===
KEY.ESC)return;if(this.opts.openOnEnter===false&&e.which===KEY.ENTER){killEvent(e);return}if(e.which==KEY.DOWN||e.which==KEY.UP||e.which==KEY.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;this.open();killEvent(e);return}if(e.which==KEY.DELETE||e.which==KEY.BACKSPACE){if(this.opts.allowClear)this.clear();killEvent(e);return}}));installKeyUpChangeEvent(this.focusser);this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=
0){e.stopPropagation();if(this.opened())return;this.open()}}));selection.on("mousedown touchstart","abbr",this.bind(function(e){if(!this.isInterfaceEnabled())return;this.clear();killEventImmediately(e);this.close();this.selection.focus()}));selection.on("mousedown touchstart",this.bind(function(e){reinsertElement(selection);if(!this.container.hasClass("select2-container-active"))this.opts.element.trigger($.Event("select2-focus"));if(this.opened())this.close();else if(this.isInterfaceEnabled())this.open();
killEvent(e)}));dropdown.on("mousedown touchstart",this.bind(function(){if(this.opts.shouldFocusInput(this))this.search.focus()}));selection.on("focus",this.bind(function(e){killEvent(e)}));this.focusser.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active"))this.opts.element.trigger($.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active");
this.opts.element.trigger($.Event("select2-blur"))}}));this.search.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active"))this.opts.element.trigger($.Event("select2-focus"));this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(triggerChange){var data=this.selection.data("select2-data");if(data){var evt=$.Event("select2-clearing");this.opts.element.trigger(evt);
if(evt.isDefaultPrevented())return;var placeholderOption=this.getPlaceholderOption();this.opts.element.val(placeholderOption?placeholderOption.val():"");this.selection.find(".select2-chosen").empty();this.selection.removeData("select2-data");this.setPlaceholder();if(triggerChange!==false){this.opts.element.trigger({type:"select2-removed",val:this.id(data),choice:data});this.triggerChange({removed:data})}}},initSelection:function(){var selected;if(this.isPlaceholderOptionSelected()){this.updateSelection(null);
this.close();this.setPlaceholder()}else{var self=this;this.opts.initSelection.call(null,this.opts.element,function(selected){if(selected!==undefined&&selected!==null){self.updateSelection(selected);self.close();self.setPlaceholder();self.nextSearchTerm=self.opts.nextSearchTerm(selected,self.search.val())}})}},isPlaceholderOptionSelected:function(){var placeholderOption;if(this.getPlaceholder()===undefined)return false;return(placeholderOption=this.getPlaceholderOption())!==undefined&&placeholderOption.prop("selected")||
this.opts.element.val()===""||this.opts.element.val()===undefined||this.opts.element.val()===null},prepareOpts:function(){var opts=this.parent.prepareOpts.apply(this,arguments),self=this;if(opts.element.get(0).tagName.toLowerCase()==="select")opts.initSelection=function(element,callback){var selected=element.find("option").filter(function(){return this.selected&&!this.disabled});callback(self.optionToData(selected))};else if("data"in opts)opts.initSelection=opts.initSelection||function(element,callback){var id=
element.val();var match=null;opts.query({matcher:function(term,text,el){var is_match=equal(id,opts.id(el));if(is_match)match=el;return is_match},callback:!$.isFunction(callback)?$.noop:function(){callback(match)}})};return opts},getPlaceholder:function(){if(this.select)if(this.getPlaceholderOption()===undefined)return undefined;return this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var placeholder=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&placeholder!==
undefined){if(this.select&&this.getPlaceholderOption()===undefined)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(placeholder));this.selection.addClass("select2-default");this.container.removeClass("select2-allowclear")}},postprocessResults:function(data,initial,noHighlightUpdate){var selected=0,self=this,showSearchInput=true;this.findHighlightableChoices().each2(function(i,elm){if(equal(self.id(elm.data("select2-data")),self.opts.element.val())){selected=i;return false}});
if(noHighlightUpdate!==false)if(initial===true&&selected>=0)this.highlight(selected);else this.highlight(0);if(initial===true){var min=this.opts.minimumResultsForSearch;if(min>=0)this.showSearch(countResults(data.results)>=min)}},showSearch:function(showSearchInput){if(this.showSearchInput===showSearchInput)return;this.showSearchInput=showSearchInput;this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!showSearchInput);this.dropdown.find(".select2-search").toggleClass("select2-offscreen",
!showSearchInput);$(this.dropdown,this.container).toggleClass("select2-with-searchbox",showSearchInput)},onSelect:function(data,options){if(!this.triggerSelect(data))return;var old=this.opts.element.val(),oldData=this.data();this.opts.element.val(this.id(data));this.updateSelection(data);this.opts.element.trigger({type:"select2-selected",val:this.id(data),choice:data});this.nextSearchTerm=this.opts.nextSearchTerm(data,this.search.val());this.close();if((!options||!options.noFocus)&&this.opts.shouldFocusInput(this))this.focusser.focus();
if(!equal(old,this.id(data)))this.triggerChange({added:data,removed:oldData})},updateSelection:function(data){var container=this.selection.find(".select2-chosen"),formatted,cssClass;this.selection.data("select2-data",data);container.empty();if(data!==null)formatted=this.opts.formatSelection(data,container,this.opts.escapeMarkup);if(formatted!==undefined)container.append(formatted);cssClass=this.opts.formatSelectionCssClass(data,container);if(cssClass!==undefined)container.addClass(cssClass);this.selection.removeClass("select2-default");
if(this.opts.allowClear&&this.getPlaceholder()!==undefined)this.container.addClass("select2-allowclear")},val:function(){var val,triggerChange=false,data=null,self=this,oldData=this.data();if(arguments.length===0)return this.opts.element.val();val=arguments[0];if(arguments.length>1)triggerChange=arguments[1];if(this.select){this.select.val(val).find("option").filter(function(){return this.selected}).each2(function(i,elm){data=self.optionToData(elm);return false});this.updateSelection(data);this.setPlaceholder();
if(triggerChange)this.triggerChange({added:data,removed:oldData})}else{if(!val&&val!==0){this.clear(triggerChange);return}if(this.opts.initSelection===undefined)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(val);this.opts.initSelection(this.opts.element,function(data){self.opts.element.val(!data?"":self.id(data));self.updateSelection(data);self.setPlaceholder();if(triggerChange)self.triggerChange({added:data,removed:oldData})})}},clearSearch:function(){this.search.val("");
this.focusser.val("")},data:function(value){var data,triggerChange=false;if(arguments.length===0){data=this.selection.data("select2-data");if(data==undefined)data=null;return data}else{if(arguments.length>1)triggerChange=arguments[1];if(!value)this.clear(triggerChange);else{data=this.data();this.opts.element.val(!value?"":this.id(value));this.updateSelection(value);if(triggerChange)this.triggerChange({added:value,removed:data})}}}});MultiSelect2=clazz(AbstractSelect2,{createContainer:function(){var container=
$(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return container},
prepareOpts:function(){var opts=this.parent.prepareOpts.apply(this,arguments),self=this;if(opts.element.get(0).tagName.toLowerCase()==="select")opts.initSelection=function(element,callback){var data=[];element.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(i,elm){data.push(self.optionToData(elm))});callback(data)};else if("data"in opts)opts.initSelection=opts.initSelection||function(element,callback){var ids=splitVal(element.val(),opts.separator);var matches=
[];opts.query({matcher:function(term,text,el){var is_match=$.grep(ids,function(id){return equal(id,opts.id(el))}).length;if(is_match)matches.push(el);return is_match},callback:!$.isFunction(callback)?$.noop:function(){var ordered=[];for(var i=0;i<ids.length;i++){var id=ids[i];for(var j=0;j<matches.length;j++){var match=matches[j];if(equal(id,opts.id(match))){ordered.push(match);matches.splice(j,1);break}}}callback(ordered)}})};return opts},selectChoice:function(choice){var selected=this.container.find(".select2-search-choice-focus");
if(selected.length&&choice&&choice[0]==selected[0]);else{if(selected.length)this.opts.element.trigger("choice-deselected",selected);selected.removeClass("select2-search-choice-focus");if(choice&&choice.length){this.close();choice.addClass("select2-search-choice-focus");this.opts.element.trigger("choice-selected",choice)}}},destroy:function(){$("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);cleanupJQueryElements.call(this,
"searchContainer","selection")},initContainer:function(){var selector=".select2-choices",selection;this.searchContainer=this.container.find(".select2-search-field");this.selection=selection=this.container.find(selector);var _this=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(e){_this.search[0].focus();_this.selectChoice($(this))});this.search.attr("id","s2id_autogen"+nextUid());this.search.prev().text($("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",
this.search.attr("id"));this.search.on("input paste",this.bind(function(){if(this.search.attr("placeholder")&&this.search.val().length==0)return;if(!this.isInterfaceEnabled())return;if(!this.opened())this.open()}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;++this.keydowns;var selected=selection.find(".select2-search-choice-focus");var prev=selected.prev(".select2-search-choice:not(.select2-locked)");
var next=selected.next(".select2-search-choice:not(.select2-locked)");var pos=getCursorInfo(this.search);if(selected.length&&(e.which==KEY.LEFT||e.which==KEY.RIGHT||e.which==KEY.BACKSPACE||e.which==KEY.DELETE||e.which==KEY.ENTER)){var selectedChoice=selected;if(e.which==KEY.LEFT&&prev.length)selectedChoice=prev;else if(e.which==KEY.RIGHT)selectedChoice=next.length?next:null;else if(e.which===KEY.BACKSPACE){if(this.unselect(selected.first())){this.search.width(10);selectedChoice=prev.length?prev:next}}else if(e.which==
KEY.DELETE){if(this.unselect(selected.first())){this.search.width(10);selectedChoice=next.length?next:null}}else if(e.which==KEY.ENTER)selectedChoice=null;this.selectChoice(selectedChoice);killEvent(e);if(!selectedChoice||!selectedChoice.length)this.open();return}else if((e.which===KEY.BACKSPACE&&this.keydowns==1||e.which==KEY.LEFT)&&pos.offset==0&&!pos.length){this.selectChoice(selection.find(".select2-search-choice:not(.select2-locked)").last());killEvent(e);return}else this.selectChoice(null);
if(this.opened())switch(e.which){case KEY.UP:case KEY.DOWN:this.moveHighlight(e.which===KEY.UP?-1:1);killEvent(e);return;case KEY.ENTER:this.selectHighlighted();killEvent(e);return;case KEY.TAB:this.selectHighlighted({noFocus:true});this.close();return;case KEY.ESC:this.cancel(e);killEvent(e);return}if(e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===KEY.BACKSPACE||e.which===KEY.ESC)return;if(e.which===KEY.ENTER)if(this.opts.openOnEnter===false)return;else if(e.altKey||e.ctrlKey||
e.shiftKey||e.metaKey)return;this.open();if(e.which===KEY.PAGE_UP||e.which===KEY.PAGE_DOWN)killEvent(e);if(e.which===KEY.ENTER)killEvent(e)}));this.search.on("keyup",this.bind(function(e){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);if(!this.opened())this.clearSearch();e.stopImmediatePropagation();this.opts.element.trigger($.Event("select2-blur"))}));
this.container.on("click",selector,this.bind(function(e){if(!this.isInterfaceEnabled())return;if($(e.target).closest(".select2-search-choice").length>0)return;this.selectChoice(null);this.clearPlaceholder();if(!this.container.hasClass("select2-container-active"))this.opts.element.trigger($.Event("select2-focus"));this.open();this.focusSearch();e.preventDefault()}));this.container.on("focus",selector,this.bind(function(){if(!this.isInterfaceEnabled())return;if(!this.container.hasClass("select2-container-active"))this.opts.element.trigger($.Event("select2-focus"));
this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments))this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var data;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||
this.opts.element.val()!==""){var self=this;this.opts.initSelection.call(null,this.opts.element,function(data){if(data!==undefined&&data!==null){self.updateSelection(data);self.close();self.clearSearch()}})}},clearSearch:function(){var placeholder=this.getPlaceholder(),maxWidth=this.getMaxSearchWidth();if(placeholder!==undefined&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(placeholder).addClass("select2-default");this.search.width(maxWidth>0?maxWidth:
this.container.css("width"))}else this.search.val("").width(10)},clearPlaceholder:function(){if(this.search.hasClass("select2-default"))this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();if(this.search.val()==="")if(this.nextSearchTerm!=undefined){this.search.val(this.nextSearchTerm);this.search.select()}this.updateResults(true);if(this.opts.shouldFocusInput(this))this.search.focus();
this.opts.element.trigger($.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(data){var ids=[],filtered=[],self=this;$(data).each(function(){if(indexOf(self.id(this),ids)<0){ids.push(self.id(this));filtered.push(this)}});data=filtered;this.selection.find(".select2-search-choice").remove();$(data).each(function(){self.addSelectedChoice(this)});
self.postprocessResults()},tokenize:function(){var input=this.search.val();input=this.opts.tokenizer.call(this,input,this.data(),this.bind(this.onSelect),this.opts);if(input!=null&&input!=undefined){this.search.val(input);if(input.length>0)this.open()}},onSelect:function(data,options){if(!this.triggerSelect(data)||data.text==="")return;this.addSelectedChoice(data);this.opts.element.trigger({type:"selected",val:this.id(data),choice:data});this.nextSearchTerm=this.opts.nextSearchTerm(data,this.search.val());
this.clearSearch();this.updateResults();if(this.select||!this.opts.closeOnSelect)this.postprocessResults(data,false,this.opts.closeOnSelect===true);if(this.opts.closeOnSelect){this.close();this.search.width(10)}else if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();if(this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize())this.updateResults(true);else if(this.nextSearchTerm!=undefined){this.search.val(this.nextSearchTerm);this.updateResults();
this.search.select()}this.positionDropdown()}else{this.close();this.search.width(10)}this.triggerChange({added:data});if(!options||!options.noFocus)this.focusSearch()},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(data){var enableChoice=!data.locked,enabledItem=$("<li class='select2-search-choice'>"+"    <div></div>"+"    <a href='#' class='select2-search-choice-close' tabindex='-1'></a>"+"</li>"),disabledItem=$("<li class='select2-search-choice select2-locked'>"+"<div></div>"+
"</li>");var choice=enableChoice?enabledItem:disabledItem,id=this.id(data),val=this.getVal(),formatted,cssClass;formatted=this.opts.formatSelection(data,choice.find("div"),this.opts.escapeMarkup);if(formatted!=undefined)choice.find("div").replaceWith("<div>"+formatted+"</div>");cssClass=this.opts.formatSelectionCssClass(data,choice.find("div"));if(cssClass!=undefined)choice.addClass(cssClass);if(enableChoice)choice.find(".select2-search-choice-close").on("mousedown",killEvent).on("click dblclick",
this.bind(function(e){if(!this.isInterfaceEnabled())return;this.unselect($(e.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");killEvent(e);this.close();this.focusSearch()})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")}));choice.data("select2-data",data);choice.insertBefore(this.searchContainer);val.push(id);this.setVal(val)},
unselect:function(selected){var val=this.getVal(),data,index;selected=selected.closest(".select2-search-choice");if(selected.length===0)throw"Invalid argument: "+selected+". Must be .select2-search-choice";data=selected.data("select2-data");if(!data)return;var evt=$.Event("select2-removing");evt.val=this.id(data);evt.choice=data;this.opts.element.trigger(evt);if(evt.isDefaultPrevented())return false;while((index=indexOf(this.id(data),val))>=0){val.splice(index,1);this.setVal(val);if(this.select)this.postprocessResults()}selected.remove();
this.opts.element.trigger({type:"select2-removed",val:this.id(data),choice:data});this.triggerChange({removed:data});return true},postprocessResults:function(data,initial,noHighlightUpdate){var val=this.getVal(),choices=this.results.find(".select2-result"),compound=this.results.find(".select2-result-with-children"),self=this;choices.each2(function(i,choice){var id=self.id(choice.data("select2-data"));if(indexOf(id,val)>=0){choice.addClass("select2-selected");choice.find(".select2-result-selectable").addClass("select2-selected")}});
compound.each2(function(i,choice){if(!choice.is(".select2-result-selectable")&&choice.find(".select2-result-selectable:not(.select2-selected)").length===0)choice.addClass("select2-selected")});if(this.highlight()==-1&&noHighlightUpdate!==false)self.highlight(0);if(!this.opts.createSearchChoice&&!choices.filter(".select2-result:not(.select2-selected)").length>0)if(!data||data&&!data.more&&this.results.find(".select2-no-results").length===0)if(checkFormatter(self.opts.formatNoMatches,"formatNoMatches"))this.results.append("<li class='select2-no-results'>"+
evaluate(self.opts.formatNoMatches,self.opts.element,self.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-getSideBorderPadding(this.search)},resizeSearch:function(){var minimumWidth,left,maxWidth,containerLeft,searchWidth,sideBorderPadding=getSideBorderPadding(this.search);minimumWidth=measureTextWidth(this.search)+10;left=this.search.offset().left;maxWidth=this.selection.width();containerLeft=this.selection.offset().left;searchWidth=maxWidth-(left-containerLeft)-
sideBorderPadding;if(searchWidth<minimumWidth)searchWidth=maxWidth-sideBorderPadding;if(searchWidth<40)searchWidth=maxWidth-sideBorderPadding;if(searchWidth<=0)searchWidth=minimumWidth;this.search.width(Math.floor(searchWidth))},getVal:function(){var val;if(this.select){val=this.select.val();return val===null?[]:val}else{val=this.opts.element.val();return splitVal(val,this.opts.separator)}},setVal:function(val){var unique;if(this.select)this.select.val(val);else{unique=[];$(val).each(function(){if(indexOf(this,
unique)<0)unique.push(this)});this.opts.element.val(unique.length===0?"":unique.join(this.opts.separator))}},buildChangeDetails:function(old,current){var current=current.slice(0),old=old.slice(0);for(var i=0;i<current.length;i++)for(var j=0;j<old.length;j++)if(equal(this.opts.id(current[i]),this.opts.id(old[j]))){current.splice(i,1);if(i>0)i--;old.splice(j,1);j--}return{added:current,removed:old}},val:function(val,triggerChange){var oldData,self=this;if(arguments.length===0)return this.getVal();oldData=
this.data();if(!oldData.length)oldData=[];if(!val&&val!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();if(triggerChange)this.triggerChange({added:this.data(),removed:oldData});return}this.setVal(val);if(this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection));if(triggerChange)this.triggerChange(this.buildChangeDetails(oldData,this.data()))}else{if(this.opts.initSelection===undefined)throw new Error("val() cannot be called if initSelection() is not defined");
this.opts.initSelection(this.opts.element,function(data){var ids=$.map(data,self.id);self.setVal(ids);self.updateSelection(data);self.clearSearch();if(triggerChange)self.triggerChange(self.buildChangeDetails(oldData,self.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var val=[],self=
this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){val.push(self.opts.id($(this).data("select2-data")))});this.setVal(val);this.triggerChange()},data:function(values,triggerChange){var self=this,ids,old;if(arguments.length===0)return this.selection.children(".select2-search-choice").map(function(){return $(this).data("select2-data")}).get();else{old=this.data();if(!values)values=
[];ids=$.map(values,function(e){return self.opts.id(e)});this.setVal(ids);this.updateSelection(values);this.clearSearch();if(triggerChange)this.triggerChange(this.buildChangeDetails(old,this.data()))}}});$.fn.select2=function(){var args=Array.prototype.slice.call(arguments,0),opts,select2,method,value,multiple,allowedMethods=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],
valueMethods=["opened","isFocused","container","dropdown"],propertyMethods=["val","data"],methodsMap={search:"externalSearch"};this.each(function(){if(args.length===0||typeof args[0]==="object"){opts=args.length===0?{}:$.extend({},args[0]);opts.element=$(this);if(opts.element.get(0).tagName.toLowerCase()==="select")multiple=opts.element.prop("multiple");else{multiple=opts.multiple||false;if("tags"in opts)opts.multiple=multiple=true}select2=multiple?new window.Select2["class"].multi:new window.Select2["class"].single;
select2.init(opts)}else if(typeof args[0]==="string"){if(indexOf(args[0],allowedMethods)<0)throw"Unknown method: "+args[0];value=undefined;select2=$(this).data("select2");if(select2===undefined)return;method=args[0];if(method==="container")value=select2.container;else if(method==="dropdown")value=select2.dropdown;else{if(methodsMap[method])method=methodsMap[method];value=select2[method].apply(select2,args.slice(1))}if(indexOf(args[0],valueMethods)>=0||indexOf(args[0],propertyMethods)>=0&&args.length==
1)return false}else throw"Invalid arguments to select2 plugin: "+args;});return value===undefined?this:value};$.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:true,openOnEnter:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(result,container,query,escapeMarkup){var markup=[];markMatch(result.text,query.term,markup,escapeMarkup);return markup.join("")},formatSelection:function(data,container,escapeMarkup){return data?escapeMarkup(data.text):
undefined},sortResults:function(results,container,query){return results},formatResultCssClass:function(data){return data.css},formatSelectionCssClass:function(data,container){return undefined},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==undefined?null:e.id},matcher:function(term,text){return stripDiacritics(""+text).toUpperCase().indexOf(stripDiacritics(""+term).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:defaultTokenizer,
escapeMarkup:defaultEscapeMarkup,blurOnChange:false,selectOnBlur:false,adaptContainerCssClass:function(c){return c},adaptDropdownCssClass:function(c){return null},nextSearchTerm:function(selectedObject,currentSearchTerm){return undefined},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(instance){var supportsTouchEvents="ontouchstart"in window||navigator.msMaxTouchPoints>0;if(!supportsTouchEvents)return true;if(instance.opts.minimumResultsForSearch<0)return false;
return true}};$.fn.select2.locales=[];$.fn.select2.locales["en"]={formatMatches:function(matches){if(matches===1)return"One result is available, press enter to select it.";return matches+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(jqXHR,textStatus,errorThrown){return"Loading failed"},formatInputTooShort:function(input,min){var n=min-input.length;return"Please enter "+n+" or more character"+(n==1?"":
"s")},formatInputTooLong:function(input,max){var n=input.length-max;return"Please delete "+n+" character"+(n==1?"":"s")},formatSelectionTooBig:function(limit){return"You can only select "+limit+" item"+(limit==1?"":"s")},formatLoadMore:function(pageNumber){return"Loading more results\u2026"},formatSearching:function(){return"Searching\u2026"}};$.extend($.fn.select2.defaults,$.fn.select2.locales["en"]);$.fn.select2.ajaxDefaults={transport:$.ajax,params:{type:"GET",cache:false,dataType:"json"}};window.Select2=
{query:{ajax:ajax,local:local,tags:tags},util:{debounce:debounce,markMatch:markMatch,escapeMarkup:defaultEscapeMarkup,stripDiacritics:stripDiacritics},"class":{"abstract":AbstractSelect2,"single":SingleSelect2,"multi":MultiSelect2}}})(jQuery);(function($){$.effects.none=function(o){return this.queue(function(){if(o.options.mode=="show"){$(this).show();if(o.callback)o.callback.apply(this)}else{$(this).hide();if(o.callback)o.callback.apply(this)}$(this).dequeue()})}})(jQuery);function NavigationPanelUi_clear(){NavigationPanelUi_clearBuckets()}function NavigationPanelUi_clearBuckets(){$("#bucket-list-view tbody").empty()}function NavigationPanelUi_isDisplayed(){return!$("#bucket-list-container").is(":hidden")}
function NavigationPanelUi_displayBuckets(buckets){NavigationPanelUi_clearBuckets();for(var i=0;i<buckets.length;i++)NavigationPanelUi_appendBucket(buckets[i]);Ui.NavigationPanel.updateBucketCount(buckets.length)}function NavigationPanelUi_appendBucket(bucket){NavigationPanelUi_insertBucketBefore(null,bucket)}
function NavigationPanelUi_insertBucketBefore(bucketToInsertBefore,bucket){var escapedBucket=Utility.escape(bucket);var element=Utility.onDeckContentFactory("#bucket-list-item-template");element.attr("title",escapedBucket);element.attr("bucket",bucket);$(".bucket-name",element).text(escapedBucket);var exploreBucket=function(e){Ui.PropertiesPanel.close();Ui.Layout.redrawUiPanes();Ui_hideBucketListShowObjectListViewAndPath();Console.NavigationPanel.setBucket(element.attr("bucket"));e.stopPropagation()};
$(".bucket-name",element).click(exploreBucket);element.dblclick(exploreBucket);$(".detail",element).click(function(){Ui.PropertiesPanel.showNoBucketsSelected(false);Ui.PropertiesPanel.open()});element.click(function(){Console.NavigationPanel.setBucket($(this).attr("bucket"))});element.bind("beforeContextMenu",function(){Console.NavigationPanel.setBucket($(this).attr("bucket"))});element.contextMenu({createMenu:function(){Console.NavigationPanel.setBucket(bucket);return Ui.filterContextMenu(Console.NavigationPanel.contextualActions(),
$("#bucket-context-menu"))},destroyMenu:function(){}},Ui.NavigationPanel.bucketContextMenuAction.bind(Ui.NavigationPanel));if(bucketToInsertBefore!=null){var insertionPoint=$("#bucket-list-view tbody tr[bucket='"+bucketToInsertBefore+"']");if(!insertionPoint.length)throw new Error("Could not find insertion point: "+bucketToInsertBefore);element.insertBefore(insertionPoint)}else element.appendTo("#bucket-list-view tbody")}
function NavigationPanelUi_highlightBucket(bucket){var element=$("#bucket-list-view tbody tr[bucket='"+bucket+"']");if(!element.hasClass("ui-selected"))element.toggleClass("ui-selected").siblings().removeClass("ui-selecting").removeClass("ui-selected");$("#bottom-panel-button-bar-list-view-buttons").css("visibility","visible");element.maybeScrollIntoView("#bucket-list-view")}
var extensionIconMap={"png":"graphics/image.png","jpg":"graphics/image.png","jpeg":"graphics/image.png","bmp":"graphics/image.png","gif":"graphics/image.png","tiff":"graphics/image.png","tif":"graphics/image.png","txt":"graphics/text.png","rtf":"graphics/text.png","xml":"graphics/text.png","txt":"graphics/text.png","doc":"graphics/text.png","docx":"graphics/text.png","pdf":"graphics/text.png","ps":"graphics/text.png","mp3":"graphics/music.png","m4a":"graphics/music.png","m4p":"graphics/music.png",
"wav":"graphics/music.png","avi":"graphics/video.png","mpeg":"graphics/video.png","mp4":"graphics/video.png","qt":"graphics/video.png","wmv":"graphics/video.png","mov":"graphics/video.png","flv":"graphics/video.png","zip":"graphics/archive.png","tgz":"graphics/archive.png","gz":"graphics/archive.png","lzh":"graphics/archive.png","cab":"graphics/archive.png"};
function selectItemIconByExtension(name){var parts=name.split(".");if(parts.length>1){var extension=parts[parts.length-1].toLowerCase();var icon=extensionIconMap[extension];if(icon!=null)return icon}return"graphics/object.png"}function UploadWizardUi_reset(){Ui.UploadWizard.reset()}function UploadWizardUi_setLocation(bucket,location){Ui_updatePathLabel($("#upload-wizard-path-label"),bucket,location)}function UploadWizardUi_clearLocation(){$("#upload-wizard-path-label").empty()}
function UploadWizardUi_setTotalUploadSize(totalUploadSize){$("#upload-wizard-total-upload-size").html(Ui.friendlyBytes(totalUploadSize))}function UploadWizardUi_setNumberOfFiles(count){$("#upload-wizard-number-of-files").html(count);UploadWizardUi_resize()}
function UploadWizardUi_clearFileReferences(){var localizedText="No files added...";if(Console.Translator)localizedText=Console.Translator.noFilesAdded();$("#upload-wizard-file-references").empty().append($("<span/>").text(localizedText).append("<br/><br/>").css("margin-left","10px"));Ui.disableButton($("#upload-wizard-start-uploading-button"),true);Ui.disableButton($("#upload-wizard-next-button"),true);UploadWizardUi_setNumberOfFiles(0)}
function UploadWizardUi_appendFileReferences(items){if($("#upload-wizard-file-references div").length==0)$("#upload-wizard-file-references").empty();for(var i=0;i<items.length;++i){var fileReference=items[i];var isFolder=fileReference.type=="Directory";var icon=CB.resolve(isFolder?"graphics/folder.png":selectItemIconByExtension(fileReference.name));var element=$("<div />");element.attr("requestId",fileReference.id).attr("isFolder",isFolder).addClass("validation-element");$("<span />").attr("requestId",
fileReference.id).addClass("validation-icon-container").prependTo(element);$("<img />").addClass("small-icon").attr("src",icon).appendTo(element);$("<span />").text(" "+fileReference.name).appendTo(element);var size=isFolder?"folder":Ui.friendlyBytes(fileReference.size);$("<span />").html(" ("+size+")").addClass("bold").appendTo(element);$("<span>x</span>").addClass("form-remove-x").appendTo(element).click(function(){Console.UploadWizard.removeItem($(this).parent().attr("requestId"))});element.appendTo("#upload-wizard-file-references")}if(items.length>
0){Ui.disableButton($("#upload-wizard-start-uploading-button"),false);Ui.disableButton($("#upload-wizard-next-button"),false)}}function UploadWizardUi_removeFileReference(id){$("#upload-wizard-file-references div[requestId='"+id+"']").remove();if($("#upload-wizard-file-references div").length==0)UploadWizardUi_clearFileReferences()}
function UploadWizardUi_removeSelectedFileReferences(){$("#upload-wizard-file-references div.ui-selected").each(function(index,element){Console.UploadWizard.removeItem($(element).attr("requestId"))})}
var UploadWizardUi_commonMetadata={"Cache-Control":[],"Content-Disposition":["attachment"],"Content-Type":["image/jpeg","image/png","image/gif","image/bmp","image/tiff","text/plain","text/rtf","application/msword","application/zip","audio/mpeg","application/pdf","application/x-gzip","application/x-compressed","application/zip"],"Content-Language":[],"Expires":[],"Content-Encoding":[],"Website Redirect Location":[],"x-amz-meta-":[]};
function UploadWizardUi_appendMetadata(){if($("#upload-wizard-metadata div").length==0)$("#upload-wizard-metadata").empty();var valueText="Value";var keyText="Key";if(Console.Translator){valueText=Console.Translator.value();keyText=Console.Translator.key()}var requestId=Ui.generateId();var element=$("<div></div>").attr("requestId",requestId).addClass("validation-element");$("<span></span>").attr("requestId",requestId).addClass("validation-icon-container").appendTo(element);$("<span/>").text(keyText+
": ").appendTo(element);var keyCombobox=$("<select></select>").appendTo($("<span />").addClass("metadata-key-input-container").attr("contains","key").appendTo(element));$("<option></option>").val("").html("").prop("selected",true).appendTo(keyCombobox);for(var key in UploadWizardUi_commonMetadata){if(key=="Website Redirect Location"&&!Configuration.enableWebsiteRedirects)continue;$("<option></option>").val(key).html(key).appendTo(keyCombobox)}element.append($("<span/>").text(" "+valueText+": "));
var valueCombobox=$("<select></select>").appendTo($("<span />").addClass("metadata-value-input-container").attr("contains","value").appendTo(element));$("<option></option>").val("").html("").prop("selected",true).appendTo(valueCombobox);var removeX=$("<span>x</span>").addClass("form-remove-x").appendTo(element).click(function(){element.remove();UploadWizardUi_maybeClearMetadata()});element.appendTo("#upload-wizard-metadata");keyCombobox.combobox();valueCombobox.combobox();keyCombobox.bind("change",
function(){valueCombobox.empty();var key=$(this).combobox("value");var commonMetadata=UploadWizardUi_commonMetadata[key];if(commonMetadata)for(var i=0;i<commonMetadata.length;i++)$("<option></option>").val(commonMetadata[i]).html(commonMetadata[i]).appendTo(valueCombobox)})}function UploadWizardUi_removeSelectedMetadata(){$("#upload-wizard-metadata div.ui-selected").remove();UploadWizardUi_maybeClearMetadata()}
function UploadWizardUi_maybeClearMetadata(){if($("#upload-wizard-metadata div").length==0)UploadWizardUi_clearMetadata()}function UploadWizardUi_clearMetadata(){var localizedText="No metadata added...";if(Console.Translator)localizedText=Console.Translator.noMetadataAdded();$("#upload-wizard-metadata").empty().append($("<span>/>").text(localizedText).append("<br/><br/>").css("margin-left","10px"))}
function UploadWizardUi_getMetadataFormData(){var formData={guessContentTypes:$("#upload-wizard-guess-content-types").is(":checked"),metadata:[]};$("#upload-wizard-metadata div.validation-element").each(function(){var key=$("span[contains=key] select",$(this)).combobox("value")||"";var value=$("span[contains=value] select",$(this)).combobox("value")||"";formData.metadata.push({requestId:$(this).attr("requestId"),key:key,value:value})});return formData}
function UploadWizardUi_appendGrant(){if($("#upload-wizard-grants div").length==0)$("#upload-wizard-grants").empty();var localizedGranteeText="Grantee";var localizedOpenDownloadText="Open/Download";var localizedViewPermissionsText="View Permissions";var localizedEditPermissionsText="Edit Permissions";if(Console.Translator){localizedGranteeText=Console.Translator.grantee();localizedOpenDownloadText=Console.Translator.openDownload();localizedViewPermissionsText=Console.Translator.viewPermissions();
localizedEditPermissionsText=Console.Translator.editPermissions()}var requestId=Ui.generateId();var element=$("<div></div>").attr("requestId",requestId).addClass("validation-element");$("<span></span>").attr("requestId",requestId).addClass("validation-icon-container").appendTo(element);$("<span/>").text(localizedGranteeText+": ").appendTo(element);var granteeCombobox=$("<select></select>").appendTo(element);$("<option></option>").val("").html("").prop("selected",true).appendTo(granteeCombobox);var commonFriendlyGrantees=
Console.GranteeOracle.commonFriendlyGrantees();for(var i=0;i<commonFriendlyGrantees.friendlyGrantees.length;i++){var friendlyGrantee=commonFriendlyGrantees.friendlyGrantees[i];$("<option></option>").val(friendlyGrantee).html(friendlyGrantee).appendTo(granteeCombobox)}$("<input>").attr("type","checkbox").attr("contains","read").appendTo(element);$("<span/>").text(" "+localizedOpenDownloadText+" ").appendTo(element);$("<input>").attr("type","checkbox").attr("contains","read-acp").appendTo(element);
$("<span/>").text(" "+localizedViewPermissionsText+" ").appendTo(element);$("<input>").attr("type","checkbox").attr("contains","write-acp").appendTo(element);$("<span/>").text(" "+localizedEditPermissionsText+" ").appendTo(element);var removeX=$("<span>x</span>").addClass("form-remove-x").appendTo(element).click(function(){element.remove();UploadWizardUi_maybeClearGrants()});element.appendTo("#upload-wizard-grants");granteeCombobox.combobox()}
function UploadWizardUi_removeSelectedGrants(){$("#upload-wizard-grants div.ui-selected").remove();UploadWizardUi_maybeClearGrants()}function UploadWizardUi_maybeClearGrants(){if($("#upload-wizard-grants div").length==0)UploadWizardUi_clearGrants()}
function UploadWizardUi_clearGrants(){var localizedText="No permissions added...";if(Console.Translator)localizedText=Console.Translator.noPermissionsAdded();$("#upload-wizard-grants").empty().append($("<span/>").text(localizedText).append("<br/><br/>").css("margin-left","10px"))}
function UploadWizardUi_getPermissionsFormData(){var formData={grantMeFullControl:$("#upload-wizard-grant-me-full-control").is(":checked"),makeEverythingPublic:$("#upload-wizard-make-everything-public").is(":checked"),grantSets:[]};$("#upload-wizard-grants div").each(function(){var enteredGrantee=$("select",$(this)).combobox("value");if(enteredGrantee){var granteeString=Console.GranteeOracle.transformFriendlyGrantee(enteredGrantee);formData.grantSets.push({requestId:$(this).attr("requestId"),grantee:granteeString,
read:$("input[contains=read]:checked",this).length!=0,write:$("input[contains=write]:checked",this).length!=0,readAcp:$("input[contains=read-acp]:checked",this).length!=0,writeAcp:$("input[contains=write-acp]:checked",this).length!=0})}});return formData}var UploadWizardUi_resizeTimeout;
function UploadWizardUi_resize(){var currentPage=Ui.UploadWizard.currentPage();var resizable=$(".upload-wizard-resizable",currentPage);if(!currentPage||!resizable.offset())return;var breathingRoom=80;var estimatedGoodHeight=$("#upload-wizard").height()-(resizable.offset().top-$("#upload-wizard").offset().top)-$("#upload-wizard-navigation-buttons").height()-$("#upload-wizard-summary-labels").height()-breathingRoom;estimatedGoodHeight=Math.max(130,estimatedGoodHeight);resizable.css("max-height",estimatedGoodHeight+
"px");$(window).one("resize",function(){clearTimeout(UploadWizardUi_resizeTimeout);UploadWizardUi_resizeTimeout=setTimeout(UploadWizardUi_resize,250)})}function createNewBreadcrumbSegmentElement(){return Utility.onDeckContentFactory("#breadcrumb-segment-template")}function createNewBreadcrumbDelimiterElement(){return Utility.onDeckContentFactory("#breadcrumb-delimiter-template")}function createNewBreadcrumbJumpElement(){return Utility.onDeckContentFactory("#breadcrumb-jump-template")}
function Ui_hideBucketListShowObjectListViewAndPath(){$("#object-list-container").show();$("#breadcrumb-active").show();$("#object-menu-container").show();$("#large-panel-button-bar-refresh-button").attr("onClick","Ui.ListView.refresh()");$("#versioning-buttons").hide();$("#bucket-list-container").hide();$("#breadcrumb-inactive").hide();$("#bucket-menu-container").hide()}
function Ui_hideObjectListViewAndPathShowBucketList(){$("#object-list-container").hide();$("#breadcrumb-active").hide();$("#object-menu-container").hide();$("#large-panel-button-bar-refresh-button").attr("onClick","Console.NavigationPanel.refresh()");$("#bucket-menu-container").show();$("#bucket-list-container").show();$("#breadcrumb-inactive").show();if($("#bucket-list-view .list-view-item.ui-selected").length==1){var bucket=$("#bucket-list-view .list-view-item.ui-selected").attr("bucket");Console.NavigationPanel.setBucket(bucket)}}
function Ui_updatePathLabel(pathLabel,bucket,path){if(Console.backAndForwardEnabled()){if($("#object-list-container").is(":visible"))Ui.Navigation.setMode(Ui.Navigation.Mode.ObjectList);else Ui.Navigation.setMode(Ui.Navigation.Mode.BucketList);Ui.Navigation.addToHistory(bucket,path)}var pathLabel=$(pathLabel).empty();var breadcrumbContainerSpan=Utility.onDeckContentFactory("#breadcrumb-container");var breadcrumbSegment=createNewBreadcrumbSegmentElement();breadcrumbSegment.text(bucket);breadcrumbContainerSpan.append(createNewBreadcrumbDelimiterElement());
breadcrumbContainerSpan.append(breadcrumbSegment);pathLabel.append(breadcrumbContainerSpan);$("#breadcrumb-bucket-root").click(function(){Ui_hideObjectListViewAndPathShowBucketList()});var cumulativePath="";var breadcrumbJump=null;for(var i=0;i<path.length;i++){var pathSegment=path[i];if(pathSegment.Folder){var folderName=pathSegment.Folder;cumulativePath+=folderName+"/";pathLabel.append(createNewBreadcrumbDelimiterElement());breadcrumbSegment=createNewBreadcrumbSegmentElement();breadcrumbSegment.attr("path",
cumulativePath);breadcrumbSegment.text(folderName);pathLabel.append(breadcrumbSegment)}else if(pathSegment.Jump){var jumpPoint=pathSegment.Jump;pathLabel.append(createNewBreadcrumbDelimiterElement());breadcrumbJump=createNewBreadcrumbJumpElement();breadcrumbJump.text(jumpPoint);pathLabel.append(breadcrumbJump)}}var container=pathLabel.parent();if(container[0].scrollWidth>container.outerWidth()){pathLabel.empty();breadcrumbContainerSpan=Utility.onDeckContentFactory("#breadcrumb-container");breadcrumbSegment=
createNewBreadcrumbSegmentElement();breadcrumbSegment.text(bucket);breadcrumbContainerSpan.append(createNewBreadcrumbDelimiterElement());breadcrumbContainerSpan.append(breadcrumbSegment);pathLabel.append(breadcrumbContainerSpan);if(path.length>0){pathLabel.append(createNewBreadcrumbDelimiterElement());breadcrumbSegment=createNewBreadcrumbSegmentElement();breadcrumbSegment.text("...");pathLabel.append(breadcrumbSegment);var cumulativePath="";for(var i=0;i<path.length;i++){var pathSegment=path[i];var jumpPoint;
if(pathSegment.Folder){var folderName=pathSegment.Folder;cumulativePath+=folderName+"/"}else if(pathSegment.Jump)jumpPoint=pathSegment.Jump;if(i>=path.length-2){pathLabel.append(createNewBreadcrumbDelimiterElement());if(pathSegment.Folder){breadcrumbSegment=createNewBreadcrumbSegmentElement();breadcrumbSegment.attr("path",cumulativePath);breadcrumbSegment.text(folderName);pathLabel.append(breadcrumbSegment)}else if(pathSegment.Jump){pathLabel.append(createNewBreadcrumbDelimiterElement());breadcrumbJump=
createNewBreadcrumbJumpElement();breadcrumbJump.text(jumpPoint);pathLabel.append(breadcrumbJump)}}}}var iterations=0;var maxIterations=10;var lastPathSegment=$(".breadcrumb-segment",pathLabel).last();while(container[0].scrollWidth>container.outerWidth()&&iterations++<maxIterations)$(".breadcrumb-segment",pathLabel).not(lastPathSegment).truncate(400-35*iterations);iterations=0;while(container[0].scrollWidth>container.outerWidth()&&iterations++<maxIterations)lastPathSegment.truncate(400-20*iterations)}return $(".breadcrumb-segment",
pathLabel)}var Ui_currentBottomPanel=null;function escapeTags(string){return string.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function login(){Console.login()};(function(ns){ns.Nitro={element:null,initialize:function(){if(this.initialized)return;if(this.installed()){console.log("Nitro installed - embedding object");var $element=$("<object id='nitro' type='application/x-fbtestplugin' width='0' height='0'></object>");$element.appendTo("body");this.element=$element[0];var htmlPicker=$("<div />").attr("id","html-file-picker");ns.Ui.VfsItemSelector.initialize(htmlPicker);ns.Ui.VfsItemSelector.onBeforeShow(function(){ns.Ui.UploadWizard.show(false)});ns.Ui.VfsItemSelector.onAfterHide(function(){ns.Ui.UploadWizard.show(true)});
$("body").append(htmlPicker)}else console.log("Nitro not installed");initialized=true},installed:function(){if($.browser.msie)return false;var plugins=navigator.plugins;for(var i=0;i<plugins.length;i++){var plugin=plugins[i];for(var j=0;j<plugin.length;j++)if(plugin[j].type=="application/x-fbtestplugin")return true}return false},ensureAvailable:function(){if(!this.element)throw new Error("Nitro not available");},homeDirectory:function(){this.ensureAvailable();return this.element.homeDirectory()},
listDirectory:function(path){this.ensureAvailable();return this.element.listDirectory(path)},fileSize:function(path){this.ensureAvailable();return this.element.fileSize(path)},readFile:function(requestId,path,offset,length){this.ensureAvailable();return this.element.readFile(path,offset,length,function(data){Console.Nitro.staticCallBack(requestId,data)})},getHostOS:function(){this.ensureAvailable();return this.element.getHostOS()}}})(window);window.S3Console=function(){var self={Constants:{},ViewModel:{},Controller:{}};self.initialize=function(){self.initializePropertiesPanelAndChildren(self.ViewModel,self.Controller,self.Constants.PropertiesPanel);ko.applyBindings(self.ViewModel);Flow.module("InitializeKOLocalizedConstants").dependsOn(["TranslatorReady::ready"]).on("dependencies::met",function(){var lifecycelConstants=self.Constants.PropertiesPanel.LifecycleSubpanel;var notificiationConstants=self.Constants.PropertiesPanel.NotificationSubpanel;
localizeWhenTranslatorReady(Ui.PropertiesPanel.Translator,lifecycelConstants.LocalizedStrings,lifecycelConstants.LocalizedMessages);localizeWhenTranslatorReady(Ui.PropertiesPanel.Translator,notificiationConstants.LocalizedStrings,notificiationConstants.LocalizedMessages)})};self.initializePropertiesPanelAndChildren=function(viewmodelNS,controllerNS,propertiesPanelConstantsNS){var vmPropertiesPanel=new PropertiesPanelViewModel(propertiesPanelConstantsNS,window.Configuration);var ctPropertiesPanel=
new PropertiesPanelController(vmPropertiesPanel);vmPropertiesPanel.VersioningSubpanel=new VersioningSubpanelViewModel;ctPropertiesPanel.VersioningSubpanel=new VersioningSubpanelController(vmPropertiesPanel.VersioningSubpanel,propertiesPanelConstantsNS.VersioningSubpanel);vmPropertiesPanel.LifecycleSubpanel=new LifecycleSubpanelViewModel(propertiesPanelConstantsNS.LifecycleSubpanel.LocalizedStrings,propertiesPanelConstantsNS.LifecycleSubpanel.ActionTypes);ctPropertiesPanel.LifecycleSubpanel=new LifecycleSubpanelController(vmPropertiesPanel.LifecycleSubpanel);
vmPropertiesPanel.LifecycleSubpanel.RuleWizard=new LifecycleRuleWizardViewModel(propertiesPanelConstantsNS.LifecycleSubpanel.ActionTypes,propertiesPanelConstantsNS.LifecycleSubpanel.RuleWizard,vmPropertiesPanel.LifecycleSubpanel.sharedWithRuleWizard);ctPropertiesPanel.LifecycleSubpanel.RuleWizard=new LifecycleRuleWizardController(vmPropertiesPanel.LifecycleSubpanel.RuleWizard,vmPropertiesPanel.LifecycleSubpanel,propertiesPanelConstantsNS.LifecycleSubpanel);vmPropertiesPanel.NotificationSubpanel=new NotificationSubpanelViewModel(window.Configuration.eventNewUi,
vmPropertiesPanel,propertiesPanelConstantsNS.NotificationSubpanel);ctPropertiesPanel.NotificationSubpanel=new NotificationSubpanelController(vmPropertiesPanel.NotificationSubpanel,vmPropertiesPanel,propertiesPanelConstantsNS.NotificationSubpanel);viewmodelNS.PropertiesPanel=vmPropertiesPanel;controllerNS.PropertiesPanel=ctPropertiesPanel};var localizeWhenTranslatorReady=function(translator,localizedStringsObservables,localizedMessagesMap){for(var stringName in localizedStringsObservables)if(ko.isObservable(localizedStringsObservables[stringName])){var translateFunction=
translator[stringName];if(translateFunction&&typeof translateFunction==="function"){var translateFunction=translator[stringName];localizedStringsObservables[stringName](translateFunction())}else{console.log("Error localizing string constant: "+stringName);window.Logging.log("Localization-Error",1,"stringName="+stringName)}}for(var messageName in localizedMessagesMap){var translateFunction=translator[messageName];if(translateFunction&&typeof translateFunction==="function")localizedMessagesMap[messageName]=
translateFunction;else{console.log("Error localizing message: "+messageName);window.Logging.log("Localization-Error",1,"messageName="+messageName)}}};return self}();$(document).ready(window.S3Console.initialize);window.S3Console.Constants.Errors=function(){function ErrorEnum(code,message){this.code=code;this.message=message}return{UnexpectedError:new ErrorEnum("UnexpectedError","An unexpected error has occurred."),ExpiredToken:new ErrorEnum("ExpiredToken","Session has expired."),AccessDenied:new ErrorEnum("AccessDenied","You don't have permission to do that."),AccessDeniedException:new ErrorEnum("AccessDeniedException","You don't have permission to perform that Kms operation."),InvalidArgument:new ErrorEnum("InvalidArgument",
"Your input is not valid."),AuthenticationFailed:new ErrorEnum("AuthenticationFailed","Your request cannot be authenticated."),RequestTimeout:new ErrorEnum("RequestTimeout","Your request timed out."),InternalError:new ErrorEnum("InternalError","Service encountered internal error. Please try again.")}}();WizardStepControlViewModel=function(steps){var self=this;self.steps=ko.observableArray(steps);self.curStep=ko.observable(1);self.goToNextStep=function(){if(self.curStep()<=self.steps().length)self.curStep(self.curStep()+1)};self.goToPreviousStep=function(){if(self.curStep()>1)self.curStep(self.curStep()-1)}};window.S3Console.Constants.PropertiesPanel={emptyObjectProperties:{type:"",name:""}};PropertiesPanelViewModel=function(propertiesPanelConstants,consoleConfiguration){var self=this;self.vmObjectProperties=ko.mapping.fromJS(propertiesPanelConstants.emptyObjectProperties);self.selectedBucket=ko.observable("");self.locationConstraint=ko.observable(consoleConfiguration.defaultLocation);self.awsRegion=ko.computed({read:function(){return consoleConfiguration.convertLocationConstraintToAWSRegion(self.locationConstraint())},write:function(value){self.locationConstraint(consoleConfiguration.convertAWSRegionToLocationConstraint(value))}})};PropertiesPanelController=function(vmPropertiesPanel){var self=this;self.updateObjectProperties=function(sanitizedObjectProperties){ko.mapping.fromJS(sanitizedObjectProperties,vmPropertiesPanel.vmObjectProperties)}};window.S3Console.Constants.PropertiesPanel.LifecycleSubpanel=function(){var self={ActionTypes:{Transition:"Transition",Expiration:"Expiration",NonCurrentVersionTransition:"NoncurrentVersionTransition",NonCurrentVersionExpiration:"NoncurrentVersionExpiration"},MaxRules:1E3};var localizedStrings={dateBasedRule:"",dateBasedRuleYouNeedAPIToEdit:"",onCurrentVersion:"",onPreviousVersions:"",daysAfterExpiredOverwritten:"",archiveToGlaicerStorageClass:"",permanentlyDelete:"",expire:"",doNothing:"",archiveOnly:"",
deleteOnly:"",deleteString:"",expireOnly:"",archiveAndThenExpire:"",archiveAndThenDelete:"",ruleFor:"",ruleForTheEntireBucket:"",step1ChooseRuleTarget:"",step2ConfigureRules:"",step3ReviewAndName:""};self.LocalizedStrings=ko.mapping.fromJS(localizedStrings);self.LocalizedMessages={aLifecycleConfigurationCanHaveAtMostNumberRules:""};return self}();function LifecycleSubpanelViewModel(localizedStrings,actionTypes){var self=this;var sharedWithRuleWizardInitialState={displayedBucket:"",isTransitionToGlacierEnabled:false,isVersioningOn:false,isVersioningEnabled:false};self.sharedWithRuleWizard=ko.mapping.fromJS(sharedWithRuleWizardInitialState);self.hasGetVersioningPermission=ko.observable(true);self.hasGetPermission=ko.observable(true);self.maybeUnexpectedError=ko.observable("");self.rules=ko.observableArray([]);self.removeRule=function(rule){self.rules.remove(rule)};
self.addRule=function(rule){self.rules.push(rule)};var subscribersToEditRule=[];self.subscribeToEditRule=function(subscriber){if(typeof subscriber==="function")subscribersToEditRule.push(subscriber)};self.editRule=function(rule){for(var i=0;i<subscribersToEditRule.length;i++)subscribersToEditRule[i](rule)};self.generateDateBasedRulePopoverHTML=function(rule){if(rule.isActionOnCurrentVersionExistsAndUseDates()){var actions=rule.actions();var popoverHTML=document.createElement("div");var currentVersionActionTableHTML=
document.createElement("table");var previousVersionsActionTableHTML=null;for(var i=0;i<actions.length;i++){var action=actions[i];if(action.action()===actionTypes.Transition){var archiveString=localizedStrings.archiveToGlaicerStorageClass()+": ";var archiveRow=window.Utility.generateHTMLTableRowElement([archiveString,action.date()]);currentVersionActionTableHTML.appendChild(archiveRow)}else if(action.action()===actionTypes.Expiration){var deleteOrExpireString="";if(!self.sharedWithRuleWizard.isVersioningOn())deleteOrExpireString=
localizedStrings.permanentlyDelete()+": ";else deleteOrExpireString=localizedStrings.expire()+": ";var deleteOrExpireRow=window.Utility.generateHTMLTableRowElement([deleteOrExpireString,action.date()]);currentVersionActionTableHTML.appendChild(deleteOrExpireRow)}else if(action.action()===actionTypes.NonCurrentVersionTransition){previousVersionsActionTableHTML=document.createElement("table");var archiveString=localizedStrings.archiveToGlaicerStorageClass()+": ";var dayString=action.days()+" "+localizedStrings.daysAfterExpiredOverwritten();
var archiveRow=window.Utility.generateHTMLTableRowElement([archiveString,dayString]);previousVersionsActionTableHTML.appendChild(archiveRow)}else if(action.action()===actionTypes.NonCurrentVersionExpiration){if(!previousVersionsActionTableHTML)previousVersionsActionTableHTML=document.createElement("table");var deleteString=localizedStrings.permanentlyDelete()+": ";var dayString=action.days()+" "+localizedStrings.daysAfterExpiredOverwritten();var deleteRow=window.Utility.generateHTMLTableRowElement([deleteString,
dayString]);previousVersionsActionTableHTML.appendChild(deleteRow)}}if(previousVersionsActionTableHTML){var currentVersionSectionTitle=document.createElement("h4");currentVersionSectionTitle.innerHTML=localizedStrings.onCurrentVersion();popoverHTML.appendChild(currentVersionSectionTitle);popoverHTML.appendChild(currentVersionActionTableHTML);var previousVersionsSectionTitle=document.createElement("h4");previousVersionsSectionTitle.innerHTML=localizedStrings.onPreviousVersions();popoverHTML.appendChild(previousVersionsSectionTitle);
popoverHTML.appendChild(previousVersionsActionTableHTML)}else popoverHTML.appendChild(currentVersionActionTableHTML);popoverHTML.appendChild(document.createElement("br"));popoverHTML.appendChild(document.createTextNode(localizedStrings.dateBasedRuleYouNeedAPIToEdit()));return popoverHTML}else return""}};function LifecycleSubpanelController(vmLifecycleSubpanel){var self=this;self.indexOfRuleBeingEdited=null;vmLifecycleSubpanel.subscribeToEditRule(function(rule){self.indexOfRuleBeingEdited=vmLifecycleSubpanel.rules.indexOf(rule)});self.clearRules=function(){vmLifecycleSubpanel.rules([])};self.updateRules=function(lifecycleConfiguration){if(!lifecycleConfiguration)self.clearRules();else ko.mapping.fromJS(lifecycleConfiguration,{},vmLifecycleSubpanel)};self.getRules=function(){if(vmLifecycleSubpanel.rules().length>
0)return ko.mapping.toJS(vmLifecycleSubpanel);else{var formData={rules:[]};return formData}};self.setIsTransitionToGlacierEnabled=function(isTransitionToGlacierEnabled){vmLifecycleSubpanel.sharedWithRuleWizard.isTransitionToGlacierEnabled(isTransitionToGlacierEnabled)};self.setDisplayedBucket=function(bucketName){vmLifecycleSubpanel.sharedWithRuleWizard.displayedBucket(bucketName)};self.setVersioningStatus=function(versioningStatus){if(versioningStatus){vmLifecycleSubpanel.sharedWithRuleWizard.isVersioningOn(versioningStatus.isOn);
vmLifecycleSubpanel.sharedWithRuleWizard.isVersioningEnabled(versioningStatus.isEnabled);vmLifecycleSubpanel.hasGetVersioningPermission(versioningStatus.hasGetPermission)}}};window.S3Console.Constants.PropertiesPanel.LifecycleSubpanel.RuleWizard=function(lifecycleStrings){var self={defaultRule:{isEnabled:true,name:"",isForEntireBucket:true,prefix:""},maxDays:ko.observable(2147483647),decimalRadix:10};self.WizardSteps=[{index:1,name:lifecycleStrings.step1ChooseRuleTarget},{index:2,name:lifecycleStrings.step2ConfigureRules},{index:3,name:lifecycleStrings.step3ReviewAndName}];self.AllPossibleLifecyleOptionsEnum={DoNothing:{name:"DoNothing",displayName:lifecycleStrings.doNothing,
doTransition:false,doExpiration:false},ArchiveOnly:{name:"ArchiveOnly",displayName:lifecycleStrings.archiveOnly,doTransition:true,doExpiration:false},DeleteOnly:{name:"DeleteOnly",displayName:lifecycleStrings.deleteOnly,doTransition:false,doExpiration:true},Delete:{name:"Delete",displayName:lifecycleStrings.deleteString,doTransition:false,doExpiration:true},ExpireOnly:{name:"ExpireOnly",displayName:lifecycleStrings.expireOnly,doTransition:false,doExpiration:true},Expire:{name:"Expire",displayName:lifecycleStrings.expire,
doTransition:false,doExpiration:true},ArchiveAndThenExpire:{name:"ArchiveAndThenExpire",displayName:lifecycleStrings.archiveAndThenExpire,doTransition:true,doExpiration:true},ArchiveAndThenDelete:{name:"ArchiveAndThenDelete",displayName:lifecycleStrings.archiveAndThenDelete,doTransition:true,doExpiration:true}};self.LifecyleOptions={ArchiveAndDelete:[self.AllPossibleLifecyleOptionsEnum.DoNothing,self.AllPossibleLifecyleOptionsEnum.ArchiveOnly,self.AllPossibleLifecyleOptionsEnum.DeleteOnly,self.AllPossibleLifecyleOptionsEnum.ArchiveAndThenDelete],
ArchiveAndExpire:[self.AllPossibleLifecyleOptionsEnum.DoNothing,self.AllPossibleLifecyleOptionsEnum.ArchiveOnly,self.AllPossibleLifecyleOptionsEnum.ExpireOnly,self.AllPossibleLifecyleOptionsEnum.ArchiveAndThenExpire],Delete:[self.AllPossibleLifecyleOptionsEnum.DoNothing,self.AllPossibleLifecyleOptionsEnum.Delete],Expire:[self.AllPossibleLifecyleOptionsEnum.DoNothing,self.AllPossibleLifecyleOptionsEnum.Expire]};return self}(window.S3Console.Constants.PropertiesPanel.LifecycleSubpanel.LocalizedStrings);function LifecycleRuleWizardViewModel(actionTypes,ruleWizardConstants,sharedWithLifecycleSubpanel){var self=this;self.ruleWizardConstants=ruleWizardConstants;self.vmRuleWizardStepControl=new WizardStepControlViewModel(ruleWizardConstants.WizardSteps);self.initialState={displayError:[],isEditingExistingRule:false};ko.mapping.fromJS(self.initialState,{},self);ko.mapping.fromJS(ruleWizardConstants.defaultRule,{},self);self.isVersioningOn=ko.computed(function(){return sharedWithLifecycleSubpanel.isVersioningOn()});
self.isVersioningEnabled=ko.computed(function(){return sharedWithLifecycleSubpanel.isVersioningEnabled()});self.displayedBucket=ko.computed(function(){return sharedWithLifecycleSubpanel.displayedBucket()});self.isTransitionToGlacierEnabled=ko.computed(function(){return sharedWithLifecycleSubpanel.isTransitionToGlacierEnabled()});self.selectedOptionOnCurrentVersion=ko.observable(ruleWizardConstants.AllPossibleLifecyleOptionsEnum.DoNothing);self.selectedOptionOnPreviousVersions=ko.observable(ruleWizardConstants.AllPossibleLifecyleOptionsEnum.DoNothing);
self.ruleOptionsOnCurrentVersion=ko.computed(function(){if(self.isTransitionToGlacierEnabled())if(self.isVersioningOn())return ruleWizardConstants.LifecyleOptions.ArchiveAndExpire;else return ruleWizardConstants.LifecyleOptions.ArchiveAndDelete;else if(self.isVersioningOn())return ruleWizardConstants.LifecyleOptions.Expire;else return ruleWizardConstants.LifecyleOptions.Delete});self.ruleOptionsOnPreviousVersions=ko.computed(function(){if(self.isTransitionToGlacierEnabled())return ruleWizardConstants.LifecyleOptions.ArchiveAndDelete;
else return ruleWizardConstants.LifecyleOptions.Delete});self.actions={TRANSITION:{actionType:actionTypes.Transition,target:"GLACIER",days:ko.numericObservable(""),enabled:ko.computed(function(){return self.selectedOptionOnCurrentVersion().doTransition}),isForCurrentVersion:true},EXPIRATION:{actionType:actionTypes.Expiration,target:"",days:ko.numericObservable(""),enabled:ko.computed(function(){return self.selectedOptionOnCurrentVersion().doExpiration}),isForCurrentVersion:true},NONCURRENTVERSIONTRANSITION:{actionType:actionTypes.NonCurrentVersionTransition,
target:"GLACIER",days:ko.numericObservable(""),enabled:ko.computed(function(){return self.selectedOptionOnPreviousVersions().doTransition}),isForCurrentVersion:false},NONCURRENTVERSIONEXPIRATION:{actionType:actionTypes.NonCurrentVersionExpiration,target:"",days:ko.numericObservable(""),enabled:ko.computed(function(){return self.selectedOptionOnPreviousVersions().doExpiration}),isForCurrentVersion:false}};self.showPrefixCannotBeEmptyMessage=ko.computed(function(){return!self.isForEntireBucket()&&self.prefix().length===
0});self.vmStep1=new vmRuleWizardStep1(self);self.vmStep2=new vmRuleWizardStep2(self,ruleWizardConstants);self.vmStep3=new vmRuleWizardStep3(self);function vmRuleWizardStep1(parent){var self=this;self.enableNextStep=ko.computed(function(){return!parent.showPrefixCannotBeEmptyMessage()})}function vmRuleWizardStep2(parent,ruleWizardConstants){var self=this;var initialState={validateBeforeNextStep:false,currentVersionShowExample:false,previousVersionsShowExample:false};ko.mapping.fromJS(initialState,
{},self);self.clear=function(){ko.mapping.fromJS(initialState,{},self)};self.currentVersionShowExampleOn=function(){self.currentVersionShowExample(true)};self.currentVersionShowExampleOff=function(){self.currentVersionShowExample(false)};self.previousVersionsShowExampleOn=function(){self.previousVersionsShowExample(true)};self.previousVersionsShowExampleOff=function(){self.previousVersionsShowExample(false)};self.noActionSelectedError=ko.computed(function(){return!parent.selectedOptionOnCurrentVersion().doTransition&&
!parent.selectedOptionOnCurrentVersion().doExpiration&&!parent.selectedOptionOnPreviousVersions().doTransition&&!parent.selectedOptionOnPreviousVersions().doExpiration});self.atLeastOneSelectedActionIsNotNumberError=ko.computed(function(){var transitionDays,expirationDays;if(parent.selectedOptionOnCurrentVersion().doTransition){transitionDays=parent.actions.TRANSITION.days();if(typeof transitionDays!="number")return true}if(parent.selectedOptionOnCurrentVersion().doExpiration){expirationDays=parent.actions.EXPIRATION.days();
if(typeof expirationDays!="number")return true}if(parent.selectedOptionOnPreviousVersions().doTransition){transitionDays=parent.actions.NONCURRENTVERSIONTRANSITION.days();if(typeof transitionDays!="number")return true}if(parent.selectedOptionOnPreviousVersions().doExpiration){expirationDays=parent.actions.NONCURRENTVERSIONEXPIRATION.days();if(typeof expirationDays!="number")return true}return false});self.enableNextStep=ko.computed(function(){return!self.noActionSelectedError()&&!self.atLeastOneSelectedActionIsNotNumberError()});
self.showTransitionDaysHasToBeNoneNegativeIntegerMessage=ko.computed(function(){if(!self.validateBeforeNextStep()||!parent.selectedOptionOnCurrentVersion().doTransition)return false;var transitionDays=parent.actions.TRANSITION.days();if(typeof transitionDays==="number"&&transitionDays%1===0&&transitionDays>=0)return false;return true});self.showTransitionDaysHasToBeLessThanMaxDaysMessage=ko.computed(function(){if(!self.validateBeforeNextStep()||!parent.selectedOptionOnCurrentVersion().doTransition||
self.showTransitionDaysHasToBeNoneNegativeIntegerMessage())return false;var transitionDays=parent.actions.TRANSITION.days();if(typeof transitionDays==="number"&&transitionDays%1===0&&transitionDays<=ruleWizardConstants.maxDays())return false;return true});self.showExpirationDaysHasToBeAPositiveIntegerMessage=ko.computed(function(){if(!self.validateBeforeNextStep()||!parent.selectedOptionOnCurrentVersion().doExpiration)return false;var expirationDays=parent.actions.EXPIRATION.days();if(typeof expirationDays===
"number"&&expirationDays%1===0&&expirationDays>0)return false;return true});self.showExpirationDaysHasToBeLessThanMaxDaysMessage=ko.computed(function(){if(!self.validateBeforeNextStep()||!parent.selectedOptionOnCurrentVersion().doExpiration||self.showExpirationDaysHasToBeAPositiveIntegerMessage())return false;var expirationDays=parent.actions.EXPIRATION.days();if(typeof expirationDays==="number"&&expirationDays%1===0&&expirationDays<=ruleWizardConstants.maxDays())return false;return true});self.showExpireMustBeBiggerThanTransitionMessage=
ko.computed(function(){if(!self.validateBeforeNextStep()||self.showTransitionDaysHasToBeNoneNegativeIntegerMessage()||self.showTransitionDaysHasToBeLessThanMaxDaysMessage()||self.showExpirationDaysHasToBeAPositiveIntegerMessage()||self.showExpirationDaysHasToBeLessThanMaxDaysMessage())return false;if(parent.selectedOptionOnCurrentVersion().doTransition&&parent.selectedOptionOnCurrentVersion().doExpiration)if(parent.actions.EXPIRATION.days()<=parent.actions.TRANSITION.days())return true;return false});
self.showNoncurrentVersionTransitionDaysHasToBeNoneNegativeIntegerMessage=ko.computed(function(){if(!self.validateBeforeNextStep()||!parent.selectedOptionOnPreviousVersions().doTransition)return false;var transitionDays=parent.actions.NONCURRENTVERSIONTRANSITION.days();if(typeof transitionDays==="number"&&transitionDays%1===0&&transitionDays>=0)return false;return true});self.showNoncurrentVersionTransitionDaysHasToBeLessThanMaxDaysMessage=ko.computed(function(){if(!self.validateBeforeNextStep()||
!parent.selectedOptionOnPreviousVersions().doTransition||self.showNoncurrentVersionTransitionDaysHasToBeNoneNegativeIntegerMessage())return false;var transitionDays=parent.actions.NONCURRENTVERSIONTRANSITION.days();if(typeof transitionDays==="number"&&transitionDays%1===0&&transitionDays<=ruleWizardConstants.maxDays())return false;return true});self.showNoncurrentVersionExpirationDaysHasToBeAPositiveIntegerMessage=ko.computed(function(){if(!self.validateBeforeNextStep()||!parent.selectedOptionOnPreviousVersions().doExpiration)return false;
var expirationDays=parent.actions.NONCURRENTVERSIONEXPIRATION.days();if(typeof expirationDays==="number"&&expirationDays%1===0&&expirationDays>0)return false;return true});self.showNoncurrentVersionExpirationDaysHasToBeLessThanMaxDaysMessage=ko.computed(function(){if(!self.validateBeforeNextStep()||!parent.selectedOptionOnPreviousVersions().doExpiration||self.showNoncurrentVersionExpirationDaysHasToBeAPositiveIntegerMessage())return false;var expirationDays=parent.actions.NONCURRENTVERSIONEXPIRATION.days();
if(typeof expirationDays==="number"&&expirationDays%1===0&&expirationDays<=ruleWizardConstants.maxDays())return false;return true});self.showNoncurrentVersionExpireMustBeBiggerThanTransitionMessage=ko.computed(function(){if(!self.validateBeforeNextStep()||self.showNoncurrentVersionTransitionDaysHasToBeNoneNegativeIntegerMessage()||self.showNoncurrentVersionExpirationDaysHasToBeAPositiveIntegerMessage())return false;if(parent.selectedOptionOnPreviousVersions().doTransition&&parent.selectedOptionOnPreviousVersions().doExpiration)if(parent.actions.NONCURRENTVERSIONEXPIRATION.days()<=
parent.actions.NONCURRENTVERSIONTRANSITION.days())return true;return false});self.numberValidationPassed=ko.computed(function(){return!self.showTransitionDaysHasToBeNoneNegativeIntegerMessage()&&!self.showTransitionDaysHasToBeLessThanMaxDaysMessage()&&!self.showExpirationDaysHasToBeAPositiveIntegerMessage()&&!self.showExpirationDaysHasToBeLessThanMaxDaysMessage()&&!self.showExpireMustBeBiggerThanTransitionMessage()&&!self.showNoncurrentVersionTransitionDaysHasToBeNoneNegativeIntegerMessage()&&!self.showNoncurrentVersionTransitionDaysHasToBeNoneNegativeIntegerMessage()&&
!self.showNoncurrentVersionTransitionDaysHasToBeLessThanMaxDaysMessage()&&!self.showNoncurrentVersionExpirationDaysHasToBeAPositiveIntegerMessage()&&!self.showNoncurrentVersionExpirationDaysHasToBeLessThanMaxDaysMessage()&&!self.showNoncurrentVersionExpireMustBeBiggerThanTransitionMessage()});self.validateThenGotoNextStep=function(){self.validateBeforeNextStep(true);self.currentVersionShowExample(false);self.previousVersionsShowExample(false);if(self.numberValidationPassed()){self.clear();parent.vmRuleWizardStepControl.goToNextStep()}}}
function vmRuleWizardStep3(parent){var self=this;var initialState={editTargetEnabled:false,isInSavingState:false};ko.mapping.fromJS(initialState,{},self);self.clear=function(){ko.mapping.fromJS(initialState,{},self)};self.editTargetEnabledOn=function(){self.editTargetEnabled(true)};self.editTargetEnabledOff=function(){self.editTargetEnabled(false)};self.enableSave=ko.computed(function(){return!parent.showPrefixCannotBeEmptyMessage()&&!self.isInSavingState()});self.cleanErrorThenGoPreviousStep=function(){parent.displayError([]);
parent.vmRuleWizardStepControl.goToPreviousStep()}}};function LifecycleRuleWizardController(vmRuleWizard,vmLifecycleSubpanel,lifecycleConstants){var self=this;self.openWizardForAddingNewRule=function(){if(vmLifecycleSubpanel.rules().length>=lifecycleConstants.MaxRules)Ui.message(lifecycleConstants.LocalizedMessages.aLifecycleConfigurationCanHaveAtMostNumberRules(lifecycleConstants.MaxRules));else{vmRuleWizard.vmRuleWizardStepControl.curStep(1);enableClearDaysWhenOptionsChange=true;showWizard()}};self.openWizardForEditingExistingRule=function(ruleToEdit){vmRuleWizard.isEditingExistingRule(true);
vmRuleWizard.isEnabled(ruleToEdit.isEnabled());vmRuleWizard.prefix(ruleToEdit.prefix());vmRuleWizard.isForEntireBucket(ruleToEdit.isForEntireBucket());vmRuleWizard.name(ruleToEdit.name());var doTransition=false;var doExpiration=false;var doNonCurrentVersionTransition=false;var doNonCurrentVersionExpiration=false;var actionsInRulesToEdit=ruleToEdit.actions();for(var i=0;i<actionsInRulesToEdit.length;i++){var actionInRulesToEdit=actionsInRulesToEdit[i];switch(actionInRulesToEdit.action()){case lifecycleConstants.ActionTypes.Transition:doTransition=
true;vmRuleWizard.actions.TRANSITION.days(parseInt(actionInRulesToEdit.days(),lifecycleConstants.decimalRadix));break;case lifecycleConstants.ActionTypes.Expiration:doExpiration=true;vmRuleWizard.actions.EXPIRATION.days(parseInt(actionInRulesToEdit.days(),lifecycleConstants.decimalRadix));break;case lifecycleConstants.ActionTypes.NonCurrentVersionTransition:doNonCurrentVersionTransition=true;vmRuleWizard.actions.NONCURRENTVERSIONTRANSITION.days(parseInt(actionInRulesToEdit.days(),lifecycleConstants.decimalRadix));
break;case lifecycleConstants.ActionTypes.NonCurrentVersionExpiration:doNonCurrentVersionExpiration=true;vmRuleWizard.actions.NONCURRENTVERSIONEXPIRATION.days(parseInt(actionInRulesToEdit.days(),lifecycleConstants.decimalRadix));break;default:console.log("Unknown action type: "+actionInRulesToEdit.action());break}}enableClearDaysWhenOptionsChange=false;vmRuleWizard.selectedOptionOnCurrentVersion(getLifecyleOptionOnCurrentVersionFromConfig(doTransition,doExpiration));vmRuleWizard.selectedOptionOnPreviousVersions(getLifecyleOptionOnPreviousVersionFromConfig(doNonCurrentVersionTransition,
doNonCurrentVersionExpiration));enableClearDaysWhenOptionsChange=true;vmRuleWizard.vmRuleWizardStepControl.curStep(3);showWizard()};self.closeWizard=function(){clearWizard();hideWizard()};self.getGeneratedRule=function(){var actions=[];for(var actionType in vmRuleWizard.actions){var currAction=vmRuleWizard.actions[actionType];if(currAction.enabled())actions.push(copyAction(currAction))}if(vmRuleWizard.name().length===0){var autoGeneratedName;if(vmRuleWizard.isForEntireBucket())autoGeneratedName=lifecycleConstants.LocalizedStrings.ruleForTheEntireBucket();
else autoGeneratedName=lifecycleConstants.LocalizedStrings.ruleFor()+" : "+vmRuleWizard.prefix();vmRuleWizard.name(autoGeneratedName)}var generatedRule={isEnabled:vmRuleWizard.isEnabled(),name:vmRuleWizard.name(),isForEntireBucket:vmRuleWizard.isForEntireBucket(),prefix:vmRuleWizard.prefix(),isActionOnCurrentVersionExistsAndUseDates:false,actions:actions};return generatedRule};self.isInSavingState=function(isInSavingState){vmRuleWizard.vmStep3.isInSavingState(isInSavingState)};var showWizard=function(){Ui.showModal($("#lifecycle-rule-modal"),
true,false,"Low",true)};var hideWizard=function(){Ui.showModal($("#lifecycle-rule-modal"),false,false)};var clearDaysInWizard=function(clearForCurrentVersion,clearForPreviousVersions){for(var actionType in vmRuleWizard.actions){var currAction=vmRuleWizard.actions[actionType];if(clearForCurrentVersion&&currAction.isForCurrentVersion||clearForPreviousVersions&&!currAction.isForCurrentVersion)currAction.days("")}};var clearWizard=function(){ko.mapping.fromJS(vmRuleWizard.initialState,{},vmRuleWizard);
ko.mapping.fromJS(lifecycleConstants.RuleWizard.defaultRule,{},vmRuleWizard);vmRuleWizard.selectedOptionOnCurrentVersion(lifecycleConstants.RuleWizard.AllPossibleLifecyleOptionsEnum.DoNothing);vmRuleWizard.selectedOptionOnPreviousVersions(lifecycleConstants.RuleWizard.AllPossibleLifecyleOptionsEnum.DoNothing);clearDaysInWizard(true,true);vmRuleWizard.vmStep2.clear();vmRuleWizard.vmStep3.clear()};var getLifecyleOptionOnCurrentVersionFromConfig=function(doTransition,doExpiration){for(var i=0;i<vmRuleWizard.ruleOptionsOnCurrentVersion().length;i++){var option=
vmRuleWizard.ruleOptionsOnCurrentVersion()[i];if(doTransition==option.doTransition&&doExpiration==option.doExpiration)return option}console.log("Cannot find lifecycle option with:"+"doTransition = "+doTransition+"and doExpiration = "+doExpiration+"!")};var getLifecyleOptionOnPreviousVersionFromConfig=function(doTransition,doExpiration){for(var i=0;i<vmRuleWizard.ruleOptionsOnPreviousVersions().length;i++){var option=vmRuleWizard.ruleOptionsOnPreviousVersions()[i];if(doTransition==option.doTransition&&
doExpiration==option.doExpiration)return option}console.log("Cannot find lifecycle option with:"+"doTransition = "+doTransition+"and doExpiration = "+doExpiration+"!")};var copyAction=function(action){var copiedAction={action:action.actionType,target:action.target,days:""+action.days()};return copiedAction};vmLifecycleSubpanel.subscribeToEditRule(function(rule){self.openWizardForEditingExistingRule(rule)});var enableClearDaysWhenOptionsChange=true;vmRuleWizard.selectedOptionOnCurrentVersion.subscribe(function(newValue){if(enableClearDaysWhenOptionsChange){clearDaysInWizard(true,
false);vmRuleWizard.vmStep2.validateBeforeNextStep(false)}});vmRuleWizard.selectedOptionOnPreviousVersions.subscribe(function(newValue){if(enableClearDaysWhenOptionsChange){clearDaysInWizard(false,true);vmRuleWizard.vmStep2.validateBeforeNextStep(false)}})};window.S3Console.Constants.PropertiesPanel.VersioningSubpanel={VersioningStatusEnum:{VersioningOff:{isOn:false,isEnabled:false},VersioningEnabled:{isOn:true,isEnabled:true},VersioningSuspended:{isOn:true,isEnabled:false}}};VersioningSubpanelViewModel=function(){var self=this;self.initialState={isOn:false,isEnabled:false,displayError:"",isInSavingState:false,hasGetPermission:true};ko.mapping.fromJS(self.initialState,{},self)};VersioningSubpanelController=function(vmVersioningSubpanel,versioningConstants){var self=this;self.userInput=null;self.enableVersioning=function(){self.userInput=versioningConstants.VersioningStatusEnum.VersioningEnabled;Ui.PropertiesPanel.VersioningSubpanel.save()};self.suspendVersioning=function(){self.userInput=versioningConstants.VersioningStatusEnum.VersioningSuspended;Ui.PropertiesPanel.VersioningSubpanel.save()};self.updateViewModel=function(VersioningConfig){ko.mapping.fromJS(VersioningConfig,
{},vmVersioningSubpanel)};self.updateViewModelFromUserInput=function(){ko.mapping.fromJS(self.userInput,{},vmVersioningSubpanel)};self.isInSavingState=function(isInSavingState){vmVersioningSubpanel.isInSavingState(isInSavingState)};self.clear=function(){ko.mapping.fromJS(vmVersioningSubpanel.initialState,{},vmVersioningSubpanel)}};window.S3Console.Constants.PropertiesPanel.NotificationSubpanel=function(){var self={GetNotificationURL:"/s3/cws/s3/GetBucketNotification",PutAllNotificationURL:"/s3/cws/s3/PutAllBucketNotification",DeleteNotificationURL:"/s3/cws/s3/DeleteBucketNotification",ListTopicsURL:"/s3/cws/sns/ListTopics",ListQueuesURL:"/s3/cws/sqs/ListQueues",MaxIdLength:255,DestinationTypes:{Topic:"Topic",Queue:"Queue",CloudFunction:"CloudFunction"},DisplayDestinationService:{Topic:"SNS",Queue:"SQS",CloudFunction:"Lambda"},
EventEnum:{"s3:ObjectCreated:*":{id:"s3:ObjectCreated:*",text:"ObjectCreated (All)"},"s3:ObjectCreated:Put":{id:"s3:ObjectCreated:Put",text:"Put"},"s3:ObjectCreated:Post":{id:"s3:ObjectCreated:Post",text:"Post"},"s3:ObjectCreated:Copy":{id:"s3:ObjectCreated:Copy",text:"Copy"},"s3:ObjectCreated:CompleteMultipartUpload":{id:"s3:ObjectCreated:CompleteMultipartUpload",text:"CompleteMultiPartUpload"},"s3:ReducedRedundancyLostObject":{id:"s3:ReducedRedundancyLostObject",text:"RRSObjectLost"}},JSONFieldNames:{S3NotificationConfig:{type:"type",
id:"id",previousId:"previousId",events:"events",objectPrefixes:"objectPrefixes",snsTopicARN:"topicARN",sqsQueueARN:"queueARN",lambdaCloudFunctionARN:"cloudFunctionARN",lambdaInvocationRoleARN:"invocationRoleARN"}},placeHolderArnPrefix:"arn:"+window.Configuration.arnAWSId+":"};self.ErrorMessageFromS3={regionMismatch:"The notification destination service region is not valid for the bucket location constraint"};self.EventOptions=[self.EventEnum["s3:ReducedRedundancyLostObject"],{id:self.EventEnum["s3:ObjectCreated:*"].id,
text:self.EventEnum["s3:ObjectCreated:*"].text,children:[self.EventEnum["s3:ObjectCreated:Put"],self.EventEnum["s3:ObjectCreated:Post"],self.EventEnum["s3:ObjectCreated:Copy"],self.EventEnum["s3:ObjectCreated:CompleteMultipartUpload"]]}];var localizedStrings={snsTopic:"",sqsQueue:"",lambdaFunction:"",invocationRole:"",addSNSArn:"",addSQSArn:"",newCloudFunction:"",addCloudFunctionArn:"",regionMismatch:"",ifNoLongerNeededCancelTheEditAndDeleteHighlightedConfigs:"",ifNoLongerNeededDeleteHighlightedConfigs:""};
self.LocalizedStrings=ko.mapping.fromJS(localizedStrings);self.LocalizedMessages={unableToValidateExistingConfiguration:"",unableToValidateInvocationRoleOnExistingConfiguration:""};self.snsMinimalOptions=ko.computed(function(){return{"addSNSArn":{id:"addSNSArn",text:self.LocalizedStrings.addSNSArn()}}});self.sqsMinimalOptions=ko.computed(function(){return{"addSQSArn":{id:"addSQSArn",text:self.LocalizedStrings.addSQSArn()}}});self.lambdaMinimalOptions=ko.computed(function(){return{"addCloudFunctionArn":{id:"addCloudFunctionArn",
text:self.LocalizedStrings.addCloudFunctionArn()}}});return self}();function NotificationSubpanelViewModel(useEventNewUi,vmPropertiesPanel,notificationConstants){var self=this;self.initialState={isInSavingState:false,hasGetPermission:true,hasGetNotificationError:false,hasErrorFromServer:false,errorFromServerMessageToShow:"",errorFromServerOrigin:"",isAddButtonClicked:false};ko.mapping.fromJS(self.initialState,{},self);self.isNewUi=ko.observable(useEventNewUi);self.notificationForm=new NotificationFormViewModel(vmPropertiesPanel,notificationConstants);self.ConfigurationsTable=
new ConfigurationsTableViewModel;var changeTrackerObject={id:self.notificationForm.id,events:self.notificationForm.events,prefix:self.notificationForm.prefix,snsTopicSelection:self.notificationForm.SNSData.TopicSelection,sqsQueueSelection:self.notificationForm.SQSData.QueueSelection,cloudFunctionARN:self.notificationForm.CloudFunctionData.cloudFunctionARN,invocationRoleARN:self.notificationForm.CloudFunctionData.invocationRoleARN,ConfigurationsTable:self.ConfigurationsTable};self.tracker=new ChangeTracker(changeTrackerObject);
self.configIdIsNotUnique=ko.computed(function(){var currentId=self.notificationForm.id();var configs=self.ConfigurationsTable.configs();for(var i=0;i<configs.length;i++)if(currentId==configs[i].id()&&!configs[i].isConfigBeingEdited())return true;return false});self.hasClientValidationError=ko.computed(function(){return self.notificationForm.idExceedsMaxLength()||self.configIdIsNotUnique()||self.notificationForm.topicARNHasInvalidCharacters()||self.notificationForm.queueARNHasInvalidCharacters()||
self.notificationForm.cloudFunctionARNHasInvalidCharacters()||self.notificationForm.cloudFunctionIAMARNHasInvalidCharacters()});self.isAddModeOn=ko.computed(function(){return self.isAddButtonClicked()||self.ConfigurationsTable.configs().length===0});self.showSaveCancelButton=ko.computed(function(){return self.ConfigurationsTable.isDeleteModeOn()||self.isAddModeOn()||self.ConfigurationsTable.isEditModeOn()});self.isSaveButtonEnabled=ko.computed(function(){if(self.isInSavingState())return false;if(self.hasClientValidationError())return false;
if(self.ConfigurationsTable.isDeleteModeOn())return true;if(self.isAddModeOn()||self.ConfigurationsTable.isEditModeOn()){if(self.notificationForm.events().length===0)return false;if(notificationConstants.DestinationTypes.Topic==self.notificationForm.type()){if(self.notificationForm.SNSData.isTopicARNVisible()&&""!==self.notificationForm.SNSData.TopicSelection.topicARN())return true;if(self.notificationForm.SNSData.isExistingTopicSelected())return true}else if(notificationConstants.DestinationTypes.Queue==
self.notificationForm.type()){if(self.notificationForm.SQSData.isQueueARNVisible()&&""!==self.notificationForm.SQSData.QueueSelection.queueARN())return true;if(self.notificationForm.SQSData.isExistingQueueSelected())return true}else if(notificationConstants.DestinationTypes.CloudFunction==self.notificationForm.type())if(""!==self.notificationForm.CloudFunctionData.cloudFunctionARN()&&""!==self.notificationForm.CloudFunctionData.invocationRoleARN())return true}return false});self.canDeleteAnotherConfig=
function(){return!self.isAddModeOn()&&!self.ConfigurationsTable.isEditModeOn()};self.canEditAnotherConfig=function(){return!self.isAddModeOn()&&!self.ConfigurationsTable.isEditModeOn()&&!self.ConfigurationsTable.isDeleteModeOn()};self.markConfigForDeletionOnSave=function(config){if(!self.canDeleteAnotherConfig())return;self.ConfigurationsTable.deletedConfigs.push(config);config.isConfigMarkedForDeletion(true)};self.editNotificationHandler=function(config){if(!self.canEditAnotherConfig())return;self.ConfigurationsTable.configBeingEdited(config);
config.isConfigBeingEdited(true);self.notificationForm.populateFormWithConfig(config);self.tracker().markCurrentStateAsClean()};self.addNotificationHandler=function(){self.isAddButtonClicked(true);self.tracker().markCurrentStateAsClean()};function ConfigurationsTableViewModel(){var self=this;self.configs=ko.observableArray([]);self.deletedConfigs=ko.observableArray([]);self.configsWithValidationError=ko.observableArray([]);self.configBeingEdited=ko.observable(null);self.isTableVisible=ko.computed(function(){return 0<
self.configs().length});self.isEditModeOn=ko.computed(function(){return null!=self.configBeingEdited()});self.isDeleteModeOn=ko.computed(function(){return self.deletedConfigs().length>0});self.clearValidationError=function(){for(var configCounter=0;configCounter<self.configsWithValidationError().length;configCounter++)self.configsWithValidationError()[configCounter].hasValidationError(false);self.configsWithValidationError.removeAll()};self.rollbackMutation=function(){if(null!==self.configBeingEdited()){self.configBeingEdited().isConfigBeingEdited(false);
self.configBeingEdited(null)}for(var configCounter=0;configCounter<self.deletedConfigs().length;configCounter++)self.deletedConfigs()[configCounter].isConfigMarkedForDeletion(false);self.deletedConfigs.removeAll();self.clearValidationError()}}function NotificationFormViewModel(vmPropertiesPanel){var self=this;self.initialState={id:"",events:[],objectPrefixes:[],type:notificationConstants.DestinationTypes.Topic};self.isNotificationToLambdaEnabled=ko.computed(function(){return window.Configuration.locationIsNotificationToLambdaEnabledMap[vmPropertiesPanel.locationConstraint()]});
ko.mapping.fromJS(self.initialState,{},self);var cleanServerValidationState={eventsHasError:false,idHasError:false,topicARNHasError:false,existingTopicHasValidationError:false,queueARNHasError:false,existingQueueHasValidationError:false,cloudFunctionARNHasError:false,invocationRoleARNHasError:false};self.serverValidation=ko.mapping.fromJS(cleanServerValidationState);self.clearServerValidation=function(){ko.mapping.fromJS(cleanServerValidationState,{},self.serverValidation)};self.isSNSSelected=ko.computed(function(){return notificationConstants.DestinationTypes.Topic==
self.type()});self.isSQSSelected=ko.computed(function(){return notificationConstants.DestinationTypes.Queue==self.type()});self.isCloudFunctionSelected=ko.computed(function(){return notificationConstants.DestinationTypes.CloudFunction==self.type()});self.SNSData=new SNSData;self.SQSData=new SQSData;self.CloudFunctionData=new CloudFunctionData;self.populateFormWithConfig=function(config){self.id(config.id());self.events(config.events());self.objectPrefixes(config.prefixes());self.type(config.destination());
if(notificationConstants.DestinationTypes.Topic==config.destination())setSNSForm(config.arn());else if(notificationConstants.DestinationTypes.Queue==config.destination())setSQSForm(config.arn());else if(notificationConstants.DestinationTypes.CloudFunction==config.destination()){self.CloudFunctionData.cloudFunctionARN(config.arn());self.CloudFunctionData.invocationRoleARN(config.iamArn())}};var setSNSForm=function(topicArn){var topics=self.SNSData.TopicList.existingTopics();for(var i=0;i<topics.length;i++)if(topics[i].id===
topicArn){self.SNSData.TopicSelection.snsSelectedOption(topics[i].id);return}self.SNSData.TopicSelection.snsSelectedOption(notificationConstants.snsMinimalOptions().addSNSArn.id);self.SNSData.TopicSelection.topicARN(topicArn)};var setSQSForm=function(queueArn){var queues=self.SQSData.QueueList.existingQueues();for(var i=0;i<queues.length;i++)if(queues[i].id===queueArn){self.SQSData.QueueSelection.sqsSelectedOption(queues[i].id);return}self.SQSData.QueueSelection.sqsSelectedOption(notificationConstants.sqsMinimalOptions().addSQSArn.id);
self.SQSData.QueueSelection.queueARN(queueArn)};self.allowValidARNCharactersHandler=function(data,event){var keyCode=event.keyCode?event.keyCode:event.which?event.which:event.charCode;if(false==event.shiftKey&&(keyCode==8||keyCode==46||keyCode>=35&&keyCode<=40))return true;keyCode=String.fromCharCode(!event.charCode?event.which:event.charCode);return hasOnlyValidARNChars(keyCode,true)};var hasOnlyValidARNChars=function(str,isKeyPress){var regex=new RegExp("^[a-zA-Z0-9/:_-]+$");if(!isKeyPress){str=
$.trim(str);return regex.test(str)}else{var notAllowedregex=new RegExp("^[!@#$%^&*();\"><?.',\\|]+$");return regex.test(str)&&!notAllowedregex.test(str)}};self.idExceedsMaxLength=ko.computed(function(){return self.id().length>notificationConstants.MaxIdLength});self.topicARNHasInvalidCharacters=ko.computed(function(){return""!==self.SNSData.TopicSelection.topicARN()&&!hasOnlyValidARNChars(self.SNSData.TopicSelection.topicARN(),false)});self.queueARNHasInvalidCharacters=ko.computed(function(){return""!==
self.SQSData.QueueSelection.queueARN()&&!hasOnlyValidARNChars(self.SQSData.QueueSelection.queueARN(),false)});self.cloudFunctionARNHasInvalidCharacters=ko.computed(function(){return""!==self.CloudFunctionData.cloudFunctionARN()&&!hasOnlyValidARNChars(self.CloudFunctionData.cloudFunctionARN(),false)});self.cloudFunctionIAMARNHasInvalidCharacters=ko.computed(function(){return""!==self.CloudFunctionData.invocationRoleARN()&&!hasOnlyValidARNChars(self.CloudFunctionData.invocationRoleARN(),false)});self.clear=
function(){ko.mapping.fromJS(self.initialState,{},self);self.clearServerValidation();ko.mapping.fromJS(self.SNSData.initialTopicSelection,{},self.SNSData.TopicSelection);ko.mapping.fromJS(self.SQSData.initialQueueSelection,{},self.SQSData.QueueSelection);ko.mapping.fromJS(self.CloudFunctionData.initialState,{},self.CloudFunctionData)};function SNSData(){var self=this;self.initialTopicList={hasListTopicsError:false,existingTopics:[],isListingTopics:false};self.TopicList=ko.mapping.fromJS(self.initialTopicList);
self.initialTopicSelection={snsSelectedOption:"",topicARN:""};self.TopicSelection=ko.mapping.fromJS(self.initialTopicSelection);self.topicArnPlaceHolder=ko.computed(function(){return notificationConstants.placeHolderArnPrefix+"sns:"+vmPropertiesPanel.awsRegion()+":123456789012:my_topic"});self.isDropdownVisible=ko.computed(function(){return self.TopicList.existingTopics().length>0});self.isTopicARNVisible=ko.computed(function(){return(!self.isDropdownVisible()||notificationConstants.snsMinimalOptions().addSNSArn.id==
self.TopicSelection.snsSelectedOption())&&!self.TopicList.isListingTopics()});self.snsOptions=ko.computed(function(){var options=[{id:"",text:""}];return options.concat(self.TopicList.existingTopics()).concat(notificationConstants.snsMinimalOptions().addSNSArn)});self.isExistingTopicSelected=ko.computed(function(){return self.TopicSelection.snsSelectedOption()&&self.TopicSelection.snsSelectedOption()!=notificationConstants.snsMinimalOptions().addSNSArn.id})}function SQSData(){var self=this;self.initialQueueList=
{hasListQueuesError:false,existingQueues:[],isListingQueues:false};self.QueueList=ko.mapping.fromJS(self.initialQueueList);self.initialQueueSelection={sqsSelectedOption:"",queueARN:""};self.QueueSelection=ko.mapping.fromJS(self.initialQueueSelection);self.queueArnPlaceHolder=ko.computed(function(){return notificationConstants.placeHolderArnPrefix+"sqs:"+vmPropertiesPanel.awsRegion()+":123456789012:my_queue"});self.existingQueues=ko.observableArray([]);self.isDropdownVisible=ko.computed(function(){return self.QueueList.existingQueues().length>
0});self.isQueueARNVisible=ko.computed(function(){return(!self.isDropdownVisible()||notificationConstants.sqsMinimalOptions().addSQSArn.id==self.QueueSelection.sqsSelectedOption())&&!self.QueueList.isListingQueues()});self.sqsOperationOptions=ko.computed(function(){var options=[{id:"",text:""}];return options.concat(self.QueueList.existingQueues()).concat(notificationConstants.sqsMinimalOptions().addSQSArn)});self.isExistingQueueSelected=ko.computed(function(){return self.QueueSelection.sqsSelectedOption()&&
self.QueueSelection.sqsSelectedOption()!=notificationConstants.sqsMinimalOptions().addSQSArn.id})}function CloudFunctionData(){var self=this;self.initialState={cloudFunctionARN:"",invocationRoleARN:""};ko.mapping.fromJS(self.initialState,{},self);self.cloudFunctionARNPlaceHolder=ko.computed(function(){return notificationConstants.placeHolderArnPrefix+"lambda:"+vmPropertiesPanel.awsRegion()+":123456789:function:my_function_name"});self.invocationRoleARNPlaceHolder=ko.computed(function(){return notificationConstants.placeHolderArnPrefix+
"iam:"+":123456789:role/my_role_name"})}}function NotificationConfiguration(id,events,prefixes){var self=this;self.id=ko.observable(id||"");self.events=ko.observableArray(events||[]);self.displayEvents=ko.computed(function(){return ko.utils.arrayMap(self.events(),function(event){return notificationConstants.EventEnum[event].text})});self.prefixes=ko.observableArray(prefixes||[]);self.destination=ko.observable("");self.displayDestination=ko.computed(function(){if(self.destination()&&notificationConstants.DisplayDestinationService[self.destination()])return notificationConstants.DisplayDestinationService[self.destination()];
return""});self.arn=ko.observable("");self.iamArn=ko.observable("");self.displayARNDetails=ko.computed(function(){var arnDetails="";if(self.destination()===notificationConstants.DestinationTypes.CloudFunction){arnDetails=notificationConstants.LocalizedStrings.lambdaFunction()+": ";var functionName=self.arn().split(":").pop();var url=window.Utility.proxyHostName()+"/lambda/home?region="+vmPropertiesPanel.awsRegion()+"#/functions/"+functionName;arnDetails=arnDetails+"<a href='#' onclick=window.open('"+
url+"','_blank')>"+"<span>"+functionName+"</span>"+'<span class="sprite external-link-white"> </span></a>';arnDetails=arnDetails+"<br/>"+notificationConstants.LocalizedStrings.invocationRole()+" ARN: "+self.iamArn()}else if(self.destination()===notificationConstants.DestinationTypes.Topic)arnDetails=notificationConstants.LocalizedStrings.snsTopic()+" ARN: "+self.arn();else arnDetails=notificationConstants.LocalizedStrings.sqsQueue()+" ARN: "+self.arn();return arnDetails});self.hasValidationError=
ko.observable(false);self.isConfigBeingEdited=ko.observable(false);self.isConfigMarkedForDeletion=ko.observable(false)}self.createNotificationConfigFromJSON=function(id,configJSON){var config=new NotificationConfiguration(id,configJSON.events,configJSON.prefixes);if(configJSON.topicARN){config.destination(notificationConstants.DestinationTypes.Topic);config.arn(configJSON.topicARN)}else if(configJSON.queueARN){config.destination(notificationConstants.DestinationTypes.Queue);config.arn(configJSON.queueARN)}else if(configJSON.cloudFunctionARN){config.destination(notificationConstants.DestinationTypes.CloudFunction);
config.arn(configJSON.cloudFunctionARN);config.iamArn(configJSON.invocationRoleARN)}return config}};function NotificationSubpanelController(vmNotificationSubpanel,vmPropertiesPanel,notificationConstants){var self=this;self.displayCleanNotificationState=function(){ko.mapping.fromJS(vmNotificationSubpanel.initialState,{},vmNotificationSubpanel);vmNotificationSubpanel.ConfigurationsTable.rollbackMutation();vmNotificationSubpanel.notificationForm.clear();vmNotificationSubpanel.tracker().markCurrentStateAsClean()};self.save=function(){vmNotificationSubpanel.isInSavingState(true);vmNotificationSubpanel.hasErrorFromServer(false);
vmNotificationSubpanel.ConfigurationsTable.clearValidationError();if(vmNotificationSubpanel.ConfigurationsTable.isDeleteModeOn())pushDeleteNotificationToServer();else{vmNotificationSubpanel.notificationForm.clearServerValidation();pushAddOrEditNotificationToServer()}};var handleError=function(errorEnum,errorMessage,errorDetails,isInDeleteMode){var errorEnums=window.S3Console.Constants.Errors;var errorFromS3=notificationConstants.ErrorMessageFromS3;var useErrorMessageFromS3=true;if(errorDetails)if(errorEnum==
errorEnums.InvalidArgument)if(errorDetails["ArgumentName"]||errorDetails["ArgumentName1"]){var argumentName=errorDetails["ArgumentName"]?errorDetails["ArgumentName"]:errorDetails["ArgumentName1"];var argNameLowerCase=argumentName.toLowerCase();var snsArnRegex=/arn:aws[a-zA-Z0-9-]*:sns:[a-zA-Z0-9-]*:[a-zA-Z0-9-\/_]*:[a-zA-Z0-9-\/_]*/i;var sqsArnRegex=/arn:aws[a-zA-Z0-9-]*:sqs:[a-zA-Z0-9-]*:[a-zA-Z0-9-\/_]*:[a-zA-Z0-9-\/_]*/i;var iamArnRegex=/arn:aws[a-zA-Z0-9-]*:iam::[a-zA-Z0-9-\/_]*:[a-zA-Z0-9-\/_]*/i;
var lambdaArnRegex=/arn:aws[a-zA-Z0-9-]*:lambda:[a-zA-Z0-9-]*:[a-zA-Z0-9-\/_]*:[a-zA-Z0-9-\/_:]*/i;var snsData=vmNotificationSubpanel.notificationForm.SNSData;var sqsData=vmNotificationSubpanel.notificationForm.SQSData;var cloudFunctionData=vmNotificationSubpanel.notificationForm.CloudFunctionData;var vmServerValidation=vmNotificationSubpanel.notificationForm.serverValidation;if(argNameLowerCase==="event")vmServerValidation.eventsHasError(true);else if(argNameLowerCase==="id")vmServerValidation.idHasError(true);
else if(argNameLowerCase==="topic")if(snsData.isTopicARNVisible())vmServerValidation.topicARNHasError(true);else vmServerValidation.existingTopicHasValidationError(true);else if(argNameLowerCase==="queue")if(sqsData.isQueueARNVisible())vmServerValidation.queueARNHasError(true);else vmServerValidation.existingQueueHasValidationError(true);else if(argNameLowerCase==="invocationrole")vmServerValidation.invocationRoleARNHasError(true);else if(snsArnRegex.test(argumentName)){var snsArn=argumentName.match(snsArnRegex)[0];
var isUserChoosingSNSTopic=(vmNotificationSubpanel.isAddModeOn()||vmNotificationSubpanel.ConfigurationsTable.isEditModeOn())&&vmNotificationSubpanel.notificationForm.isSNSSelected();if(isUserChoosingSNSTopic&&snsData.isTopicARNVisible()&&$.trim(snsData.TopicSelection.topicARN())==snsArn)vmServerValidation.topicARNHasError(true);else if(isUserChoosingSNSTopic&&snsData.isExistingTopicSelected()&&snsData.TopicSelection.snsSelectedOption()==snsArn)vmServerValidation.existingTopicHasValidationError(true);
else if(markExistingConfigWithValidationError(snsArn)){useErrorMessageFromS3=false;errorMessage=notificationConstants.LocalizedMessages.unableToValidateExistingConfiguration(snsArn);errorMessage=errorMessage+" "+(isInDeleteMode?notificationConstants.LocalizedStrings.ifNoLongerNeededDeleteHighlightedConfigs():notificationConstants.LocalizedStrings.ifNoLongerNeededCancelTheEditAndDeleteHighlightedConfigs())}}else if(sqsArnRegex.test(argumentName)){var sqsArn=argumentName.match(sqsArnRegex)[0];var isUserChoosingQueue=
(vmNotificationSubpanel.isAddModeOn()||vmNotificationSubpanel.ConfigurationsTable.isEditModeOn())&&vmNotificationSubpanel.notificationForm.isSQSSelected();if(isUserChoosingQueue&&sqsData.isQueueARNVisible()&&$.trim(sqsData.QueueSelection.queueARN())==sqsArn)vmServerValidation.queueARNHasError(true);else if(isUserChoosingQueue&&sqsData.isExistingQueueSelected()&&sqsData.QueueSelection.sqsSelectedOption()==sqsArn)vmServerValidation.existingQueueHasValidationError(true);else if(markExistingConfigWithValidationError(sqsArn)){useErrorMessageFromS3=
false;errorMessage=notificationConstants.LocalizedMessages.unableToValidateExistingConfiguration(sqsArn);errorMessage=errorMessage+" "+(isInDeleteMode?notificationConstants.LocalizedStrings.ifNoLongerNeededDeleteHighlightedConfigs():notificationConstants.LocalizedStrings.ifNoLongerNeededCancelTheEditAndDeleteHighlightedConfigs())}}else if(iamArnRegex.test(argumentName)){var iamArn=argumentName.match(iamArnRegex)[0];var isUserUpdatingLambda=(vmNotificationSubpanel.isAddModeOn()||vmNotificationSubpanel.ConfigurationsTable.isEditModeOn())&&
vmNotificationSubpanel.notificationForm.isCloudFunctionSelected();if(isUserUpdatingLambda&&iamArn==$.trim(cloudFunctionData.invocationRoleARN()))vmServerValidation.invocationRoleARNHasError(true);else if(markExistingConfigWithValidationError(iamArn)){useErrorMessageFromS3=false;errorMessage=notificationConstants.LocalizedMessages.unableToValidateInvocationRoleOnExistingConfiguration(iamArn);errorMessage=errorMessage+" "+(isInDeleteMode?notificationConstants.LocalizedStrings.ifNoLongerNeededDeleteHighlightedConfigs():
notificationConstants.LocalizedStrings.ifNoLongerNeededCancelTheEditAndDeleteHighlightedConfigs())}}else if(lambdaArnRegex.test(argumentName)||argNameLowerCase==="cloudfunction")vmServerValidation.cloudFunctionARNHasError(true);if(useErrorMessageFromS3&&(errorDetails["ArgumentValue"]||errorDetails["ArgumentValue1"])){var additionalErrorMessage=errorDetails["ArgumentValue"]?errorDetails["ArgumentValue"]:errorDetails["ArgumentValue1"];if(errorMessage)errorMessage=errorMessage+" : "+additionalErrorMessage;
else errorMessage=additionalErrorMessage}}if(errorMessage){if(errorMessage.indexOf(notificationConstants.ErrorMessageFromS3.regionMismatch)!=-1)errorMessage=notificationConstants.LocalizedStrings.regionMismatch();vmNotificationSubpanel.errorFromServerMessageToShow(errorMessage)}else vmNotificationSubpanel.errorFromServerMessageToShow(errorEnum.message)};var markExistingConfigWithValidationError=function(arn){var foundMatchingConfig=false;var existingConfigs=vmNotificationSubpanel.ConfigurationsTable.configs();
for(var i=0;i<existingConfigs.length;i++){var config=existingConfigs[i];if((config.arn()==arn||config.iamArn()==arn)&&!config.isConfigBeingEdited()){config.hasValidationError(true);vmNotificationSubpanel.ConfigurationsTable.configsWithValidationError.push(config);foundMatchingConfig=true}}window.Logging.log("ExistingEventConfig-Error",foundMatchingConfig|0,"problemArn="+arn+"configsWithError="+ko.mapping.toJSON(vmNotificationSubpanel.ConfigurationsTable.configsWithValidationError()));return foundMatchingConfig};
self.getNotificationConfigAndUpdateVM=function(){self.displayCleanNotificationState();vmNotificationSubpanel.ConfigurationsTable.configs([]);var requestData={"bucket":vmPropertiesPanel.selectedBucket(),"region":vmPropertiesPanel.awsRegion()};XdmXhrServices.makeAjaxToSDKProxy(vmPropertiesPanel.locationConstraint(),notificationConstants.GetNotificationURL,requestData,onGetNotificationSuccess,onGetNotificationError,"POST",vmPropertiesPanel.selectedBucket)};var onGetNotificationSuccess=function(responseJSON,
textStatus,XMLHttpRequest){if(responseJSON){updateVMOnGetNotificationSuccess(responseJSON);vmNotificationSubpanel.tracker().markCurrentStateAsClean()}};var onGetNotificationError=function(errorEnum,errorMessage){vmNotificationSubpanel.hasErrorFromServer(true);vmNotificationSubpanel.hasGetNotificationError(true);if(errorEnum==window.S3Console.Constants.Errors.AccessDenied)vmNotificationSubpanel.hasGetPermission(false);else handleError(errorEnum,errorMessage);vmNotificationSubpanel.tracker().markCurrentStateAsClean()};
var updateVMOnGetNotificationSuccess=function(freshConfigFromServer){vmNotificationSubpanel.ConfigurationsTable.configs.removeAll();var config=null;try{for(var id in freshConfigFromServer.configurations)if(freshConfigFromServer.configurations.hasOwnProperty(id)){config=vmNotificationSubpanel.createNotificationConfigFromJSON(id,freshConfigFromServer.configurations[id]);vmNotificationSubpanel.ConfigurationsTable.configs.push(config)}}catch(error){var responseToReport=freshConfigFromServer?JSON.stringify(freshConfigFromServer):
freshConfigFromServer;console.log("Error Parsing GetBucketNotification Response: "+responseToReport+" Error:"+error);var errorDetails="operation=GetNotification;response="+responseToReport+";Error="+error;window.Logging.log("ErrorParsingSDKProxyResponse",1,errorDetails,"NotificationSubPanel")}};var convertUnchangedConfigsToPutRequestData=function(){var requestData=[];var configList=vmNotificationSubpanel.ConfigurationsTable.configs();var JSONConstants=notificationConstants.JSONFieldNames.S3NotificationConfig;
for(var configCounter=0;configCounter<configList.length;configCounter++){var config=configList[configCounter];if(!config.isConfigBeingEdited()&&!config.isConfigMarkedForDeletion()){var requestItem={};requestItem[JSONConstants.id]=config.id();requestItem[JSONConstants.events]=config.events();requestItem[JSONConstants.objectPrefixes]=config.prefixes();requestItem[JSONConstants.type]=config.destination();if(config.destination()===notificationConstants.DestinationTypes.Topic)requestItem[JSONConstants.snsTopicARN]=
config.arn();else if(config.destination()===notificationConstants.DestinationTypes.Queue)requestItem[JSONConstants.sqsQueueARN]=config.arn();else if(config.destination()===notificationConstants.DestinationTypes.CloudFunction){requestItem[JSONConstants.lambdaCloudFunctionARN]=config.arn();requestItem[JSONConstants.lambdaInvocationRoleARN]=config.iamArn()}requestData.push(requestItem)}}return requestData};var pushAddOrEditNotificationToServer=function(){var form=vmNotificationSubpanel.notificationForm;
var JSONConstants=notificationConstants.JSONFieldNames.S3NotificationConfig;var eventConfigToSave={};var id=form.id();if(id===""){id=window.Utility.uuid();form.id(id)}eventConfigToSave[JSONConstants.id]=id;var type=form.type();eventConfigToSave[JSONConstants.type]=type;var objectPrefixes=form.objectPrefixes();eventConfigToSave[JSONConstants.objectPrefixes]=objectPrefixes;var events=form.events();eventConfigToSave[JSONConstants.events]=events;var arn="";var iamArn="";if(form.isSNSSelected()){if(form.SNSData.isTopicARNVisible())arn=
$.trim(form.SNSData.TopicSelection.topicARN());else if(form.SNSData.isExistingTopicSelected())arn=form.SNSData.TopicSelection.snsSelectedOption();eventConfigToSave[JSONConstants.snsTopicARN]=arn}else if(form.isSQSSelected()){if(form.SQSData.isQueueARNVisible())arn=$.trim(form.SQSData.QueueSelection.queueARN());else if(form.SQSData.isExistingQueueSelected())arn=form.SQSData.QueueSelection.sqsSelectedOption();eventConfigToSave[JSONConstants.sqsQueueARN]=arn}else if(form.isCloudFunctionSelected()){arn=
$.trim(form.CloudFunctionData.cloudFunctionARN());iamArn=$.trim(form.CloudFunctionData.invocationRoleARN());eventConfigToSave[JSONConstants.lambdaCloudFunctionARN]=arn;eventConfigToSave[JSONConstants.lambdaInvocationRoleARN]=iamArn}var onPutNotificationSuccess=function(){vmNotificationSubpanel.isInSavingState(false);updateVMOnPutNotificationSuccess(id,eventConfigToSave,type,arn,iamArn)};var allConfigsToSave=convertUnchangedConfigsToPutRequestData();allConfigsToSave.push(eventConfigToSave);var requestData=
{"bucket":vmPropertiesPanel.selectedBucket(),"region":vmPropertiesPanel.awsRegion(),"configuration":allConfigsToSave};XdmXhrServices.makeAjaxToSDKProxy(vmPropertiesPanel.locationConstraint(),notificationConstants.PutAllNotificationURL,requestData,onPutNotificationSuccess,onPutNotificationError,"POST",vmPropertiesPanel.selectedBucket)};var onPutNotificationError=function(errorEnum,errorMessage,errorDetails){vmNotificationSubpanel.hasErrorFromServer(true);handleError(errorEnum,errorMessage,errorDetails);
vmNotificationSubpanel.isInSavingState(false)};var updateVMOnPutNotificationSuccess=function(configId,eventConfigSaved,type,arn,iamArn){if(vmNotificationSubpanel.ConfigurationsTable.isEditModeOn()){var configToUpdate=vmNotificationSubpanel.ConfigurationsTable.configBeingEdited();configToUpdate.id(configId);configToUpdate.prefixes(eventConfigSaved.objectPrefixes);configToUpdate.events(eventConfigSaved.events);configToUpdate.iamArn(iamArn);configToUpdate.arn(arn);configToUpdate.destination(type)}else{var configToAdd=
vmNotificationSubpanel.createNotificationConfigFromJSON(configId,eventConfigSaved);vmNotificationSubpanel.ConfigurationsTable.configs.push(configToAdd)}self.displayCleanNotificationState()};var pushDeleteNotificationToServer=function(){var configToSave=convertUnchangedConfigsToPutRequestData();var requestData={"bucket":vmPropertiesPanel.selectedBucket(),"region":vmPropertiesPanel.awsRegion(),"configuration":configToSave};XdmXhrServices.makeAjaxToSDKProxy(vmPropertiesPanel.locationConstraint(),notificationConstants.PutAllNotificationURL,
requestData,onDeleteNotificationSuccess,onDeleteNotificationError,"POST",vmPropertiesPanel.selectedBucket)};var onDeleteNotificationSuccess=function(){vmNotificationSubpanel.isInSavingState(false);for(var configCounter=0;configCounter<vmNotificationSubpanel.ConfigurationsTable.deletedConfigs().length;configCounter++)vmNotificationSubpanel.ConfigurationsTable.configs.remove(vmNotificationSubpanel.ConfigurationsTable.deletedConfigs()[configCounter]);self.displayCleanNotificationState()};var onDeleteNotificationError=
function(errorEnum,errorMessage,errorDetails){self.displayCleanNotificationState();vmNotificationSubpanel.hasErrorFromServer(true);vmNotificationSubpanel.isInSavingState(false);handleError(errorEnum,errorMessage,errorDetails,true);vmNotificationSubpanel.tracker().markCurrentStateAsClean()};var cleanTopicList=function(){ko.mapping.fromJS(vmNotificationSubpanel.notificationForm.SNSData.initialTopicList,{},vmNotificationSubpanel.notificationForm.SNSData.TopicList)};self.getSNSDataAndUpdateVM=function(){cleanTopicList();
vmNotificationSubpanel.notificationForm.SNSData.TopicList.isListingTopics(true);var requestData={"region":vmPropertiesPanel.awsRegion()};XdmXhrServices.makeAjaxToSDKProxy(vmPropertiesPanel.locationConstraint(),notificationConstants.ListTopicsURL,requestData,onGetSNSTopicsSuccess,onGetSNSTopicsError,"POST",vmPropertiesPanel.selectedBucket)};var onGetSNSTopicsSuccess=function(data){vmNotificationSubpanel.notificationForm.SNSData.TopicList.isListingTopics(false);try{var topics=ko.utils.arrayMap(data["topics"],
function(topic){var topicArn=topic["topicArn"];return{id:topicArn,text:topicArn.split(":").pop()}});vmNotificationSubpanel.notificationForm.SNSData.TopicList.existingTopics(topics)}catch(error){var responseToReport=data?JSON.stringify(data):data;console.log("Error Parsing GetSNSTopics Response: "+responseToReport+" Error:"+error);var errorDetails="operation=GetSNSTopics;response="+responseToReport+";Error="+error;window.Logging.log("ErrorParsingSDKProxyResponse",1,errorDetails,"NotificationSubPanel")}};
var onGetSNSTopicsError=function(errorEnum,errorMessage){vmNotificationSubpanel.notificationForm.SNSData.TopicList.isListingTopics(false);vmNotificationSubpanel.notificationForm.SNSData.TopicList.hasListTopicsError(true);vmNotificationSubpanel.notificationForm.SNSData.TopicList.existingTopics([])};var cleanQueueList=function(){ko.mapping.fromJS(vmNotificationSubpanel.notificationForm.SQSData.initialQueueList,{},vmNotificationSubpanel.notificationForm.SQSData.QueueList)};self.getSQSDataAndUpdateVM=
function(){cleanQueueList();vmNotificationSubpanel.notificationForm.SQSData.QueueList.isListingQueues(true);var requestData={"region":vmPropertiesPanel.awsRegion(),"queueNamePrefix":""};XdmXhrServices.makeAjaxToSDKProxy(vmPropertiesPanel.locationConstraint(),notificationConstants.ListQueuesURL,requestData,onGetSQSQueuesSuccess,onGetSQSQueuesError,"POST",vmPropertiesPanel.selectedBucket)};var onGetSQSQueuesSuccess=function(data){vmNotificationSubpanel.notificationForm.SQSData.QueueList.isListingQueues(false);
try{var queues=ko.utils.arrayMap(data,function(queue){return{id:queue,text:queue.split(":").pop()}});vmNotificationSubpanel.notificationForm.SQSData.QueueList.existingQueues(queues)}catch(error){var responseToReport=data?JSON.stringify(data):data;console.log("Error Parsing GetSQSQueues Response: "+responseToReport+" Error:"+error);var errorDetails="operation=GetSQSQueues;response="+responseToReport+";Error="+error;window.Logging.log("ErrorParsingSDKProxyResponse",1,errorDetails,"NotificationSubPanel")}};
var onGetSQSQueuesError=function(errorEnum,errorMessage){vmNotificationSubpanel.notificationForm.SQSData.QueueList.isListingQueues(false);vmNotificationSubpanel.notificationForm.SQSData.QueueList.hasListQueuesError(true);vmNotificationSubpanel.notificationForm.SQSData.QueueList.existingQueues([])}};window.Ui={idCounter:0,windowWidth:$(window).width(),regions:function(){return Configuration.regionDefinitions},regionKeys:function(){if(this.$regionKeys)return this.$regionKeys;this.$regionKeys=[];var regionsList=this.regions();for(var i=0;i<regionsList.length;++i){var region=regionsList[i];this.$regionKeys.push(region.key)}return this.$regionKeys},isRegionValid:function(regionKey){if(Ui.regionKeys().indexOf)return Ui.regionKeys().indexOf(regionKey)>=0;else{var regionIndex=-1;for(var i=0;i<Ui.regionKeys().length;++i)if(Ui.regionKeys()[i]==
regionKey){regionIndex=i;break}return regionIndex>=0}},EncryptionTypes:{keys:["NONE","AES256"],"NONE":{key:"NONE",label:function(){return Ui.Translator.none()},selectionMessage:function(){return Ui.Translator.noEncryptionWillNowBeUsed()}},"AES256":{key:"AES256",label:function(){return Ui.Translator.AES256()},selectionMessage:function(){return Ui.Translator.AES256EncryptionWillNowBeUsed()}}},StorageClassTypes:{keys:["STANDARD","REDUCED_REDUNDANCY","GLACIER"],"STANDARD":{key:"STANDARD",label:function(){return Ui.Translator.standard()},
tier:"STANDARD",selectionMessage:function(){return Ui.Translator.standardStorageWillNowBeUsed()}},"REDUCED_REDUNDANCY":{key:"REDUCED_REDUNDANCY",label:function(){return Ui.Translator.reducedRedundancy()},tier:"STANDARD",selectionMessage:function(){return Ui.Translator.reducedRedundancyStorageWillNowBeUsed()}},"GLACIER":{key:"GLACIER",label:function(){return Ui.Translator.glacier()},tier:"ARCHIVE",selectionMessage:function(){return Ui.Translator.archiveStandardStorageWillNowBeUsed()}}},toggleRedPillMode:function(){var bodyElement=
$(document.body);if(bodyElement.hasClass("redpill"))bodyElement.removeClass("redpill");else $(document.body).addClass("redpill")},fireTranslatorReady:function(){Flow.module("TranslatorReady").dependsOn(Flow.Nothing()).on("dependencies::met","ready")},fireCustomerReady:function(customerReadyEventName){if(window.metricsTimer)window.metricsTimer.customerReady(customerReadyEventName)},totalLoginFailure:function(){if(window.BannerMan)BannerMan.totalFailure()},loginSuccess:function(){if(window.BannerMan)BannerMan.hideWall()},
dynamicallySizeToggleButtonGroupButtonWidth:function(buttonGroupElementIds,minimumWidth){var padding=14;var widestTextWidth=0;for(var i=0;i<buttonGroupElementIds.length;i++)if(widestTextWidth<$(buttonGroupElementIds[i]).width())widestTextWidth=$(buttonGroupElementIds[i]).width();widestTextWidth+=padding;if(minimumWidth&&widestTextWidth<minimumWidth)widestTextWidth=minimumWidth;for(var i=0;i<buttonGroupElementIds.length;i++)$(buttonGroupElementIds[i]).width(widestTextWidth)},hideVersioningButtons:function(){$("#versioning-buttons").hide()},
displayVersioningButtons:function(){$("#versioning-buttons").show()},setupRrsAndSseUi:function(){if(Configuration.rrsEnabled==false&&Configuration.ssePermanentlyOn==true)$("#upload-wizard-page-set-details").remove();else if(Configuration.rrsEnabled==false){var rrsOption=$("#upload-wizard-rrs");rrsOption.css("opacity","0.4");$("#rrs-select",rrsOption).prop("disabled",true);$("#rrs-description").remove();$("#sse-description").remove();$("#rrs-unavailable-description").css("display","inline")}else if(Configuration.ssePermanentlyOn==
true){var sseOption=$("#upload-wizard-sse");sseOption.css("opacity","0.4");$("#sse-select",sseOption).prop("disabled",true);$("#rrs-description").remove();$("#sse-description").remove();$("#sse-unavailable-description").css("display","inline")}},initialize:function(){if(this.initialized)return;this.initialized=true;$(window).bind("beforeunload",this.promptOnExit);if(this.isIESeven())$(".hideIESeven").hide();this.setupRrsAndSseUi();if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)){$(document.body).addClass("tablet");
$("table").addClass("tablet");$("tr").addClass("tablet");$("th").addClass("tablet");$("td").addClass("tablet");$("input").addClass("tablet");$("button").addClass("tablet");$("#bucket-list-view").addClass("tablet");$("#list-view").addClass("tablet");$("#ui-panes-container").addClass("tablet");$("#properties-panel-sections").addClass("tablet");$("#properties-panel-property-url").addClass("tablet");$(".list-view-header-text").addClass("tablet")}this.legacyModalLookupHash={};this.DownloadPanel.initialize();
this.RestoreModal.initialize();this.SplashPanel.initialize();this.StartPanel.initialize();this.NavigationPanel.initialize();this.PropertiesPanel.initialize();this.OperationsPanel.initialize();this.RightPane.initialize(this.PropertiesPanel);this.CreateBucketWizard=this.ModalWizard.create($("#create-bucket-wizard"),this.CreateBucketWizard,true);this.CreateBucketWizard.initialize();this.UploadWizard=this.ModalWizard.create($("#upload-wizard"),this.UploadWizard);this.UploadWizard.initialize();this.ListView.initialize();
this.Layout.initialize();this.Keyboard.initialize();this.IntegratedSecurity.initialize();this.BucketPolicyPanel.initialize();window.Nitro.initialize();this.transformToConsoleButton($(".button"));this.createTextBox($(".textbox"));$("#oops-indicator").click(this.resetOopsFade.bind(this));$("#main-content").bind("contextmenu",function(e){var source=e.target||e.srcElement;if(!$(source).data("enableContextMenu"))e.preventDefault()});$("img,button,.contextMenu,.unselectable").disableSelection();if(Configuration.followTheWhiteRabbit)$("#redpill").show();
else $("#redpill").hide();var headerHeight=$("#h").outerHeight();$("#main-content").css({top:headerHeight});var footerHeight=$("#f").outerHeight();$("#main-content").css({bottom:footerHeight});Ui.dynamicallySizeToggleButtonGroupButtonWidth(["#show-versions-button","#hide-versions-button"],75)},promptOnExit:function(){if(Console.OperationsPanel.containsUnfinishedOperations())return Ui.Translator.youHaveInProgressOperationsOrUploadsAndLeavingNowWillCancelThem()},hookup:function(){$(document).on("mousedown",
"#breadcrumb",function(){Ui.Keyboard.setFocus($(this))});this.ListView.hookup();this.PropertiesPanel.hookup();this.RightPane.hookup();this.Layout.hookup();this.Keyboard.hookup()},generateId:function(){return this.idCounter++},friendlyBytes:function(value){var unit="bytes";if(value>1024){value=value/1024;unit="KB"}if(value>1024){value=value/1024;unit="MB"}if(value>1024){value=value/1024;unit="GB"}if(value>1024){value=value/1024;unit="TB"}if(unit!="bytes")value=Math.floor(value*10)/10;return value+
" "+unit},initializeFriendlyDateMap:function(){this.friendlyDateMap={days:{0:Ui.Translator.monday(),1:Ui.Translator.tuesday(),2:Ui.Translator.wednesday(),3:Ui.Translator.thursday(),4:Ui.Translator.friday(),5:Ui.Translator.saturday(),6:Ui.Translator.sunday()},months:{0:Ui.Translator.january(),1:Ui.Translator.february(),2:Ui.Translator.march(),3:Ui.Translator.april(),4:Ui.Translator.may(),5:Ui.Translator.june(),6:Ui.Translator.july(),7:Ui.Translator.august(),8:Ui.Translator.september(),9:Ui.Translator.october(),
10:Ui.Translator.november(),11:Ui.Translator.december()}}},friendlyDate:function(date){if(!this.friendlyDateMap)this.initializeFriendlyDateMap();return date.toString();date=date.jsdate||date;if(!(date instanceof Date))return date.toString();date=new Date(date.getTime()-date.getTimezoneOffset()*6E4);var friendlyDate=[];friendlyDate.push(this.friendlyDateMap.days[date.getDay()]);friendlyDate.push(", ");friendlyDate.push(this.friendlyDateMap.months[date.getMonth()]);friendlyDate.push(" ");friendlyDate.push(date.getDate());
friendlyDate.push(", ");friendlyDate.push(date.getFullYear());friendlyDate.push(" ");friendlyDate.push(date.getHours());friendlyDate.push(":");friendlyDate.push(date.getMinutes());return friendlyDate.join("")},useOpacityAnimations:function(){if($.browser.msie&&$.browser.version=="7.0")return false;return true},isIESeven:function(){return $.browser.msie&&$.browser.version=="7.0"},useNativeButtons:function(){return false},useFakeRoundedButtons:function(){return true},transformToConsoleButton:function(button){$(button).each(function(){Ui.button(this)});
return $(button)},highlightButton:function($button,highlight){if(highlight)$button.find("div[contains=overlay]").show();else $button.find("div[contains=overlay]").hide();return true},disableButton:function(button,disable){var $button=$(button);if(!this.useNativeButtons())$button.button(disable?"disable":"enable");else if(disable)$button.prop("disabled",true);else $button.prop("disabled",false);return $button},setButtonLabel:function(button,label){if(this.useNativeButtons())return $(button).html(label);
else if(Ui.useFakeRoundedButtons()){var btn=$(button);if(btn.data("converted"))$(".button-center span",btn).html(label);else btn.html(label);return btn}else return $(button).button("option","label",label)},createTextBox:function(textBox){$(textBox).addClass("ui-widget ui-widget-content ui-corner-all")},filterContextMenu:function(contextualActions,menu){this.unfilterContextMenu(menu);menu.find("LI A").each(function(){var action=$(this).attr("action");if(!contextualActions.actions[action])$(this).parent().addClass("disabled").prop("disabled",
true).find("IMG").css({opacity:0.5})});return menu},activateRightPaneButton:function(buttonId){$("#right-pane-buttons .wx-button-group").removeClass("active");$("#"+buttonId).addClass("active")},unfilterContextMenu:function(menu){menu.find("LI").removeClass("disabled").prop("disabled",false).find("IMG").css({opacity:""})},showModal:function(element,show,ignoreBackdrop,priority,isPlutoniumStyle){priority={"High":"High","Normal":"Normal","Low":"Low"}[priority]||"Low";if(!isPlutoniumStyle)isPlutoniumStyle=
false;var withBackdrop=typeof ignoreBackdrop=="undefined"?false:!ignoreBackdrop;var ident=""+$(element).attr("id")+"_"+withBackdrop;this.legacyModalLookupHash[ident]=this.legacyModalLookupHash[ident]||this.ModalManager.createModal(element,{withBackdrop:withBackdrop,priority:this.Modal.Priority[priority],isPlutoniumStyle:isPlutoniumStyle});var m=this.legacyModalLookupHash[ident];if(m)m[show?"show":"hide"]()},showModalBackdrop:function(show){},workingOnIt:function(){console.log("Not yet implemented")},
oopsTimeout:null,oops:function(on,message,label){clearTimeout(this.oopsTimeout);var oopsIndicator=$("#oops-indicator");if(on){oopsIndicator.find("span").html(label||Ui.Translator.oops());oopsIndicator.show();oopsIndicator.attr("title",message).click(function(){$().message(message)});this.oopsTimeout=setTimeout(this.oops.bind(this,false,""),5E3)}else oopsIndicator.fadeOut(1E3,function(){$(this).hide();oopsIndicator.find("span").html(Ui.Translator.oops())})},resetOopsFade:function(){clearTimeout(this.oopsTimeout);
$("#oops-indicator").fadeIn(200);this.oopsTimeout=setTimeout(this.oops.bind(this,false,""),15E3)},message:function(message){$().message(message)},confirm:function(message){return confirm(message)},alert:function(message){alert(message)},Layout:{redrawTimeout:null,initialize:function(){$("#resize-handle").draggable({axis:"x",drag:this.triggerRedraw.bind(this,true),cursor:"e-resize",containment:[355,0,$("#main-content").width()-380]})},hookup:function(){$(this).bind("redraw",this.redrawUiPanes.bind(this))},
triggerRedraw:function(now){if(this.redrawTimeout==null)this.redrawTimeout=setTimeout(function(){this.redrawTimeout=null;$(this).trigger("redraw")}.bind(this),30)},redrawUiPanes:function(){if($("#ui-right-pane").is(":hidden")){$("#resize-handle").hide();$("#resize-handle-grip").hide();$("#ui-left-pane").width("100%");$("#ui-right-pane").width("0px")}else{$("#resize-handle").show();$("#resize-handle-grip").show();var left=$("#resize-handle").position().left+$(document).scrollLeft();var resizeBuffer=
0;if($("#main-content").width()-$("#ui-left-pane").width()<20)resizeBuffer=20-($("#main-content").width()-$("#ui-left-pane").width());var removedWidth=$("#ui-left-pane").width()-left;var leftWidthPercent=left*100/$("#main-content").width();$("#ui-left-pane").width(leftWidthPercent+"%");var rightWidthPercent=($("#ui-right-pane").width()+removedWidth-resizeBuffer)*100/$("#main-content").width();$("#ui-right-pane").width(rightWidthPercent+"%");$("#resize-handle").css("left",leftWidthPercent+"%");$("#resize-handle-grip").css("left",
leftWidthPercent+"%");$("#resize-handle").draggable("option","containment",[355,0,$("#main-content").width()-380])}}},Keyboard:{focus:null,savedFocus:null,initialize:function(){},hookup:function(){$(document).keydown(this.keypress.bind(this));this.defaultFocus()},saveAndSetFocus:function(focus){this.savedFocus=this.focus;this.setFocus(focus)},restoreFocus:function(){this.setFocus(this.savedFocus)},setFocus:function(focus){this.focus=focus},clearFocus:function(){this.focus=null},defaultFocus:function(){this.setFocus(Ui.ListView)},
keypress:function(e){if(!$(e.target).is("input")&&!$(e.target).is("textarea"))if(this.focus&&this.focus.keypress)return this.focus.keypress(e);return this.keypressCatchall(e)},keypressCatchall:function(e){var target=$(e.target);if(!target.is("input")&&!target.is("textarea"))if(e.keyCode==8)return false;return true},modKey:function(e){if(Ui.Platform.mac)return e.metaKey;else return e.ctrlKey}},Platform:{mac:navigator.platform.toLowerCase().indexOf("mac")!=-1},SplashPanel:{initialize:function(){$("#splash-panel").shadow()},
setText:function(text){$("#splash-panel .hd").html(text)},show:function(show){Ui.showModal($("#splash-panel"),show,true,"Normal")}},StartPanel:{initialize:function(){$("div[content=create-a-new-bucket]","#start-panel").hide();this.resizePropertiesPanelToggleButtonsForLocalizedText();$("#no-buckets-create-bucket-button").click(function(){Ui.CreateBucketWizard.open(function(){$("#start-panel").hide();$("#main-content").show()})}.bind(this))},show:function(show){if(show)$("#start-panel").show();else $("#start-panel").hide()},
clear:function(){$("div[content]","#start-panel").hide()},showAccessProblemContent:function(show){console.log("Account problem of some sort.");this.showContent("account-status",show)},showCreateANewBucketContent:function(show){this.showContent("create-a-new-bucket",show);$("#main-content").hide()},showSelectOrCreateABucketContent:function(show){$("#main-content").show()},showContent:function(content,show,options){var $content=$("div[content='"+content+"']","#start-panel");if(show)$content.show();
else $content.hide()},resizePropertiesPanelToggleButtonsForLocalizedText:function(){Ui.dynamicallySizeToggleButtonGroupButtonWidth(["#large-panel-button-bar-none-button","#large-panel-button-bar-properties-button","#large-panel-button-bar-operations-button"],95)}},ModalWizard:{create:function(element,base,isPlutoniumStyle){element=$(element);element.shadow();var wizard={$element:element,pageIndex:0,currentPage:function(){return $(".modal-wizard-page",this.$element).eq(this.pageIndex)},show:function(show){if(isPlutoniumStyle)Ui.showModal(element,
show,false,"Low",isPlutoniumStyle);else Ui.showModal(element,show,false);this.pageShown(this.currentPage())},back:function(callback,offset){if(!offset)offset=1;var currentPage=this.currentPage();this.resetElementViewstates(currentPage);var previousPages=currentPage.prevAll(".modal-wizard-page");var previousPage=previousPages.eq(offset-1);if(!previousPage.length)return;var previousPreviousPage=previousPages.eq(offset);var nextPage=offset==1?currentPage:nextPages.eq(offset-2);Ui.setButtonLabel($(".modal-wizard-next-button",
element),$(".button-label",nextPage).text()+" &gt;").css("visibility","visible");this.pageIndex=this.pageIndex-offset;var self=this;if(!Ui.useOpacityAnimations()){currentPage.hide();previousPage.show();self.pageShown(previousPage);if(typeof callback==="function")callback()}else currentPage.hide("drop",{direction:"right"},250,function(){previousPage.show("drop",{direction:"left"},250,function(){self.pageShown(previousPage);if(typeof callback==="function")callback()})});if(previousPreviousPage.length)Ui.setButtonLabel($(".modal-wizard-back-button",
element),"&lt; "+$(".button-label",previousPreviousPage).text()).css("visibility","visible");else $(".modal-wizard-back-button",element).css("visibility","hidden");$(".modal-wizard-page-header",element).html($(".header-label",previousPage).text());this.clearValidation();this.currentPage().css("visibility","visible")},next:function(callback,offset){if(!offset)offset=1;var currentPage=this.currentPage();this.resetElementViewstates(currentPage);if(!this.validate(currentPage))return;var nextPages=currentPage.nextAll(".modal-wizard-page");
var nextPage=nextPages.eq(offset-1);if(!nextPage.length)return;var nextNextPage=nextPages.eq(offset);var self=this;if(!Ui.useOpacityAnimations()){currentPage.hide();nextPage.show();self.pageShown(nextPage);if(typeof callback==="function")callback()}else{var showNextPage=function(){nextPage.show("drop",{direction:"right"},250,function(){self.pageShown(nextPage);if(typeof callback==="function")callback()})};currentPage.hide("drop",{direction:"left"},250,showNextPage)}if(nextNextPage.length)Ui.setButtonLabel($(".modal-wizard-next-button",
element),$(".button-label",nextNextPage).text()+" &gt;");else $(".modal-wizard-next-button",element).css("visibility","hidden");var previousPage=offset==1?currentPage:nextPages.eq(offset-2);Ui.setButtonLabel($(".modal-wizard-back-button",element),"&lt; "+$(".button-label",previousPage).text()).css("visibility","visible");this.pageIndex=this.pageIndex+offset;$(".modal-wizard-page-header",element).html($(".header-label",nextPage).text());this.clearValidation();this.currentPage().css("visibility","visible")},
clear:function(){var firstPage=$(".modal-wizard-page:first",element);var secondPage=firstPage.next(".modal-wizard-page");Ui.setButtonLabel($(".modal-wizard-back-button",element),"").css("visibility","hidden");$(".modal-wizard-page-header",element).html($(".header-label",firstPage).text());Ui.setButtonLabel($(".modal-wizard-next-button",element),$(".button-label",secondPage).text()+" &gt;").css("visibility","visible");firstPage.show().css("visibility","visible").siblings(".modal-wizard-page").hide().css("visibility",
"hidden");this.pageIndex=0;this.clearValidation();this.resetElementViewstates();this.reset()},validateAndFinish:function(){var failedValidation=null;var pageIndices={};var self=this;$(".modal-wizard-page",element).map(function(index,element){pageIndices[$(this).attr("id")]=index;if(!failedValidation&&!self.validate($(this)))failedValidation=$(this)});if(failedValidation){var failedPageIndex=pageIndices[failedValidation.attr("id")];if(this.pageIndex==failedPageIndex)this.validate(failedValidation);
else if(this.pageIndex<failedPageIndex)this.next(this.validate.bind(this,failedValidation),failedPageIndex-this.pageIndex);else this.back(this.validate.bind(this,failedValidation),this.pageIndex-failedPageIndex)}else this.finish()},validate:function(page){var validator=page.attr("validator");if(validator){var validation=eval(validator)();return this.applyValidation(validation)}return true},validationElement:function(requestId){if(!requestId)requestId="none";var validationElement=$(".validation-element[requestId='"+
requestId+"']",element);if(!validationElement.length)throw new Error("Invalid requestId: "+requestId);return validationElement},validationIconContainer:function(requestId){if(!requestId)requestId="none";var validationIconContainer=$(".validation-icon-container[requestId='"+requestId+"']",element);if(!validationIconContainer.length)throw new Error("Invalid requestId: "+requestId);return validationIconContainer},clearValidation:function(){$(".validation-message",element).empty();$(".validation-info",
element).removeClass("validation-info");$(".validation-warning",element).removeClass("validation-warning");$(".validation-error",element).removeClass("validation-error");$(".validation-icon-container",element).empty()},applyValidation:function(validation){this.clearValidation();var failedValidation=false;var animated={};for(var i=0;i<validation.infos.length;i++){var info=validation.infos[i];this.validationElement(info.requestId).addClass("validation-info")}for(var i=0;i<validation.warnings.length;i++){var warning=
validation.warnings[i];this.validationElement(warning.requestId).addClass("validation-warning")}for(var i=0;i<validation.errors.length;i++){failedValidation=true;var error=validation.errors[i];var validationElement=this.validationElement(error.requestId).addClass("validation-error");if(!animated[error.requestId]){validationElement.effect("pulsate",{times:1},800);animated[error.requestId]=true}$("<img />").attr("src",CB.resolve("graphics/warning.png")).addClass("small-icon").addClass("clickable").addClass("validation-icon").data("error",
error).click(function(){Ui.message($(this).data("error").message)}).appendTo(this.validationIconContainer(error.requestId));if(!validation.message)validation.message=error.message}if(validation.message){$(".validation-message",element).html(validation.message).effect("pulsate",{times:1},800);failedValidation=true}return!failedValidation},resetElementViewstates:function(page){$(".ui-shadowed-select",page||this.$element).combobox("closeAutocomplete")}};wizard=$.extend(base,wizard);$(".modal-wizard-back-button",
element).click(wizard.back.bind(wizard));$(".modal-wizard-next-button",element).click(wizard.next.bind(wizard));$(".modal-wizard-finish-button",element).click(wizard.validateAndFinish.bind(wizard));$(".modal-wizard-close-button",element).click(wizard.close.bind(wizard));wizard.clear();return wizard}},UploadWizard:{initialize:function(){this.reset();$("#upload-wizard-browse-large-button").click(Ui.UploadWizard.activateApplet.bind(this));$("#upload-wizard-sse-s3-key-radiobutton").click(Ui.UploadWizard.showHideKmsDetails);
$("#upload-wizard-sse-kms-key-radiobutton").click(Ui.UploadWizard.showHideKmsDetails);$("#upload-wizard-sse-kms-arn-input").keyup(Ui.UploadWizard.onCustomKmsArnChange);$("#upload-wizard-sse-kms-arn-input").on("paste",Ui.UploadWizard.onCustomKmsArnChange);$("#upload-wizard-sse-kms-arn-input").on("cut",Ui.UploadWizard.onCustomKmsArnChange);$("#sse-select").change(Ui.UploadWizard.showHideSseDetails);$("#upload-wizard-sse-kms-key").on("select2-selecting",Ui.UploadWizard.updateKmsDetails);this.deactivateDragOnNonTargetAreas();
this.isKmsDropDownInitialized=false;if(!Configuration.useKmsFeature)$("#upload-wizard-sse-learn-more").hide()},getKmsKeysFromServer:function(){var url=window.S3Console.Constants.UploadWizard.kmsAPIConstants.kmsGetKeysFromServerUrl;var locationConstraint=Console.UploadWizard.getCurrentLocation();var awsRegion=Configuration.convertLocationConstraintToAWSRegion(locationConstraint);var data={region:awsRegion};XdmXhrServices.makeAjaxToSDKProxy(locationConstraint,url,data,Ui.UploadWizard.onGetKmsKeysFromServerSuccess,
Ui.UploadWizard.onGetKmsKeysFromServerError,"POST")},onGetKmsKeysFromServerSuccess:function(kmsKeysResponse){if(kmsKeysResponse&&kmsKeysResponse.kmsKeys){Ui.UploadWizard.initializeKmsKeysDropDownList(kmsKeysResponse.kmsKeys);if($("#upload-wizard-sse-kms-key-radiobutton").is(":checked"))$("#upload-wizard-sse-kms-table").show();window.Logging.log("KmsListKeysSuccess",1,"","uploadDialog")}else{$("#upload-wizard-sse-s3-key-radiobutton").prop("checked",true);var errorMessage=Console.UploadWizard.getKmsGeneralError();
Ui.UploadWizard.showKmsErrorMessage(errorMessage);window.Logging.log("KmsListKeysSuccess",0,"Failed to list Kms SSE keys: "+errorMessage,"uploadDialog")}},onGetKmsKeysFromServerError:function(errorEnum,errorMessage){if(errorEnum==window.S3Console.Constants.Errors.AccessDeniedException){var displayedErrorMessage=Console.UploadWizard.getKmsPermissionsError();Ui.UploadWizard.initializeKmsKeysDropDownList();if($("#upload-wizard-sse-kms-key-radiobutton").is(":checked"))$("#upload-wizard-sse-kms-table").show()}else if(errorMessage===
window.S3Console.Constants.UploadWizard.kmsErrorResponseFromService.unsubscribedCustomerErrorMessage){var displayedErrorMessage=Console.UploadWizard.getKmsSubscriptionError();$("#upload-wizard-sse-s3-key-radiobutton").prop("checked",true);$("#upload-wizard-sse-kms-key-radiobutton").attr("disabled",true)}else{var displayedErrorMessage=Console.UploadWizard.getKmsGeneralError();$("#upload-wizard-sse-s3-key-radiobutton").prop("checked",true);$("#upload-wizard-sse-kms-key-radiobutton").attr("disabled",
true);$("#upload-wizard-sse-kms-details").addClass("disabled-text");$("#upload-wizard-sse-kms-radiobutton-label").addClass("disabled-text")}Ui.UploadWizard.showKmsErrorMessage(displayedErrorMessage);window.Logging.log("KmsListKeysSuccess",0,"Failed to list Kms SSE keys: "+displayedErrorMessage,"uploadDialog")},initializeKmsKeysDropDownList:function(kmsKeys){var kmsKeysDropDown=$("#upload-wizard-sse-kms-key");kmsKeysDropDown.empty();kmsKeysDropDown.select2({minimumResultsForSearch:2});$("<option></option>").val(window.S3Console.Constants.UploadWizard.kmsDropDownDefaultOptions.defaultKmsKeyOptionKey).text(window.S3Console.Constants.UploadWizard.kmsDropDownDefaultOptions.defaultKmsKeyOptionDisplayedAlias).appendTo(kmsKeysDropDown);
if(kmsKeys){var keysWithProperAliases=[];var keysWithArnLikeAliases=[];for(var i=0;i<kmsKeys.length;++i){var kmsKey=kmsKeys[i];if(window.S3Console.Constants.UploadWizard.kmsDropDownDefaultOptions.defaultKmsKeyOptionAlias!=kmsKey["key-alias"])if(kmsKey["key-alias"].lastIndexOf("arn:",0)===0)keysWithArnLikeAliases.push(kmsKey);else keysWithProperAliases.push(kmsKey)}if(keysWithProperAliases){var sortedKeysWithProperAliases=keysWithProperAliases.sort(function(a,b){return a["key-alias"].localeCompare(b["key-alias"])});
for(var i=0;i<sortedKeysWithProperAliases.length;++i){var kmsKeyWithProperAlias=sortedKeysWithProperAliases[i];$("<option></option>").val(kmsKeyWithProperAlias["key-arn"]).text(kmsKeyWithProperAlias["key-alias"]).appendTo(kmsKeysDropDown)}}if(keysWithArnLikeAliases)for(var i=0;i<keysWithArnLikeAliases.length;++i){var kmsKeyWithArnLikeAliases=keysWithArnLikeAliases[i];$("<option></option>").val(kmsKeyWithArnLikeAliases["key-arn"]).text(kmsKeyWithArnLikeAliases["key-alias"]).appendTo(kmsKeysDropDown)}}$("<option></option>").val(window.S3Console.Constants.UploadWizard.kmsDropDownDefaultOptions.customKmsKeyOptionKey).text(Console.UploadWizard.getCustomKmsKeyOptionAlias()).appendTo(kmsKeysDropDown);
var defaultKeyElement=kmsKeysDropDown.find(' option:contains("'+window.S3Console.Constants.UploadWizard.kmsDropDownDefaultOptions.defaultKmsKeyOptionDisplayedAlias+'")').val();kmsKeysDropDown.select2("val",defaultKeyElement);Ui.UploadWizard.updateKmsDetails({"val":defaultKeyElement});Ui.UploadWizard.isKmsDropDownInitialized=true},showKmsErrorMessage:function(errorMessage){$("#upload-wizard .validation-message").html(errorMessage).effect("pulsate",{times:1},800)},getKmsKeyInfoByArn:function(keyArn){var url=
window.S3Console.Constants.UploadWizard.kmsAPIConstants.kmsGetKeyInfoUrl;var locationConstraint=Console.UploadWizard.getCurrentLocation();var awsRegion=Configuration.convertLocationConstraintToAWSRegion(locationConstraint);var data={"region":awsRegion,"key-arn":keyArn};XdmXhrServices.makeAjaxToSDKProxy(locationConstraint,url,data,Ui.UploadWizard.onGetKmsKeyInfoByArnSuccess,Ui.UploadWizard.onGetKmsKeyInfoByArnError,"POST")},onGetKmsKeyInfoByArnSuccess:function(kmsKeyInfo){Ui.UploadWizard.showSelectedKeyInfo(kmsKeyInfo);
window.Logging.log("KmsKeysDescribeSuccess",1,"Kms Sse key has been successfully described","uploadDialog")},onGetKmsKeyInfoByArnError:function(errorMessage){window.Logging.log("KmsKeysDescribeSuccess",0,"Failed to describe Kms SSE key: "+errorMessage,"uploadDialog")},showSelectedKeyInfo:function(kmsKeyInfo){if(kmsKeyInfo){$("#upload-wizard-sse-kms-key-keyid-div").text(kmsKeyInfo["key-id"]);$("#upload-wizard-sse-kms-keyid-table-row").show();$("#upload-wizard-sse-kms-key-description-div").text(kmsKeyInfo["key-description"]);
$("#upload-wizard-sse-kms-description-table-row").show();var keyOwner=kmsKeyInfo["key-owner"];if(Ui.IntegratedSecurity.consoleUserInfo().id===kmsKeyInfo["key-owner"])keyOwner=keyOwner+" "+Console.UploadWizard.getCurrentAccountLabel();$("#upload-wizard-sse-kms-key-account-div").text(keyOwner);$("#upload-wizard-sse-kms-account-table-row").show()}},cleanKeyInfo:function(){$("#upload-wizard-sse-kms-key-keyid-div").text("");$("#upload-wizard-sse-kms-key-description-div").text("");$("#upload-wizard-sse-kms-key-account-div").text("")},
onCustomKmsArnChange:function(){setTimeout(function(){var currentArn=Utility.escape($("#upload-wizard-sse-kms-arn-input").val());Ui.UploadWizard.clearValidation();Ui.UploadWizard.cleanKeyInfo();Ui.UploadWizard.getKmsKeyInfoByArn(currentArn)},0)},updateKmsDetails:function(e){Ui.UploadWizard.clearValidation();Ui.UploadWizard.cleanKeyInfo();if(e.val==window.S3Console.Constants.UploadWizard.kmsDropDownDefaultOptions.customKmsKeyOptionKey)$("#upload-wizard-sse-kms-arn-input-table-row").css({"display":""});
else{$("#upload-wizard-sse-kms-arn-input-table-row").css({"display":"none"});$("#upload-wizard-sse-kms-arn-input").val("");if(!e.choice||window.S3Console.Constants.UploadWizard.kmsDropDownDefaultOptions.defaultKmsKeyOptionDisplayedAlias===e.choice.text){var defaultKeyDescription=Console.UploadWizard.getDefaultKmsKeyDescription();$("#upload-wizard-sse-kms-key-description-div").text(defaultKeyDescription);$("#upload-wizard-sse-kms-description-table-row").show();var defaultKeyOwner;if(Ui.IntegratedSecurity.consoleUserInfo().id)defaultKeyOwner=
Ui.IntegratedSecurity.consoleUserInfo().id+" "+Console.UploadWizard.getCurrentAccountLabel();else defaultKeyOwner=Console.UploadWizard.getCurrentAccountLabel();$("#upload-wizard-sse-kms-key-account-div").text(defaultKeyOwner);$("#upload-wizard-sse-kms-account-table-row").show();var defaultKeyId=window.S3Console.Constants.UploadWizard.kmsDropDownDefaultOptions.defaultKmsKeyOptionKey;$("#upload-wizard-sse-kms-key-keyid-div").text(defaultKeyId);$("#upload-wizard-sse-kms-keyid-table-row").show()}else Ui.UploadWizard.getKmsKeyInfoByArn(e.val)}},
showHideSseDetails:function(){if(Configuration.useKmsFeature==true)if($("#sse-select").is(":checked")){$("#upload-wizard-sse-kms").show();Ui.UploadWizard.getKmsKeysFromServer()}else Ui.UploadWizard.resetSseKms()},showHideKmsDetails:function(){if($("#upload-wizard-sse-kms-key-radiobutton").is(":checked")){if(Ui.UploadWizard.isKmsDropDownInitialized)$("#upload-wizard-sse-kms-table").show()}else $("#upload-wizard-sse-kms-table").hide()},deactivateDragOnNonTargetAreas:function(){$("#consoleNavHeader").bind("drop",
function(e){e.preventDefault();e.stopPropagation()});$("#consoleNavHeader").bind("dragover",function(e){e.preventDefault();e.stopPropagation()});$("#main-content").bind("drop",function(e){e.preventDefault();e.stopPropagation()});$("#main-content").bind("dragover",function(e){e.preventDefault();e.stopPropagation()});$("#modal-backdrop").bind("drop",function(e){e.preventDefault();e.stopPropagation()});$("#modal-backdrop").bind("dragover",function(e){e.preventDefault();e.stopPropagation()});$("#upload-wizard").bind("dragover",
function(e){e.preventDefault()});$("#upload-wizard").bind("drop",function(e){var target=e.srcElement||e.target;if(target.id!="html-file-services-drop-target")e.preventDefault()})},setLocation:function(bucket,location){UploadWizardUi_setLocation(bucket,location);$("#upload-wizard-path span").unbind();$("#upload-wizard-path span").children().removeClass("breadrumb-link")},clearLocation:function(){UploadWizardUi_clearLocation()},setTotalUploadSize:function(totalUploadSize){UploadWizardUi_setTotalUploadSize(totalUploadSize)},
setNumberOfItems:function(count){UploadWizardUi_setNumberOfFiles(count)},clearItems:function(){UploadWizardUi_clearFileReferences()},appendItems:function(fileReferences){UploadWizardUi_appendFileReferences(fileReferences)},removeItem:function(requestId){UploadWizardUi_removeFileReference(requestId)},getAdditionalPropertiesFormData:function(){var sseProperties=Ui.UploadWizard.sseProperties();var formData={rrsValue:Ui.UploadWizard.rrsValue(),sseValue:sseProperties.sseValue,sseKmsKey:sseProperties.sseKmsKey};
return formData},rrsValue:function(){if(Configuration.rrsEnabled==false)return"STANDARD";else if($("#rrs-select").prop("checked"))return"REDUCED_REDUNDANCY";else return"STANDARD"},sseProperties:function(){if($("#sse-select").is(":checked")){var kmsSseHeaderConstant=Console.UploadWizard.getKmsSseHeaderConstant();var s3SseHeaderConstant=Console.UploadWizard.getS3SseHeaderConstant();if(!Configuration.useKmsFeature||$("#upload-wizard-sse-s3-key-radiobutton").is(":checked"))return{sseValue:s3SseHeaderConstant};
if(!Ui.UploadWizard.isKmsDropDownInitialized)return{sseValue:kmsSseHeaderConstant,sseKmsKey:""};var kmsKeysDropDown=$("#upload-wizard-sse-kms-key");var kmsSelectedValue=kmsKeysDropDown.select2("val");var kmsSelectedAlias=kmsKeysDropDown.select2("data").text;if(kmsSelectedValue===window.S3Console.Constants.UploadWizard.kmsDropDownDefaultOptions.customKmsKeyOptionKey){var inputtedKmsKey=Utility.escape($("#upload-wizard-sse-kms-arn-input").val());if(inputtedKmsKey)return{sseValue:kmsSseHeaderConstant,
sseKmsKey:inputtedKmsKey};else return{sseValue:kmsSseHeaderConstant}}else if(kmsSelectedAlias===window.S3Console.Constants.UploadWizard.kmsDropDownDefaultOptions.defaultKmsKeyOptionDisplayedAlias)return{sseValue:kmsSseHeaderConstant,sseKmsKey:""};else return{sseValue:kmsSseHeaderConstant,sseKmsKey:kmsSelectedValue}}else return{}},wasCustomKmsKeySelected:function(){var kmsSelectedValue=$("#upload-wizard-sse-kms-key").select2("val");if(window.S3Console.Constants.UploadWizard.kmsDropDownDefaultOptions.customKmsKeyOptionKey===
kmsSelectedValue)return true;else return false},hasAppletActivationBeenAttempted:function(){return window.AppletControlAgent.isActivationStarted()},getMetadataFormData:function(){return UploadWizardUi_getMetadataFormData()},getPermissionsFormData:function(){return UploadWizardUi_getPermissionsFormData()},friendlyBytes:function(bytes){return Ui.friendlyBytes(bytes)},open:function(){Console.UploadWizard.open()},close:function(){Console.UploadWizard.close()},finish:function(){Console.UploadWizard.startUploading()},
showAdvancedUploadsOption:function(){$("#unrestricted-upload-description").hide();$("#applet-needed-upload-description").hide();$("#applet-upload-description").hide();$("#upload-wizard-browse-button").hide();$("#upload-wizard-remove-button").hide();$(".modal-wizard-finish-button",Ui.UploadWizard.$element).css({display:"none"});$(".modal-wizard-next-button",Ui.UploadWizard.$element).css({display:"none"});$("#enable-applet-upload-description").css({display:"inline"});$("#upload-wizard-browse-large-button").css({display:"inline"});
$("#upload-wizard-page-header").html("Enable Enhanced Uploader (BETA)")},resetSseKms:function(){$("#upload-wizard-sse-kms").hide();$("#upload-wizard-sse-kms-arn-input-table-row").css({"display":"none"});$("#upload-wizard-sse-kms-key").empty();$("#upload-wizard-sse-kms-arn-input").val("");$("#upload-wizard-sse-s3-key-radiobutton").prop("checked",true);$("#upload-wizard-sse-kms-table").hide();Ui.UploadWizard.isKmsDropDownInitialized=false;Ui.UploadWizard.clearValidation();$("#upload-wizard-sse-kms-key-radiobutton").attr("disabled",
false);$("#upload-wizard-sse-kms-details").removeClass("disabled-text");$("#upload-wizard-sse-kms-radiobutton-label").removeClass("disabled-text")},reset:function(){UploadWizardUi_clearFileReferences();UploadWizardUi_clearMetadata();$("#upload-wizard-guess-content-types").prop("checked",true);UploadWizardUi_clearGrants();$("#upload-wizard-grant-me-full-control").prop("checked",true);$("#upload-wizard-make-everything-public").prop("checked",false);$("#upload-wizard-rrs").show();$("#rrs-select").prop("checked",
false);if(Configuration.ssePermanentlyOn==true)$("#sse-select").prop("checked",true);else $("#sse-select").prop("checked",false);$("#upload-wizard-sse").show();$("#sse-description").show();Ui.UploadWizard.resetSseKms();$("#applet-needed-upload-description").hide();$("#unrestricted-upload-description").show();$("#applet-loading-upload-description").hide();$("#applet-upload-description").hide();$("#enable-applet-upload-description").hide();$("#upload-wizard-progress-indicator").css({display:"none"});
$("#upload-wizard-loading-indicator").hide();$("#upload-wizard-loading-progress-indicator").hide();$(".modal-wizard-finish-button",Ui.UploadWizard.$element).css({display:"inline"});$(".modal-wizard-next-button",Ui.UploadWizard.$element).css({display:"inline"});$("#upload-wizard-browse-button").show();$("#upload-wizard-remove-button").show();$(".showForFolderUpload").show();$(".hideForFolderUpload").hide();$("#upload-wizard-browse-large-button").css({display:"inline"});$("#upload-wizard-browse-large-button-text").html("<b>Enable Enhanced Uploader (BETA)</b>");
if(window.AppletControlAgent.isActivated())Ui.UploadWizard.postAppletActivationUi()},clearValidation:function(){$(".validation-message",element).empty();$(".validation-info",element).removeClass("validation-info");$(".validation-warning",element).removeClass("validation-warning");$(".validation-error",element).removeClass("validation-error");$(".validation-icon-container",element).empty()},pageShown:function($page){UploadWizardUi_resize();$(this).trigger("afterPageShown")},setupAppletActivationUi:function(restrictedFileSize){$("#upload-wizard-browse-large-button").css({display:"inline"});
$("#applet-needed-upload-description").show();$("#unrestricted-upload-description").hide();$("#applet-loading-upload-description").hide();$("#applet-upload-description").hide();$("#upload-wizard .restricted-file-size").html(Ui.friendlyBytes(restrictedFileSize));UploadWizardUi_resize()},activateApplet:function(){Flow.module("AppletLoadingProgressIndicator").notify("requestShow");window.AppletControlAgent.activate({onActivated:this.appletActivated.bind(this)})},appletActivated:function(){Flow.module("AppletLoadingProgressIndicator").notify("requestHide");
if(window.AppletControlAgent.isActivated()){console.log("Applet activated - closing and opening wizard");this.close();this.reset();this.open()}else console.log("Applet failed to activate")},postAppletActivationUi:function(){$("#upload-wizard-browse-large-button").css({display:"none"});$("#html-file-services-mozilla-drop-target").css({display:"none"});$("#upload-wizard-page-header").text(Ui.Translator.enhancedUploaderBetaSelectFilesAndFolders());Console.UploadWizard.switchToFilesAndDirectoriesSelectionCapability();
$("#upload-browse-button-text").html($("<b/>").text(Ui.Translator.addItems()));$("#upload-remove-button-text").html($("<b/>").text(Ui.Translator.removeSelectedItems()));$("#applet-upload-description").show();$("#unrestricted-upload-description").hide();UploadWizardUi_resize()},isFireBugOpen:function(){if(window.console&&window.console.firebug)return true;return false},showMessageMan:function(title,messageToShow,instruction){MessageMan.alternateTitle(title);MessageMan.alternateInstructions(instruction);
MessageMan.createAndShow({message:messageToShow,subject:""})}},CreateBucketWizard:{initialize:function(){var regions=$("#create-bucket-wizard-region");var first=false;var regionsList=Ui.regions();$("<option></option>").appendTo(regions);for(var i=0;i<regionsList.length;++i){var region=regionsList[i];if(!region.hidden)$("<option></option>").val(region.key).html(Utility.escape(region.label)).appendTo(regions)}$("option:first",regions).prop("selected",true);regions.select2({placeholder:"Select a Region",
width:"resolve",minimumResultsForSearch:10});$("#create-bucket-wizard-logging-target-bucket").select2({placeholder:"Select a bucket",width:"resolve",minimumResultsForSearch:10});$("#create-bucket-wizard-logging-target-bucket").select2("disable");$("#create-bucket-wizard-logging-enabled").click(function(){if($(this).is(":checked")){$("#create-bucket-wizard-logging-target-bucket").select2("enable");$("#create-bucket-wizard-logging-target-prefix").removeAttr("disabled");$("#create-bucket-wizard-logging-target-prefix").val("logs/")}else{$("#create-bucket-wizard-logging-target-bucket").select2("disable");
$("#create-bucket-wizard-logging-target-prefix").attr("disabled","true");$("#create-bucket-wizard-logging-target-prefix").val("")}return true});this.reset();this.show(false);this.onSuccess=null},open:function(onSuccessCallback){this.onSuccess=onSuccessCallback;var region=Ui.isRegionValid(Configuration.region)?Configuration.region:"";$("#create-bucket-wizard-region").select2("val",region);Console.CreateBucketWizard.open()},close:function(){Console.CreateBucketWizard.close()},finish:function(){Console.CreateBucketWizard.finish();
if(typeof this.onSuccess==="function")this.onSuccess()},getFormData:function(){var formData={bucket:$("#create-bucket-wizard-name").val(),region:$("#create-bucket-wizard-region").val(),regionCommonName:$("#create-bucket-wizard-region :selected").text(),loggingEnabled:$("#create-bucket-wizard-logging-enabled").is(":checked"),loggingTargetBucket:$("#create-bucket-wizard-logging-target-bucket").select2("val"),loggingTargetPrefix:$("#create-bucket-wizard-logging-target-prefix").val()};return formData},
reset:function(){$("#create-bucket-wizard-name").val("");$("button",this.$element).removeAttr("disabled");$("#create-bucket-wizard-logging-enabled").removeAttr("checked");if($("#create-bucket-wizard-logging-target-bucket").data("select2")){$("#create-bucket-wizard-logging-target-bucket").select2("disable");if($("#create-bucket-wizard-logging-target-bucket").select2("val"))$("#create-bucket-wizard-logging-target-bucket").select2("val","")}$("#create-bucket-wizard-logging-target-prefix").attr("disabled",
"true");$("#create-bucket-wizard-logging-target-prefix").val("");$("#create-bucket-wizard-logging-target-bucket").select2("val","");var region=Ui.isRegionValid(Configuration.region)?Configuration.region:"";$("#create-bucket-wizard-region").select2("val",region)},pageShown:function($page){if($page.is("#create-bucket-wizard-setup-logging-page")){$("#create-bucket-wizard-logging-target-bucket").empty();var newBucketName=$("#create-bucket-wizard-name").val();$("<option />").val("").html("").prop("selected",
true).appendTo("#create-bucket-wizard-logging-target-bucket");$("<option />").val(newBucketName).html(Utility.escape(newBucketName)).appendTo("#create-bucket-wizard-logging-target-bucket");var bucketList=Ui.NavigationPanel.getBucketList();for(var i=0;i<bucketList.length;i++){var bucket=bucketList[i];if(bucket===newBucketName)continue;$("<option />").val(bucket).html(Utility.escape(bucket)).appendTo("#create-bucket-wizard-logging-target-bucket")}$("#create-bucket-wizard-logging-target-bucket").select2({placeholder:"Select a bucket",
width:"element",minimumResultsForSearch:2});if($("#create-bucket-wizard-logging-enabled").is(":checked"))$("#create-bucket-wizard-logging-target-bucket").select2("enable");else $("#create-bucket-wizard-logging-target-bucket").select2("disable")}$("select",$page).combobox("redraw")},startCreate:function(){$("button",this.$element).prop("disabled",true);Ui.SplashPanel.setText(Ui.Translator.creating());Ui.showModal($("#splash-panel"),true,true);$("#splash-panel").css("z-index",101)},finishCreate:function(validation){$("button",
this.$element).prop("disabled",false);Ui.showModal($("#splash-panel"),false,true);if(validation!=null)this.applyValidation(validation)}},NavigationPanel:{initialize:function(){$("#bucket-list-container").contextMenu({createMenu:this.createContextMenu,destroyMenu:this.destroyContextMenu},this.bucketContextMenuAction.bind(this));this.ButtonBar.initialize()},getSelectedBucket:function(){var selectedBucket=$("#bucket-list-view tbody tr.ui-selected");if(selectedBucket.length)return selectedBucket.attr("bucket");
return null},createContextMenu:function(){return Ui.filterContextMenu(Console.NavigationPanel.contextualActions(),$("#bucket-list-container-context-menu"))},destroyContextMenu:function(){},bucketContextMenuAction:function(action,element){Console.NavigationPanel.invokeContextualAction(action)},getBucketList:function(){var bucketList=[];$("#bucket-list-view tbody tr").each(function(){bucketList.push($(this).attr("bucket"))});Ui.NavigationPanel.updateBucketCount(bucketList.length);return bucketList},
updateBucketCount:function(bucketCount){$("#breadcrumb-inactive .breadcrumb-bucket-count").text("("+bucketCount+")").attr("title",bucketCount)},removeBucket:function(bucket){$("#bucket-list-view tbody tr[bucket='"+bucket+"']").remove();Ui.PropertiesPanel.showNoBucketsSelected(true)},ButtonBar:{initialize:function(){$("#bucket-actions-menu-button").click(this.toggleMenu.bind(this));var self=this;var menuElement=$("#bucket-actions-menu");menuElement.find("A").mouseover(function(){menuElement.find("LI.hover").removeClass("hover");
$(this).parent().addClass("hover")}).mouseout(function(){menuElement.find("LI.hover").removeClass("hover")}).click(function(){Ui.NavigationPanel.bucketContextMenuAction($(this).attr("action"))})},show:function(show){if(show)$("#bucket-menu-container").show();else $("#bucket-menu-container").hide()},toggleMenu:function(){var self=this;if($("#bucket-actions-menu").is(":hidden"))self.showMenu();else self.hideMenu()},showMenu:function(){var self=this;var scrollTop=$(document).scrollTop();var scrollLeft=
$(document).scrollLeft();$("#bucket-actions-menu").css({top:scrollTop+"px",left:scrollLeft+"px"}).position({my:"left top",at:"left bottom",of:$("#bucket-actions-menu-button"),offset:"0 0"}).fadeIn(150,function(){$(document).bind("mouseup",self.hideMenu).bind("keydown",self.hideMenuOnEscape);$("#bucket-actions-menu").find("LI A").one("click",self.hideMenu)});Ui.filterContextMenu(Console.NavigationPanel.contextualActions(),$("#bucket-actions-menu"))},hideMenu:function(){$("#bucket-actions-menu").fadeOut(75);
$(document).unbind("mouseup",arguments.callee);$(document).unbind("keydown",Ui.NavigationPanel.ButtonBar.hideMenuOnEscape);$("#bucket-actions-menu").find("LI A").unbind("click",arguments.callee)},hideMenuOnEscape:function(e){if(e.keyCode==27)Ui.NavigationPanel.ButtonBar.hideMenu()}}}};
(function(){var Base=function(){var f=function(){if(this.initialize){var args=arguments;this.initialize.apply(this,args)}};return f};var Modal=Ui.Modal=Base();var Priority=Modal.Priority={Low:1,Normal:5,High:10};Modal.prototype={initialize:function(manager,domID,opts){this.manager=manager;this.domID=domID;opts=$.extend({priority:Priority.Low,withBackdrop:true,isPlutoniumStyle:false},opts||{});this.options=opts},domElt:function(){return $(this.domID)},show:function(){return this.manager.show(this)},
hide:function(){return this.manager.hide(this)}};var ModalManager=Base();ModalManager.prototype={initialize:function(backdropDomID){this.modals=[];this.suppressedModals=[];this.visibleModal=null;this.backdropDomID=backdropDomID;this.suspended=false;this.backdropShownBefore=false},createModal:function(domID,opts){if(!domID)return null;var m=new Modal(this,domID,opts);this.modals.push(m);return m},suspendModals:function(){if(!this.visibleModal||this.suspendedVisibleModal)return false;this.suspended=
true;this.suspendedVisibleModal=this.visibleModal;this.visibleModal=null;this.maybeBackdrop();this._hideModal(this.suspendedVisibleModal);return this.suspendedVisibleModal},unsuspendModals:function(){if(!this.suspendedVisibleModal||this.visibleModal)return false;this.suspended=false;this.visibleModal=this.suspendedVisibleModal;this.suspendedVisibleModal=null;this.maybeBackdrop();this._showModal(this.visibleModal);return this.visibleModal},show:function(modal){if(this.suspended)return false;if(this.visibleModal)if(this.visibleModal.options.priority<
modal.options.priority){this.visibleModal.domElt().css("z-index","-100").hide();this.suppressedModals.push(this.visibleModal);this.visibleModal=modal}else return false;else this.visibleModal=modal;this.maybeBackdrop();this._showModal(this.visibleModal);return this.visibleModal},hide:function(modal){if(this.suspended)return false;if(!this.visibleModal)return false;if(this.visibleModal!=modal)return false;this._hideModal(this.visibleModal);this.visibleModal=null;if(this.suppressedModals.length>0){this.visibleModal=
this.suppressedModals.pop();this.maybeBackdrop();this._showModal(this.visibleModal)}this.maybeBackdrop();return this.visibleModal},maybeBackdrop:function(){if(this.visibleModal)if(this.visibleModal.options.withBackdrop)this._showBackdrop();else if(this.suppressedModals.length>0);else this._hideBackdrop();else this._hideBackdrop()},_showModal:function(m){if(!m.options.isPlutoniumStyle){m.domElt().css("top",50+"%");m.domElt().css("left",50+"%");m.domElt().css("margin-top",-m.domElt().outerHeight()/
2+"px");m.domElt().css("margin-left",-m.domElt().outerWidth()/2+"px")}m.domElt().css("z-index","100").show()},_hideModal:function(m){m.domElt().css("z-index","-100").hide()},_showBackdrop:function(){var bd=this.domElt();if(!bd.is(":visible")){this.backdropShownBefore=true;bd.show()}Ui.Keyboard.clearFocus()},_hideBackdrop:function(){var bd=this.domElt();if(bd.is(":visible")){bd.hide();Ui.Keyboard.defaultFocus()}},domElt:function(){return $(this.backdropDomID)}};var ConsoleButton=window.ConsoleButton=
Base();var EmptyFun=function(){return function(){}};ConsoleButton.prototype={defaultOptions:{click:EmptyFun(),disabled:false},enable:function(doEnable){if(doEnable){this.$element.removeClass("button-disabled").addClass("button-normal");this.isDisabled=false}else{this.$element.removeClass("button-normal").addClass("button-disabled");this.isDisabled=true}return this},disable:function(doDisable){return this.enable(!doDisable)},initialize:function(elt,opts){this.options=$.extend({},this.defaultOptions,
opts||{});this.$element=$(elt);this._transformButton();this.boundClickHandler=this.click.bind(this);this.$element.click(this.boundClickHandler);this.disable(this.options.disabled)},jQueryElt:function(){return this.$element},click:function(event){if(!this.isDisabled)if(this.legacyOnClick)this.legacyOnClick(event);else this.options.click(event)},_transformButton:function(){var $button=this.$element;if(!Ui.useNativeButtons()||$button.attr("native")==="false"){if($button.data("converted"))return;var buttonText=
$("<span></span>").append($button.html());$button.empty();$button.addClass("button-normal");$("<div></div>").addClass("button-left").appendTo($button);var buttonCenter=$("<div></div>").addClass("button-center");if($button.attr("icon-src"))if($button.attr("icon-align")=="right"){buttonCenter.append(buttonText);$("<div></div>").addClass("button-icon").css({"background-image":"url("+CB.resolve($button.attr("icon-src"))+")"}).appendTo(buttonCenter)}else{$("<div></div>").addClass("button-icon").css({"background-image":"url("+
CB.resolve($button.attr("icon-src"))+")"}).appendTo(buttonCenter);buttonCenter.append(buttonText)}else if($button.attr("icon-ref"))if($button.attr("icon-align")=="right"){buttonCenter.append(buttonText);$("<div></div>").addClass("button-icon").addClass($button.attr("icon-ref")).css({"float":"left"}).appendTo(buttonCenter)}else{$("<div></div>").addClass("button-icon").addClass($button.attr("icon-ref")).appendTo(buttonCenter);buttonCenter.append(buttonText)}else buttonCenter.append(buttonText);if($button.attr("icon-class"))$(".button-icon",
buttonCenter).addClass($button.attr("icon-class"));buttonCenter.appendTo($button);$("<div></div>").addClass("button-right").appendTo($button);if($button.attr("button-align")=="right")$button.addClass("right");else $button.addClass("left");var legacyClick=new Function($button.attr("onclick"));if(legacyClick&&legacyClick!=""){this.legacyOnClick=legacyClick;var buttonElt=$button.get(0);if(buttonElt&&buttonElt.onclick)buttonElt.onclick="";$button.attr("onclick","")}$button.data("converted",true)}}};Ui.button=
function(elt,opts){this.buttonTable=this.buttonTable||{};var e=$(elt);e.generateId();var b=null;if(this.buttonTable[e.attr("id")])b=this.buttonTable[e.attr("id")];else{b=new ConsoleButton(elt,opts);this.buttonTable[e.attr("id")]=b}return b},Ui.ModalManager=new ModalManager("#modal-backdrop")})();Flow.module("Ui").dependsOn(["imageEltTransformation::done","Configuration::initialized"]).on("dependencies::met",function(){Ui.initialize();Flow.module("Ui").notify("initialized")});window.S3Console.Constants.UploadWizard={kmsAPIConstants:{kmsGetKeyInfoUrl:"/s3/cws/kms/DescribeKmsKey",kmsGetKeysFromServerUrl:"/s3/cws/kms/GetKmsKeys"},kmsErrorResponseFromService:{unsubscribedCustomerErrorMessage:"The AWS Access Key Id needs a subscription for the service"},kmsDropDownDefaultOptions:{oldStyleSseOptionAlias:"S3 Service Key",oldStyleSseOptionKey:"s3-default-key",defaultKmsKeyOptionDisplayedAlias:"aws/s3 (default)",defaultKmsKeyOptionAlias:"aws/s3",defaultKmsKeyOptionKey:"alias/aws/s3",
customKmsKeyOptionKey:"kms-custom-key-arn-id"}};(function(ns){var WrappedNativeEntity=window.WrappedNativeEntity=FlowUtil.Klass.create({defaultOptions:{target:null,accessMethod:"property"},initialize:function(options){this.options=FlowUtil.merge({},this.defaultOptions,options)},get:function(){var callMethod={method:function(target,name,args){return target[name].apply(target,args)},property:function(target,name,args){return target[name]},evaluate:function(target,name,args){return eval("target."+name+"()")}};var args=FlowUtil.$A(arguments);var name=
args.shift();return callMethod[this.options.accessMethod](this.options.target,name,args)}});window.WrappedNativeEntityFabricator=new (FlowUtil.Klass.create({fabricate:function(options){return new WrappedNativeEntity(options)}}))})(window);window.FlashIOKernel={overlayElement:null,overlayInterval:null,initialized:false,initialize:function(){if(this.initialized)return;this.firstEmbed=true;window.FlashIOKernel_log=this.log.bind(this);window.FlashIOKernel_initialized=function(){setTimeout(this.swfInitialized.bind(this),1)}.bind(this);window.FlashIOKernel_dispatch=this.dispatch.bind(this);window.S3FlashHttpDeliveryBoy_ack=this.ack.bind(this);if(Configuration.sandboxFlashIOKernel){this.element=function(){return document.getElementById("FlashIOKernelSandbox").contentWindow.document.getElementById("S3FlashHttpDeliveryBoy")};
this.$container=function(){return $("#FlashIOKernelSandbox")}}else{this.element=function(){return document.getElementById("S3FlashHttpDeliveryBoy")};this.$container=function(){return $("#S3FlashHttpDeliveryBoy")}}this.downloadingSwf=false;var self=this;$(this).bind("downloaded",function(){self.setDownloadingSwf(false)});this.checkFailureThreshold=5;this.baseCheckSpeed=2E3;this.resetCheckState();this.checkFlashPlayer();$(Ui.UploadWizard).bind("afterPageShown",this.afterUploadWizardPageShown.bind(this));
Flow.module("FlashIOKernel").notify("initialized");this.embed();this.initialized=true},supportsPostUpload:function(){if(this._supportsPostUpload==null){this.checkFlashPlayer();if(navigator.platform.toLowerCase().indexOf("win")!=-1)this._supportsPostUpload=true;else if(navigator.platform.toLowerCase().indexOf("mac")==-1)this._supportsPostUpload=false;else if(this.playerVersion[0]<10)this._supportsPostUpload=false;else if(this.playerVersion[1]<1)this._supportsPostUpload=false;else this._supportsPostUpload=
true}return this._supportsPostUpload},alwaysUsePostUpload:function(){if(this._alwaysUsePostUpload==null)this._alwaysUsePostUpload=this.supportsPostUpload()&&navigator.platform.toLowerCase().indexOf("win")!=-1;return this._alwaysUsePostUpload},flashPlayerMinorVersion:function(){this.checkFlashPlayer();return this.playerVersion[1]},isInitialized:function(){return this.initialized},resetCheckState:function(){this.checkFailures=0;this.checkSpeed=this.baseCheckSpeed},ack:function(){this.gotAck=true;return true},
swfInitialized:function(){$(this).trigger("downloaded");Diagnostics.Breadcrumbs.add("FlashIOKernel.SwfInitialized.Start");console.log("FlashIOKernel::swfInitialized()");console.log("FlashIOKernel finished initializing - checking soon");Diagnostics.Breadcrumbs.add("FlashIOKernel.Initialized.Success");if(this.firstEmbed){this.firstEmbed=false;Flow.module("FlashIOKernel").notify("ready")}else Flow.module("FlashIOKernel").notify("restarted");this.checkSoon()},setDownloadingSwf:function(downloadingSwf){this.downloadingSwf=
downloadingSwf;console.log("FlashIOKernel.DownloadingSwf="+downloadingSwf)},isDownloadingSwf:function(){return this.downloadingSwf},checkFlashPlayer:function(){if(this.playerVersion)return;var ua=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",win=window,doc=document,nav=navigator,plugin=false;var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=
UNDEF&&typeof doc.createElement!=UNDEF,u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=!+"\u000b1",playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;if(d&&!(typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){plugin=
true;ie=false;d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/[a-zA-Z]/.test(d)?parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof win.ActiveXObject!=UNDEF)try{var a=new ActiveXObject(SHOCKWAVE_FLASH_AX);if(a){d=a.GetVariable("$version");if(d){ie=true;d=d.split(" ")[1].split(",");playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}}catch(e){}return{w3:w3cdom,
pv:playerVersion,wk:webkit,ie:ie,win:windows,mac:mac}}();this.playerVersion=ua.pv;console.log("Flash Player version detected: "+ua.pv);if(ua.pv[0]<10)setTimeout(this.handleFlashNotInstalled.bind(this),1E3)},setLogLevel:function(level){this.element().setLogLevel(level)},log:function(message){var now=new Date;console.log("@["+now.getTime()+"|"+now.getMinutes()+":"+now.getSeconds()+"] FlashIOKernel: "+message)},minimize:function(){this.$container().css({bottom:"0px",left:"0px",top:""});this.overlayElement=
null},overlay:function(element){this.overlayElement=element;clearInterval(this.overlayInterval);this.overlayInterval=setInterval(this.reallyOverlay.bind(this),1500);this.reallyOverlay()},reallyOverlay:function(){var element=this.overlayElement;if(element==null||!element.offset){clearInterval(this.overlayInterval);return}var offset=element.offset();this.$container().css({top:offset.top+"px",left:offset.left+"px"})},embed:function(force){console.log("Embedding FlashIOKernel",force);if(this.isDownloadingSwf()&&
!force){console.log("FlashIOKernel currently downloading - not forcing an embed");return}this.minimize();if(Configuration.sandboxFlashIOKernel){$("#FlashIOKernelSandbox").remove();var iframe=$("<iframe />").attr("id","FlashIOKernelSandbox").attr("src","javascript:;").attr("frameborder","0").attr("scrolling","auto").css("position","absolute").css("top","0px").css("left","0px").css("bottom","0px").css("right","0px").css("height","20px").css("width","140px").css("z-index","10000").css("border","none").appendTo($("#sandbox_container"));
iframe.attr("src",CB.resolve("FlashIOKernelSandbox.html"))}else{var swfVersionStr="10.0.0";var xiSwfUrlStr=CB.resolve("playerProductInstall.swf");var flashvars={};var params={};params.quality="high";params.wmode="transparent";params.allowScriptAccess="always";params.loop="false";var attributes={};attributes.id="S3FlashHttpDeliveryBoy";attributes.name="S3FlashHttpDeliveryBoy";attributes.style="position:absolute;z-index:10000;bottom:0px;left:0px;visibility:visible;overflow:visible;";var self=this;var callback=
function(e){if(!e.success)self.handleFlashNotInstalled()};swfobject.embedSWF(CB.resolve(Configuration.flashIOKernelSwfUrl),"S3FlashHttpDeliveryBoy","140","20",swfVersionStr,xiSwfUrlStr,flashvars,params,attributes,callback)}this.setDownloadingSwf(true);Diagnostics.Breadcrumbs.add("FlashIOKernel.Embed",force)},handleFlashNotInstalled:function(){Diagnostics.Breadcrumbs.add("FlashNotInstalled");this.tattleFlashNotInstalled();Logging.log("Flash-NotInstalled",1);if(!Console.isRemoteIOKernelAvailable())Ui.message("<div class='centered-message'>This page requires Adobe Flash 10.0.0 or greater. <div class='message-action'><a href='http://www.adobe.com/go/getflashplayer' target='_blank'>Click here to download Adobe Flash Player</a>.</div></div>")},
tattleFlashNotInstalled:function(){this.tattleFlashNotInstalled=function(){};Diagnostics.tattle("S3Console.Login","flash-not-installed")},quickCheck:function(){var element=this.element();if(!element){console.log("FlashIOKernel element not found");return false}try{if(!element.syn()){console.log("FlashIOKernel external interface not initialized");return false}}catch(e){console.log("FlashIOKernel external interface not initialized: "+e);return false}return true},checkSoon:function(delay){if(this.checkSoonTimeout!=
null)console.log("Already in check-soon mode. Biding our time...");else this.checkSoonTimeout=setTimeout(this.check.bind(this),delay||1)},check:function(){clearTimeout(this.checkSoonTimeout);this.checkSoonTimeout=null;try{if(!this.handshake()){var force=false;this.checkFailures++;Diagnostics.Breadcrumbs.add("FlashIOKernel.Check.Failure",this.checkFailures,this.checkSpeed);if(this.checkFailures>=this.checkFailureThreshold){console.log("FlashIOKernel check limit reached - next embed will be forced");
this.resetCheckState();force=true}else this.checkSpeed*=2;console.log("FlashIOKernel check failed: "+this.checkFailures+". Maybe re-embedding. force="+force);this.embed(force)}else this.resetCheckState()}finally{this.checkSoon(this.checkSpeed)}},handshake:function(){this.gotAck=false;try{this.element().syn()}catch(e){console.log("Could not handshake with FlashIOKernel: "+e)}return this.gotAck},setUpFileSelectorUi:function(){this.fileSelectorUiActive=true;var $page=Ui.UploadWizard.currentPage();if($page)this.afterUploadWizardPageShown()},
tearDownFileSelectorUi:function(){this.fileSelectorUiActive=false;this.minimize();clearTimeout(UploadWizardUi_resizeTimeout)},afterUploadWizardPageShown:function(){if(!this.fileSelectorUiActive)return;var $page=Ui.UploadWizard.currentPage();if($page&&$page.is("#upload-wizard-page-select-files"))this.overlay($("#upload-wizard-browse-button"));else{this.minimize();clearTimeout(UploadWizardUi_resizeTimeout)}},systemCall:function(call,args){var element=this.element();if(!element||!element[call]){this.checkSoon();
var e=new Error("TransientSystemCallException: "+call);e.name="TransientSystemCallException";throw e;}return element[call].apply(element,args)},dispatch:function(requestId,eventType,eventData){Console.FlashIOKernel.NetServices.dispatch(requestId,eventType,eventData)},serializeValue:function(value){var type=typeof value;if(type=="string")return"<string>"+this.escapeString(value)+"</string>";else if(type=="undefined")return"<undefined/>";else if(type=="number")return"<number>"+value+"</number>";else if(value==
null)return"<null/>";else if(type=="boolean")return value?"<true/>":"<false/>";else if(value instanceof Date)return"<date>"+value.getTime()+"</date>";else if(value instanceof Array)return this.serializeArray(value);else if(type=="object")return this.serializeObject(value);else return"<null/>"},escapeString:function(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},serializeArray:function(obj){var s="<array>";for(var i=0;i<obj.length;i++)s+=
'<property id="'+i+'">'+this.serializeValue(obj[i])+"</property>";return s+"</array>"},serializeObject:function(obj){var s="<object>";for(var prop in obj)s+='<property id="'+prop+'">'+this.serializeValue(obj[prop])+"</property>";return s+"</object>"},FileServices:{fileExists:function(requestId){return FlashIOKernel.systemCall("fileExists",[requestId])},prepareToBrowse:function(){FlashIOKernel.systemCall("prepareToBrowse",[])},load:function(requestId){FlashIOKernel.systemCall("load",[requestId])},
createRandomFile:function(seed,size){return FlashIOKernel.systemCall("createRandomFile",[seed,size])},cancel:function(requestId){FlashIOKernel.systemCall("cancelFile",[requestId])},dispose:function(requestId){FlashIOKernel.systemCall("dispose",[requestId])},getBrowsedFiles:function(){return FlashIOKernel.systemCall("getBrowsedFiles",[])},readLoadedData:function(requestId,offset,length){return FlashIOKernel.systemCall("readLoadedData",[requestId,offset,length])},upload:function(requestId,url,parameters,
fileParameterName){return FlashIOKernel.systemCall("upload",[requestId,url,parameters,fileParameterName])},createFile:function(){return FlashIOKernel.systemCall("createFile",[])},writeUtf8:function(requestId,offset,utf8){return FlashIOKernel.systemCall("writeUtf8",[requestId,offset,utf8])},compress:function(requestId){return FlashIOKernel.systemCall("compress",[requestId])},getSize:function(requestId){return FlashIOKernel.systemCall("getSize",[requestId])}}};(function(){var SimpleInvalidStateException=FlowUtil.Klass.create({initialize:function(s){this.name="SimpleInvalidStateException";this.message=s||"invalid state"},toString:function(){return'Exception [name="'+this.name+'", message="'+this.message+'"]'}});var SimpleIllegalStateException=FlowUtil.Klass.create({initialize:function(s){this.name="IllegalStateException";this.message=s||"invalid state"},toString:function(){return'Exception [name="'+this.name+'", message="'+this.message+'"]'}});var TypicalStates=
["Started","Disposed"];var TriState=["Started","Ready","Disposed"];var SimpleStateGuard=FlowUtil.Klass.create({initialize:function(states,initialState){this._appliedStates={};this._states=states;this.autoBind(["apply","deny","require"]);this.apply(initialState)},_checkValidity:function(s){if(!FlowUtil.detect(this._states,s))throw SimpleInvalidStateException("Invalid state specified: "+s+", Available: ["+this._states.join(", ")+"]");},applied:function(s){this._checkValidity(s);return!!this._appliedStates[s]},
apply:function(s){this._checkValidity(s);this._appliedStates[s]=true;return this},revert:function(s){this._checkValidity(s);this._appliedStates[s]=false;return this},deny:function(s){this._checkValidity(s);if(this.applied(s))throw new SimpleIllegalStateException("Denied for current state: "+s);return this},require:function(s){this._checkValidity(s);if(!this.applied(s))throw new SimpleIllegalStateException("State required but not found: "+s);return this}});var AutoAsync=FlowUtil.Module.create({methods:{autoAsync:function(methods){for(var i=
0;i<attrs.length;i++){var attr=attrs[i];this["async"+attr.charAt(0).toUpperCase()+attr.substring(1)]=function(){var _args=arguments;setTimeout(this[attr].bind(this,_args),1)}.bind(this)}}}});window.AppletControlAgent=new (FlowUtil.Klass.create({initialize:function(){this.onActivatedCallback=FlowUtil.Funs.EmptyF;this.autoBind(["appletSeen"]);this.stateGuard=new SimpleStateGuard(["Created","Activating","Activated"],"Created");this.callbackFired=false;this.mod=Flow.module("AppletControlAgent").dependsOn(["Configuration::initialized"]).on("dependencies::met",
function(){if(Configuration.autoLoadAppletIfEnabled&&Configuration.useAppletIOKernel)this.activate()}.bind(this));Flow.module("AppletCallbackChannel").on("it::available",this.boundAppletSeen)},activate:function(options){options=options||{};if(!this.canActivate())return;try{Console.tattle("S3Console.Upload","applet-embed-requested")}catch(e){FlowUtil.log("Tattle error!",e)}Logging.log("AppletEmbed-Requested",1);this.stateGuard.apply("Activating");this.onActivatedCallback=options.onActivated||FlowUtil.Funs.EmptyF;
this.activationDelayTimeout=setTimeout(this.respondToAppletActivationDelay.bind(this),5*60*1E3);this.mod.notify("activationRequested")},respondToAppletActivationDelay:function(){try{Console.tattle("S3Console.Upload","applet-embed-suspended-too-long")}catch(e){FlowUtil.log("Tattle error!",e)}Logging.log("AppletEmbed-SuspendedTooLong",1)},isActivationStarted:function(){return!!this.stateGuard.applied("Activating")},isActivationEnded:function(){return!!this.stateGuard.applied("Activated")},canActivate:function(){return!this.isActivationStarted()},
isActivated:function(){return this.isActivationEnded()},appletSeen:function(){clearTimeout(this.activationDelayTimeout);this.stateGuard.apply("Activated");try{Console.tattle("S3Console.Upload","applet-embed-succeeded")}catch(e){FlowUtil.log("Tattle error!",e)}Logging.log("AppletEmbed-Success",1);if(this.callbackFired)return;this.callbackFired=true;setTimeout(this.onActivatedCallback,0)},isHealthy:function(){return window.AppletServicesChannel&&AppletServicesChannel.available()}}));window.AppletEmbedder=
new (FlowUtil.Klass.create({initialize:function(){this.appletHelloCount=0;this.autoBind(["embedApplet"]);this.embedConfiguration=null;this.verifiedAppletElement=null;this.mod=Flow.module("AppletEmbedder");this.mod.dependsOn(["document::ready","AppletIOKernelApplet::shouldBeEmbedded","AppletEmbedder::configurationReceived","AppletServicesChannel::initialized","AppletCallbackChannel::initialized","AppletControlAgent::activationRequested"]).on("dependencies::met",this.boundEmbedApplet)},appletElement:function(){if(!this.verifiedAppletElement)throw"Applet element requested, but not present.";
return this.verifiedAppletElement},setEmbedConfig:function(config){this.embedConfiguration=config;this.mod.notify("configurationReceived")},embedApplet:function(){this.containerElt=document.getElementById(this.embedConfiguration.containerId);if(!this.containerElt)throw"Applet container element not found.";Flow.module("AppletCallbackChannel").onWithOptions("it::available",function(){this.verifiedAppletElement=document.applets[this.embedConfiguration.attributes.name];this.appletHelloCount++;if(this.appletHelloCount>
1)this.mod.notify("appletResurrected");else this.mod.notify("appletAlive")}.bind(this),{nowIfTriggered:true});var codebase=window.location.protocol+"//"+window.location.host+"/GetResource/";var embedAttributes=FlowUtil.merge(this.embedConfiguration.attributes,{"archive":this.maybeTransformArchiveLocation(this.embedConfiguration.attributes.archive),"codebase":codebase});var embedParameters=FlowUtil.merge(this.embedConfiguration.parameters,{"consoleSessionId":Configuration.sessionId,"cache_archive":this.maybeTransformArchiveLocation(this.embedConfiguration.parameters.cache_archive)});
var logLevel="Info";if(!!Configuration.appletLogLevel)logLevel=Configuration.appletLogLevel;FlowUtil.merge(embedParameters,{"loggerLogLevel":logLevel});var tag=this.buildTag(embedAttributes,embedParameters);this.insertTag(tag)},maybeTransformArchiveLocation:function(src){return src},buildTag:function(attributes,parameters){var tagContents="";var oldWrite=document.write;document.write=function(s){tagContents+=s};deployJava.runApplet(attributes,parameters,"1.6");document.write=oldWrite;return tagContents},
insertTag:function(contents){this.containerElt.innerHTML=contents}}));Flow.module("AppletEmbedConfiguration").dependsOn(["Configuration::initialized"]).on("dependencies::met",function(){AppletEmbedder.setEmbedConfig(Configuration.AppletEmbedConfiguration)});var AppletUIHandler=FlowUtil.Klass.create({defaultOptions:{selector:null,onBrowseClicked:FlowUtil.Funs.EmptyF},initialize:function(options){this.options=FlowUtil.merge({},this.defaultOptions,options);this.active=false},activate:function(){FlowUtil.log("Activating UI for applet file picker");
$(this.options.selector).bind("click",this.options.onBrowseClicked);this.active=true},deactivate:function(){FlowUtil.log("Deactivating UI for applet file picker");$(this.options.selector).unbind("click",this.options.onBrowseClicked);this.active=false}});var ProgressIndicator=FlowUtil.Klass.create({defaultOptions:{selector:""},initialize:function(opts){this.options=FlowUtil.merge({},this.defaultOptions,opts||{});this.autoBind(["showLoadingIndicator","hideLoadingIndicator"]);this.mod=Flow.module(this.options.moduleName).dependsOn(["document::ready"]).on("dependencies::met",
function(){this.mod.onWithOptions("it::requestShow",this.boundShowLoadingIndicator,{nowIfTriggered:false});this.mod.onWithOptions("it::requestHide",this.boundHideLoadingIndicator,{nowIfTriggered:false});this.mod.notify("ready")}.bind(this))},showLoadingIndicator:function(){$(this.options.selector).show()},hideLoadingIndicator:function(){$(this.options.selector).hide()}});var AppletLoadingProgressIndicator=new ProgressIndicator({selector:"#upload-wizard-loading-progress-indicator",moduleName:"AppletLoadingProgressIndicator"});
var AppletProgressIndicator=new ProgressIndicator({selector:"#upload-wizard-loading-indicator",moduleName:"AppletProgressIndicator"});window.AppletServicesChannel=new (FlowUtil.Klass.create({initialize:function(appletEmbedder){this.autoBind(["browseForFiles"]);this.appletEmbedder=appletEmbedder;this.mod=Flow.module("AppletServicesChannel");this.mod.dependsOn(["AppletEmbedder::appletAlive","Configuration::initialized","Console::initialized"]).on("dependencies::met",function(){this.ready(this.appletEmbedder.appletElement())}.bind(this));
this.stateGuard=new SimpleStateGuard(TriState,"Started");this.requireReady=this.stateGuard.boundRequire.curry("Ready");this.uiGuard=new SimpleStateGuard(["Started","Ready","Active"],"Ready");this.uiHandler=new AppletUIHandler({selector:"#upload-wizard-browse-button",onBrowseClicked:this.boundBrowseForFiles});Flow.module("AppletCallbackChannel").on("it::available",function(){this.stateGuard.apply("Ready")}.bind(this));Flow.module("AppletCallbackChannel").on("it::unavailable",function(){this.stateGuard.revert("Ready")}.bind(this));
this.mod.notify("initialized")},requireReadyOrThrow:function(name){try{this.requireReady()}catch(e){this.throwError(name)}},throwError:function(name){var e=new Error("TransientSystemCallException: "+name);e.name="TransientSystemCallException";throw e;},available:function(){return this.stateGuard.applied("Ready")},ready:function(appletElt){this.applet=appletElt;FlowUtil.log("Applet is available");this.mod.notify("available")},cancelHttp:function(requestId){this.requireReadyOrThrow("cancelHttp");try{this.applet.cancelHttp(requestId)}catch(e){this.throwError("cancelHttp")}},
deliver:function(requestId,method,url,headers,content){this.requireReadyOrThrow("deliver");try{this.applet.deliver(requestId,method,url,headers,content)}catch(e){this.throwError("deliver")}},deliverWithHostedEntity:function(requestId,method,url,headers,fileUri,offset,length){this.requireReadyOrThrow("deliverWithHostedEntity");try{this.applet.deliverWithHostedEntity(requestId,method,url,headers,fileUri,offset,length)}catch(e){this.throwError("deliverWithHostedEntity")}},browseForFiles:function(){this.requireReadyOrThrow("browseForFiles");
Flow.module("AppletProgressIndicator").notify("requestShow");try{this.applet.browseForFiles(!!Configuration.enableFolderUploads)}catch(e){Flow.module("AppletProgressIndicator").notify("requestHide");this.logAppletLogs("Info","Cannot browse for files; applet could be in an inconsistent state: "+e)}},open:function(uri){this.requireReadyOrThrow("open");try{var resource=this.applet.open(uri);return new WrappedNativeEntity({target:resource,accessMethod:"evaluate"})}catch(e){this.throwError("open")}},readFile:function(uri,
offset,length){this.requireReadyOrThrow("readFile");var length=parseFloat(length);try{this.applet.readFile(uri,offset,length)}catch(e){this.throwError("readFile")}},listDirectory:function(uri,marker,maxFileCount){this.requireReadyOrThrow("listDirectory");try{var files=this.applet.listDirectory(uri,marker,maxFileCount);var copiedFiles=[];if(!!files){var numFiles=files.length;for(var i=0;i<numFiles;++i)copiedFiles.push((new String(files[i])).toString())}return copiedFiles}catch(e){this.throwError("listDirectory")}},
setUpUi:function(){this.uiGuard.require("Ready");this.uiGuard.apply("Active");var $page=Ui.UploadWizard.currentPage();if($page)if($page.is("#upload-wizard-page-select-files"))this.uiHandler.activate();else this.uiHandler.deactivate()},tearDownUi:function(){this.uiGuard.require("Ready");this.uiHandler.deactivate();this.uiGuard.revert("Active")}}))(AppletEmbedder);window.AppletCallbackChannel=new (FlowUtil.Klass.create({initialize:function(){this.autoBind(["keepDispatching"]);this.initiallyToldConsole=
false;this.mod=Flow.module("AppletCallbackChannel");this.mod.dependsOn(["Console::initialized"]).on("dependencies::met",function(){this.mod.on("it::internallyAvailable",function(){this.appletAvailable();this.mod.notify("available")}.bind(this));this.mod.on("it::internallyUnavailable",function(){this.appletUnavailable();this.mod.notify("unavailable")}.bind(this))}.bind(this));this.shouldDispatch=false;this.dispatchQueue=[];this.mod.notify("initialized");setTimeout(this.boundKeepDispatching,1)},notifyBrowsingFiles:function(){FlowUtil.log("Received Browsing files notification");
Flow.module("AppletProgressIndicator").notify("requestHide")},fileBrowsed:function(file){FlowUtil.log("Received fileBrowsed dispatch request.");this.dispatchQueue.push(function(){this.browse(new WrappedNativeEntity({target:file,accessMethod:"evaluate"}))}.bind(this));this.shouldDispatch=true},dispatchBrowseComplete:function(){FlowUtil.log("Received browse complete dispatch request");this.dispatchQueue.push(function(){this.browseComplete()}.bind(this));this.shouldDispatch=true},dispatchBrowseCanceled:function(){FlowUtil.log("Received browse canceled dispatch request");
this.dispatchQueue.push(function(){this.browseCanceled()}.bind(this));this.shouldDispatch=true},dispatchFileEventWithWrap:function(requestId,rawEventType,nativeEventData){var rid=(new String(requestId)).toString();var ret=(new String(rawEventType)).toString();var eventData={};if(ret=="Data")eventData.data=(new String(nativeEventData.data())).toString();else if(ret=="Error")eventData.message=(new String(nativeEventData.message())).toString();try{this.dispatchFileEvent(rid,ret,eventData)}catch(e){FlowUtil.log("Error dispatching file event",
e)}},dispatchNetEventWithWrap:function(requestId,rawEventType,nativeEventData){var rid=(new String(requestId)).toString();var ret=(new String(rawEventType)).toString();var eventData={};if(ret=="Connect")eventData.recycled=nativeEventData.recycled();else if(ret=="RequestProgress")eventData.percentComplete=nativeEventData.percentComplete();else if(ret=="RequestComplete");else if(ret=="HttpStatus"){eventData.code=nativeEventData.code();eventData.message=(new String(nativeEventData.message())).toString();
eventData.headers=(new String(nativeEventData.headers())).toString()}else if(ret=="Data")eventData.data=(new String(nativeEventData.data())).toString();else if(ret=="Error")eventData.message=(new String(nativeEventData.message())).toString();else if(ret=="Close");else if(ret=="ResponseComplete");try{this.dispatchNetEvent(rid,ret,eventData)}catch(e){FlowUtil.log("Error dispatching net event",e)}},logAppletLogs:function(logLevel,logBuffer){this.logAppletLogs(logLevel,logBuffer)},keepDispatching:function(){if(this.shouldDispatch)if(this.dispatchQueue.length>
0){if(this.dispatchQueue.length>0){var es=this.dispatchQueue.length;for(var i=0;i<es;i++){var e=this.dispatchQueue.shift();try{if(e)e()}catch(excep){FlowUtil.log("Caught Exception: ",excep)}}}setTimeout(this.boundKeepDispatching,20)}else setTimeout(this.boundKeepDispatching,250);else setTimeout(this.boundKeepDispatching,1E3)},notifyReady:function(){this.mod.notify("internallyAvailable")},notifyNotReady:function(){this.mod.notify("internallyUnavailable")}}));Flow.module("AppletIOKernelApplet").dependsOn(["Configuration::initialized"]).on("dependencies::met",
function(){if(this.ranOnce)return;if(Configuration.initializeAppletIOKernel){this.ranOnce=true;Flow.module("AppletIOKernelApplet").notify("shouldBeEmbedded")}})})();$(document).ready(function(){if(this.documentReady)return;this.documentReady=true;console.log("Console initialization: document ready");window.onDocumentReadyEpoch=(new Date).getTime();Flow.module("document").dependsOn(Flow.Nothing()).on("dependencies::met","ready")});Flow.module("BreadcrumbConfiguration").dependsOn(["document::ready"]).on("dependencies::met",function(){Diagnostics.Breadcrumbs.add("Configuration","flashSocketPolicyPort="+Configuration.flashSocketPolicyPort)});
Flow.module("imageEltTransformation").dependsOn(["document::ready"]).on("dependencies::met",function(){AH.transformImageElts();Flow.module("imageEltTransformation").notify("done")});Flow.module("Console").dependsOn(["Ui::initialized"]).on("dependencies::met",function(){var checkForConsole=function(){if(window.Console)Flow.module("Console").notify("ready")};Flow.until("Console::ready",{every:200,run:checkForConsole,forever:true})});
Flow.module("ConsoleInitialization").dependsOn(["Console::ready","Configuration::initialized","BannerMan::ready"]).on("dependencies::met",function(){var tryConsoleInitialize=function(){if(!Configuration.useIntegratedSecurity&&!Configuration.accessKey){var subjectText="Cannot log in.";var messageText="You must either enable integrated security or specify custom credentials.";if(Console.Translator){subjectText=Console.Translator.cannotLogIn();messageText=Console.Translator.youMustEitherEnableIntegratedSecurityOrSpecifyCustomCredentials()}BannerMan.createAndShow({subject:subjectText,
message:messageText});return}if(!this.alreadyInitialized){this.alreadyInitialized=true;Console.initialize(Configuration,true);Flow.module("Console").notify("initialized")}};Flow.until("Console::initialized",{every:1E3,run:tryConsoleInitialize,maxAttempts:20,onMaxAttempts:function(){Ui.totalLoginFailure()}})});Flow.module("ConsoleLoginAction").dependsOn(["Console::initialized"]).on("dependencies::met",function(){if(!this.alreadyStarted){this.alreadyStarted=true;Console.login();Ui.hookup();Flow.module("Console").notify("loginStarted")}});
Flow.module("NotifyFlashInitialized").dependsOn(["FlashIOKernel::ready"],["FlashIOKernel::restarted"]).on("dependencies::met",function(){Console.FlashIOKernel.flashInitialized()});
Flow.module("UiTransforms").dependsOn(["Ui::initialized"]).on("dependencies::met",function(){$("#upload-wizard").shadow();$("#upload-wizard-file-references").selectable({filter:"div"});$("#upload-wizard-metadata").selectable({filter:"div"});$("#upload-wizard-grants").selectable({filter:"div"});$("#operations-panel-operations").selectable({filter:"div"});$("#properties-panel-metadata").selectable({filter:"div"});$("#properties-panel-grants").selectable({filter:"div"});$("#properties-panel-lifecycle-rules").selectable({filter:"div",
autoRefresh:false});$("#properties-panel-tags-list").selectable({filter:"div"});if($.browser.mozilla){var searchInput=$("#search-input");searchInput.focusout(function(){if(!$(this).val()){$(this).addClass("placeholder-search-input");$(this).val($(this).attr("placeholder"))}});searchInput.focus(function(){$(this).removeClass("placeholder-search-input");if($(this).val()==$(this).attr("placeholder"))$(this).val("")});searchInput.val("").focusout()}$("#credentials-select").change(function(){var value=
$(this).val();if(!value)return;var credentials=value.split("|");var accessKey=credentials[0];var secretKey=credentials[1];$("#access-key-input").val(accessKey);$("#secret-key-input").val(secretKey)});var fastSlidingWindow=false;if($.browser.webkit||fastSlidingWindow){Ui.ListView.slidingWindowPageSize=14;Ui.ListView.slidingWindowDefaultUpdateRate=100;Ui.ListView.slidingWindowUpdateRate=Ui.ListView.slidingWindowDefaultUpdateRate;Ui.ListView.slidingWindowFastestUpdateRate=Ui.ListView.slidingWindowDefaultUpdateRate/
2;Ui.ListView.slidingWindowSlowestUpdateRate=Ui.ListView.slidingWindowDefaultUpdateRate*10}setTimeout(function(){setTimeout(Ui.ListView.updateSlidingWindow.bind(Ui.ListView),Ui.ListView.slidingWindowUpdateRate)},Ui.ListView.slidingWindowSlowestUpdateRate)});
Flow.module("ConsoleTests").dependsOn(["BannerMan::ready","BlockDetection::ready","Console::initialized"]).on("dependencies::met",function(){var conditionalBind=function(fun){Flow.module("Configuration").onWithOptions("it::initialized",fun,{nowIfTriggered:true,once:true})};window.BlockDetector=new BlockDetection({onPopupsBlocked:function(){conditionalBind(function(){Console.tattle("S3Console.Error","popup-blocked-error",null);Logging.log("Popup-Blocked-Error",1)})},onFlashBlocked:function(){var fired=
false;conditionalBind(function(){if(!fired){Console.tattle("S3Console.Login","flash-blocked-error",null);Logging.log("Flash.Blocked.Error",1);if(!Console.isRemoteIOKernelAvailable()){var subjectText="Flash appears to be blocked.";var messageText="Flash is required to communicate with the Amazon S3 servers.";if(Console.Translator){subjectText=Console.Translator.flashAppearsToBeBlocked();messageText=Console.Translator.flashIsRequiredToCommunicateWithTheAmazonS3Servers()}BannerMan.createAndShow({subject:subjectText,
message:messageText})}fired=true}})},skipDefaultPopupDetection:true});Flow.module("ConsoleTests").notify("ran")});Configuration.initialize();Flow.module("Configuration").notify("initialized");(function(ns){ns.BlockDetection=function(opts){this.initialize(opts)};ns.BlockDetection.prototype={cheapEach:function(col,fun,context){ret=[];for(var i=0;i<col.length;i++)ret.push(fun.call(context||null,col[i]));return ret},initialize:function(opts){this.shouldSkipFlashDetection=false;this.flashBlocked=false;this.popupsBlocked=false;for(var key in opts)this[key](opts[key]);this.swfs=[];this.swfInterval=null;this.flashBlockedCallbackCalled=false;if(Configuration.canUseRemoteIOKernelForUploads)this.shouldSkipFlashDetection=
true;else if(Configuration.useCloudFront)this.emptySwfURL=CB.resolve("EmptySwf.swf");else this.shouldSkipFlashDetection=true;var self=this;this.boundCleanup=function(){self.cleanup()};this.boundDomNodeInserted=function(ev){self.domNodeInserted(ev)};this.boundCheckEmbedType=function(){self.checkEmbedType()};setTimeout(function(){self.detect.call(self)},1)},onFlashBlocked:function(fun){this.flashBlockedCallback=fun;this.fireFlashBlocked()},onPopupsBlocked:function(fun){this.popupsBlockedCallback=fun;
if(this.popupsBlocked)this.popupsBlockedCallback()},skipDefaultPopupDetection:function(v){this.skipPopupDetection=v},fireFlashBlocked:function(){if(this.flashBlocked&&this.flashBlockedCallback&&!this.flashBlockedCallbackCalled){this.flashBlockedCallbackCalled=true;this.flashBlockedCallback()}},firePopupsBlocked:function(){if(this.popupsBlocked&&this.popupsBlockedCallback)this.popupsBlockedCallback()},detect:function(){this.detectFlashBlocked();if(!this.skipPopupDetection)this.detectPopupsBlocked()},
detectFlashBlocked:function(){if(this.shouldSkipFlashDetection)return;if($.browser.msie)return;if(window.opera)return;document.body.addEventListener("DOMNodeInserted",this.boundDomNodeInserted,false);var self=this;var createAndEmbed=function(){var e=document.createElement("embed");e.style.position="absolute";e.style.left="-4000px";e.width=10;e.height=10;e.src=self.emptySwfURL;e.type="application/x-shockwave-flash";document.body.appendChild(e);return e};this.swfs.push(createAndEmbed());this.swfs.push(createAndEmbed());
this.swfInterval=window.setInterval(this.boundCheckEmbedType,100);window.setTimeout(this.boundCleanup,4E3)},checkEmbedType:function(){var inject=function(ary,init,callback){var initial=init;for(var i=0;i<ary.length;i++)initial=callback(initial,ary[i]);return initial};if(inject(this.swfs,true,function(acc,e){return acc&&e=="application/x-shockwave-flash"})){this.flashBlocked=true;this.cleanup()}},domNodeInserted:function(ev){var targ=ev.target;if(targ.nodeType!=1||targ.nodeName.toLowerCase()!="div")return;
var moveTarget=function(t){t.style.position="absolute";t.style.left="-4000px"};var self=this;var winner=function(){return true};var toss=function(col,opts){col.push([opts.at,opts.bullseye])};var darts=[];var extraTurn=function(){self.flashBlocked=true;window.setTimeout(self.boundCleanup,0);return true};var play=function(darts){for(var i=0;i<darts.length;i++)if(darts[i][0](targ)&&extraTurn())if(darts[i][1](targ))moveTarget()};toss(darts,{at:function(target){return target.className=="ujs_flashblock_placeholder"},
bullseye:function(target){return target.title==self.emptySwfURL}});toss(darts,{at:function(target){return target.hasAttribute("bgActive")||target.hasAttribute("bgactive")},bullseye:function(target){return target.title==self.emptySwfURL}});toss(darts,{at:function(target){return target.hasAttribute("style")&&target.getAttribute("style").indexOf("gofhjkjmkpinhpoiabjplobcaignabnl")!=-1},bullseye:winner});play(darts)},cleanup:function(){try{document.body.removeEventListener("DOMNodeInserted",this.boundDomNodeInserted,
false)}catch(e){}var self=this;this.cheapEach(this.swfs,function(swf){if(swf&&swf.parentNode)swf.parentNode.removeChild(swf);else{setTimeout(self.boundCleanup,10);return}});this.swfs=[];if(this.swfInterval!=null){window.clearInterval(this.swfInterval);this.swfInterval=null}var self=this;var overlays=document.getElementsByTagName("div");this.cheapEach(overlays,function(o){if((o.hasAttribute("bgActive")||o.hasAttribute("bgactive"))&&o.title==self.emptySwfURL||o.className=="ujs_flashblock_placeholder"&&
o.title==self.emptySwfURL)o.parentNode.removeChild(o)});this.fireFlashBlocked()},detectPopupsBlocked:function(){var testWindow=window.open("about:blank","","directories=no,height=100,width=100,menubar=no,resizable=no,scrollbars=no,status=no,titlebar=no,top=0,location=no");if(testWindow)testWindow.close();else this.forceFirePopupsBlocked()},forceFirePopupsBlocked:function(){this.popupsBlocked=true;this.firePopupsBlocked()}};Flow.module("BlockDetection").notify("ready")})(window);Ui.BucketPolicyPanel={noPolicyString:"",isDirty:false,saveEnabled:true,initialize:function(){$("#bucket-policy-wizard").hide();$("#bucket-policy-textarea").keydown(function(){setTimeout(Ui.BucketPolicyPanel.maybeToggleSave.bind(Ui.BucketPolicyPanel),100)});$("#bucket-policy-textarea").change(function(){Ui.BucketPolicyPanel.setDirty()});$("#bucket-policy-wizard").shadow()},updatePolicyPanel:function(bucket,policy){if(bucket.length>60){bucket=bucket.substr(0,60);bucket+="..."}$("#bucket-policy-panel-header").text(Ui.BucketPolicy.Translator.policyForBucket()+
' : "'+bucket+'"');if(JSON.parse(policy)!=null)$("#bucket-policy-textarea").val(JSON.stringify(JSON.parse(policy),null,"\t"));else $("#bucket-policy-textarea").val(this.noPolicyString);this.maybeToggleSave();$("#bucket-policy-loading-message").hide()},showValidationError:function(error){this.clear();$("#bucket-policy-error-message").text(error).css("display","block");$("#bucket-policy-error-indicator").show()},savePolicy:function(){this.clear();$("#bucket-policy-cancel-button").prop("disabled",true);
$("#bucket-policy-saving-indicator").show()},deletePolicy:function(){this.clear();$("#bucket-policy-textarea").val("");$("#bucket-policy-cancel-button").prop("disabled",true);$("#bucket-policy-deleting-indicator").show()},saveSuccessful:function(newPolicy){this.clear();$("#bucket-policy-ok-indicator").show();if(newPolicy!=null){$("#bucket-policy-textarea").val(JSON.stringify(JSON.parse(newPolicy),null,"\t"));$("#bucket-policy-button-text").text(Ui.BucketPolicy.Translator.editBucketPolicy())}else{$("#bucket-policy-textarea").val(this.noPolicyString);
$("#bucket-policy-button-text").text(Ui.BucketPolicy.Translator.addBucketPolicy())}this.isDirty=false},clear:function(){$("#bucket-policy-error-message").text("");$("#bucket-policy-saving-indicator").hide();$("#bucket-policy-deleting-indicator").hide();$("#bucket-policy-error-indicator").hide().css("display","block");$("#bucket-policy-error-indicator").hide();$("#bucket-policy-ok-indicator").hide()},disableButtons:function(){$("#cancel-policy-button").removeClass("button-normal");$("#delete-policy-button").removeClass("button-normal");
$("#save-policy-button").removeClass("button-normal");$("#cancel-policy-button").addClass("button-disabled");$("#delete-policy-button").addClass("button-disabled");$("#save-policy-button").addClass("button-disabled")},enableButtons:function(){$("#cancel-policy-button").removeClass("button-disabled");$("#delete-policy-button").removeClass("button-disabled");$("#save-policy-button").removeClass("button-disabled");$("#cancel-policy-button").addClass("button-normal");$("#delete-policy-button").addClass("button-normal");
$("#save-policy-button").addClass("button-normal")},open:function(){Ui.showModal($("#bucket-policy-wizard"),true,false);this.clear();$("#bucket-policy-loading-message").show()},close:function(timeout){this.isDirty=false;setTimeout("Ui.showModal($('#bucket-policy-wizard'), false, false)",timeout)},showConfirmationMessage:function(message){return confirm(message)},confirmCloseDirtyPanel:function(){if(!this.isDirty||!this.saveEnabled)return true;return confirm(Ui.BucketPolicy.Translator.youHaveUnsavedChangesInTheTextAreaConfirmation())},
isSaveEnabled:function(){return this.saveEnabled},setDirty:function(){this.isDirty=true},maybeToggleSave:function(){if($("#bucket-policy-textarea").val()==""){$("#save-policy-button").removeClass("button-normal");$("#save-policy-button").addClass("button-disabled");this.saveEnabled=false}else{$("#save-policy-button").removeClass("button-disabled");$("#save-policy-button").addClass("button-normal");this.saveEnabled=true}},isValidJSON:function(data){try{JSON.parse(data);return true}catch(e){return false}}};Ui.ListView={updateSelectedItemsInterval:null,moreItemsAvailablePrevious:false,moreItemsAvailableNext:false,toggleProgressIndicatorTimeout:null,jumpTextAvailable:false,jumpTimer:null,lastSeenKeyDown:null,lastSeenKeyTop:null,listVersions:false,initialize:function(){var self=this;$(Ui.ListView).bind("selected",this.updateSelectedItems.bind(this));$("#object-list-container").contextMenu({createMenu:this.createContextMenu.bind(this),destroyMenu:this.destroyContextMenu.bind(this)},this.contextMenuAction.bind(this));
this.minScrollThreshold=2E3;this.maxScrollThreshold=4E3;this.scrollThreshold=this.minScrollThreshold;this.slidingWindowPageSize=10;this.slidingWindowNormalPageSize=this.slidingWindowPageSize;this.slidingWindowLargePageSize=100;this.slidingWindowDefaultUpdateRate=200;this.slidingWindowUpdateRate=this.slidingWindowDefaultUpdateRate;this.slidingWindowFastestUpdateRate=this.slidingWindowDefaultUpdateRate/2;this.slidingWindowSlowestUpdateRate=this.slidingWindowDefaultUpdateRate*10;this.ButtonBar.initialize();
this.folderIconImagePath=CB.resolve("graphics/folder.png");this.lastClickedObjectRow=null},hookup:function(){$(document).on("mousedown","#object-list-container",Ui.Keyboard.setFocus.bind(Ui.Keyboard,this))},getSelectedItems:function(){var kids=[];$("#list-view tr[kid].ui-selected").each(function(index,element){kids.push($(element).attr("kid"))});return kids},isParentSelected:function(){var isParentSelected=false;$("#list-view tr[kid].ui-selected").each(function(index,element){if($(element).attr("parent")==
"parent")isParentSelected=true});return isParentSelected},updateSelectedItems:function(){if($("#list-view tbody .ui-selected").length==0&&Ui.PropertiesPanel.isOpen())Console.PropertiesPanel.followSelection();if(this.updateSelectedItemsInterval==null)this.updateSelectedItemsInterval=setTimeout(function(){if(Ui.ListView.listVersions)Console.VersionListView.updateSelectedItems();else Console.ListView.updateSelectedItems();this.updateSelectedItemsInterval=null}.bind(this),10)},startRename:function(){var kids=
this.getSelectedItems();if(kids.length==0){console.log("No items selected");return}if(kids.length>1){console.log("Renaming multiple items not supported");return}var kid=kids[0];var element=$("#list-view tbody tr[kid='"+kid+"']");if(element.attr("type")=="folder"){console.log("Renaming folder not supported");return}var nameElement=$(".object-name-text",element);$("#list-view tbody tr").removeClass("ui-selecting").removeClass("ui-selected");$("#list-view tbody tr[kid] .checkbox .inner").removeClass("checkbox-selected");
element.addClass("ui-selected");$("#list-view tbody").attr("disableListSelection","on");$("#object-list-container, #list-view, #list-view tbody").enableSelection();var previousValue=nameElement.text();var input=Utility.onDeckContentFactory("#object-list-view-rename-textbox-template");input.val(previousValue);var okButton=Utility.onDeckContentFactory("#object-list-view-rename-ok-button-template");var cancelButton=Utility.onDeckContentFactory("#object-list-view-rename-cancel-button-template");var closure=
{locked:false};var dispose=function(){nameElement.unbind("blur",finish);nameElement.unbind("focusout",finish);nameElement.unbind("change",finish);Ui.Keyboard.defaultFocus()};var rollback=function(){$("#list-view tbody").removeAttr("disableListSelection");$("#object-list-container, #list-view, #list-view tbody").disableSelection();input.remove();okButton.remove();cancelButton.remove();nameElement.text(previousValue);dispose()};var cancel=function(){if(closure.locked)return;closure.locked=true;rollback()};
var finish=function(){if(closure.locked)return;closure.locked=true;var newValue=$("input",nameElement).val();if(newValue==previousValue){rollback();return}$("#list-view tbody").removeAttr("disableListSelection");$("#object-list-container, #list-view, #list-view tbody").disableSelection();okButton.remove();cancelButton.remove();var progressIndicatorIconElement=Utility.onDeckContentFactory("#object-list-view-progress-icon-template");nameElement.text(newValue).append(progressIndicatorIconElement);var callback=
{error:function(message){console.log("Error renaming: "+message);rollback()},success:function(result){dispose();element.remove()}};try{Console.ListView.rename(kid,newValue,callback)}catch(e){callback.error(e.toString())}};nameElement.bind("blur",finish);nameElement.bind("focusout",finish);nameElement.bind("change",finish);cancelButton.mousedown(function(){closure.locked=true});cancelButton.mouseup(function(){closure.locked=false});cancelButton.click(cancel);okButton.click(finish);input.keydown(function(e){if(e.keyCode==
27)cancel();else if(e.keyCode==13)finish()});nameElement.empty().append(input).append(okButton).append(cancelButton);input.select();Ui.Keyboard.clearFocus()},keypress:function(e){if(Ui.ListView.listVersions){var keyCode=e.keyCode;if(keyCode==46){Console.VersionListView.deleteSelectedItems();return false}else if(keyCode==38){this.selectionUp(e.shiftKey||e.metaKey);return false}else if(keyCode==40){this.selectionDown(e.shiftKey||e.metaKey);return false}else if(keyCode==13){this.openSingleSelection();
return false}}else{var keyCode=e.keyCode;if(keyCode==8){Console.ListView.jump("");return false}else if(keyCode==27){this.closeJumpPanel();return false}else if(keyCode==46){Console.ListView.deleteSelectedItems();return false}else if(keyCode==38){this.selectionUp(e.shiftKey||e.metaKey);return false}else if(keyCode==40){this.selectionDown(e.shiftKey||e.metaKey);return false}else if(keyCode==13){this.openSingleSelection();return false}else if(keyCode==113){this.startRename();return false}else if(Ui.Keyboard.modKey(e))if(keyCode==
88){Console.ListView.cut();return false}else if(keyCode==67){Console.ListView.copy();return false}else{if(keyCode==86){Console.ListView.paste();return false}}else if(keyCode>47&&keyCode<91&&!e.altKey){var typedChar=String.fromCharCode(keyCode);typedChar=e.shiftKey?typedChar.toUpperCase():typedChar.toLowerCase();Console.ListView.openJumpPanel(typedChar);return false}}return Ui.Keyboard.keypressCatchall(e)},selectionUp:function(inclusive){var first=$("#list-view tr[kid].ui-selected:first");var newSelection;
if(first.length)newSelection=first.prev();else newSelection=$("#list-view tr[kid]:first");this.selectionMove(newSelection,inclusive)},selectionDown:function(inclusive){var last=$("#list-view tr[kid].ui-selected:last");var newSelection;if(last.length)newSelection=last.next();else newSelection=$("#list-view tr[kid]:first");this.selectionMove(newSelection,inclusive)},selectionMove:function(newSelection,inclusive){if(newSelection&&newSelection.length){newSelection.addClass("ui-selected");if(!inclusive)newSelection.siblings().removeClass("ui-selecting").removeClass("ui-selected");
this.updateSelectedItems()}},openSingleSelection:function(){if(Ui.ListView.listVersions)Console.VersionListView.openSelectedItems();else Console.ListView.openSelectedItems()},contextMenuAction:function(action){if(Ui.ListView.listVersions)Console.VersionListView.invokeContextualAction(action);else Console.ListView.invokeContextualAction(action)},createVersionContextMenu:function(element){var menu;if(element.is("#object-list-container"))menu=$("#list-view-context-menu");else{var types={"object":0,"folder":0};
var parent={"parent":0};var deleteObject={"delete":0};$("#list-view tr.ui-selected").each(function(index,element){var itemType=$(element).attr("type");var itemParent=$(element).attr("parent");var itemDelete=$(element).attr("delete");types[itemType]++;parent[itemParent]++;deleteObject[itemDelete]++});var objectCount=types["object"];var folderCount=types["folder"];var parentCount=parent["parent"];var deleteCount=deleteObject["delete"];if(deleteCount&&parentCount==0)menu=$(objectCount==1?"#version-delete-object-context-menu":
"#version-multiple-delete-objects-context-menu");else if(objectCount&&folderCount&&parentCount==0)menu=$("#version-delete-object-context-menu");else if(objectCount&&parentCount==0)menu=$(objectCount==1?"#version-object-context-menu":"#version-multiple-object-context-menu");else if(folderCount)menu=$(folderCount==1?"#version-folder-context-menu":"#version-multiple-folders-context-menu")}if(null!=menu)Ui.filterContextMenu(Console.VersionListView.contextualActions(),menu);return menu},createNormalContextMenu:function(element){var menu;
if(element.is("#object-list-container"))menu=$("#list-view-context-menu");else{var types={};var count=0;$("#list-view tr.ui-selected").each(function(index,element){var itemType=$(element).attr("type");if(!types[itemType])types[itemType]=1;else types[itemType]++});var objectCount=types["object"];var folderCount=types["folder"];if(objectCount&&folderCount)menu=$("#multiple-objects-and-folders-context-menu");else if(objectCount)menu=$(objectCount==1?"#object-context-menu":"#multiple-objects-context-menu");
else if(folderCount)menu=$(folderCount==1?"#folder-context-menu":"#multiple-folders-context-menu");else menu=$("#list-view-context-menu")}Ui.filterContextMenu(Console.ListView.contextualActions(),menu);return menu},createContextMenu:function(element){if($("#list-view tbody").attr("disableListSelection"))return;if(Ui.ListView.listVersions)return this.createVersionContextMenu(element);else return this.createNormalContextMenu(element)},destroyContextMenu:function(){},addVersionedItems:function(listViewItems,
append,displayedItemsStart,displayedItemsEnd){if(Ui.ListView.listVersions){displayedItemsStart=Utility.escape(displayedItemsStart);displayedItemsEnd=Utility.escape(displayedItemsEnd);var heightElement=$("#object-list-container").children();var originalHeight=heightElement.outerHeight();var extender=$(append?"#list-view-next-extender":"#list-view-previous-extender");var listViewBody=$("#list-view tbody");var elementsToPrepend=[];var addAsParent=true;for(var i=0;i<listViewItems.length;i++){var listViewItem=
listViewItems[i];var element;if(listViewItem.type=="object")if(append){if(listViewItem.name!=this.lastSeenKeyDown){element=this.createTipElement(listViewItem);element.appendTo(listViewBody);this.hookupItemElement(element)}}else if(listViewItem.name!=displayedItemsStart&&listViewItem.name!=this.lastSeenKeyTop){element=this.createTipElement(listViewItem);elementsToPrepend.unshift(element)}else if(listViewItem.name==displayedItemsStart&&addAsParent){$("#list-view tbody tr[parentName='"+Utility.escape(listViewItem.name)+
"']").remove();element=this.createTipElement(listViewItem);elementsToPrepend.unshift(element);addAsParent=false}if(append){element=this.createVersionedItemElement(listViewItem);element.appendTo(listViewBody);this.hookupItemElement(element);this.lastSeenKeyDown=listViewItem.name;this.lastSeenKeyTop=null}else{this.lastSeenKeyTop=listViewItem.name;this.lastSeenKeyDown=displayedItemsEnd;element=this.createVersionedItemElement(listViewItem);elementsToPrepend.unshift(element)}}for(var i=0;i<elementsToPrepend.length;i++){elementsToPrepend[i].prependTo(listViewBody);
this.hookupItemElement(elementsToPrepend[i])}var deltaHeight=heightElement.outerHeight()-originalHeight;extender.height(Math.max(0,extender.height()-deltaHeight))}},addItems:function(listViewItems,append){if(false==Ui.ListView.listVersions){var heightElement=$("#object-list-container").children();var originalHeight=heightElement.outerHeight();var extender=$(append?"#list-view-next-extender":"#list-view-previous-extender");var listViewBody=$("#list-view tbody");var elementsToPrepend=[];for(var i=0;i<
listViewItems.length;i++){var listViewItem=listViewItems[i];var element=this.createNormalItemElement(listViewItem);if(append){element.appendTo(listViewBody);this.hookupItemElement(element)}else elementsToPrepend.unshift(element)}for(var i=0;i<elementsToPrepend.length;i++){elementsToPrepend[i].prependTo(listViewBody);this.hookupItemElement(elementsToPrepend[i])}var deltaHeight=heightElement.outerHeight()-originalHeight;extender.height(Math.max(0,extender.height()-deltaHeight))}},insertItemBefore:function(kidToInsertBefore,
listViewItem){var insertionPoint=$("#list-view tbody tr[kid='"+kidToInsertBefore+"']");if(!insertionPoint.length)throw new Error("Could not find insertion point: "+kidToInsertBefore);var element=this.createItemElement(listViewItem).insertBefore(insertionPoint);this.hookupItemElement(element)},insertVersionedRowWithHeaderBefore:function(kidToInsertBefore,listViewItem){var insertionPoint=$("#list-view tbody tr[kid='"+kidToInsertBefore+"']:first");if(!insertionPoint.length)throw new Error("Could not find insertion point: "+
kidToInsertBefore);if(listViewItem.type=="object"){var tipElement=this.createTipElement(listViewItem).insertBefore(insertionPoint);this.hookupItemElement(tipElement)}var element=this.createItemElement(listViewItem).insertBefore(insertionPoint);this.hookupItemElement(element)},insertVersionedRowAfterHeader:function(kidHeader,listViewItem){var insertionPoint=$("#list-view tbody tr[kid='"+kidHeader+"']:first");if(!insertionPoint.length)throw new Error("Could not find insertion point: "+kidHeader);var element=
this.createItemElement(listViewItem).insertAfter(insertionPoint);this.hookupItemElement(element)},replaceItem:function(kidToReplace,listViewItem){var replace=$("#list-view tbody tr[kid='"+kidToReplace+"']");if(!replace.length)throw new Error("Could not find item to remove: "+kidToReplace);var element=this.createItemElement(listViewItem);replace.replaceWith(element);this.hookupItemElement(element);this.updateSelectedItems()},removeItem:function(kidToRemove){$("#list-view tbody tr[kid='"+kidToRemove+
"']").remove();this.updateSelectedItems()},removeVersionItem:function(kidToRemove,keyName){var name=Utility.escape(keyName);$("#list-view tbody tr[kid='"+kidToRemove+"'][ child=\""+name+'" ]').remove();var kid=$('#list-view tbody tr[ child="'+name+'" ]').first().attr("kid");$("#list-view tbody tr[parentName='"+name+"']").attr("kid",kid);var length=$('#list-view tbody tr[ child="'+name+'" ]').length;if(length==0)$("#list-view tbody tr[parentName='"+name+"']").remove();this.updateSelectedItems()},createTipElement:function(listViewItem){var kid=
listViewItem.kid;var size,lastModified,versionId,deleted,storageClass,element;var name=listViewItem.name;var icon=CB.resolve(selectItemIconByExtension(name));storageClass="--";size="--";versionId="--";element=Utility.onDeckContentFactory("#versioned-parent-object-list-view-item-template");element.attr("kid",kid);element.attr("parent","parent");element.attr("parentName",Utility.escape(name));element.attr("type",listViewItem.type);$(".small-icon img",element).attr("src",icon);$(".object-name-text",
element).text(name);$(".object-storage-class",element).text(storageClass);$(".object-size",element).text(size);$(".object-version-id",element).text(versionId);$(".object-name",element).addClass(listViewItem.type);element.data("item",listViewItem);return element},createVersionedItemElement:function(listViewItem){var name=listViewItem.name;var kid=listViewItem.kid;var icon,size,lastModified,versionId,deleted,element,versionName,storageClass;if(listViewItem.type=="object"){lastModified=Ui.friendlyDate(listViewItem.lastModified);
versionId=listViewItem.versionId;deleted=listViewItem.deleted;element=Utility.onDeckContentFactory("#versioned-child-object-list-view-item-template");if(deleted==" (Delete Marker)"){storageClass="--";size="--";element.attr("delete","delete")}else{storageClass=Ui.StorageClassTypes[listViewItem.storageClass].label();size=Ui.friendlyBytes(listViewItem.size)}$(".object-name",element).addClass("italic");versionName=lastModified+" "+deleted}else if(listViewItem.type=="folder"){icon=this.folderIconImagePath;
size="--";versionId="--";storageClass="--";versionName=name;element=Utility.onDeckContentFactory("#versioned-folder-list-view-item-template")}else throw new Error("Invalid list entry type: "+listViewItem.type);element.attr("kid",kid);element.attr("type",listViewItem.type);element.attr("child",Utility.escape(name));if(icon)$(".small-icon img",element).attr("src",icon);$(".object-name-text",element).text(versionName);$(".object-storage-class",element).text(storageClass);$(".object-size",element).text(size);
$(".object-version-id",element).text(versionId);$(".object-name",element).addClass(listViewItem.type);element.data("item",listViewItem);return element},createNormalItemElement:function(listViewItem){var name=listViewItem.name;var kid=listViewItem.kid;var icon,size,lastModified,storageClass;if(listViewItem.type=="object"){icon=CB.resolve(selectItemIconByExtension(name));size=Ui.friendlyBytes(listViewItem.size);lastModified=Ui.friendlyDate(listViewItem.lastModified);storageClass=Ui.StorageClassTypes[listViewItem.storageClass].label()}else if(listViewItem.type==
"folder"){icon=this.folderIconImagePath;size="--";lastModified="--";storageClass="--"}else throw new Error("Invalid list entry type: "+listViewItem.type);var element=Utility.onDeckContentFactory("#normal-object-list-view-item-template");element.attr("kid",kid);element.attr("type",listViewItem.type);$(".small-icon img",element).attr("src",icon);$(".object-name-text",element).text(name);$(".object-storage-class",element).text(storageClass);$(".object-size",element).text(size);$(".object-last-modified",
element).text(lastModified);$(".object-name",element).addClass(listViewItem.type);element.data("item",listViewItem);return element},createItemElement:function(listViewItem){if(Ui.ListView.listVersions)return this.createVersionedItemElement(listViewItem);else return this.createNormalItemElement(listViewItem)},selectAllRowsBetween:function(firstSelectedRow,lastSelectedRow){if(!firstSelectedRow||!lastSelectedRow)return;var firstKid=firstSelectedRow.attr("kid");var rowSelector="tr[kid='"+firstKid+"']";
if(lastSelectedRow.index()<firstSelectedRow.index()){lastSelectedRow.nextUntil(rowSelector).addClass("ui-selected");lastSelectedRow.nextUntil(rowSelector).find(".checkbox .inner").addClass("checkbox-selected")}else{lastSelectedRow.prevUntil(rowSelector).addClass("ui-selected");lastSelectedRow.prevUntil(rowSelector).find(".checkbox .inner").addClass("checkbox-selected")}},onClickObjectCheckbox:function(e){if($("#list-view tbody").attr("disableListSelection"))return;if(Console.ListView.promptUnsavedChanges()||
Console.VersionListView.promptUnsavedChanges())return;var checkbox=e.data.currentCheckbox;var currentRow=e.data.currentRow;var checkboxInner=$(".inner",checkbox);if(e.shiftKey){this.selectAllRowsBetween(currentRow,this.lastClickedObjectRow);checkboxInner.addClass("checkbox-selected");currentRow.addClass("ui-selected")}else if(checkboxInner.hasClass("checkbox-selected")){checkboxInner.removeClass("checkbox-selected");currentRow.removeClass("ui-selected")}else{checkboxInner.addClass("checkbox-selected");
currentRow.addClass("ui-selected")}this.lastClickedObjectRow=currentRow;$(Ui.ListView).trigger("selected");e.stopPropagation()},onClickObjectRow:function(e){var currentRow=e.data.currentRow;var currentCheckbox=e.data.currentCheckbox;if($("#list-view tbody").attr("disableListSelection")||currentRow.attr("unselectable"))return;if(Console.ListView.promptUnsavedChanges()||Console.VersionListView.promptUnsavedChanges())return;var checkboxInner=$(".inner",currentCheckbox);if(!currentRow.hasClass("ui-selected"))if(e.shiftKey){this.selectAllRowsBetween(currentRow,
this.lastClickedObjectRow);currentRow.addClass("ui-selected");checkboxInner.addClass("checkbox-selected")}else if(e.ctrlKey||e.metaKey){currentRow.addClass("ui-selected");checkboxInner.addClass("checkbox-selected")}else{$("#list-view tbody tr[kid]").removeClass("ui-selected");$("#list-view tbody tr[kid] .checkbox .inner").removeClass("checkbox-selected");currentRow.addClass("ui-selected");checkboxInner.addClass("checkbox-selected")}else if((e.ctrlKey||e.metaKey)&&$("#list-view tbody .ui-selected").length>
1){currentRow.removeClass("ui-selected");checkboxInner.removeClass("checkbox-selected");currentRow=null}else{$("#list-view tbody tr[kid]").removeClass("ui-selected");$("#list-view tbody tr[kid] .checkbox .inner").removeClass("checkbox-selected");currentRow.addClass("ui-selected");checkboxInner.addClass("checkbox-selected")}this.lastClickedObjectRow=currentRow;$(Ui.ListView).trigger("selected")},onRightClickObjectRow:function(e){var currentRow=e.data.currentRow;var currentCheckbox=e.data.currentCheckbox;
if($("#list-view tbody").attr("disableListSelection")||currentRow.attr("unselectable"))return;if(Console.ListView.promptUnsavedChanges()||Console.VersionListView.promptUnsavedChanges())return;if(!currentRow.hasClass("ui-selected"))this.onClickObjectRow(e)},hookupItemElement:function(element){$(element).contextMenu({createMenu:this.createContextMenu.bind(this),destroyMenu:this.destroyContextMenu.bind(this)},this.contextMenuAction.bind(this));var checkbox=$(".checkbox",element);var checkboxContainer=
$(".checkbox-container",element);checkboxContainer.bind("click",{currentRow:element,currentCheckbox:checkbox},this.onClickObjectCheckbox.bind(this));element.bind("click",{currentRow:element,currentCheckbox:checkbox},this.onClickObjectRow.bind(this));if(element.attr("type")=="folder")$(".object-name-text",element).click(function(){if($("#list-view tbody").attr("disableListSelection"))return;if(!Ui.ListView.listVersions)Console.ListView.browseKid(element.attr("kid"));else if(element.attr("parent")!=
"parent"&&element.attr("delete")!="delete"){Ui.ListView.lastSeenKeyDown=null;Ui.ListView.lastSeenKeyTop=null;Console.VersionListView.browseKid(element.attr("kid"))}}.bind(this));$(element).bind("beforeContextMenu",{currentRow:element,currentCheckbox:checkbox},this.onRightClickObjectRow.bind(this));$(element).bind("dblclick",function(){if($("#list-view tbody").attr("disableListSelection"))return;if(!Ui.ListView.listVersions)Console.ListView.browseKid($(this).attr("kid"));else if($(this).attr("parent")!=
"parent"&&$(this).attr("delete")!="delete"){if($(this).attr("type")=="folder"){Ui.ListView.lastSeenKeyDown=null;Ui.ListView.lastSeenKeyTop=null}Console.VersionListView.browseKid($(this).attr("kid"))}})},trimVersionWindow:function(count,fromEnd){var heightElement=$("#object-list-container").children();var originalHeight=heightElement.outerHeight();var extender;if(fromEnd){var currentRow=$("#list-view tbody tr:last");while(count-- >0){var rowToRemove=currentRow;var name=currentRow.attr("child");currentRow=
currentRow.prev();rowToRemove.remove();var length=name?$('#list-view tbody tr[ child="'+name+'" ]').length:-1;if(length==0){var removeParent=currentRow;currentRow=currentRow.prev();removeParent.remove()}}extender=$("#list-view-next-extender")}else{var currentRow=$("#list-view tbody tr:first");while(count>0){if(currentRow.attr("parentName")){currentRow=currentRow.next();continue}var rowToRemove=currentRow;var name=currentRow.attr("child");currentRow=currentRow.next();rowToRemove.remove();var length=
$('#list-view tbody tr[ child="'+name+'" ]').length;if(length==0)$("#list-view tbody tr[parentName='"+name+"']").remove();else $("#list-view tbody tr[parentName='"+name+"']").attr("kid",currentRow.attr("kid"));count--}extender=$("#list-view-previous-extender")}var deltaHeight=originalHeight-heightElement.outerHeight();extender.height(extender.height()+deltaHeight)},trimWindow:function(count,fromEnd){var heightElement=$("#object-list-container").children();var originalHeight=heightElement.outerHeight();
var extender;if(fromEnd){var currentRow=$("#list-view tbody tr:last");while(count-- >0){var rowToRemove=currentRow;currentRow=currentRow.prev();rowToRemove.remove()}extender=$("#list-view-next-extender")}else{var currentRow=$("#list-view tbody tr:first");while(count-- >0){var rowToRemove=currentRow;currentRow=currentRow.next();rowToRemove.remove()}extender=$("#list-view-previous-extender")}var deltaHeight=originalHeight-heightElement.outerHeight();extender.height(extender.height()+deltaHeight)},clear:function(){this.toggleBottomPanel(false);
this.setMoreItemsAvailable(false,false);$("#list-view tbody").empty();$("#list-view-previous-extender").height(0);$("#list-view-next-extender").height(0)},displayLocation:function(bucket,path){if(!Ui.ListView.listVersions){var pathSegments=Ui_updatePathLabel($("#breadcrumb-active"),bucket,path);pathSegments.addClass("clickable").bind("click",function(){var path=$(this).attr("path");if(path!==undefined)Console.ListView.browseFolder(path)})}else{var pathSegments=Ui_updatePathLabel($("#breadcrumb-active"),
bucket,path);pathSegments.addClass("clickable").bind("click",function(){var path=$(this).attr("path");if(path!==undefined){Ui.ListView.lastSeenKeyDown=null;Ui.ListView.lastSeenKeyTop=null;Console.VersionListView.browseFolder(path)}})}},toggleBottomPanel:function(on,message){if(on)$("#list-view-bottom-panel").show().text(message);else $("#list-view-bottom-panel").hide().empty()},setMoreItemsAvailable:function(previous,next){this.moreItemsAvailablePrevious=previous;this.moreItemsAvailableNext=next;
$("#list-view-more-items-available-previous").hide().empty();$("#list-view-more-items-available-next").hide().empty();if(previous){var label=$("<span> More items available... </span>").click(function(){if(Ui.ListView.listVersions)Console.VersionListView.loadPreviousItems();else Console.ListView.loadPreviousItems()});$('<img src="'+CB.resolve("graphics/more-previous.png")+'">').prependTo(label);$("#list-view-more-items-available-previous").show().append(label)}if(next){var label=$("<span> More items available... </span>").click(function(){if(Ui.ListView.listVersions)Console.VersionListView.loadNextItems();
else Console.ListView.loadNextItems()});$('<img src="'+CB.resolve("graphics/more-next.png")+'">').appendTo(label);$("#list-view-more-items-available-next").show().append(label)}},toggleProgressIndicator:function(on){clearTimeout(this.toggleProgressIndicatorTimeout);if(on)$("#list-view-progress-indicator").css("visibility","visible");else this.toggleProgressIndicatorTimeout=setTimeout(function(){$("#list-view-progress-indicator").css("visibility","hidden")},500)},openUrl:function(url){var newWindow=
window.open(url);if(!newWindow)window.BlockDetector.forceFirePopupsBlocked()},refresh:function(){this.lastSeenKeyDown=null;this.lastSeenKeyTop=null;if(Ui.ListView.listVersions)Console.VersionListView.refresh();else Console.ListView.refresh()},listVersion:function(isAboutToDisplayVersionListView){if(isAboutToDisplayVersionListView){$("#versioning-buttons .wx-button-group").removeClass("active");$("#show-versions-button").addClass("active");Console.VersionListView.setListVersions()}else{$("#versioning-buttons .wx-button-group").removeClass("active");
$("#hide-versions-button").addClass("active");Console.ListView.setListVersions()}},updateUiAsPerVersioningState:function(isOn,isCalledFromListView){this.listVersions=isOn;this.lastSeenKeyDown=null;this.lastSeenKeyTop=null;if(isOn){$("#version-list-table-header").show();$("#normal-list-table-header").hide()}else{$("#normal-list-table-header").show();$("#version-list-table-header").hide();if(isCalledFromListView){$("#versioning-buttons .wx-button-group").removeClass("active");$("#hide-versions-button").addClass("active")}}},
startCreateFolder:function(){var element=Utility.onDeckContentFactory("#new-folder-object-list-view-item-template");var listViewBody=$("#list-view tbody");element.prependTo(listViewBody);var nameElement=$(".object-name",element);$("#list-view tbody tr").removeClass("ui-selecting").removeClass("ui-selected");$("#list-view tbody tr[kid] .checkbox .inner").removeClass("checkbox-selected");element.addClass("ui-selected");listViewBody.attr("disableListSelection","on");$("#object-list-container, #list-view, #list-view tbody").enableSelection();
var input=$(".list-view-editable-name",nameElement);var okButton=$(".list-view-inline-ok-button",nameElement);var cancelButton=$(".list-view-inline-cancel-button",nameElement);var closure={locked:false};var dispose=function(){nameElement.unbind("blur",finish);nameElement.unbind("focusout",finish);nameElement.unbind("change",finish);Ui.Keyboard.defaultFocus()};var cancel=function(){if(closure.locked)return;closure.locked=true;listViewBody.removeAttr("disableListSelection");$("#object-list-container, #list-view, #list-view tbody").disableSelection();
element.remove();dispose()};var finish=function(){if(closure.locked)return;closure.locked=true;listViewBody.removeAttr("disableListSelection");$("#object-list-container, #list-view, #list-view tbody").disableSelection();okButton.remove();cancelButton.remove();var newValue=$("input",nameElement).val();var progressIndicatorIconElement=Utility.onDeckContentFactory("#object-list-view-progress-icon-template");nameElement.text(newValue).append(progressIndicatorIconElement);var callback={error:function(message){console.log("Error creating folder: "+
message);element.remove();dispose()},success:function(result){element.remove();dispose()}};try{if(Ui.ListView.listVersions)Console.VersionListView.createFolder(newValue,callback);else Console.ListView.createFolder(newValue,callback)}catch(e){callback.error(e.toString())}};nameElement.bind("blur",finish);nameElement.bind("focusout",finish);nameElement.bind("change",finish);cancelButton.mousedown(function(){closure.locked=true});cancelButton.mouseup(function(){closure.locked=false});cancelButton.click(cancel);
okButton.click(finish);input.keydown(function(e){if(e.keyCode==27)cancel();else if(e.keyCode==13)finish()});input.select()},updateSlidingWindow:function(){try{if(!this.moreItemsAvailableNext&&!this.moreItemsAvailablePrevious)return;var panel=$("#object-list-container");var actualHeight=panel.height();var scrollHeight=panel.children().height();var actualScrollTop=panel.scrollTop();var scrollBottom=scrollHeight-actualHeight-actualScrollTop-$("#list-view-next-extender").height();var scrollTop=actualScrollTop-
$("#list-view-previous-extender").height();if(this.moreItemsAvailableNext&&scrollBottom<-1.5*this.minScrollThreshold||this.moreItemsAvailablePrevious&&scrollTop<-1.5*this.minScrollThreshold){this.slidingWindowPageSize=this.slidingWindowLargePageSize;$("#list-view-sliding-window-loading-indicator").show()}else{this.slidingWindowPageSize=this.slidingWindowNormalPageSize;$("#list-view-sliding-window-loading-indicator").hide()}if(this.moreItemsAvailableNext&&scrollBottom<this.scrollThreshold){if(!Ui.ListView.listVersions)Console.ListView.loadNextItems(this.slidingWindowPageSize);
else Console.VersionListView.loadNextItems(this.slidingWindowPageSize);this.scrollThreshold=Math.max(this.minScrollThreshold,this.scrollThreshold-200);this.slidingWindowUpdateRate/=2}else if(this.moreItemsAvailablePrevious&&scrollTop<this.scrollThreshold){if(!Ui.ListView.listVersions)Console.ListView.loadPreviousItems(this.slidingWindowPageSize);else Console.VersionListView.loadPreviousItems(this.slidingWindowPageSize);this.scrollThreshold=Math.max(this.minScrollThreshold,this.scrollThreshold-200);
this.slidingWindowUpdateRate/=2}else{this.scrollThreshold=Math.min(this.maxScrollThreshold,this.scrollThreshold+200);this.slidingWindowUpdateRate*=2}}finally{this.slidingWindowUpdateRate=Math.min(this.slidingWindowSlowestUpdateRate,this.slidingWindowUpdateRate);this.slidingWindowUpdateRate=Math.max(this.slidingWindowFastestUpdateRate,this.slidingWindowUpdateRate);setTimeout(arguments.callee.bind(this),this.slidingWindowUpdateRate)}},openJumpPanel:function(jumpText){$("#jumpPanel").show();$("#jumpText").focus();
if(jumpText==""||jumpText==null){this.jumpTextAvailable=false;$("#jumpText").val("Start typing to jump to a location")}else{this.jumpTextAvailable=true;$("#jumpText").val(jumpText)}},closeJumpPanel:function(){$("#jumpPanel").hide();$("#jumpText").blur()},jumpBoxKeyDown:function(evt,input){if(!this.jumpTextAvailable){$("#jumpText").val("");this.jumpTextAvailable=true}},jumpBoxKeyUp:function(evt,input){if(!this.jumpTextAvailable)return;var code=evt.charCode||evt.keyCode;if(code==27){if(this.jumpTimer)clearTimeout(this.jumpTimer);
Console.ListView.undoJump();this.closeJumpPanel()}else if(code==13){if(this.jumpTimer)clearTimeout(this.jumpTimer);Console.ListView.jump($("#jumpText").val());this.closeJumpPanel()}else{if(this.jumpTimer)clearTimeout(this.jumpTimer);this.jumpTimer=setTimeout('Console.ListView.jump($("#jumpText").val())',1E3)}},ButtonBar:{initialize:function(){$("#object-and-folder-actions-menu-button").click(this.toggleMenu.bind(this));var self=this;var versionMenuElement=$("#version-object-and-folder-actions-menu");
versionMenuElement.find("A").mouseover(function(){versionMenuElement.find("LI.hover").removeClass("hover");$(this).parent().addClass("hover")}).mouseout(function(){versionMenuElement.find("LI.hover").removeClass("hover")}).click(function(){Ui.ListView.contextMenuAction($(this).attr("action"))});var menuElement=$("#object-and-folder-actions-menu");menuElement.find("A").mouseover(function(){menuElement.find("LI.hover").removeClass("hover");$(this).parent().addClass("hover")}).mouseout(function(){menuElement.find("LI.hover").removeClass("hover")}).click(function(){Ui.ListView.contextMenuAction($(this).attr("action"))})},
toggleMenu:function(){var self=this;var menuElement;if(Ui.ListView.listVersions)menuElement=$("#version-object-and-folder-actions-menu");else menuElement=$("#object-and-folder-actions-menu");if(menuElement.is(":hidden"))self.showMenu();else self.hideMenu()},showMenu:function(){if(Ui.ListView.listVersions){var self=this;var scrollTop=$(document).scrollTop();var scrollLeft=$(document).scrollLeft();var menu=$("#version-object-and-folder-actions-menu");menu.css({top:scrollTop+"px",left:scrollLeft+"px"}).position({my:"left top",
at:"left bottom",of:$("#object-and-folder-actions-menu-button"),offset:"0 0"}).fadeIn(150,function(){$(document).bind("mouseup",self.hideMenu).bind("keydown",self.hideMenuOnEscape);$("#version-object-and-folder-actions-menu").find("LI A").bind("click",self.hideMenu)});Ui.filterContextMenu(Console.VersionListView.contextualActions(),menu)}else{var self=this;var scrollTop=$(document).scrollTop();var scrollLeft=$(document).scrollLeft();var menu=$("#object-and-folder-actions-menu");menu.css({top:scrollTop+
"px",left:scrollLeft+"px"}).position({my:"left top",at:"left bottom",of:$("#object-and-folder-actions-menu-button"),offset:"0 0"}).fadeIn(150,function(){$(document).bind("mouseup",self.hideMenu).bind("keydown",self.hideMenuOnEscape);$("#object-and-folder-actions-menu").find("LI A").bind("click",self.hideMenu)});Ui.filterContextMenu(Console.ListView.contextualActions(),menu)}},hideMenu:function(){var menu;if(Ui.ListView.listVersions)menu=$("#version-object-and-folder-actions-menu");else menu=$("#object-and-folder-actions-menu");
menu.fadeOut(75);$(document).unbind("mouseup",arguments.callee);$(document).unbind("keydown",Ui.ListView.ButtonBar.hideMenuOnEscape);menu.find("LI A").unbind("click",arguments.callee)},hideMenuOnEscape:function(e){if(e.keyCode==27)Ui.ListView.ButtonBar.hideMenu()}}};(function(ui){var HtmlBlobFile=function(id,blob,entry){this.id=id;this.canRead=true;this.canWrite=false;this.canPosition=true;if(blob!=null){this.blob=blob;this.size=blob.size;this.name=blob.name;this.getPath="/"+blob.name}if(entry!=null){this.entry=entry;this.isFolder=entry.isDirectory;this.getPath=entry.fullPath;this.name=entry.name}};HtmlBlobFile.prototype={dispose:function(){this.blob=null},upload:function(request,callback){var readyStateChange=function(xhrId,state){if(state.readyState!=4)return;
var uploadResult={code:state.status,headers:state.responseHeaders,responseString:null,responseArray:null};if(request.responseType=="arraybuffer")uploadResult.responseArray=new Uint8Array(state.response)||[];else if(request.responseType=="text")uploadResult.responseString=state.response||state.responseText||"";else throw new Error("Invalid response type: "+request.responseType);callback(uploadResult)};var xhrId=Utility.uuid();try{XdmXhrServices.prepare(xhrId,request.endpoint,readyStateChange);XdmXhrServices.open(xhrId,
"PUT",request.path);XdmXhrServices.setResponseType(xhrId,request.responseType);for(var header in request.parameters)XdmXhrServices.setRequestHeader(xhrId,header,request.parameters[header]);var blob=this.blob;if(request.length==0)blob=null;else if(request.offset!=0||request.length!=blob.size){if(typeof blob.slice!="function")throw new Error("Blob slice not supported");blob=blob.slice(request.offset,request.offset+request.length)}XdmXhrServices.send(xhrId,blob);var upload=new HtmlBlobFileUpload(request.uploadId,
xhrId);xhrId=null;return upload}finally{if(xhrId!=null){XdmXhrServices.abort(xhrId);xhrId=null}}},read:function(request,callback){if(request.offset+request.length>this.size)throw new Error("File cannot be read at the specified position: "+fileId+" - "+this.name+" - "+offset+" - "+length+" - "+this.size);var blob=this.blob;if(request.offset!=0||request.length!=blob.size){if(typeof blob.slice!="function")throw new Error("Blob slice not supported");blob=blob.slice(request.offset,request.offset+request.length)}var fileReader=
null;try{fileReader=new FileReader;var read=new BlobRead(request.readId,fileReader,callback);fileReader.onloadend=function(){read.complete()};fileReader.onerror=function(){read.complete()};fileReader.readAsArrayBuffer(blob);fileReader=null;return read}finally{if(fileReader!=null){fileReader.abort();fileReader=null}}},snappyCompress:function(request,callback){var blob=this.blob;if(request.offset!=0||request.length!=blob.size)if(typeof blob.slice!="function")throw new Error("Blob slice not supported");
window.BeamServices.snappyCompress(request.requestId,blob,function(compressedChunk){var result={compressedChunk:compressedChunk};callback(result)}.bind(this))},digestEncode:function(request,callback){var blob=this.blob;if(request.offset!=0||request.length!=blob.size){if(typeof blob.slice!="function")throw new Error("Blob slice not supported");blob=blob.slice(request.offset,request.offset+request.length)}window.BeamServices.digestEncode(request.requestId,blob,request.verificationSeed,function(blob,
blocks,encodedChunk){var reconciliationState={blob:blob,blocks:blocks};var result={encodedChunk:encodedChunk,reconciliationState:reconciliationState};callback(result)}.bind(this,blob))},reconcile:function(fileId,reconciliationState,missingIndices){var reconciliation=new BlobBuilderFile(fileId,"Reconciliation-"+fileId);var blob=reconciliationState.blob;var blocks=reconciliationState.blocks;for(var i=0;i<missingIndices.length;i++){var block=blocks[missingIndices[i]];if(block==null)throw new Error("Could not find missing index in reconciliation: "+
missingIndex);var blockDataBlob=blob.slice(block.offset,block.offset+block.size);reconciliation.append(blockDataBlob,0,block.size)}return reconciliation}};var HtmlBlobFileUpload=function(uploadId,xhrId){this.uploadId=uploadId;this.xhrId=xhrId};HtmlBlobFileUpload.prototype={cancel:function(){XdmXhrServices.abort(this.xhrId)}};var HtmlBlobFileDigestEncodeRequest=function(requestId){this.requestId=requestId};HtmlBlobFileDigestEncodeRequest.prototype={cancel:function(){window.BeamServices.cancelDigestEncode(this.requestId)}};
var InMemoryFile=function(id,name){this.id=id;this.name=name;this.size=0;this.canRead=true;this.canWrite=true;this.canPosition=false};InMemoryFile.prototype={upload:function(request,callback){var readyStateChange=function(xhrId,state){if(state.readyState!=4)return;var uploadResult={code:state.status,headers:state.responseHeaders,responseString:null,responseArray:null};if(request.responseType=="arraybuffer")uploadResult.responseArray=state.response?new Uint8Array(state.response):[];else if(request.responseType==
"text")uploadResult.responseString=state.response||state.responseText||"";else throw new Error("Invalid response type: "+request.responseType);callback(uploadResult)};var xhrId=Utility.uuid();try{XdmXhrServices.prepare(xhrId,request.endpoint,readyStateChange);XdmXhrServices.open(xhrId,"PUT",request.path);XdmXhrServices.setResponseType(xhrId,request.responseType);for(var header in request.parameters)XdmXhrServices.setRequestHeader(xhrId,header,request.parameters[header]);this.send(xhrId,request.offset,
request.length);var upload=new InMemoryFileUpload(request.uploadId,xhrId);xhrId=null;return upload}finally{if(xhrId!=null){XdmXhrServices.abort(xhrId);xhrId=null}}},append:function(buffer,offset,length){throw new Error("append not implemented");},read:function(request){throw new Error("read not implemented");},send:function(xhrId,offset,length){throw new Error("send not implemented");},digestEncode:function(request){throw new Error("digestEncode not implemented");},dispose:function(){}};var BlobBuilderFile=
function(id,name){InMemoryFile.call(this,id,name);this.blobBuilder=new BlobBuilder};BlobBuilderFile.prototype=$.extend({},InMemoryFile.prototype,{append:function(buffer,offset,length){if(buffer instanceof Uint8Array){if(offset+length>buffer.byteLength)throw new Error("invalid offset");var bb=new BlobBuilder;bb.append(buffer.buffer);var blob=bb.getBlob();var blobOffset=offset;if(buffer.byteOffset)blobOffset+=buffer.byteOffset;if(blobOffset!=0||length!=blob.size)blob=blob.slice(blobOffset,blobOffset+
length);this.blobBuilder.append(blob)}else if(buffer instanceof Blob){if(offset!=0||length!=buffer.size)buffer=buffer.slice(offset,offset+length);this.blobBuilder.append(buffer)}else{var arrayBuffer=new Uint8Array(length);for(var i=0;i<length;i++)arrayBuffer[i]=buffer[offset+i];this.blobBuilder.append(arrayBuffer.buffer)}this.blob=this.blobBuilder.getBlob();this.size+=length},read:function(request,callback){if(request.offset+request.length>this.size)throw new Error("File cannot be read at the specified position: "+
fileId+" - "+this.name+" - "+offset+" - "+length+" - "+this.size);var blob=this.blob;if(request.offset!=0||request.length!=blob.size){if(typeof blob.slice!="function")throw new Error("Blob slice not supported");blob=blob.slice(request.offset,request.offset+request.length)}var fileReader=null;try{fileReader=new FileReader;var read=new BlobRead(request.readId,fileReader,callback);fileReader.onloadend=function(){read.complete()};fileReader.onerror=function(){read.complete()};fileReader.readAsArrayBuffer(blob);
fileReader=null;return read}finally{if(fileReader!=null){fileReader.abort();fileReader=null}}},send:function(xhrId,offset,length){try{var blob=this.blob||this.blobBuilder.getBlob();if(offset!=0||length!=this.size)blob=blob.slice(offset,offset+length);if(blob.size!=length)throw new Error("Blob size did not match length: "+xhrId+" - "+offset+" - "+length+" - "+blob.size);XdmXhrServices.send(xhrId,blob)}catch(e){console.error("Error sending",e)}},digestEncode:function(request){throw new Error("not yet implemented");
},dispose:function(){this.blobBuilder=null;this.blob=null}});var BinaryStringFile=function(id,name){InMemoryFile.call(this,id,name);this.binaryStringBuffers=[]};BinaryStringFile.prototype=$.extend({},InMemoryFile.prototype,{append:function(buffer,offset,length){if(typeof buffer==="string"){if(offset!=0||length!=buffer.length)buffer=buffer.substring(offset,length);this.binaryStringBuffers.push(buffer)}else{var tempBuffer="";for(var i=0;i<length;i++)tempBuffer+=String.fromCharCode(buffer[offset+i]);
this.binaryStringBuffers.push(tempBuffer)}this.size+=length},send:function(xhrId,offset,length){if(offset!=0||length!=this.size)throw new Error("BinaryStringFile slicing not supported: "+offset+" - "+length+" - "+this.size);XdmXhrServices.sendAsBinary(xhrId,this.binaryStringBuffers)},dispose:function(){this.binaryStringBuffer=null}});var Base64StringFile=function(id,name){InMemoryFile.call(this,id,name);this.base64StringBuffer=""};Base64StringFile.prototype=$.extend({},InMemoryFile.prototype,{append:function(buffer,
offset,length){var base64StringBuffer=this.base64StringBuffer;for(var i=0;i<buffer.length;i++)base64StringBuffer+=String.fromCharCode(buffer[offset+i]);this.size+=length},send:function(xhrId,offset,length){if(offset!=0||length!=this.size)throw new Error("Base64StringFile slicing not supported: "+offset+" - "+length+" - "+this.size);XdmXhrServices.setRequestHeader(xhrId,"x-s3-console-transfer-encoding","Base64");var blob=btoa(this.base64StringBuffer);XdmXhrServices.send(xhrId,blob)},dispose:function(){this.base64StringBuffer=
null}});var InMemoryFileUpload=function(uploadId,xhrId){this.uploadId=uploadId;this.xhrId=xhrId};InMemoryFileUpload.prototype={cancel:function(){XdmXhrServices.abort(this.xhrId)}};var BlobRead=function(readId,fileReader,callback){this.readId=readId;this.fileReader=fileReader;this.callback=callback};BlobRead.prototype={complete:function(){var error=this.fileReader.error;var result=this.fileReader.result;var readResult={};if(error!=null)readResult.error=error.toString();else if(result!=null)readResult.buffer=
new Uint8Array(result);else readResult.error="FileReader did not have an error or a result";this.callback(readResult)},cancel:function(){this.fileReader.abort();this.fileReader=null}};var HtmlFileServices=function(){};HtmlFileServices.prototype={initialize:function(){this.idCounter=0;this.files={};this.uploadRequests={};this.readRequests={};this.digestEncodeRequests={};this.snappyCompressRequests={};this.uriPrefix="file://";if(!window.BlobBuilder&&window.WebKitBlobBuilder)window.BlobBuilder=window.WebKitBlobBuilder;
if(!window.BlobBuilder&&window.MozBlobBuilder)window.BlobBuilder=window.MozBlobBuilder;if(window.Blob){if(typeof Blob.prototype.slice!="function"&&typeof Blob.prototype.webkitSlice=="function")Blob.prototype.slice=function(offset,end,contentType){return this.webkitSlice(offset,end,contentType)};if(typeof Blob.prototype.slice!="function"&&typeof Blob.prototype.mozSlice=="function")Blob.prototype.slice=function(offset,end,contentType){return this.mozSlice(offset,end,contentType)}}},select:function(){$("#upload-wizard-browse-button").unbind("click");
if($.browser.webkit)this.webkitSelect();else if($.browser.mozilla)this.mozillaSelect();else this.standardSelect()},createFile:function(name){var id=this.newId();var file;if(typeof BlobBuilder!="undefined")file=new BlobBuilderFile(id,name);else if(typeof XMLHttpRequest.prototype.sendAsBinary!="undefined")file=new BinaryStringFile(id,name);else if(typeof btoa!="undefined")file=new Base64StringFile(id,name);else throw new Error("In memory file creation not supported");this.files[id]=file;return file},
append:function(fileId,buffer,offset,length){var file=this.files[fileId];if(!file)throw new Error("File not found: "+fileId);file.append(buffer,offset,length)},read:function(request){var file=this.files[request.fileId];if(!file)throw new Error("File not found: "+request.fileId);if(!file.canRead)throw new Error("File cannot be read: "+request.fileId+" - "+file.name);if(this.readRequests[request.readId]!=null)throw new Error("Read id already exists: "+request.readId);var read=file.read(request,function(readResult){Console.HtmlFileServices.readComplete(request.readId,
readResult);this.cancelRead(request.readId)}.bind(this));this.read[request.readId]=read},cancelRead:function(readId){var read=this.readRequests[readId];delete this.readRequests[readId];if(read!=null)read.cancel()},upload:function(request){var resource=this.files[this.uriPrefix+request.filePath];if(!resource)throw new Error("File Resource not found: "+request.fileUri);if(this.uploadRequests[request.uploadId]!=null)throw new Error("Upload id already exists: "+request.uploadId);var upload=resource.upload(request,
function(uploadResult){Console.HtmlFileServices.uploaded(request.uploadId,uploadResult);htmlFileServices.cancelUpload(request.uploadId)}.bind(htmlFileServices));htmlFileServices.uploadRequests[upload.uploadId]=upload},cancelUpload:function(uploadId){var upload=this.uploadRequests[uploadId];if(upload){upload.cancel();delete this.uploadRequests[uploadId]}},snappyCompress:function(request){var file=this.files[request.fileId];if(!file)throw new Error("File not found: "+request.requestId);if(this.snappyCompressRequests[request.requestId]!=
null)throw new Error("Request id already exists: "+request.requestId);this.snappyCompressRequests[request.requestId]=file.snappyCompress(request,function(result){Console.HtmlFileServices.snappyCompressComplete(request.requestId,result);this.cancelSnappyEncode(request.requestId)}.bind(this))},cancelSnappyEncode:function(requestId){var request=this.snappyCompressRequests[requestId];if(request){request.cancel();delete this.snappyCompressRequests[requestId]}},digestEncode:function(request){var file=this.files[request.fileId];
if(!file)throw new Error("File not found: "+request.fileId);if(this.digestEncodeRequests[request.requestId]!=null)throw new Error("RequestId id already exists: "+request.requestId);this.digestEncodeRequests[request.requestId]=file.digestEncode(request,function(result){Console.HtmlFileServices.digestEncodeComplete(request.requestId,result);this.cancelDigestEncode(request.requestId)}.bind(this))},cancelDigestEncode:function(requestId){var request=this.digestEncodeRequests[requestId];if(request){request.cancel();
delete this.digestEncodeRequests[requestId]}},reconcile:function(fileId,reconciliationState,missingIndices){var file=this.files[fileId];if(!file)throw new Error("File not found: "+fileId);var reconciliationId=Utility.uuid();if(this.files[reconciliationId])throw new Error("Generate non-unique id: "+reconciliationId);var reconciliation=file.reconcile(reconciliationId,reconciliationState,missingIndices);this.files[reconciliationId]=reconciliation;return reconciliation},setUpUi:function(){this.setUpOverlay();
if(Configuration.dragAndDrop){var $input=$("#upload-wizard-browse-button-file-input");if($input[0].webkitEntries)this.initializeDragAndDrop()}},tearDownUi:function(){$("#upload-wizard-browse-button").unbind("click");this.removeForms();$("#html-file-services-drop-target").remove()},setUpOverlay:function(){this.removeForms();var id=this.newId();var formId="html-file-services-form-"+id;try{var $button=$("#upload-wizard-browse-button").css({position:"relative"});var $form=$("<form />").css({opacity:0,
position:"absolute",top:"0px",left:"0px",width:$button.width()+5,height:$button.height()+10,overflow:"hidden",cursor:"pointer"}).attr("id",formId);var $fileInput=$("<input />").attr("type","file").attr("name","files[]").attr("id","upload-wizard-browse-button-file-input").attr("multiple","multiple").css({position:"absolute",top:"0px",left:"0px",width:$button.width()+5,height:$button.height()+10,overflow:"hidden",cursor:"pointer"}).appendTo($form);$form.appendTo($button);$fileInput.change(this.formFileSelected.bind(this,
formId));$form=null}finally{if($form!=null)$form.remove()}},removeForms:function(){$("form").each(function(index,form){if(!!form.id.match(/^html-file-services-form-/))$("#"+form.id).remove()})},listDirectory:function(uri,marker,maxFileCount){try{var directoryEntry=htmlFileServices.files[uri].entry;if(directoryEntry==null)throw new Error("Directory Entry not found for URI : "+uri);var start=0;var end=0;if(marker==null)htmlFileServices.produceResourceNameListAndReturnFirstBatchOfResult(uri,directoryEntry,
maxFileCount);else{if(!directoryEntry.resourceNameArray)throw new Error("Directory Entry does not have resourceNameArray : "+uri);for(var i=0;i<directoryEntry.resourceNameArray.length;i++)if(marker==directoryEntry.resourceNameArray[i].name)start=i+1;if(start+maxFileCount<directoryEntry.resourceNameArray.length)end=start+maxFileCount;else end=directoryEntry.resourceNameArray.length;htmlFileServices.processSubResources(uri,directoryEntry.resourceNameArray,start,end)}}catch(e){throw new Error("listDirectory threw exception");
}},produceResourceNameListAndReturnFirstBatchOfResult:function(uri,directoryEntry,maxFileCount){var dirReader=directoryEntry.createReader();directoryEntry.resourceNameArray=[];var readEntries=function(){dirReader.readEntries(function(entries){if(entries.length){directoryEntry.resourceNameArray=directoryEntry.resourceNameArray.concat(entries);readEntries()}else htmlFileServices.processSubResources(uri,directoryEntry.resourceNameArray,0,Math.min(maxFileCount,directoryEntry.resourceNameArray.length))})};
readEntries()},processSubResources:function(uri,resourceNameArray,start,end){var subResourceNames=[];for(var i=start;i<end;i++){var entry=resourceNameArray[i];var htmlFileId=htmlFileServices.newId();subResourceNames.push(entry.name);var htmlFileResource=new HtmlBlobFile(htmlFileId,null,entry);htmlFileServices.files[htmlFileServices.uriPrefix+entry.fullPath]=htmlFileResource}Console.HtmlFileServices.offerListDirectoryResult(uri,subResourceNames)},open:function(uri){return htmlFileServices.files[uri]},
getAsyncFileSize:function(uri){var resource=this.files[this.uriPrefix+uri];if(resource==null)throw new Error("Resource not found in getAsyncFileSize for URI : "+uri);var entry=resource.entry;if(entry.isFile)entry.file(function(entry,file){htmlFileServices.files[htmlFileServices.uriPrefix+entry.fullPath].blob=file;htmlFileServices.files[htmlFileServices.uriPrefix+entry.fullPath].size=file.size;Console.HtmlFileServices.offerAsyncFileSize(entry.fullPath,file.size)}.bind(this,entry))},formFileSelected:function(formId){var $form=
$("#"+formId);try{var $fileInput=$("input[type=file]",$form);var files=$fileInput[0].files;for(var fileIndex=0;fileIndex<files.length;fileIndex++){var htmlFileId=this.newId();var blob=files[fileIndex];var htmlFileResource=new HtmlBlobFile(htmlFileId,blob);this.files[htmlFileServices.uriPrefix+htmlFileResource.getPath]=htmlFileResource;var truncated=fileIndex<files.length-1;Console.HtmlFileServices.selected(htmlFileResource,truncated)}}finally{this.setUpOverlay()}},initializeDragAndDrop:function(){$(".showForFolderUpload").hide();
$(".dragAndDropUpload").show();$("#html-file-services-drop-target").remove();$("#upload-wizard-browse-large-button").remove();var spanText=Console.Translator.dragAndDropFilesAndFoldersToUploadHere();$("<div />").attr("class","target-drag-and-drop-area").append($("<span />").text(spanText)).attr("id","html-file-services-drop-target").insertAfter("#upload-wizard-page-select-files div.panel-description:last").attr("dragenter",true);$("#html-file-services-drop-target")[0].addEventListener("drop",this.handleDrop.bind(this),
true);this.setEventListeners($("#html-file-services-drop-target"))},handleDrop:function(e){e.preventDefault();var items=e.dataTransfer.items;for(var fileIndex=0;fileIndex<items.length;fileIndex++){var htmlFileId=htmlFileServices.newId();var entry=null;if(typeof items[fileIndex].webkitGetAsEntry==="function")entry=items[fileIndex].webkitGetAsEntry();if(entry&&entry.isDirectory){var htmlFileResource=new HtmlBlobFile(htmlFileId,null,entry);this.files[this.uriPrefix+htmlFileResource.getPath]=htmlFileResource;
var truncated=fileIndex<items.length-1;Console.HtmlFileServices.selected(htmlFileResource,truncated)}else{var blob=items[fileIndex].getAsFile();if(blob){var htmlFileResource=new HtmlBlobFile(htmlFileId,blob);this.files[htmlFileServices.uriPrefix+htmlFileResource.getPath]=htmlFileResource;var truncated=fileIndex<items.length-1;Console.HtmlFileServices.selected(htmlFileResource,truncated)}}}},setEventListeners:function(target){$("#html-file-services-drop-target")[0].addEventListener("dragover",function(e){e.preventDefault();
$(target).attr("class","highlighted-target-drag-and-drop-area")});$("#html-file-services-drop-target")[0].addEventListener("dragleave",function(e){e.preventDefault();$(target).attr("class","target-drag-and-drop-area")});$("#html-file-services-drop-target")[0].addEventListener("drop",function(e){$(target).attr("class","target-drag-and-drop-area")})},dispose:function(file){if(typeof file=="string")file=this.files[file];else file=this.files[file.id];if(file){delete this.files[file.id];file.dispose()}},
newId:function(){return(this.idCounter++).toString()}};var htmlFileServices=new HtmlFileServices;ui.HtmlFileServices=htmlFileServices})(window.Ui);(function(ns,ajaxToSDKProxyConfig,locationTargetDomainMap,targetDomainProxyServerMap,errorConstants,reportMetrics){var XdmXhr=function(id,channel,readyStateChange){this.id=id;this.channel=channel;this.readyStateChange=readyStateChange};XdmXhr.prototype={dispose:function(){if(this.channel.iframe.contentWindow.XdmXhrProvider)this.channel.iframe.contentWindow.XdmXhrProvider.dispose(this.id);this.readyStateChange=null},open:function(method,url,user,password){try{if(this.channel.iframe.contentWindow.XdmXhrProvider)this.channel.iframe.contentWindow.XdmXhrProvider.open(this.id,
method,url,user,password);else this.channel.enqueue(function(){this.channel.iframe.contentWindow.XdmXhrProvider.open(this.id,method,url,user,password)}.bind(this))}catch(e){this.channel.enqueue(function(){this.channel.iframe.contentWindow.XdmXhrProvider.open(this.id,method,url,user,password)}.bind(this))}},abort:function(){if(this.channel.iframe.contentWindow.XdmXhrProvider)this.channel.iframe.contentWindow.XdmXhrProvider.abort(this.id)},send:function(requestData){if(this.channel.iframe.contentWindow.XdmXhrProvider)this.channel.iframe.contentWindow.XdmXhrProvider.send(this.id,
requestData)},sendAsBinary:function(requestData){if(this.channel.iframe.contentWindow.XdmXhrProvider)this.channel.iframe.contentWindow.XdmXhrProvider.sendAsBinary(this.id,requestData)},setRequestHeader:function(header,value){if(this.channel.iframe.contentWindow.XdmXhrProvider)this.channel.iframe.contentWindow.XdmXhrProvider.setRequestHeader(this.id,header,value)},setResponseType:function(responseType){if(this.channel.iframe.contentWindow.XdmXhrProvider)this.channel.iframe.contentWindow.XdmXhrProvider.setResponseType(this.id,
responseType)}};var DirectXhr=function(id,readyStateChange){this.id=id;this.xhr=Utility.buildXhr();this.xhr.onreadystatechange=this.onReadyStateChange.bind(this);this.readyStateChange=readyStateChange};DirectXhr.prototype={dispose:function(){this.xhr.abort();this.xhr.onreadystatechange=null;this.readyStateChange=null},open:function(method,url,user,password){this.xhr.open(method,url,true,user,password)},abort:function(){this.xhr.abort()},send:function(requestData){this.xhr.send(requestData)},sendAsBinary:function(requestData){if(requestData instanceof
Array){var realData="";for(var i=0;i<requestData.length;i++)realData+=requestData[i];requestData=realData}this.xhr.sendAsBinary(requestData)},setRequestHeader:function(header,value){this.xhr.setRequestHeader(header,value)},setResponseType:function(responseType){this.xhr.responseType=responseType},onReadyStateChange:function(){var xhr=this.xhr;var state={readyState:xhr.readyState,status:0};try{state.status=xhr.status?xhr.status:0}catch(e){}try{state.statusText=xhr.statusText}catch(e){}try{state.responseHeaders=
xhr.getAllResponseHeaders()}catch(e){}try{state.response=xhr.response}catch(e){}try{state.responseText=xhr.responseText}catch(e){}this.readyStateChange(this.id,state)}};var XdmXhrChannel=function(endpoint,iframe){this.endpoint=endpoint;this.iframe=iframe;this.queue=[];this.isSessionTokenSet=false};XdmXhrChannel.prototype={providerReady:function(){for(var i=0;i<this.queue.length;i++){var queuedCallback=this.queue[i];try{queuedCallback()}catch(e){console.log("Error invoking XdmXhr queued function: "+
this.endpoint+" - "+e)}}this.queue=null},enqueue:function(callback){if(this.queue==null)throw new Error("Cannot enqueue after provider is ready");this.queue.push(callback)}};var XdmXhrServices=function(options){this.options=options;this.initialized=false;this.isSessionTokenSet=false};XdmXhrServices.prototype={initialize:function(){if(this.initialized)return;this.initialized=true;this.xdmRequired=Configuration.canUseRemoteIOKernelForUploads&&Configuration.xdmRequired;if(this.xdmRequired){console.log("Xdm required - setting document domain");
window.document.domain=Configuration.documentDomain;this.domain=window.document.domain;console.log("Document domain successfully set: "+this.domain)}this.options=$.extend({scheme:window.location.protocol+"//",resourcePath:"/GetResource/",channelResource:"XdmXhrProvider.Satellite.html?sessionId="+Configuration.sessionId+"&cloudFrontHost="+BootstrapConfiguration.assetUrlPrefix+"&useVersion="+Configuration.useVersion+(this.domain?"&domain="+this.domain:"")+(Configuration.awsConsoleRegion?"&awsConsoleRegion="+
Configuration.awsConsoleRegion:""),preloadedChannels:[]},this.options);this.channels={};this.xhrs={};this.scheme=this.options.scheme;this.resourcePath=this.options.resourcePath;if(this.xdmRequired)for(var i=0;i<this.options.preloadedChannels.length;i++)this.channel(this.options.preloadedChannels[i])},prepare:function(id,endpoint,readyStateChange){if(this.xhrs[id])throw new Error("id already exists: "+id);if(readyStateChange==null)readyStateChange=function(id,state){Console.XdmXhrServices.readyStateChange(id,
state)};if(!this.xdmRequired||endpoint==null||endpoint==""||endpoint==window.location.host)this.xhrs[id]=new DirectXhr(id,readyStateChange);else{var channel=this.channel(endpoint);var xhr=new XdmXhr(id,channel,readyStateChange);this.xhrs[id]=xhr}},channel:function(endpoint){var channel=this.channels[endpoint];if(channel==null){var satelliteId="XdmXhrChannel-"+Utility.uuid();var $iframe=$("<iframe />").attr("id",satelliteId).attr("src","javascript:;").attr("frameborder","0").attr("scrolling","auto").css("position",
"absolute").css("top","0px").css("left","0px").css("height","0px").css("width","0px").css("z-index","-1").css("border","none").appendTo($("body"));$iframe.attr("src",this.scheme+endpoint+this.resourcePath+this.options.channelResource+"&xdmXhrEndpoint="+endpoint);channel=new XdmXhrChannel(endpoint,$iframe[0]);this.channels[endpoint]=channel}return channel},dispose:function(id){var xhr=this.xhrs[id];if(xhr==null)return;xhr.dispose();delete this.xhrs[id]},open:function(id,method,url,user,password){var xhr=
this.xhrs[id];if(xhr==null)throw new Error("Xdm xhr not found: "+id);xhr.open(method,url,user,password)},abort:function(id){var xhr=this.xhrs[id];if(xhr==null)throw new Error("Xdm xhr not found: "+id);xhr.abort()},send:function(id,requestData){var xhr=this.xhrs[id];if(xhr==null)throw new Error("Xdm xhr not found: "+id);xhr.send(requestData)},sendAsBinary:function(id,requestData){var xhr=this.xhrs[id];if(xhr==null)throw new Error("Xdm xhr not found: "+id);xhr.sendAsBinary(requestData)},setRequestHeader:function(id,
header,value){var xhr=this.xhrs[id];if(xhr==null)throw new Error("Xdm xhr not found: "+id);xhr.setRequestHeader(header,value)},setResponseType:function(id,responseType){var xhr=this.xhrs[id];if(xhr==null)throw new Error("Xdm xhr not found: "+id);xhr.setResponseType(responseType)},readyStateChange:function(id,state){var xhr=this.xhrs[id];if(xhr==null)throw new Error("xhr not found: "+id);xhr.readyStateChange(id,state)},providerReady:function(endpoint){var channel=this.channels[endpoint];if(channel==
null)throw new Error("No such XdmXhr channel: "+endpoint);channel.providerReady()}};XdmXhrServices.prototype.makeAjaxToSDKProxy=function(locationConstraint,url,data,onSDKCallSuccess,onSDKCallError,AJAXType,contextCheck,retryOptionsForServiceError,retryOptionsForProxyError){var expectedContext;if(contextCheck&&typeof contextCheck==="function")expectedContext=contextCheck();onSDKCallSuccess=onSDKCallSuccess&&typeof onSDKCallSuccess=="function"?onSDKCallSuccess:function(){console.log("SDKCall successful, but no onSDKCallSuccess callback")};
onSDKCallError=onSDKCallError&&typeof onSDKCallError=="function"?onSDKCallError:function(){console.log("SDKCall fails, but no onSDKCallError callback")};AJAXType=AJAXType||"POST";var targetDomain=locationTargetDomainMap[locationConstraint];var endpoint=targetDomainProxyServerMap[targetDomain];var makeAjaxWrapper;if(this.xdmRequired&&endpoint&&endpoint!=window.location.host){var channel=this.channels[endpoint];if(channel){makeAjaxWrapper=channel.iframe.contentWindow.$.ajax;if(!channel.isSessionTokenSet){channel.iframe.contentWindow.$.ajaxSetup({beforeSend:function(xhr){xhr.setRequestHeader(ajaxToSDKProxyConfig.consoleSessionTokenHeaderKey,
window.Console.sessionToken());if(!Configuration.useIntegratedSecurity){xhr.setRequestHeader(ajaxToSDKProxyConfig.consoleAccessKey,Configuration.accessKey);xhr.setRequestHeader(ajaxToSDKProxyConfig.consoleSecretKey,Configuration.secretKey);if(Configuration.gma)xhr.setRequestHeader(ajaxToSDKProxyConfig.s3GmaFlag,"true")}}});channel.isSessionTokenSet=true}}}if(!makeAjaxWrapper){makeAjaxWrapper=function(ajaxSettings){$.ajax(ajaxSettings)};if(!this.isSessionTokenSet){$.ajaxSetup({beforeSend:function(xhr){xhr.setRequestHeader(ajaxToSDKProxyConfig.consoleSessionTokenHeaderKey,
window.Console.sessionToken());if(!Configuration.useIntegratedSecurity){xhr.setRequestHeader(ajaxToSDKProxyConfig.consoleAccessKey,Configuration.accessKey);xhr.setRequestHeader(ajaxToSDKProxyConfig.consoleSecretKey,Configuration.secretKey);if(Configuration.gma)xhr.setRequestHeader(ajaxToSDKProxyConfig.s3GmaFlag,"true")}}});this.isSessionTokenSet=true}}var ajaxSettings={type:AJAXType,url:url,data:JSON.stringify(data),dataType:"json",contentType:"application/json",count:0,success:function(responseJSON,
textStatus,XHR){if(contextCheck&&typeof contextCheck==="function"&&contextCheck()!=expectedContext){console.log("Context changed. Expected: "+expectedContext+" Current context: "+contextCheck()+" when received response, ignoring");return}var ajaxParams=this;var retryFunction=function(){makeAjaxWrapper(ajaxParams)};handleSDKProxyAJAXSuccess(responseJSON,textStatus,XHR,onSDKCallSuccess,onSDKCallError,retryFunction,ajaxParams,retryOptionsForServiceError)},error:function(XHR,textStatus,errorThrown){if(contextCheck&&
typeof contextCheck==="function"&&contextCheck()!=expectedContext){console.log("Context changed. Expected: "+expectedContext+"; Current context: "+contextCheck()+" when received response, ignoring");return}var ajaxParams=this;var retryFunction=function(){makeAjaxWrapper(ajaxParams)};handleSDKProxyAJAXError(XHR,textStatus,errorThrown,onSDKCallError,retryFunction,ajaxParams,retryOptionsForProxyError)}};makeAjaxWrapper(ajaxSettings)};function handleSDKProxyAJAXSuccess(responseJSON,textStatus,XHR,onSDKCallSuccess,
onSDKCallError,retryFunction,ajaxParams,retryOptions){retryOptions=$.extend(ajaxToSDKProxyConfig.retryOptionsForServiceError,retryOptions||{});var handleUnexpectedResponse=function(details){reportMetrics("Unexpected-SDK-AJAX-Response",1,details);onSDKCallError(errorConstants.UnexpectedError)};var passOnErrorCodeAndMessage=function(errorCode,errorMessage,errorDetails){if(errorConstants[errorCode]){onSDKCallError(errorConstants[errorCode],errorMessage,errorDetails);return}else{onSDKCallError(errorConstants.UnexpectedError,
errorMessage,errorDetails);return}};if(textStatus!=="success"){handleUnexpectedResponse("AJAX textStatus is not 'success': "+textStatus);return}if(!responseJSON||!responseJSON.requestStatus){handleUnexpectedResponse("Response without requestStatus: "+JSON.stringify(responseJSON));return}if(responseJSON.requestStatus==="success"){if(responseJSON.data)onSDKCallSuccess(responseJSON.data);else onSDKCallSuccess();return}else{if(responseJSON.requestStatus!=="error"||!responseJSON.errorType||!responseJSON.statusCode||
!responseJSON.errorCode||!responseJSON.errorMessage){handleUnexpectedResponse("Response failed but missing error data: "+JSON.stringify(responseJSON));return}if(responseJSON.errorType.toLowerCase()==="client"){if(responseJSON.errorCode===errorConstants.ExpiredToken.code){reportMetrics("ExpiredTokenError",1);Ui.IntegratedSecurity.startRelogin();passOnErrorCodeAndMessage(responseJSON.errorCode,responseJSON.errorMessage,responseJSON.errorDetails);return}if(responseJSON.statusCode>=400&&responseJSON.statusCode<
500){passOnErrorCodeAndMessage(responseJSON.errorCode,responseJSON.errorMessage,responseJSON.errorDetails);return}handleUnexpectedResponse("Unexpected Error statusCode in response: "+JSON.stringify(responseJSON));return}else if(responseJSON.errorType.toLowerCase()==="service"){if(maybeRetry(retryFunction,ajaxParams,retryOptions))return;passOnErrorCodeAndMessage(responseJSON.errorCode,responseJSON.errorMessage,responseJSON.errorDetails);return}handleUnexpectedResponse("Unexpected errorType in response: "+
JSON.stringify(responseJSON))}}function handleSDKProxyAJAXError(XHR,textStatus,errorThrown,onSDKCallError,retryFunction,ajaxParams,retryOptions){retryOptions=$.extend(ajaxToSDKProxyConfig.retryOptionsForProxyError,retryOptions||{});if(XHR&&typeof XHR.status==="number")if(XHR.status===403){Ui.IntegratedSecurity.startRelogin();onSDKCallError(errorConstants.AuthenticationFailed);return}else if(XHR.status>=300&&XHR.status<500){reportMetrics("Unexpected-Proxy-StatusCode",1,XHR.status);onSDKCallError(errorConstants.UnexpectedError);
return}else if(XHR.status>=500&&XHR.status<600){if(maybeRetry(retryFunction,ajaxParams,retryOptions))return;onSDKCallError(errorConstants.UnexpectedError);return}if(textStatus==="timeout")if(maybeRetry(retryFunction,ajaxParams,retryOptions))return;else{onSDKCallError(errorConstants.RequestTimeout);return}onSDKCallError(errorConstants.UnexpectedError)}function maybeRetry(retryFunction,ajaxParams,retryOptions){if(retryFunction&&typeof retryFunction=="function"&&ajaxParams&&typeof ajaxParams.count===
"number"&&ajaxParams.count>=0&&ajaxParams.count<retryOptions.count){var waitTime=Math.min(Math.pow(2,ajaxParams.count)*retryOptions.minInterval,retryOptions.maxInterval);ajaxParams.count=ajaxParams.count+1;console.log("Will retry after..."+waitTime+" ms. "+"Retry #"+ajaxParams.count);setTimeout(function(){retryFunction()},waitTime);return true}else return false}ns.XdmXhrServices=new XdmXhrServices({preloadedChannels:Configuration.xdmXhrPreloadedChannels})})(window,window.Configuration.ajaxToSDKProxy,
window.Configuration.locationEndpointMap,window.Configuration.bulkTargetDomainEndpointMap,window.S3Console.Constants.Errors,window.Logging.log);Ui.PropertiesPanel={currentSubPanelId:null,sectionToSelect:-1,dnsCompatibleBucketNameShown:false,defaultAccordionOptions:{collapsible:true,autoHeight:false,heightStyle:"content",active:false,icons:{"header":"ui-icon-triangle-1-e","headerSelected":"ui-icon-triangle-1-s"}},open:function(){Ui.RightPane.open(Ui.PropertiesPanel)},close:function(){Ui.RightPane.close(Ui.PropertiesPanel)},isOpen:function(){return Ui.RightPane.isOpen(Ui.PropertiesPanel)},initialize:function(){$("#properties-panel-toggle-button, #large-panel-button-bar-properties-button").click(Ui.RightPane.open.bind(Ui.RightPane,
Ui.PropertiesPanel));$("#properties-panel-error-indicator").click(function(){var error=$(this).data("error");if(error)Ui.message(error)});this.cleanData=true;this.MetadataSubpanel.initialize();this.LoggingSubpanel.initialize();if(!window.Configuration.eventNewUi)this.NotificationsSubpanel.initialize();this.LifecycleSubpanel.initialize();this.LifecycleSubpanel.RulesModal.initialize();this.TagsSubpanel.initialize();this.RequesterPaysSubpanel.initialize();this.CorsConfigurationModal.initialize()},disableNotificationSubpanel:function(){this.NotificationsSubpanel.setShowSaveAndCancelButton(false);
this.NotificationsSubpanel.disableSubpanel()},setWelcomeString:function(welcomeStringID){$("#"+welcomeStringID).show()},hasCleanData:function(){if(Console.PropertiesPanel.hasMutatedTransactions())return false;else if(window.Configuration.eventNewUi&&window.S3Console.ViewModel.PropertiesPanel.NotificationSubpanel.tracker().somethingHasChanged())return false;else return true},setStatus:function(show,message){var hackedMessage="<br />"+message;$("#properties-panel-status-panel-text").html(hackedMessage);
if(show)$("#properties-panel-status-panel").fadeIn("fast");else $("#properties-panel-status-panel").fadeOut("fast")},setSelectedBucket:function(bucketName){S3Console.ViewModel.PropertiesPanel.selectedBucket(bucketName)},setLocationConstraint:function(locationConstraint){S3Console.ViewModel.PropertiesPanel.locationConstraint(locationConstraint)},showNoBucketsSelected:function(show){if(show){$("#properties-panel-status-panel").show();$("#new-design-container").show();this.clearObjectHeaders();$("#properties-panel-header").hide()}else{$("#properties-panel-status-panel").hide();
$("#new-design-container").hide()}},showNoObjectsSelected:function(show){if(show){$("#properties-panel-status-panel").show();$("#new-design-container").hide();this.clearObjectHeaders();$("#properties-panel-header").hide()}else $("#properties-panel-status-panel").hide()},hookup:function(){},element:function(){return $("#properties-panel")},rightPaneButtonId:function(){return"large-panel-button-bar-properties-button"},show:function(callback){$("#properties-panel").show(30,function(){$("#properties-panel-grants div select").combobox("redraw");
$("#properties-panel-metadata div select").combobox("redraw");$("#properties-panel-logging-target-bucket").combobox("redraw");if(typeof callback==="function")callback();Console.PropertiesPanel.followSelection()})},grabAttention:function(){this.element().effect("pulsate",{times:1},800)},hide:function(callback){$("#properties-panel").hide("slide",{direction:"right",easing:"easeInQuad"},0,function(){if(typeof callback==="function")callback()})},setClean:function(isClean){this.cleanData=isClean},isClean:function(){return this.cleanData},
clear:function(){this.properties=null;window.S3Console.Controller.PropertiesPanel.updateObjectProperties(window.S3Console.Constants.PropertiesPanel.emptyObjectProperties);$("#properties-panel-header").hide();$("#properties-panel-properties table tr").hide();$("#properties-panel-properties").hide();$("#properties-panel-error-indicator").hide();$("#properties-panel-ok-indicator").hide();this.showSaveCancelButtons(false);$("#properties-panel-grants").data("is-bucket",false);this.clearGrants();this.DetailsSubpanel.clear();
this.MetadataSubpanel.clear();this.LoggingSubpanel.clear();if(!window.Configuration.eventNewUi)this.NotificationsSubpanel.clear();this.LifecycleSubpanel.clear();this.LifecycleSubpanel.hideAllContents();this.TagsSubpanel.clear();this.VersioningSubpanel.clear();this.RequesterPaysSubpanel.clear();$(".properties-panel-subpanel").hide();$("#properties-panel-sections h2").hide();$("#properties-panel-sections").accordion("destroy");var sectionContainer=$("#properties-panel-sections");if(sectionContainer.css("display")!==
"none")sectionContainer.hide()},height:function(){var element=$("#properties-panel");return element.outerHeight()-element.position().top},wasObject:null,setSectionToSelect:function(isObject){if(this.wasObject==null)this.wasObject=isObject;if(isObject&&!this.wasObject)this.sectionToSelect=-1;else if(!isObject&&this.wasObject)this.sectionToSelect=-1;else if(this.currentSubPanelId==="properties-panel-details-subpanel")this.sectionToSelect=0;else if(this.currentSubPanelId==="properties-panel-grants-subpanel")this.sectionToSelect=
1;else if(this.currentSubPanelId==="properties-panel-website-subpanel")this.sectionToSelect=2;else if(this.currentSubPanelId==="properties-panel-metadata-subpanel")this.sectionToSelect=3;else if(this.currentSubPanelId==="properties-panel-logging-subpanel")this.sectionToSelect=4;else if(this.currentSubPanelId==="properties-panel-notifications-subpanel")this.sectionToSelect=5;else if(this.currentSubPanelId==="properties-panel-versioning-subpanel")this.sectionToSelect=6;else if(this.currentSubPanelId===
"properties-panel-lifecycle-subpanel")this.sectionToSelect=7;else if(this.currentSubPanelId==="properties-panel-tags-subpanel")this.sectionToSelect=8;else if(this.currentSubPanelId==="properties-panel-requesterpays-subpanel")this.sectionToSelect=9;else this.sectionToSelect=-1;this.wasObject=isObject},createObjectUrl:function(properties){var url=properties.url;var element;if(url.substr(properties.url.length-4)=="null")url=url.split("?")[0];if(properties.isBucketPolicyPresent)element=$('<div><a href="'+
url+'" title="'+url+'">'+url+"</a></div>");else{var icon=properties.isPublicReadAclPresent?"graphics/public.png":"graphics/private.png";var iconTitle=properties.isPublicReadAclPresent?Ui.PropertiesPanel.Translator.thisIsAPublicLink():Ui.PropertiesPanel.Translator.thisIsAPrivateLink();element=$('<div><img class="small-icon" title="'+iconTitle+'" src="'+CB.resolve(icon)+'"><a href="'+url+'" title="'+url+'">'+url+"</a></div>")}element.find("A").click(function(){window.open(url);return false}).data("enableContextMenu",
true);element.enableSelection();return element},setObjectHeaders:function(oType,properties){var type=oType+": ";var name=Utility.escape(properties.name);window.S3Console.Controller.PropertiesPanel.updateObjectProperties({type:type,name:name})},clearObjectHeaders:function(){window.S3Console.Controller.PropertiesPanel.updateObjectProperties({type:"",name:""})},setObjectProperties:function(properties){this.clear();this.properties=properties;this.properties.isObject=true;this.setObjectHeaders(Ui.PropertiesPanel.Translator.object(),
properties);$("#properties-panel-header").show();$("#properties-panel-properties").show();var escapedValue=Utility.escape(properties.bucket);$("#properties-panel-property-bucket-name").show();$("#properties-panel-property-bucket-name .properties-panel-property-value").text(properties.bucket).attr("title",escapedValue);if(properties.folder){escapedValue=Utility.escape(properties.folder);$("#properties-panel-property-folder-name").show();$("#properties-panel-property-folder-name .properties-panel-property-value").text(properties.folder).attr("title",
escapedValue)}escapedValue=Utility.escape(properties.name);$("#properties-panel-property-key-name").show();$("#properties-panel-property-key-name .properties-panel-property-value").text(properties.name).attr("title",escapedValue);$("#properties-panel-property-url").show();$("#properties-panel-property-url .properties-panel-property-value").html(this.createObjectUrl(properties));if(Ui.ListView.listVersions){escapedValue=Utility.escape(properties.versionId)=="null"?Ui.PropertiesPanel.Translator.noneForVersionId():
Utility.escape(properties.versionId);$("#properties-panel-property-version-id").show();$("#properties-panel-property-version-id .properties-panel-property-value").text(Utility.escape(properties.versionId)=="null"?Ui.PropertiesPanel.Translator.noneForVersionId():properties.versionId).attr("title",escapedValue)}escapedValue=Ui.friendlyBytes(properties.size);$("#properties-panel-property-size").show();$("#properties-panel-property-size .properties-panel-property-value").text(properties.size).attr("title",
escapedValue);escapedValue=Ui.friendlyDate(properties.lastModified);$("#properties-panel-property-last-modified").show();$("#properties-panel-property-last-modified .properties-panel-property-value").text(escapedValue).attr("title",escapedValue);if(properties.owner){escapedValue=Utility.escape(properties.owner);$("#properties-panel-property-owner").show();$("#properties-panel-property-owner .properties-panel-property-value").text(properties.owner).attr("title",escapedValue)}escapedValue=Utility.escape(properties.etag);
$("#properties-panel-property-etag").show();$("#properties-panel-property-etag .properties-panel-property-value").text(properties.etag).attr("title",escapedValue);if(false==Ui.ListView.listVersions){var expiryDate=properties.expiryDate?Ui.friendlyDate(properties.expiryDate):Ui.PropertiesPanel.Translator.noneForExpiryDate();$("#properties-panel-property-expiry-date").show();$("#properties-panel-property-expiry-date .properties-panel-property-value").text(expiryDate).attr("title",expiryDate);var expiryRule=
properties.expiryRule?properties.expiryRule:Ui.PropertiesPanel.Translator.notApplicableForExpiryRule();escapedValue=Utility.escape(expiryRule);$("#properties-panel-property-expiration-rule").show();$("#properties-panel-property-expiration-rule .properties-panel-property-value").text(expiryRule).attr("title",escapedValue)}$("#properties-panel-details-subpanel-header").show();$("#properties-panel-details-subpanel").show();$("#properties-panel-grants-subpanel-header").show();$("#properties-panel-grants-subpanel").show();
$("#properties-panel-metadata-subpanel-header").show();$("#properties-panel-metadata-subpanel").show();$("#bucket-policy-button").hide();$("#cors-configuration-button").hide();var storageClassKey=properties.additionalProperties.rrsValue;if(Ui.StorageClassTypes[storageClassKey].tier=="ARCHIVE")this.DetailsSubpanel.setArchivedObjectDetails(properties);else if(true==Ui.ListView.listVersions)this.DetailsSubpanel.setVersionedObjectDetails(properties);else{this.DetailsSubpanel.setObjectDetails(properties);
if(false==Ui.ListView.listVersions)Console.PropertiesPanel.startTransaction("Details")}$("#properties-panel-grants").data("is-bucket",false);this.clearGrants();this.appendGrants(properties.grants);Console.PropertiesPanel.startTransaction("Permissions");if(properties.metadata.length&&$("#properties-panel-metadata div").length==0)this.MetadataSubpanel.clear();var commonMetadata=$.extend({},UploadWizardUi_commonMetadata);for(var i=0;i<properties.metadata.length;i++){var metadata=properties.metadata[i];
commonMetadata[metadata.key]=[metadata.value]}var storageClassKey=properties.additionalProperties.rrsValue;var isVersioningReadOnly=false;var isGlacierReadOnly=false;if(Ui.StorageClassTypes[storageClassKey].tier=="ARCHIVE")isGlacierReadOnly=true;else if(true==Ui.ListView.listVersions)isVersioningReadOnly=true;this.MetadataSubpanel.setReadOnly(isGlacierReadOnly,isVersioningReadOnly);this.MetadataSubpanel.setCommonMetadata(commonMetadata);this.MetadataSubpanel.setFormData(properties.metadata);this.MetadataSubpanel.resetFormData();
if(false==this.MetadataSubpanel.isReadOnly())Console.PropertiesPanel.startTransaction("Metadata");this.setSectionToSelect(true);$("#properties-panel-sections").show().accordion($.extend(this.defaultAccordionOptions,{change:function(evt,ui){if(false===ui.options.active){Ui.PropertiesPanel.resetCurrentSubPanel();return}switch(ui.options.active){case 0:Ui.PropertiesPanel.showDetails(true);break;case 1:Ui.PropertiesPanel.showPermissions(true);break;case 3:Ui.PropertiesPanel.showMetadata(true);break}$("#properties-panel").scrollTop(ui.newHeader.position().top)}}));
if(this.sectionToSelect>=0)$("#properties-panel-sections").accordion("activate",this.sectionToSelect)},setDeleteMarkerObjectProperties:function(properties){this.clear();this.properties=properties;this.properties.isObject=true;this.setObjectHeaders(Ui.PropertiesPanel.Translator.object(),properties);$("#properties-panel-header").show();$("#properties-panel-properties").show();var escapedValue=Utility.escape(properties.bucket);$("#properties-panel-property-bucket-name").show();$("#properties-panel-property-bucket-name .properties-panel-property-value").text(properties.bucket).attr("title",
escapedValue);if(properties.folder){escapedValue=Utility.escape(properties.folder);$("#properties-panel-property-folder-name").show();$("#properties-panel-property-folder-name .properties-panel-property-value").text(properties.folder).attr("title",escapedValue)}escapedValue=Utility.escape(properties.name);$("#properties-panel-property-key-name").show();$("#properties-panel-property-key-name .properties-panel-property-value").text(properties.name).attr("title",escapedValue);if(Ui.ListView.listVersions){escapedValue=
Utility.escape(properties.versionId)=="null"?Ui.PropertiesPanel.Translator.noneForDeleteMarker()+" (Delete Marker)":Utility.escape(properties.versionId+" (Delete Marker)");$("#properties-panel-property-version-id").show();$("#properties-panel-property-version-id .properties-panel-property-value").text(Utility.escape(properties.versionId)=="null"?Ui.PropertiesPanel.Translator.noneForDeleteMarker()+" (Delete Marker)":properties.versionId+" (Delete Marker)").attr("title",escapedValue)}escapedValue=Ui.friendlyDate(properties.lastModified);
$("#properties-panel-property-last-modified").show();$("#properties-panel-property-last-modified .properties-panel-property-value").text(escapedValue).attr("title",escapedValue)},dnsCompatibleBucketName:function(bucketName){var b=bucketName;var domain=new RegExp(/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/);var ipAddress=new RegExp(/(\d+\.){3}\d+/);var dots=new RegExp(/\./);return b.match(domain)&&!b.match(ipAddress)&&!b.match(dots)?true:false},showDnsCompatibleBucketName:function(isShown){this.dnsCompatibleBucketNameShown=
isShown},setBucketProperties:function(properties){this.clear();this.properties=properties;this.properties.isBucket=true;var escapedValue=Utility.escape(properties.name);this.setObjectHeaders(Ui.PropertiesPanel.Translator.bucket(),properties);$("#properties-panel-header").show();$("#properties-panel-properties").show();$("#properties-panel-property-bucket-name").show();$("#properties-panel-property-bucket-name .properties-panel-property-value").text(properties.name).attr("title",escapedValue);escapedValue=
Utility.escape(properties.region);$("#properties-panel-property-region").show();$("#properties-panel-property-region .properties-panel-property-value").text(properties.region).attr("title",escapedValue);escapedValue=Ui.friendlyDate(properties.creationDate);$("#properties-panel-property-creation-date").show();$("#properties-panel-property-creation-date .properties-panel-property-value").text(escapedValue).attr("title",escapedValue);escapedValue=Utility.escape(properties.owner);$("#properties-panel-property-owner").show();
$("#properties-panel-property-owner .properties-panel-property-value").text(properties.owner).attr("title",escapedValue);if(this.dnsCompatibleBucketNameShown&&!this.dnsCompatibleBucketName(properties.name)){var dnsCompliantHash="sthree-"+base32.encode(Crypto4.SHA256(properties.name,{asString:true})).replace("=","");$("#dns-compliance-hash").text(dnsCompliantHash);$("#properties-panel-property-dns-compliance-hash").show()}escapedValue=Utility.escape(properties.versioningStatus);if(escapedValue=="Enabled"||
escapedValue=="Suspended"){escapedValue=Utility.escape(properties.mfaDelete);$("#properties-panel-property-mfa-delete-status").show();$("#properties-panel-property-mfa-delete-status .properties-panel-property-value").text(properties.mfaDelete).attr("title",escapedValue)}this.WebsiteSubpanel.setEndpoint(properties.name,properties.websiteEndpointSuffix);if(properties.isBucketPolicyPresent)$("#bucket-policy-button-text").text(Ui.BucketPolicy.Translator.editBucketPolicy());else $("#bucket-policy-button-text").text(Ui.BucketPolicy.Translator.addBucketPolicy());
$("#bucket-policy-button").show();this.CorsConfigurationModal.setBucket(Utility.escape(properties.name));this.CorsConfigurationModal.reset();this.CorsConfigurationModal.setFormData(properties.corsConfiguration);if(properties.isCorsConfigurationPresent){$("#cors-configuration-button-text").text(Ui.PropertiesPanel.Translator.editCorsConfiguration());this.CorsConfigurationModal.setToEditMode()}else{$("#cors-configuration-button-text").text(Ui.PropertiesPanel.Translator.addCorsConfiguration);this.CorsConfigurationModal.setToAddMode()}$("#properties-panel-grants-subpanel-header").show();
$("#properties-panel-grants-subpanel").show();$("#properties-panel-website-subpanel-header").show();$("#properties-panel-website-subpanel").show();$("#properties-panel-logging-subpanel-header").show();$("#properties-panel-logging-subpanel").show();$("#properties-panel-notifications-subpanel-header").show();$("#properties-panel-notifications-subpanel").show();$("#properties-panel-lifecycle-subpanel-header").show();$("#properties-panel-lifecycle-subpanel").show();$("#properties-panel-versioning-subpanel-header").show();
$("#properties-panel-versioning-subpanel").show();if(this.TagsSubpanel.isEnabled()){$("#properties-panel-tags-subpanel-header").show();$("#properties-panel-tags-subpanel").show()}$("#properties-panel-requesterpays-subpanel-header").show();$("#properties-panel-requesterpays-subpanel").show();$("#cors-configuration-button").show();$("#properties-panel-grants").data("is-bucket",true);this.clearGrants();this.appendGrants(properties.grants);Console.PropertiesPanel.startTransaction("Permissions");this.LoggingSubpanel.setFormData(properties.loggingSettings);
this.LoggingSubpanel.resetFormData();Console.PropertiesPanel.startTransaction("Logging");if(!window.Configuration.eventNewUi){this.NotificationsSubpanel.setFormData(properties.notificationConfig);this.NotificationsSubpanel.resetFormData();Console.PropertiesPanel.startTransaction("Notifications")}this.WebsiteSubpanel.setFormData(properties.websiteConfig);this.WebsiteSubpanel.resetFormData();Console.PropertiesPanel.startTransaction("Website");this.LifecycleSubpanel.setFormData(properties.lifecycleConfig);
this.LifecycleSubpanel.setVersioningStatus(properties.versioningConfiguration);this.LifecycleSubpanel.setIsTransitionToGlacierEnabled(properties.isTransitionToGlacierEnabled);this.LifecycleSubpanel.setDisplayedBucket(properties.name);this.LifecycleSubpanel.displayFormData();Console.PropertiesPanel.startTransaction("Lifecycle");this.TagsSubpanel.setFormData(properties.tags);this.TagsSubpanel.displayFormData();Console.PropertiesPanel.startTransaction("Tags");this.RequesterPaysSubpanel.setFormData(properties.requestPayment);
this.RequesterPaysSubpanel.displayFormData();Console.PropertiesPanel.startTransaction("RequestPayment");this.VersioningSubpanel.setFormData(properties.versioningConfiguration);Console.PropertiesPanel.startTransaction("Versioning");this.setSectionToSelect(false);$("#properties-panel-sections").show().accordion($.extend(this.defaultAccordionOptions,{changestart:function(evt,ui){if(false===ui.options.active)return;switch(ui.options.active){case 7:Ui.PropertiesPanel.LifecycleSubpanel.startLoading();break;
case 6:Ui.PropertiesPanel.VersioningSubpanel.startLoading();break}},change:function(evt,ui){if(false===ui.options.active){Ui.PropertiesPanel.resetCurrentSubPanel();return}switch(ui.options.active){case 1:Ui.PropertiesPanel.showPermissions(true);break;case 2:Ui.PropertiesPanel.showWebsiteConfig(true);break;case 4:Ui.PropertiesPanel.showLogging(true);break;case 5:Ui.PropertiesPanel.showNotificationConfig(true);break;case 6:Console.PropertiesPanel.refreshVersioningTabContents();break;case 7:Console.PropertiesPanel.refreshLifecycleTabContents();
break;case 8:Ui.PropertiesPanel.showTags(true);break;case 9:Ui.PropertiesPanel.showRequestPayment();break}$("#properties-panel").scrollTop(ui.newHeader.position().top)}}));if(this.sectionToSelect>=0)$("#properties-panel-sections").accordion("activate",this.sectionToSelect)},setFolderProperties:function(properties){this.clear();this.properties=properties;this.properties.isFolder=true;this.setObjectHeaders(Ui.PropertiesPanel.Translator.folder(),properties);$("#properties-panel-header").show();$("#properties-panel-properties").show();
var escapedValue=Utility.escape(properties.bucket);$("#properties-panel-property-bucket-name").show();$("#properties-panel-property-bucket-name .properties-panel-property-value").text(properties.bucket).attr("title",escapedValue);if(properties.name){escapedValue=Utility.escape(properties.name);$("#properties-panel-property-key-name").show();$("#properties-panel-property-key-name .properties-panel-property-value").text(properties.name).attr("title",escapedValue)}if(false==Ui.ListView.listVersions){$("#properties-panel-details-subpanel-header").show();
$("#properties-panel-details-subpanel").show();this.DetailsSubpanel.setGenericDetails(properties);Console.PropertiesPanel.startTransaction("Details");this.setSectionToSelect(true);$("#properties-panel-sections").show().accordion($.extend(this.defaultAccordionOptions,{change:function(evt,ui){if(false===ui.options.active){Ui.PropertiesPanel.resetCurrentSubPanel();return}switch(ui.options.active){case 0:Ui.PropertiesPanel.showDetails(true);break}$("#properties-panel").scrollTop(ui.newHeader.position().top)}}));
if(this.sectionToSelect==0)$("#properties-panel-sections").accordion("activate",this.sectionToSelect)}},setGenericProperties:function(properties){this.clear();this.properties=properties;var escapedBucket=Utility.escape(properties.bucket);var type=Ui.PropertiesPanel.Translator.numberOfItemsSelected(properties.itemCount);window.S3Console.Controller.PropertiesPanel.updateObjectProperties({type:type,name:""});$("#properties-panel-header").show();$("#properties-panel-properties").show();$("#properties-panel-property-bucket-name").show();
$("#properties-panel-property-bucket-name .properties-panel-property-value").text(properties.bucket).attr("title",escapedBucket);$("#properties-panel-property-number-selected").show();$("#properties-panel-property-number-selected .properties-panel-property-value").text(properties.itemCount).attr("title",properties.itemCount);if(false==Ui.ListView.listVersions&&false==properties.areAllObjectsInGlacier){$("#properties-panel-details-subpanel-header").show();$("#properties-panel-details-subpanel").show();
this.DetailsSubpanel.setGenericDetails(properties);Console.PropertiesPanel.startTransaction("Details");this.setSectionToSelect(true);$("#properties-panel-sections").show().accordion($.extend(this.defaultAccordionOptions,{change:function(evt,ui){if(false===ui.options.active){Ui.PropertiesPanel.resetCurrentSubPanel();return}switch(ui.options.active){case 0:Ui.PropertiesPanel.showDetails(true);break}}}));if(this.sectionToSelect==0)$("#properties-panel-sections").accordion("activate",this.sectionToSelect)}},
showSaveCancelButtons:function(show){if(show){$("#"+this.currentSubPanelId).append($("#properties-panel-save-cancel-container"));$("#properties-panel-save-cancel-buttons").show()}else $("#properties-panel-save-cancel-buttons").hide()},clearGrants:function(omitMessage){var element=$("#properties-panel-grants").empty();if(!omitMessage)$("<span/>").text(Ui.PropertiesPanel.Translator.noPermissionsAdded()).append("<br/>").append("<br/>").appendTo(element);this.setClean(true)},maybeClearGrants:function(omitMessage){if($("#properties-panel-grants div.grant-row").length==
0)this.clearGrants(omitMessage)},appendGrants:function(grants){for(var i=0;i<grants.length;i++)this.appendGrant(grants[i])},appendGrant:function(grant){this.maybeClearGrants(true);var genGrantCol=function(contents,parentContainer){var container=$("<div></div>").addClass("grant-col");contents.appendTo(container);container.appendTo(parentContainer);return contents};var element=$("<div></div>").addClass("grant-row").css("position","relative").attr("requestId",Ui.generateId()).append($("<div />").text(Ui.PropertiesPanel.Translator.grantee()+
": ").addClass("grant-col"));var granteeElement;var isApplied=grant!=null;if(isApplied){var grantee=Console.GranteeOracle.transformGranteeString(grant.grantee)||grant.grantee.split("|")[1];granteeElement=genGrantCol($("<input>").attr({type:"text"}).attr({value:grantee}).attr({readonly:true}),element)}else{granteeElement=genGrantCol($("<select></select>"),element);$("<option></option>").val("").html("").prop("selected",true).appendTo(granteeElement);var commonFriendlyGrantees=Console.GranteeOracle.commonFriendlyGrantees();
for(var i=0;i<commonFriendlyGrantees.friendlyGrantees.length;i++){var friendlyGrantee=commonFriendlyGrantees.friendlyGrantees[i];if($("option[value='"+friendlyGrantee+"']",granteeElement).length)continue;$("<option></option>").val(friendlyGrantee).html(Utility.escape(friendlyGrantee)).appendTo(granteeElement)}granteeElement.combobox()}element.attr("isApplied",isApplied);var read=genGrantCol($("<input>").attr("type","checkbox").attr("contains","read").change(this.setClean.bind(this,false)),element);
$("<div></div>").addClass("grant-col").html($("#properties-panel-grants").data("is-bucket")?" "+Ui.PropertiesPanel.Translator.list()+" ":" "+Ui.PropertiesPanel.Translator.openDownload()+" ").appendTo(element);if(grant&&grant.read)read.prop("checked",true);var write=genGrantCol($("<input>").attr("type","checkbox").attr("contains","write").change(this.setClean.bind(this,false)),element);var writeObjects=$("<div />").text(Ui.PropertiesPanel.Translator.uploadDelete()).addClass("grant-col").appendTo(element);
if(!$("#properties-panel-grants").data("is-bucket")){write.hide();writeObjects.hide()}if(grant&&grant.write)write.prop("checked",true);var readAcp=genGrantCol($("<input>").attr("type","checkbox").attr("contains","read-acp").change(this.setClean.bind(this,false)),element);$("<div />").text(Ui.PropertiesPanel.Translator.viewPermissions()).addClass("grant-col").appendTo(element);if(grant&&grant.readAcp)readAcp.prop("checked",true);var writeAcp=genGrantCol($("<input>").attr("type","checkbox").attr("contains",
"write-acp").change(this.setClean.bind(this,false)),element);$("<div />").text(Ui.PropertiesPanel.Translator.editPermissions()).addClass("grant-col").appendTo(element);if(grant&&grant.writeAcp)writeAcp.prop("checked",true);var removeX=$("<span>x</span>").addClass("form-remove-x").appendTo(element).click(function(){element.remove();Ui.PropertiesPanel.maybeClearGrants()}).click(this.setClean.bind(this,false));element.appendTo("#properties-panel-grants");$(".ui-shadowed-select",element).combobox("redraw");
$("input, select").bind("onchange",this.setClean.bind(this,false));this.setClean(false)},removeSelectedGrants:function(){$("#properties-panel-grants div.ui-selected").remove();this.maybeClearGrants()},showDetails:function(skipAnimation){this.showSubPanel("properties-panel-details-subpanel",null,skipAnimation);if(Ui.ListView.listVersions)this.showSaveCancelButtons(false);else this.showSaveCancelButtons(!(this.DetailsSubpanel.showingArchivedDetails||this.DetailsSubpanel.showingVersionedDetails)&&this.DetailsSubpanel.shouldShowSaveAndCancel)},
showPermissions:function(skipAnimation){this.showSubPanel("properties-panel-grants-subpanel",function(){$("#properties-panel-grants div select").combobox("redraw")},skipAnimation);this.showSaveCancelButtons(true)},showMetadata:function(skipAnimation){this.showSubPanel("properties-panel-metadata-subpanel",function(){$("#properties-panel-metadata div select").combobox("redraw")},skipAnimation);if(this.MetadataSubpanel.isReadOnly()){$("#properties-panel-metadata-subpanel-validation-messsage").hide();
$("#properties-panel-metadata-subpanel .form-button").hide();this.showSaveCancelButtons(false)}else{$("#properties-panel-metadata-subpanel-validation-messsage").show();$("#properties-panel-metadata-subpanel .form-button").show();this.showSaveCancelButtons(true)}},showLogging:function(){this.showSubPanel("properties-panel-logging-subpanel",function(){$("#properties-panel-logging-subpanel div select").combobox("redraw")});this.showSaveCancelButtons(true)},showNotificationConfig:function(){this.showSubPanel("properties-panel-notifications-subpanel",
function(){$("#properties-panel-notifications-subpanel div select").combobox("redraw")});if(!window.Configuration.eventNewUi)this.showSaveCancelButtons(this.NotificationsSubpanel.getShowSaveAndCancelButton());else this.showSaveCancelButtons(false)},getServerDataAndUpdateNotificationSubpanelVM:function(){S3Console.Controller.PropertiesPanel.NotificationSubpanel.getNotificationConfigAndUpdateVM();S3Console.Controller.PropertiesPanel.NotificationSubpanel.getSNSDataAndUpdateVM();S3Console.Controller.PropertiesPanel.NotificationSubpanel.getSQSDataAndUpdateVM()},
showWebsiteConfig:function(){this.showSubPanel("properties-panel-website-subpanel",null);this.showSaveCancelButtons(true)},showLifecycleConfig:function(showSaveCancelButtons){this.showSubPanel("properties-panel-lifecycle-subpanel",null);this.showSaveCancelButtons(showSaveCancelButtons);Ui.PropertiesPanel.LifecycleSubpanel.finishLoading()},showTags:function(skipAnimation){this.showSubPanel("properties-panel-tags-subpanel",function(){$("properties-panel-tags-subpanel div select").combobox("redraw")},
skipAnimation);this.showSaveCancelButtons(true)},showVersioning:function(){this.showSubPanel("properties-panel-versioning-subpanel",null,true);this.showSaveCancelButtons(false);Ui.PropertiesPanel.VersioningSubpanel.finishLoading()},showRequestPayment:function(){this.showSubPanel("properties-panel-requesterpays-subpanel",null);this.showSaveCancelButtons(true)},showSubPanel:function(subPanelToShowId,callback,skipAnimation){var tabContainer=$("#properties-panel-sections");if(tabContainer.css("display")==
"none")tabContainer.show();if(typeof callback==="function")callback();this.currentSubPanelId=subPanelToShowId},resetCurrentSubPanel:function(){this.currentSubPanelId=""},save:function(){if(this.currentSubPanelId==="properties-panel-grants-subpanel")this.savePermissions();else if(this.currentSubPanelId==="properties-panel-metadata-subpanel")this.MetadataSubpanel.save();else if(this.currentSubPanelId==="properties-panel-logging-subpanel")this.LoggingSubpanel.save();else if(this.currentSubPanelId===
"properties-panel-details-subpanel")this.DetailsSubpanel.save();else if(this.currentSubPanelId==="properties-panel-notifications-subpanel")this.NotificationsSubpanel.save();else if(this.currentSubPanelId==="properties-panel-website-subpanel")this.WebsiteSubpanel.save();else if(this.currentSubPanelId==="properties-panel-lifecycle-subpanel")this.LifecycleSubpanel.save();else if(this.currentSubPanelId==="properties-panel-tags-subpanel")this.TagsSubpanel.save();else if(this.currentSubPanelId==="properties-panel-versioning-subpanel")this.VersioningSubpanel.save();
else if(this.currentSubPanelId==="properties-panel-requesterpays-subpanel")this.RequesterPaysSubpanel.save()},cancel:function(){if(this.currentSubPanelId==="properties-panel-grants-subpanel")this.cancelPermissions();else if(this.currentSubPanelId==="properties-panel-metadata-subpanel")this.MetadataSubpanel.cancel();else if(this.currentSubPanelId==="properties-panel-logging-subpanel")this.LoggingSubpanel.cancel();else if(this.currentSubPanelId==="properties-panel-details-subpanel")this.DetailsSubpanel.cancel();
else if(this.currentSubPanelId==="properties-panel-notifications-subpanel")this.NotificationsSubpanel.cancel();else if(this.currentSubPanelId==="properties-panel-website-subpanel")this.WebsiteSubpanel.cancel();else if(this.currentSubPanelId==="properties-panel-lifecycle-subpanel")this.LifecycleSubpanel.cancel();else if(this.currentSubPanelId==="properties-panel-tags-subpanel")this.TagsSubpanel.cancel();else if(this.currentSubPanelId==="properties-panel-versioning-subpanel")this.VersioningSubpanel.cancel();
else if(this.currentSubPanelId==="properties-panel-requesterpays-subpanel")this.RequesterPaysSubpanel.cancel();$("#properties-panel-saving-indicator").hide()},startSave:function(){$("#properties-panel-save-button").addClass("disabled");$("#properties-panel-saving-indicator").show();$("#properties-panel-error-indicator").hide();$("#properties-panel-ok-indicator").hide()},finishSave:function(error){$("#properties-panel-save-button").removeClass("disabled");$("#properties-panel-saving-indicator").hide();
if(!error){$("#properties-panel-error-indicator").hide();$("#properties-panel-ok-indicator").fadeIn(250).fadeOut(2E3)}else{$("#properties-panel-ok-indicator").hide();$("#properties-panel-error-indicator").fadeIn(250).fadeOut(5E3).data("error",error);Ui.message(error);$("#properties-panel-error-indicator").show()}},validatePermissions:function(){return true},savePermissions:function(){if(!this.validatePermissions())return;Console.PropertiesPanel.commitTransaction("Permissions")},cancelPermissions:function(){Console.PropertiesPanel.rollbackTransaction("Permissions")},
setPermissionsFormData:function(formData){this.clearGrants();this.appendGrants(formData.grantSets)},getPermissionsFormData:function(){var formData={grantMeFullControl:false,makeEverythingPublic:false,grantSets:[]};$("#properties-panel-grants div.grant-row").each(function(){var isApplied=$(this).attr("isApplied")==="true";var enteredGrantee;if(isApplied)enteredGrantee=$("input",$(this)).attr("value");else enteredGrantee=$("select",$(this)).combobox("value");if(enteredGrantee){var granteeString=Console.GranteeOracle.transformFriendlyGrantee(enteredGrantee);
formData.grantSets.push({requestId:$(this).attr("requestId"),grantee:granteeString,read:$("input[contains=read]:checked",this).length!=0,write:$("input[contains=write]:checked",this).length!=0,readAcp:$("input[contains=read-acp]:checked",this).length!=0,writeAcp:$("input[contains=write-acp]:checked",this).length!=0})}});return formData},PermissionsSubpanel:{getFormData:function(){return Ui.PropertiesPanel.getPermissionsFormData()},setFormData:function(formData){Ui.PropertiesPanel.setPermissionsFormData(formData)},
resetFormData:function(){Ui.PropertiesPanel.clearGrants()}},LoggingSubpanel:{formData:null,initialize:function(){this.setClean(true);$("#properties-panel-logging-enabled").click(function(){if($(this).is(":checked")){$("#properties-panel-logging-target-prefix").prop("disabled",false);$("#properties-panel-logging-target-prefix").val("logs/");$("#properties-panel-logging-target-bucket").combobox("disable",false)}else{$("#properties-panel-logging-target-prefix").prop("disabled",true);$("#properties-panel-logging-target-prefix").val("");
$("#properties-panel-logging-target-bucket").combobox("disable",true)}return true})},getFormData:function(){var formData={enabled:$("#properties-panel-logging-enabled").is(":checked"),targetBucket:$("#properties-panel-logging-target-bucket").combobox("value"),targetPrefix:$("#properties-panel-logging-target-prefix").val()};return formData},setClean:function(isClean){this.cleanData=isClean},isClean:function(){return this.cleanData},save:function(){if(!this.validate())return;Console.PropertiesPanel.commitTransaction("Logging")},
cancel:function(){Console.PropertiesPanel.rollbackTransaction("Logging")},clearValidation:function(){var container=$("#properties-panel-logging-subpanel");$(".validation-info",container).removeClass("validation-info");$(".validation-warning",container).removeClass("validation-warning");$(".validation-error",container).removeClass("validation-error");$(".validation-icon-container",container).empty();$(".validation-message",container).empty();this.setClean(true)},showValidationError:function(validation){this.validate(validation);
$("#properties-panel-save-button").removeClass("disabled")},validate:function(validation){if(!validation)validation=Console.PropertiesPanel.validateLogging();var failedValidation=false;var container=$("#properties-panel-logging-subpanel");this.clearValidation();var animated={};for(var i=0;i<validation.infos.length;i++){var info=validation.infos[i];$("div[requestId='"+info.requestId+"']",container).addClass("validation-info")}for(var i=0;i<validation.warnings.length;i++){var warning=validation.warnings[i];
$("div[requestId='"+warning.requestId+"']",container).addClass("validation-warning")}for(var i=0;i<validation.errors.length;i++){var error=validation.errors[i];$("<img />").attr("src",CB.resolve("graphics/warning.png")).addClass("small-icon").addClass("clickable").addClass("validation-icon").data("error",error).click(function(){Ui.message(Utility.escape($(this).data("error").message))}).appendTo($(".validation-icon-container[requestId='"+error.requestId+"']",container));var validationElement=$(".validation-element[requestId='"+
error.requestId+"']",container).addClass("validation-error");if(!animated[error.requestId]){validationElement.effect("pulsate",{times:1},800);animated[error.requestId]=true}if(!validation.message)validation.message=error.message;failedValidation=true}if(validation.message){$(".validation-message",container).text(Utility.escape(validation.message)).effect("pulsate",{times:1},800);failedValidation=true}return!failedValidation},setFormData:function(formData){this.formData=formData},resetFormData:function(){var loggingSettings=
this.formData;if(loggingSettings==null)loggingSettings={enabled:false};if(loggingSettings.enabled){$("#properties-panel-logging-enabled").prop("checked",true);$("#properties-panel-logging-target-prefix").val(loggingSettings.targetPrefix);$("#properties-panel-logging table tr[requestId=logging-target-bucket]").show();$("#properties-panel-logging table tr[requestId=logging-target-prefix]").show();$("#properties-panel-logging-target-prefix").prop("disabled",false)}else{$("#properties-panel-logging-enabled").prop("checked",
false);$("#properties-panel-logging table tr[requestId=logging-target-bucket]").hide();$("#properties-panel-logging table tr[requestId=logging-target-prefix]").hide();$("#properties-panel-logging-target-prefix").val("");$("#properties-panel-logging-target-prefix").prop("disabled",true)}$("#properties-panel-logging-target-bucket").combobox("destroy").empty();if(loggingSettings.enabled)$("<option />").val(loggingSettings.targetBucket).html(Utility.escape(loggingSettings.targetBucket)).appendTo("#properties-panel-logging-target-bucket");
else $("<option />").val("").html("").prop("selected",true).appendTo("#properties-panel-logging-target-bucket");var bucketList=Ui.NavigationPanel.getBucketList();for(var i=0;i<bucketList.length;i++){var bucket=bucketList[i];if(loggingSettings.enabled&&bucket===loggingSettings.targetBucket)continue;$("<option />").val(bucket).html(Utility.escape(bucket)).appendTo("#properties-panel-logging-target-bucket")}$("#properties-panel-logging-target-bucket").combobox();if(loggingSettings.enabled)$("#properties-panel-logging-target-bucket").combobox("disable",
false);else $("#properties-panel-logging-target-bucket").combobox("disable",true);this.clearValidation();$("#properties-panel-logging-subpanel input, #properties-panel-logging-subpanel select").bind("change",this.setClean.bind(this,false));this.setClean(true)},clear:function(){$("#properties-panel-logging-enabled").prop("checked",false);$("#properties-panel-logging div[requestId=logging-target-bucket]").empty();$("#properties-panel-logging-target-prefix").val("")}},NotificationsSubpanel:{formData:null,
showSaveAndCancelButton:true,initialize:function(){this.setClean(true);$("#properties-panel-notifications-rrslo-enabled").click(function(){if($(this).is(":checked"))$("#properties-panel-notifications-rrslo-topic").prop("disabled",false);else{$("#properties-panel-notifications-rrslo-topic").prop("disabled",true);$("#properties-panel-notifications-rrslo-topic").val("")}return true})},getFormData:function(){var formData={enabled:$("#properties-panel-notifications-rrslo-enabled").is(":checked"),topic:$("#properties-panel-notifications-rrslo-topic").val()};
return formData},setShowSaveAndCancelButton:function(show){this.showSaveAndCancelButton=show},getShowSaveAndCancelButton:function(){return this.showSaveAndCancelButton},setClean:function(isClean){this.cleanData=isClean},isClean:function(){return this.cleanData},save:function(){if(!this.validate())return;Console.PropertiesPanel.commitTransaction("Notifications")},cancel:function(){this.clearValidation();Console.PropertiesPanel.rollbackTransaction("Notifications")},clearValidation:function(){var container=
$("#properties-panel-notifications-subpanel");$(".validation-info",container).removeClass("validation-info");$(".validation-warning",container).removeClass("validation-warning");$(".validation-error",container).removeClass("validation-error");$(".validation-icon-container",container).empty();$(".validation-message",container).empty();this.setClean(true)},showValidationError:function(validation){this.validate(validation);$("#properties-panel-save-button").removeClass("disabled")},validate:function(validation){if(!validation)validation=
Console.PropertiesPanel.validateNotificationConfiguration();var failedValidation=false;var container=$("#properties-panel-notifications-subpanel");this.clearValidation();var animated={};for(var i=0;i<validation.infos.length;i++){var info=validation.infos[i];$("div[requestId='"+info.requestId+"']",container).addClass("validation-info")}for(var i=0;i<validation.warnings.length;i++){var warning=validation.warnings[i];$("div[requestId='"+warning.requestId+"']",container).addClass("validation-warning")}for(var i=
0;i<validation.errors.length;i++){var error=validation.errors[i];$("<img />").attr("src",CB.resolve("graphics/warning.png")).addClass("small-icon").addClass("clickable").addClass("validation-icon").data("error",error).click(function(){Ui.message($(this).data("error").message)}).appendTo($(".validation-icon-container[requestId='"+error.requestId+"']",container));var validationElement=$(".validation-element[requestId='"+error.requestId+"']",container).addClass("validation-error");if(!animated[error.requestId]){validationElement.effect("pulsate",
{times:1},800);animated[error.requestId]=true}if(!validation.message)validation.message=error.message;failedValidation=true}if(validation.message){$(".validation-message",container).text(validation.message).effect("pulsate",{times:1},800);failedValidation=true}if(failedValidation)$("#properties-panel-saving-indicator").hide();return!failedValidation},setFormData:function(formData){this.formData=formData},resetFormData:function(){var notificationConfig=this.formData;if(notificationConfig==null)notificationConfig=
{enabled:false};if(notificationConfig.enabled){$("#properties-panel-notifications-rrslo-enabled").prop("checked",true);$("#properties-panel-notifications-rrslo-topic").prop("disabled",false);$("#properties-panel-notifications-rrslo-topic").val(notificationConfig.topic)}else{$("#properties-panel-notifications-rrslo-enabled").prop("checked",false);$("#properties-panel-notifications-rrslo-topic").prop("disabled",true);$("#properties-panel-notifications-rrslo-topic").val("")}$("#properties-panel-notifications-subpanel input, #properties-panel-notifications-subpanel select").bind("change",
this.setClean.bind(this,false));this.clearValidation();this.setClean(true)},clear:function(){$("#notification-config-error-message").text("");$("#properties-panel-notifications-rrslo-enabled").prop("checked",false);$("#properties-panel-notifications-rrslo-topic").val("");this.clearValidation();$("#properties-panel-error-indicator").hide()},disableSubpanel:function(){var subpanel=$("#properties-panel-notifications-subpanel");$(".description",subpanel).html(Ui.PropertiesPanel.Translator.notificationsOnS3BucketsAreOnlySupportedForReducedRedundancyStorageObjects());
$(".form-table",subpanel).css("display","none");$("#properties-panel-notifications-rrslo-enabled",subpanel).prop("disabled",true)}}};(function(ns){function OperationsPanel(){}OperationsPanel.prototype={operationTypeIconMap:{"Upload":"graphics/upload.png","Copy":"graphics/copy.png","Delete":"graphics/delete.png","AbortMultipartUpload":"graphics/delete.png","MakePublic":"graphics/public.png","ChangeStorage":"graphics/harddisk.png","Default":"graphics/default-operation.png"},initialize:function(){$("#operations-panel-toggle-button, #large-panel-button-bar-operations-button").click(Ui.RightPane.open.bind(Ui.RightPane,Ui.OperationsPanel))},
element:function(){return $("#operations-panel")},rightPaneButtonId:function(){return"large-panel-button-bar-operations-button"},show:function(callback){$("#operations-panel").show(30,callback)},hide:function(callback){$("#operations-panel").hide("slide",{direction:"right",easing:"easeInQuad"},0,function(){if(typeof callback==="function")callback()})},height:function(){var element=this.element();return element.outerHeight()-element.position().top},selectOperationIcon:function(type){var icon=this.operationTypeIconMap[type];
if(!icon)icon=this.operationTypeIconMap["Default"];return icon},append:function(operation){var operationElement=$("<div></div>").attr("operationId",operation.operationId).addClass("operations-panel-operation").appendTo("#operations-panel-operations");$("#operations-panel").scrollTop(operationElement.position().top);var traits=$('<div class="operation-traits" />').attr("contains","traits").appendTo(operationElement);$('<img src="'+CB.resolve("graphics/cancel.png")+'" title="'+Ui.OperationsPanel.Translator.cancel()+
'" class="small-icon">').attr("contains","cancel").appendTo(traits).click(function(){Console.OperationsPanel.cancelOperation(operation.operationId)});$('<img src="'+CB.resolve("graphics/retry.png")+'" title="'+Ui.OperationsPanel.Translator.retry()+'" class="small-icon">').attr("contains","retry").appendTo(traits).click(function(){Console.OperationsPanel.retryOperation(operation.operationId)});$('<img src="'+CB.resolve("graphics/complete.png")+'" class="small-icon">').attr("contains","finished").appendTo(traits);
var progressBar=$('<div class="operation-progress-bar"></div>').attr("contains","progress").appendTo(operationElement).progressbar();$("div",progressBar).css("position","absolute");$("<div />").css("font-weight","bold").css("position","absolute").css("left","3px").attr("contains","status").html(operation.status).appendTo(progressBar);$("<div />").css("font-weight","bold").css("position","absolute").css("right","5px").attr("contains","percentComplete").appendTo(progressBar);$("<span />").addClass("operations-panel-operation-type").html('<img class="small-icon" src="'+
CB.resolve(this.selectOperationIcon(operation.type))+'" />'+operation.localizedName+": ").appendTo(operationElement);$("<img />").addClass("small-icon").attr("src",CB.resolve(selectItemIconByExtension(operation.name))).appendTo(operationElement);$("<span />").text(operation.description).appendTo(operationElement);var errorContainer=Utility.onDeckContentFactory("#operations-panel-error-template");$(".error-header",errorContainer).click(function(){var parent=$($(this).parent());var error=parent.data("error");
if(!error)return;var errorSection=$(".error-section",parent);if(errorSection.is(":hidden")){$(".error-closed-icon",parent).hide();$(".error-opened-icon",parent).show();errorSection.show()}else{$(".error-closed-icon",parent).show();$(".error-opened-icon",parent).hide();errorSection.hide()}});errorContainer.appendTo(operationElement);this.update(operation);$(operationElement).contextMenu({createMenu:function(){var operation=$.data(operationElement[0],"operation");var state=operation.state;if(state==
"Prepared")return $("#prepared-operation-context-menu");else if(state=="Started")return $("#started-operation-context-menu");else if(state=="Finished")return $("#finished-operation-context-menu");else if(state=="Error")return $("#error-operation-context-menu");else console.log("No context menu for state: "+state)},destroyMenu:function(){}},this.contextMenuAction);$(operationElement).bind("beforeContextMenu",function(){var self=$(this);if(!self.hasClass("ui-selected"))self.toggleClass("ui-selected").siblings(".ui-selected").removeClass("ui-selected")})},
open:function(){Ui.RightPane.open(Ui.OperationsPanel)},contextMenuAction:function(action,element){var operation=$.data(element[0],"operation");if(action=="clear")$("#operations-panel-operations div.ui-selected").each(function(){var operation=$.data($(this)[0],"operation");if(operation!=null&&operation.state=="Finished"||operation.state=="Error")Console.OperationsPanel.disposeOperation(operation.operationId)});else if(action=="cancel")$("#operations-panel-operations div.ui-selected").each(function(){var operation=
$.data($(this)[0],"operation");if(operation!=null&&(operation.state=="Started"||operation.state=="Prepared"))Console.OperationsPanel.cancelOperation(operation.operationId)});else if(action=="retry")$("#operations-panel-operations div.ui-selected").each(function(){var operation=$.data($(this)[0],"operation");if(operation!=null&&operation.state=="Error")Console.OperationsPanel.retryOperation(operation.operationId)});else if(action=="clear-all")$("#operations-panel-operations div").each(function(){var operation=
$.data($(this)[0],"operation");if(operation!=null&&(operation.state=="Finished"||operation.state=="Error"))Console.OperationsPanel.disposeOperation(operation.operationId)});else console.log("Unrecognized action: "+action)},update:function(operation){var operationElement=$("#operations-panel-operations div[operationId='"+operation.operationId+"']");if(!operationElement.length){console.log("Could not find operation to update: "+operation.operationId);return}var previousOperation=$.data(operationElement[0],
"operation");if(previousOperation!=null&&previousOperation.fingerprint===operation.fingerprint)return;$.data(operationElement[0],"operation",operation);$("div[contains=status]",operationElement).html(operation.status);var percentComplete=operation.percentComplete==-1?-1:Math.floor(operation.percentComplete*1E4)/100;if(operation.state=="Finished"){$("div[contains=progress]",operationElement).progressbar("value",100);$("div[contains=percentComplete]",operationElement).html("")}else{$("div[contains=progress]",
operationElement).progressbar("value",percentComplete);$("div[contains=percentComplete]",operationElement).html(operation.percentComplete==-1?"":percentComplete+"%")}var traits=$("div[contains=traits]",operationElement);$("img",traits).hide();if(operation.state=="Started"){if(operation.canCancel)$("img[contains=cancel]",traits).show()}else if(operation.state=="Prepared")$("img[contains=cancel]",traits).show();else if(operation.state=="Error"){if(operation.canRetry)$("img[contains='retry']",traits).show();
operationElement.addClass("error-state");var errorContainer=$(".error-container",operationElement);errorContainer.data("error",operation.error);Console.OperationsPanel.showExceptions(operation.operationId,operation.error.toString());errorContainer.show()}else if(operation.state=="Finished")$("img[contains=finished]",traits).show()},remove:function(operationId){var operationElement=$("#operations-panel-operations div[operationId='"+operationId+"']");if(!operationElement.length){console.log("Could not find operation to remove: "+
operationId);return}operationElement.remove()},resetOperationErrorState:function(operationId){var operationElement=$("#operations-panel-operations div[operationId='"+operationId+"']");operationElement.removeClass("error-state");$(".error-container",operationElement).hide()},setOperationErrorState:function(operationId,header,errors){var operationErrorSection=$(".error-container",$("#operations-panel-operations div[operationId='"+operationId+"']"));$(".validation-message",operationErrorSection).text(header);
if(errors){var hiddenErrorSection=$(".hidden-error-section",operationErrorSection);hiddenErrorSection.text(errors);var height=hiddenErrorSection.height();$(".error-section",operationErrorSection).val(errors).height(height)}else{var hiddenErrorSection=$(".hidden-error-section",operationErrorSection);hiddenErrorSection.text(header);var height=hiddenErrorSection.height();$(".error-section",operationErrorSection).val(header).height(height)}}};ns.Ui.OperationsPanel=new OperationsPanel})(this);(function(ns){function RightPane(){}RightPane.prototype={currentPanel:null,initialize:function(currentPanel){this.currentPanel=currentPanel;$("#large-panel-button-bar-none-button").click(function(){var currentPanel=Ui.RightPane.currentPanel;if(currentPanel)Ui.RightPane.close(currentPanel)})},hookup:function(){$(Ui.Layout).bind("redraw",this.redraw.bind(this));var self=this;$(document).on("mousedown","#ui-right-pane",function(){Ui.Keyboard.setFocus(self.currentPanel)})},open:function(panel){if(this.isOpen(panel))return;
Ui.activateRightPaneButton(panel.rightPaneButtonId());if(this.currentPanel!=null){this.close(this.currentPanel,this.open.bind(this,panel),true);return}$("#ui-right-pane").show();panel.show(function(){Ui.Layout.triggerRedraw()}.bind(this));this.currentPanel=panel},close:function(panel,callback,skipNoneButtonActivate){if(this.isOpen(panel)){$("#ui-right-pane").hide();if(!skipNoneButtonActivate)Ui.activateRightPaneButton("large-panel-button-bar-none-button");panel.hide(function(){Ui.Layout.triggerRedraw();
if(typeof callback==="function")callback()}.bind(this));this.currentPanel=null}},isOpen:function(panel){return this.currentPanel===panel},toggle:function(panel){if(this.isOpen(panel))this.close(panel);else this.open(panel)},redraw:function(){}};ns.Ui.RightPane=new RightPane})(this);(function(ns){function DownloadPanel(){}DownloadPanel.prototype={initialize:function(){$("#download-panel").shadow();$("#download-panel-ok-button").click(function(){Ui.DownloadPanel.show(false)})},setLink:function(link){var text=Ui.Translator.pleaseRightClickTheDownloadLinkBelowAndChoose();var browserSpecific=Ui.Translator.saveTargetAs();if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1)browserSpecific=Ui.Translator.saveLinkAs();else if($.browser.safari)browserSpecific=Ui.Translator.downloadLinkedFileAs();
else if($.browser.msie)browserSpecific=Ui.Translator.saveAs();else if($.browser.mozilla)browserSpecific=Ui.Translator.saveLinkAs();$("#download-panel div[contains=text]").html(text+'"'+browserSpecific+'"');var anchor=$("<a />").attr("href",link).attr("target","_blank").html(Ui.Translator.download());$("#download-panel div[contains=link]").empty().append(anchor)},show:function(show){Ui.showModal($("#download-panel"),show,false)}};ns.Ui.DownloadPanel=new DownloadPanel})(this);(function(ns){function IntegratedSecurity(){}IntegratedSecurity.prototype={initialize:function(){$("#relogin-panel").shadow()},consoleUserInfo:function(){return window.AwsConsoleUser},createHUD:function(displayName,groupName,userType,logoutUrl){console.log("Creating integrated security HUD: "+logoutUrl);if(ConsoleNavService&&ConsoleNavService.BuilderInstance)ConsoleNavService.BuilderInstance.setLogoutUrl(logoutUrl);else console.log("Error - Navigation is not available.")},updateLanguage:function(accountStatus,
isIAMUser){$("#account-status").removeClass("iam").removeClass("account");$("#account-status .messaging").removeClass("active");$("#account-status").addClass(isIAMUser?"iam":"account");$("#account-status .messaging.account_"+accountStatus.toLowerCase()).addClass("active")},destroyHUD:function(){console.log("Destroying integrated security HUD");$("#integrated-security-hud").empty()},startRelogin:function(){Ui.showModal($("#relogin-panel"),true,false,"High")},relogin:function(){$("#relogin-iframe").remove();
Ui.ModalManager.suspendModals();var reloginUrlString=document.referrer;var index=reloginUrlString.lastIndexOf("#");if(index!==-1&index===reloginUrlString.length-1)reloginUrlString=reloginUrlString.substr(0,index);window.parent.location=reloginUrlString}};ns.Ui.IntegratedSecurity=new IntegratedSecurity})(this);(function(ns){function CorsConfigurationModal(){}CorsConfigurationModal.prototype={sampleConfiguration:"<CORSConfiguration>\n"+"    <CORSRule>\n"+"        <AllowedOrigin>*</AllowedOrigin>\n"+"        <AllowedMethod>GET</AllowedMethod>\n"+"        <MaxAgeSeconds>3000</MaxAgeSeconds>\n"+"        <AllowedHeader>Authorization</AllowedHeader>\n"+"    </CORSRule>\n"+"</CORSConfiguration>\n",initialize:function(){this.$modal=$("#cors-configuration-modal");this.$modal.shadow();this.$loadingMessage=$("#cors-configuration-loading-message",
this.$modal);this.$bucket=$("#cors-configuration-panel-header-bucket",this.$modal);this.$addModeElements=$("#cors-configuration-modal-add-mode",this.$modal);this.$editModeElements=$("#cors-configuration-modal-edit-mode",this.$modal);this.$input=$("#cors-configuration-textarea",this.$modal);this.$input.keydown(function(){this.dirty()}.bind(this));this.$saveButton=$("#save-configuration-button",this.$modal);this.$deleteButton=$("#delete-configuration-button",this.$modal);this.$cancelButton=$("#cancel-configuration-button",
this.$modal);this.$savingFeedback=$("#cors-configuration-saving-indicator",this.$modal);this.$deletingFeedback=$("#cors-configuration-deleting-indicator",this.$modal);this.$okIndicator=$("#cors-configuration-ok-indicator",this.$modal);this.$errorIndicator=$("#cors-configuration-error-indicator",this.$modal);this.$errorMessage=$("#cors-configuration-error-message",this.$modal);this.$propertiesPanelButtonText=$("#cors-configuration-button-text");this.formData=null;this.isDirty=false},reset:function(){this.hideAllFeedback()},
dirty:function(){this.isDirty=true;this.allowSave()},isDirty:function(){return this.isDirty},open:function(){Ui.showModal(this.$modal,true,false)},maybeClose:function(){if(this.confirmCloseDirtyModal())this.close()},confirmCloseDirtyModal:function(){if(!this.isDirty||!this.isSaveAllowed)return true;return confirm(Ui.PropertiesPanel.Translator.youHaveUnsavedChangesAreYouSureYouWantToCloseTheConfigurationEditor())},close:function(){Ui.showModal(this.$modal,false,false);if(this.isDirty){this.revertFormData();
this.disallowSave()}},allowSave:function(){this.isSaveAllowed=true;this.$saveButton.removeClass("button-disabled").addClass("button-normal")},disallowSave:function(){this.isSaveAllowed=false;this.$saveButton.addClass("button-disabled").removeClass("button-normal")},maybeSave:function(){if(this.isSaveAllowed)ns.Console.CorsConfigurationModal.saveConfiguration()},saveSuccessful:function(){this.updateSavedFormData();this.disallowSave();this.setToEditMode();this.$propertiesPanelButtonText.text(Ui.PropertiesPanel.Translator.editCorsConfiguration())},
allowDelete:function(){this.isDeleteAllowed=true;this.$deleteButton.removeClass("button-disabled").addClass("button-normal")},disallowDelete:function(){this.isDeleteAllowed=false;this.$deleteButton.addClass("button-disabled").removeClass("button-normal")},maybeDelete:function(){if(this.confirmDelete())ns.Console.CorsConfigurationModal.deleteConfiguration()},confirmDelete:function(){if(!this.isDeleteAllowed)return true;return confirm(Ui.PropertiesPanel.Translator.areYouSureYouWantToDeleteTheCurrentConfiguration())},
deleteSuccessful:function(){this.$input.val("");this.updateSavedFormData();this.disallowSave();this.disallowDelete()},setBucket:function(bucket){this.$bucket.text(bucket)},setToAddMode:function(){this.$addModeElements.show();this.$editModeElements.hide();this.disallowDelete();this.allowSave();this.$input.val(this.sampleConfiguration)},setToEditMode:function(){this.$addModeElements.hide();this.$editModeElements.show();this.allowDelete();this.disallowSave()},setFormData:function(formData){this.formData=
formData;this.$input.val(formData.configuration)},revertFormData:function(){this.setFormData(this.formData);this.isDirty=false},updateSavedFormData:function(){this.formData=this.getFormData()},getFormData:function(){return{configuration:this.$input.val()}},hideAllFeedback:function(){this.$savingFeedback.hide();this.$deletingFeedback.hide();this.$okIndicator.hide();this.$errorIndicator.hide();this.$errorMessage.hide()},showSavingFeedback:function(){this.hideAllFeedback();this.$savingFeedback.show()},
showDeletingFeedback:function(){this.hideAllFeedback();this.$deletingFeedback.show()},indicateOkStatus:function(){this.hideAllFeedback();this.$okIndicator.show()},indicateErrorStatus:function(errorMessage){this.hideAllFeedback();this.$errorIndicator.show();this.$errorMessage.text(errorMessage).show()}};ns.Ui.PropertiesPanel.CorsConfigurationModal=new CorsConfigurationModal})(this);(function(namespace){function DetailsSubpanel(rrsEnabled,sseEnabled){this.rrsOptionEnabled=rrsEnabled;this.sseOptionEnabled=sseEnabled;this.shouldShowSaveAndCancel=rrsEnabled||sseEnabled}DetailsSubpanel.prototype={formData:null,rrsDefaultMessage:"",sseDefaultMessage:"",showingGenericDetails:false,showingArchivedDetails:false,showingVersionedDetails:false,initialize:function(){this.cleanData=true},clear:function(){this.detailsPanel().empty()},detailsPanel:function(){var panel=$("#properties-panel-details");
this.detailsPanel=function(){return panel};return panel},shouldShowSaveAndCancel:function(){return this.shouldShowSaveAndCancel},setObjectDetails:function(properties){this.clear();this.showingGenericDetails=false;this.showingArchivedDetails=false;this.showingVersionedDetails=false;this.rrsDefaultMessage=this.sseDefaultMessage="";this.detailsPanel().append(this.createProperties());this.checkRadioButtonValues(properties.additionalProperties)},setArchivedObjectDetails:function(properties){this.clear();
this.showingGenericDetails=false;this.showingArchivedDetails=true;this.showingVersionedDetails=false;this.detailsPanel().append(this.createArchivedProperties(properties))},setVersionedObjectDetails:function(properties){this.clear();this.showingGenericDetails=false;this.showingArchivedDetails=false;this.showingVersionedDetails=true;this.detailsPanel().append(this.createVersionedProperties(properties))},setGenericDetails:function(properties){this.clear();this.showingGenericDetails=true;this.showingArchivedDetails=
false;this.showingVersionedDetails=false;this.detailsPanel().append($("<div />").text(Ui.PropertiesPanel.Translator.forAllSelectedItems()+":").addClass("text-heading"));this.rrsDefaultMessage=this.sseDefaultMessage=Ui.PropertiesPanel.Translator.existingValuesWillRemainUnchanged();this.detailsPanel().append(this.createProperties());this.checkRadioButtonValues();this.setupRadioButtonMessageChange()},createProperties:function(){var propertiesElem=$("<div />").attr("id","additional-properties");var unarchivedStorageClasses=
{keys:[]};for(var i=0;i<Ui.StorageClassTypes.keys.length;++i){var key=Ui.StorageClassTypes.keys[i];if(Ui.StorageClassTypes[key].tier=="STANDARD"){unarchivedStorageClasses[key]=Ui.StorageClassTypes[key];unarchivedStorageClasses.keys.push(key)}}var showMsg=this.rrsDefaultMessage.length!="";var rrsElem=this.createSingleProperty("properties-panel-rrs-buttons",unarchivedStorageClasses,this.rrsDefaultMessage,"rrs-msg",Utility.onDeckContentFactory("#storage-class-doc-link"));propertiesElem.append(rrsElem);
if(false==this.rrsOptionEnabled){$("#STANDARD",rrsElem).prop("disabled",true);$("#REDUCED_REDUNDANCY",rrsElem).prop("disabled",true);$(".property-label",rrsElem).css("opacity","0.4");$("#properties-panel-rrs-buttons",rrsElem).css("opacity","0.4");$(".property-label",rrsElem).before('<div style="text-align : left;">'+Ui.PropertiesPanel.Translator.noteReducedRedundancyStorageIsNotSupportedInThisRegion()+"</div>");$("a",rrsElem).attr("onclick","").removeAttr("href").css("cursor","default").css("color",
"#222222");$("#rrs-msg",rrsElem).css("opacity","0.4")}showMsg=this.sseDefaultMessage!="";var sseElem=this.createSingleProperty("properties-panel-sse-buttons",Ui.EncryptionTypes,this.sseDefaultMessage,"sse-msg",Utility.onDeckContentFactory("#server-side-encryption-doc-link"));propertiesElem.append(sseElem);if(false==this.sseOptionEnabled){$("#NONE",sseElem).prop("disabled",true);$("#AES256",sseElem).prop("disabled",true);$(".property-label",sseElem).css("opacity","0.4");$("#properties-panel-sse-buttons",
sseElem).css("opacity","0.4");$(".property-label",sseElem).before('<div style="text-align : left;">'+Ui.PropertiesPanel.Translator.noteServerSideEncryptionIsEnabledByDefaultInThisRegion()+"</div>");$("a",sseElem).attr("onclick","").removeAttr("href").css("cursor","default").css("color","#222222");$("#sse-msg",sseElem).css("opacity","0.4")}return propertiesElem},createArchivedProperties:function(properties){var propertiesElem=$("<div />").attr("id","additional-properties");var restoreElem=$("<div />").addClass("restore-status");
var restoreMsg=$("<span />").addClass("restore-message");if(properties.archivedObjectProperties.isRestored&&!properties.archivedObjectProperties.restoredCopyExpiryDate){restoreMsg.text(Ui.PropertiesPanel.Translator.restorationInProgress());restoreElem.append(restoreMsg)}else if(properties.archivedObjectProperties.isRestored&&properties.archivedObjectProperties.restoredCopyExpiryDate){restoreMsg.text(Ui.PropertiesPanel.Translator.restoredUntilDate(properties.archivedObjectProperties.restoredCopyExpiryDate));
restoreElem.append(restoreMsg);var modifyIcon=$("<img />").attr("src",CB.resolve("graphics/context-menu-rename.png")).addClass("small-icon").addClass("clickable");var modifyButton=$("<div />").addClass("form-button").append(modifyIcon).append(Ui.PropertiesPanel.Translator.modify()).click(function(){Ui.RestoreModal.open()});restoreElem.append(modifyButton)}var storageClassKey=properties.additionalProperties.rrsValue;propertiesElem.append(this.createSingleReadOnlyProperty(Ui.StorageClassTypes[storageClassKey].label(),
Utility.onDeckContentFactory("#storage-class-doc-link")));propertiesElem.append(restoreElem);var encryptionKey=properties.additionalProperties.sseValue;propertiesElem.append(this.createSingleReadOnlyProperty(Ui.EncryptionTypes[encryptionKey].label(),Utility.onDeckContentFactory("#server-side-encryption-doc-link")));return propertiesElem},createVersionedProperties:function(properties){var propertiesElem=$("<div />").attr("id","additional-properties");var storageClassKey=properties.additionalProperties.rrsValue;
propertiesElem.append(this.createSingleReadOnlyProperty(Ui.StorageClassTypes[storageClassKey].label(),Utility.onDeckContentFactory("#storage-class-doc-link")));var encryptionKey=properties.additionalProperties.sseValue;propertiesElem.append(this.createSingleReadOnlyProperty(Ui.EncryptionTypes[encryptionKey].label(),Utility.onDeckContentFactory("#server-side-encryption-doc-link")));return propertiesElem},createSingleReadOnlyProperty:function(displayValue,localizedHelpLinkElement){var propertyElem=
$("<div />").addClass("single-property");propertyElem.append(this.createSinglePropertyLabel(localizedHelpLinkElement));propertyElem.append(this.createSinglReadOnlyPropertyValue(displayValue));return propertyElem},createSinglReadOnlyPropertyValue:function(displayValue){return $("<span />").addClass("property-value").text(displayValue)},createSingleProperty:function(buttonsId,typeColl,msg,msgId,localizedHelpLinkElement){var propertyElem=$("<div />").addClass("single-property");propertyElem.append(this.createSinglePropertyLabel(localizedHelpLinkElement));
propertyElem.append(this.createSinglePropertyRadioButtons(buttonsId,typeColl));propertyElem.append(this.createSinglePropertyMsg(msg,msgId));return propertyElem},createSinglePropertyRadioButtons:function(buttonsId,typeColl){var buttons=$("<span />").attr("id",buttonsId).addClass("property-buttons");for(var i=0;i<typeColl.keys.length;++i){var key=typeColl.keys[i];var buttonSpan=$("<span />").addClass("radio-button-default");buttonSpan.append($("<input type='radio' name='"+Utility.escape(buttonsId)+
"' />").attr("id",key).val(key));$("<label />").attr("for",key).text(typeColl[key].label()).attr("title",typeColl[key].selectionMessage()).appendTo(buttonSpan);buttons.append(buttonSpan)}return buttons},checkRadioButtonValues:function(additionalProperties){var rrsValue,sseValue,sseKmsKey;if(additionalProperties){rrsValue=additionalProperties.rrsValue;sseValue=additionalProperties.sseValue;sseKmsKey=additionalProperties.sseKmsKey}$("input[name='properties-panel-rrs-buttons']").prop("checked",false);
$("input[name='properties-panel-sse-buttons']").prop("checked",false);$("#rrs-msg").text(this.rrsDefaultMessage);$("#sse-msg").text(this.sseDefaultMessage);if(rrsValue)$("#"+rrsValue,$("#properties-panel-rrs-buttons")).prop("checked",true);if(sseValue)if("AES256"===sseValue||"NONE"===sseValue)$("#"+sseValue,$("#properties-panel-sse-buttons")).prop("checked",true);else{$("#properties-panel-sse-buttons").hide();this.getAndDisplayKmsKeyAliasesByArn(sseKmsKey)}},getAndDisplayKmsKeyAliasesByArn:function(keyArn){var url=
window.S3Console.Constants.UploadWizard.kmsAPIConstants.kmsGetKeysFromServerUrl;var locationConstraint=S3Console.ViewModel.PropertiesPanel.locationConstraint();var awsRegion=Configuration.convertLocationConstraintToAWSRegion(locationConstraint);var data={region:awsRegion};XdmXhrServices.makeAjaxToSDKProxy(locationConstraint,url,data,function(results){Ui.PropertiesPanel.DetailsSubpanel.onGetAndDisplayKmsKeyAliasesByArnSuccess(results,keyArn)},function(e){Ui.PropertiesPanel.DetailsSubpanel.onGetAndDisplayKmsKeyAliasesByArnError(e,
keyArn)},"POST")},onGetAndDisplayKmsKeyAliasesByArnSuccess:function(kmsKeysResponse,keyArn){if(kmsKeysResponse&&kmsKeysResponse.kmsKeys){var kmsKeys=kmsKeysResponse.kmsKeys;for(var i=0;i<kmsKeys.length;++i){var kmsKey=kmsKeys[i];if(kmsKey["key-arn"]===keyArn&&kmsKey["key-alias"]&&$.trim(kmsKey["key-alias"])){var alias;if(window.S3Console.Constants.UploadWizard.kmsDropDownDefaultOptions.defaultKmsKeyOptionAlias===kmsKey["key-alias"])alias=window.S3Console.Constants.UploadWizard.kmsDropDownDefaultOptions.defaultKmsKeyOptionDisplayedAlias;
else alias=kmsKey["key-alias"];if(displayedKeyAliases)displayedKeyAliases=displayedKeyAliases+", "+alias;else displayedKeyAliases=alias}}}if(!displayedKeyAliases)var displayedKeyAliases=keyArn;$("#properties-panel-sse-buttons").replaceWith("<span id='properties-panel-sse-kms-key-description' class='property-label-kms'>"+Ui.PropertiesPanel.Translator.usingKMSMasterKey()+": "+displayedKeyAliases+"</span>");if(false==this.sseOptionEnabled)$("#properties-panel-sse-kms-key-description").css("opacity",
"0.4")},onGetAndDisplayKmsKeyAliasesByArnError:function(e,keyArn){$("#properties-panel-sse-buttons").replaceWith("<span id='properties-panel-sse-kms-key-description' class='property-buttons'>"+Ui.PropertiesPanel.Translator.usingKMSMasterKey()+": "+keyArn+"</span>");window.Logging.log("KmsListKeysFailure",1,"Failed to list Kms SSE keys: "+e,"propertiesPanel")},createSinglePropertyLabel:function(localizedHelpLinkElement){var labelElem=$("<span />").addClass("property-label").append(localizedHelpLinkElement);
return labelElem},createSinglePropertyMsg:function(message,messageId){return $("<div />").attr("id",messageId).addClass("property-msg").text(message)},rrsCurrentValue:function(){if($("input:radio[name=properties-panel-rrs-buttons]:checked").length>0)return $("input:radio[name=properties-panel-rrs-buttons]:checked").val();else return""},sseCurrentValue:function(){if($("input:radio[name=properties-panel-sse-buttons]:checked").length>0)return $("input:radio[name=properties-panel-sse-buttons]:checked").val();
else return""},rrsChangeButton:function(){var value=$("input:radio[name=properties-panel-rrs-buttons]:checked").val();$("#rrs-msg").text(Ui.StorageClassTypes[value].selectionMessage())},sseChangeButton:function(){var value=$("input:radio[name=properties-panel-sse-buttons]:checked").val();$("#sse-msg").text(Ui.EncryptionTypes[value].selectionMessage())},getFormData:function(){var formData={rrsValue:this.rrsCurrentValue(),sseValue:this.sseCurrentValue()};return formData},setFormData:function(formData){this.formData=
formData},resetFormData:function(){this.checkRadioButtonValues(this.formData)},save:function(){Console.PropertiesPanel.commitTransaction("Details")},cancel:function(){Console.PropertiesPanel.rollbackTransaction("Details")},setupRadioButtonMessageChange:function(){$("#properties-panel-rrs-buttons input").bind("click",this.rrsChangeButton.bind(this));$("#properties-panel-sse-buttons input").bind("click",this.sseChangeButton.bind(this))}};namespace.Ui.PropertiesPanel.DetailsSubpanel=new DetailsSubpanel(Configuration.rrsEnabled,
!Configuration.ssePermanentlyOn)})(this);(function(namespace){function LifecycleSubpanel(){}LifecycleSubpanel.prototype={EmptyMessage:function(){return Ui.PropertiesPanel.Translator.noRulesAdded()},AutoGeneratedName:function(){return Ui.PropertiesPanel.Translator.autogeneratedRuleName()},initialize:function(){this.hideAllContents()},getKOController:function(){if(this.KOController)return this.KOController;else{this.KOController=window.S3Console.Controller.PropertiesPanel.LifecycleSubpanel;return this.KOController}},clear:function(){this.getKOController().clearRules()},
indexOfRuleBeingEdited:function(){return this.getKOController().indexOfRuleBeingEdited},setDisplayedBucket:function(bucketName){this.getKOController().setDisplayedBucket(bucketName)},setVersioningStatus:function(versioningConfig){this.getKOController().setVersioningStatus(versioningConfig)},setIsTransitionToGlacierEnabled:function(isTransitionToGlacierEnabled){this.getKOController().setIsTransitionToGlacierEnabled(isTransitionToGlacierEnabled)},startLoading:function(){$("#properties-panel-lifecycle-subpanel-status").show()},
finishLoading:function(){$("#properties-panel-lifecycle-subpanel-status").hide()},lifecycleRules:function(){var rulesSection=$("#properties-panel-lifecycle-rules");this.lifecycleRules=function(){return rulesSection};return rulesSection},hideAllContents:function(){$("#properties-panel-lifecycle-subpanel-status").hide();$("#properties-panel-lifecycle-subpanel-contents").hide()},getFormData:function(){return this.getKOController().getRules()},setFormData:function(formData){this.getKOController().updateRules(formData)},
resetFormData:function(){this.displayFormData()},displayFormData:function(){this.finishLoading();$("#properties-panel-lifecycle-subpanel-contents").show()},save:function(){Console.PropertiesPanel.commitTransaction("Lifecycle")},cancel:function(){Console.PropertiesPanel.rollbackTransaction("Lifecycle")}};namespace.Ui.PropertiesPanel.LifecycleSubpanel=new LifecycleSubpanel})(this);(function(namespace){function RulesModal(){}RulesModal.prototype={formData:null,currentRequestId:null,MaxExpirationActions:1,MaxTransitionActions:1,EmptyMessage:function(){return Ui.PropertiesPanel.Translator.noActionsAdded()},isAutoOpen:false,TimePeriodFormats:{Date:"DATE",Days:"DAYS"},ActionTypes:{Transition:"Transition",Expiration:"Expiration"},initialize:function(){this.$ruleModal=$("#lifecycle-rule-modal");this.$ruleModal.shadow()},isEditingExistingRule:function(){return S3Console.ViewModel.PropertiesPanel.LifecycleSubpanel.RuleWizard.isEditingExistingRule()},
getFormData:function(){return window.S3Console.Controller.PropertiesPanel.LifecycleSubpanel.RuleWizard.getGeneratedRule()},setFormData:function(formData){this.currentRequestId=formData.requestId;this.formData=formData},clear:function(){window.S3Console.ViewModel.PropertiesPanel.LifecycleSubpanel.RuleWizard.initialize()},close:function(){window.S3Console.Controller.PropertiesPanel.LifecycleSubpanel.RuleWizard.closeWizard()},open:function(){window.S3Console.Controller.PropertiesPanel.LifecycleSubpanel.openWizardForAddingNewRule(true)},
cancel:function(){this.close()},save:function(){window.S3Console.ViewModel.PropertiesPanel.LifecycleSubpanel.RuleWizard.displayError([]);Console.LifecycleRuleModal.save()},displaySavingFeedback:function(){window.S3Console.Controller.PropertiesPanel.LifecycleSubpanel.RuleWizard.isInSavingState(true)},displaySaveSuccessful:function(){window.S3Console.Controller.PropertiesPanel.LifecycleSubpanel.RuleWizard.isInSavingState(false)},displayValidation:function(validation){window.S3Console.Controller.PropertiesPanel.LifecycleSubpanel.RuleWizard.isInSavingState(false);
if(validation.errors.length>0)for(var i=0;i<validation.errors.length;++i)window.S3Console.ViewModel.PropertiesPanel.LifecycleSubpanel.RuleWizard.displayError.push(validation.errors[i].message);$("#versioned-lifecycle-rule-modal-step-3-main-content").scrollTop(0)}};namespace.Ui.PropertiesPanel.LifecycleSubpanel.RulesModal=new RulesModal})(this);(function(namespace){function MetadataSubpanel(){}MetadataSubpanel.prototype={formData:null,commonMetadata:null,isGlacierReadOnly:false,isVersioningReadOnly:false,initialize:function(){this.cleanData=true;this.$glacierReadOnlyDescription=$("#properties-panel-metadata-subpanel .glacier-read-only-description");this.$versionedObjectReadOnlyDescription=$("#properties-panel-metadata-subpanel .versionedObject-read-only-description")},setClean:function(isClean){this.cleanData=isClean},isClean:function(){return this.cleanData},
isReadOnly:function(){return this.isGlacierReadOnly||this.isVersioningReadOnly},setReadOnly:function(isGlacierReadOnly,isVersioningReadOnly){this.isGlacierReadOnly=isGlacierReadOnly;this.isVersioningReadOnly=isVersioningReadOnly},getFormData:function(){var formData={guessContentTypes:false,metadata:[]};$("#properties-panel-metadata div").each(function(){var isApplied=$(this).attr("isApplied")==="true";var key;var value;if(isApplied){key=$("span[contains=key] input",$(this)).attr("value");value=$("span[contains=value] select",
$(this)).combobox("value")}else{key=$("span[contains=key] select",$(this)).combobox("value");value=$("span[contains=value] select",$(this)).combobox("value")}if(!key&&!value)return;formData.metadata.push({requestId:$(this).attr("requestId"),key:key||"",value:value||""})});return formData},save:function(){if(!this.validate())return;Console.PropertiesPanel.commitTransaction("Metadata")},cancel:function(){Console.PropertiesPanel.rollbackTransaction("Metadata")},clearValidation:function(){var container=
$("#properties-panel-metadata");$(".validation-info",container).removeClass("validation-info");$(".validation-warning",container).removeClass("validation-warning");$(".validation-error",container).removeClass("validation-error");$(".validation-icon-container",container).empty();$(".validation-message","#properties-panel-metadata-subpanel").empty()},validate:function(){var validation=Console.PropertiesPanel.validateMetadata();var failedValidation=false;var container=$("#properties-panel-metadata");
this.clearValidation();var animated={};for(var i=0;i<validation.infos.length;i++){var info=validation.infos[i];$("div[requestId='"+info.requestId+"']",container).addClass("validation-info")}for(var i=0;i<validation.warnings.length;i++){var warning=validation.warnings[i];$("div[requestId='"+warning.requestId+"']",container).addClass("validation-warning")}for(var i=0;i<validation.errors.length;i++){var error=validation.errors[i];$("<img />").attr("src",CB.resolve("graphics/warning.png")).addClass("small-icon").addClass("clickable").addClass("validation-icon").data("error",
error).click(function(){Ui.message(Utility.escape($(this).data("error").message))}).appendTo($(".validation-icon-container[requestId='"+error.requestId+"']",container));var validationElement=$(".validation-element[requestId='"+error.requestId+"']",container).addClass("validation-error");if(!animated[error.requestId]){validationElement.effect("pulsate",{times:1},800);animated[error.requestId]=true}if(!validation.message)validation.message=error.message;failedValidation=true}if(validation.message){$(".validation-message",
"#properties-panel-metadata-subpanel").text(Utility.escape(validation.message)).effect("pulsate",{times:1},800);failedValidation=true}return!failedValidation},setFormData:function(formData){this.formData=formData},resetFormData:function(){$("#properties-panel-metadata").empty();var metadata=this.formData;if(this.isGlacierReadOnly){this.$glacierReadOnlyDescription.show();this.$versionedObjectReadOnlyDescription.hide()}else if(this.isVersioningReadOnly){this.$versionedObjectReadOnlyDescription.show();
this.$glacierReadOnlyDescription.hide()}else{this.$glacierReadOnlyDescription.hide();this.$versionedObjectReadOnlyDescription.hide()}if(metadata==null)return;for(var i=0;i<metadata.length;i++)this.append(metadata[i]);this.clearValidation();this.setClean(true)},setCommonMetadata:function(commonMetadata){this.commonMetadata=commonMetadata},clear:function(omitMessage){var element=$("#properties-panel-metadata").empty();if(!omitMessage)$("<span />").text(Ui.PropertiesPanel.Translator.noMetadataAdded()).append("<br/>").append("<br/>").appendTo(element);
this.commonMetadata=null;this.clearValidation();this.setClean(true)},maybeClear:function(omitMessage){if($("#properties-panel-metadata div").length==0)this.clear(omitMessage)},append:function(metadata){this.maybeClear(true);var isApplied=metadata!=null;if(!metadata)metadata={requestId:Ui.generateId(),key:"",value:""};var commonMetadata=this.commonMetadata;if(!commonMetadata)commonMetadata=this.commonMetadata=$.extend({},UploadWizardUi_commonMetadata);var element=$("<div></div>").attr("requestId",
metadata.requestId).addClass("validation-element");element.attr("isApplied",isApplied);$("<span></span>").attr("requestId",metadata.requestId).addClass("validation-icon-container").appendTo(element);var localizedKeyLabel=Ui.PropertiesPanel.Translator.key()+": ";var localizedValueLabel=Ui.PropertiesPanel.Translator.value()+": ";if(this.isReadOnly()){var metadataKeyContainer=$("<span/>").addClass("metadata-key-container");$("<span/>").addClass("form-label").text(localizedKeyLabel).appendTo(metadataKeyContainer);
$("<span/>").text(metadata.key).appendTo(metadataKeyContainer);metadataKeyContainer.appendTo(element);var metadataValueContainer=$("<span/>").addClass("metadata-value-container");$("<span/>").addClass("form-label").text(localizedValueLabel).appendTo(metadataValueContainer);$("<span/>").text(metadata.value).appendTo(metadataValueContainer);metadataValueContainer.appendTo(element)}else{$("<span />").text(localizedKeyLabel+" ").appendTo(element);var keyElement;var valueElement=$("<select></select>").addClass("metadata-value-combo");
if(isApplied){var keyElement=$("<input>").attr({type:"text"}).attr({value:metadata.key}).attr({readonly:true});element.append($("<span />").addClass("metadata-key-input-container").attr("contains","key").append(keyElement))}else{var keyElement=$("<select></select>");element.append($("<span />").addClass("metadata-key-input-container").attr("contains","key").append(keyElement));$("<option></option>").val("").html("").prop("selected",true).appendTo(keyElement);for(var key in commonMetadata)$("<option></option>").val(key).html(Utility.escape(key)).appendTo(keyElement);
keyElement.combobox()}$("<span />").text(" "+localizedValueLabel+" ").appendTo(element);element.append($("<span />").addClass("metadata-value-input-container").attr("contains","value").append(valueElement));if(metadata.key!=null){if(metadata.value!=null)$("<option></option>").val(metadata.value).html(Utility.escape(metadata.value)).prop("selected",true).appendTo(valueElement);var values=commonMetadata[metadata.key];if(values)for(var i=0;i<values.length;i++)if(metadata.value!=values[i])$("<option></option>").val(values[i]).html(Utility.escape(values[i])).appendTo(valueElement)}valueElement.combobox();
var self=this;keyElement.bind("change",function(){valueElement.empty();var key=$(this).combobox("value");var values=self.commonMetadata[key];if(values)for(var i=0;i<values.length;i++)$("<option></option>").val(values[i]).html(Utility.escape(values[i])).appendTo(valueElement)});var removeX=$("<span>x</span>").addClass("form-remove-x").appendTo(element).click(function(){this.setClean(false);element.remove();self.maybeClear()}.bind(this))}element.appendTo("#properties-panel-metadata");$(".ui-shadowed-select",
element).combobox("redraw");$("input, select",element).bind("change",this.setClean.bind(this,false));this.setClean(false)},removeSelected:function(){$("#properties-panel-metadata div.ui-selected").remove();this.maybeClear()}};namespace.Ui.PropertiesPanel.MetadataSubpanel=new MetadataSubpanel})(this);(function(namespace){function TagsSubpanel(){}TagsSubpanel.prototype={formData:null,maxTags:10,isValidationWarningDisplayed:false,isValidationInfoDisplayed:false,isValidationErrorDisplayed:false,emptyMessage:function(){return Ui.PropertiesPanel.Translator.noTagsAdded()},isEnabled:function(){return Configuration.enableTags},initialize:function(){if(!this.isEnabled()){$("#properties-panel-tags-subpanel").empty();return}},tagsList:function(){var tagsSection=$("#properties-panel-tags-list");this.tagsList=
function(){return tagsSection};return tagsSection},numberOfTags:function(){return $("div.tag-row",this.tagsList()).length},maybeShowEmptyMessage:function(){if(this.numberOfTags()==0)$("<span />").text(this.emptyMessage()).addClass("empty-message").appendTo(this.tagsList())},clear:function(){this.tagsList().scrollTop(0);this.tagsList().empty();this.clearValidation()},maybeClear:function(){if(this.numberOfTags()==0)this.clear()},clearValidation:function(){if(this.isValidationErrorDisplayed||this.isValidationWarningDisplayed||
this.isValidationInfoDisplayed){var classList="validation-elem validation-info validation-warning validation-error";$(".validation-elem",this.tagsList()).removeClass(classList);$(".validation-icon-container",this.tagsList()).empty();this.isValidationErrorDisplayed=this.isValidationInfoDisplayed=this.isValidationWarningDisplayed=false}$(".ui-selected",this.tagsList()).removeClass("ui-selected");$("#properties-panel-tags-subpanel .validation-message").empty()},getFormData:function(){if(this.formData)return this.formData;
var formData={tags:[]};$("div.tag-row",this.tagsList()).each(function(){var keyInput=$(".tag-key input",$(this));var valueInput=$(".tag-value input",$(this));formData.tags.push({requestId:$(this).attr("requestId"),key:keyInput.val(),value:valueInput.val()})});return formData},setFormData:function(formData){this.formData=formData},displayFormData:function(){this.clear();this.maybeShowEmptyMessage();if(this.formData){this.appendTags(this.formData.tags);this.formData=null}this.clearValidation()},appendTags:function(tags){for(var i=
0;i<tags.length;++i)this.appendTag(tags[i]);$(".tag-row:first-child",this.tagsList()).focus()},appendTag:function(tag){if(this.numberOfTags()>=this.maxTags){Ui.message(Ui.PropertiesPanel.Translator.aBucketCanHaveAtMostNumberTags(this.maxTags));return}this.maybeClear();var tagRow=$("<div />").addClass("tag-row").attr("requestId",Ui.generateId()).addClass("validation-element");var validationIcon=this.generateTagElem("validation-icon-container","");var keyLabel=this.generateTagTextElem("key-label",Ui.PropertiesPanel.Translator.key()+
":");var keyTextBox=$("<input />").attr("type","text").attr("maxlength",128).change(function(){var val=$(this).val();$(this).attr("title",Utility.escape(val))});var valueLabel=this.generateTagTextElem("value-label",Ui.PropertiesPanel.Translator.value()+":");var valueTextBox=$("<input />").attr("type","text").attr("maxlength",256).change(function(){var val=$(this).val();$(this).attr("title",Utility.escape(val))});if(tag){keyTextBox.val(tag.key);valueTextBox.val(tag.value)}tagRow.append(validationIcon);
tagRow.append(keyLabel).append(this.generateTagElem("tag-key",keyTextBox));tagRow.append(valueLabel).append(this.generateTagElem("tag-value",valueTextBox));$("input",tagRow).focus(function(){Ui.PropertiesPanel.TagsSubpanel.selectRowOfChild($(this))}).click(function(){Ui.PropertiesPanel.TagsSubpanel.selectRowOfChild($(this))});$("<div />").addClass("form-remove-x").text("x").appendTo(tagRow).click(function(){tagRow.remove();this.maybeClear();this.maybeShowEmptyMessage()}.bind(this));this.tagsList().append(tagRow);
keyTextBox.focus()},selectRowOfChild:function(childElem){var rowElem=childElem.parents(".tag-row");$("div.ui-selected").removeClass("ui-selected");rowElem.addClass("ui-selected")},generateTagElem:function(className,contents){return $("<div />").addClass(className).addClass("tag-elem").append(contents)},generateTagTextElem:function(className,text){return $("<div />").addClass(className).addClass("tag-elem").addClass("tag-text").text(text)},removeSelectedTags:function(){$("div.ui-selected",this.tagsList()).remove();
this.maybeClear();this.maybeShowEmptyMessage()},validate:function(){this.clearValidation();var validationResult=Console.PropertiesPanel.validateTags();var failedValidation=validationResult.errors.length>0||validationResult.message;this.displayValidation(validationResult);return!failedValidation},displayValidation:function(validation){var animated={};var rowElemWithRequestId=function(requestId){return $("div[requestId='"+requestId+"']",this.tagsList())}.bind(this);var validateRow=function(validationArray,
validationClassName){for(var i=0;i<validationArray.length;++i){var validationObject=validationArray[i];rowElemWithRequestId(validationObject.requestId).addClass(validationClassName).addClass("validation-elem")}};validateRow(validation.infos,"validation-info");validateRow(validation.warnings,"validation-warning");for(var i=0;i<validation.errors.length;++i){var error=validation.errors[i];var rowElem=rowElemWithRequestId(error.requestId);var errorIcon=$("<img />").attr("src",CB.resolve("graphics/warning.png")).addClass("small-icon").addClass("clickable").addClass("validation-icon").data("error",
error).attr("title",Utility.escape(error.message)).click(function(){Ui.message(Utility.escape($(this).data("error").message))});$(".validation-icon-container",rowElem).append(errorIcon);rowElem.addClass("validation-error").addClass("validation-elem");if(!animated[error.requestId]){rowElem.effect("pulsate",{times:1},800);animated[error.requestId]=true}if(!validation.message)validation.message=error.message}if(validation.infos.length>0)this.isValidationInfoDisplayed=true;if(validation.warnings.length>
0)this.isValidationWarningDisplayed=true;if(validation.errors.length>0)this.isValidationErrorDisplayed=true;if(validation.message)$("#properties-panel-tags-subpanel .validation-message").text(Utility.escape(validation.message)).effect("pulsate",{times:1},800)},save:function(){this.formData=null;if(this.validate())Console.PropertiesPanel.commitTransaction("Tags")},cancel:function(){Console.PropertiesPanel.rollbackTransaction("Tags")}};namespace.Ui.PropertiesPanel.TagsSubpanel=new TagsSubpanel})(this);(function(namespace){function VersioningSubpanel(){}VersioningSubpanel.prototype={versioningSubpanel:function(){var subpanel=$("#properties-panel-versioning-subpanel");this.versioningSubpanel=function(){return subpanel};return subpanel},getKOController:function(){if(this.KOController)return this.KOController;else{this.KOController=window.S3Console.Controller.PropertiesPanel.VersioningSubpanel;return this.KOController}},clear:function(){this.getKOController().clear()},startLoading:function(){$("#properties-panel-versioning-subpanel-status").show()},
finishLoading:function(){$("#properties-panel-versioning-subpanel-status").hide()},getFormData:function(){if(this.getKOController().userInput)return this.getKOController().userInput;else return ko.mapping.toJS(window.S3Console.ViewModel.PropertiesPanel.VersioningSubpanel)},setFormData:function(formData){this.getKOController().clear();this.getKOController().updateViewModel(formData);this.finishLoading()},save:function(){var confirmationMessage="";if(this.getKOController().userInput===window.S3Console.Constants.PropertiesPanel.VersioningSubpanel.VersioningStatusEnum.VersioningEnabled)confirmationMessage=
Ui.PropertiesPanel.Translator.areYouSureYouWantToEnableVersioningOnTheSelectedBucket();else confirmationMessage=Ui.PropertiesPanel.Translator.areYouSureYouWantToSuspendVersioningForTheSelectedBucket();if(Ui.confirm(confirmationMessage))Console.PropertiesPanel.commitTransaction("Versioning");else this.getKOController().userInput=null},cancel:function(){Console.PropertiesPanel.rollbackTransaction("Versioning")},startSaveVersioning:function(){this.getKOController().isInSavingState(true)},finishSaveVersioning:function(error){this.getKOController().isInSavingState(false);
if(!error)this.getKOController().updateViewModelFromUserInput();else window.S3Console.ViewModel.PropertiesPanel.VersioningSubpanel.displayError(error);this.getKOController().userInput=null}};namespace.Ui.PropertiesPanel.VersioningSubpanel=new VersioningSubpanel})(this);(function(namespace){function RequesterPaysSubpanel(){}RequesterPaysSubpanel.prototype={formData:null,isEnabled:function(){return true},requesterPaysSubpanel:function(){var subpanel=$("#properties-panel-requesterpays-subpanel");this.requesterPaysSubpanel=function(){return subpanel};return subpanel},initialize:function(){if(!this.isEnabled()){$(this.requesterPaysSubpanel()).hide();return}},clear:function(){$("#properties-panel-requesterpays-enabled").prop("checked",false);$("#properties-panel-requesterpays-subpanel .validation-message").hide();
this.toggleWarningMessage()},getFormData:function(){if(this.formData)return this.formData;var formData={isPaymentByOwner:false};if($("#properties-panel-requesterpays-enabled",this.requesterPaysSubpanel()).is(":checked"))formData.isPaymentByOwner=false;else formData.isPaymentByOwner=true;return formData},setFormData:function(formData){this.formData=formData},displayFormData:function(){this.clear();if(this.formData){var isRequesterPaysEnabled=$("#properties-panel-requesterpays-enabled",this.requesterPaysSubpanel());
if(this.formData.isPaymentByOwner)isRequesterPaysEnabled.prop("checked",false);else isRequesterPaysEnabled.prop("checked",true);this.toggleWarningMessage();this.formData=null}},displayValidation:function(validation){if(validation.errors[0].message)$("#properties-panel-requesterpays-subpanel .validation-message").text(Utility.escape(validation.errors[0].message)).effect("pulsate",{times:1},800)},toggleWarningMessage:function(){if($("#properties-panel-requesterpays-enabled").is(":checked"))$("#properties-panel-requesterpays-msg").css("visibility",
"visible");else $("#properties-panel-requesterpays-msg").css("visibility","hidden")},save:function(){this.formData=null;Console.PropertiesPanel.commitTransaction("RequestPayment")},cancel:function(){Console.PropertiesPanel.rollbackTransaction("RequestPayment")},finishCancel:function(){$("#properties-panel-save-button").removeClass("disabled");$("#properties-panel-saving-indicator").hide()}};namespace.Ui.PropertiesPanel.RequesterPaysSubpanel=new RequesterPaysSubpanel})(this);(function(namespace){function RestoreModal(){}RestoreModal.prototype={initialize:function(){this.$restoreModal=$("#restore-modal");this.$validationSection=$(".validation-message",this.$restoreModal);this.$validationIconSection=$(".validation-icon-container",this.$restoreModal);this.$controlsAndValidationFeedbackSection=$(".days",this.$restoreModal);this.$daysTextBox=$("#restore-modal-days");this.$okButton=$(".restore-modal-ok-button",this.$restoreModal);this.$savingIndicator=$(".saving-indicator",
this.$restoreModal);this.$errorIndicator=$(".error-indicator",this.$restoreModal);this.$errorMessage=$(".validation-message",this.$errorIndicator);this.$restoreModal.shadow()},getFormData:function(){var formData={days:""};formData.days=this.$daysTextBox.val();return formData},clear:function(){this.$daysTextBox.val("")},close:function(){this.clear();this.hideAllFeedback();Ui.button(this.$okButton).disable(false);Ui.showModal(this.$restoreModal,false,false)},open:function(){this.clear();this.hideAllFeedback();
Ui.button(this.$okButton).disable(false);Ui.showModal(this.$restoreModal,true,false)},save:function(){this.hideAllFeedback();if(this.validate())if(Ui.ListView.listVersions)Console.VersionListView.restoreSelectedItems();else Console.ListView.restoreSelectedItems()},startRestore:function(){Ui.button(this.$okButton).disable(true);this.$savingIndicator.show()},validate:function(){var validationResult=Console.RestoreModal.validate();var failedValidation=validationResult.errors.length>0||validationResult.message;
this.displayValidation(validationResult);return!failedValidation},hideAllFeedback:function(){this.$savingIndicator.hide();this.$errorMessage.empty();this.$errorIndicator.hide();this.$validationSection.empty();this.$validationIconSection.empty()},okError:function(message){Ui.button(this.$okButton).disable(false);this.$savingIndicator.hide();this.$errorIndicator.show();this.$errorMessage.text(message)},displayValidation:function(validation){this.hideAllFeedback();var animated={};for(var i=0;i<validation.errors.length;++i){var error=
validation.errors[i];var controlsAndValidationFeedbackSection=this.$controlsAndValidationFeedbackSection;var errorIcon=$("<img />").attr("src",CB.resolve("graphics/warning.png")).addClass("small-icon").addClass("clickable").addClass("validation-icon").data("error",error).attr("title",Utility.escape(error.message)).click(function(){Ui.message(Utility.escape($(this).data("error").message))});this.$validationIconSection.append(errorIcon);if(!animated["days"]){controlsAndValidationFeedbackSection.effect("pulsate",
{times:1},800);animated["days"]=true}if(!validation.message)validation.message=error.message}if(validation.message)this.$validationSection.text(Utility.escape(validation.message))}};namespace.Ui.RestoreModal=new RestoreModal})(this);(function(ns){function Navigation(){}Navigation.prototype={Mode:{BucketList:"bucketList",ObjectList:"objectList"},uiMode:"",baseURLOfConsole:document.location.href,initialHistory:function(){history.replaceState({"uiMode":this.Mode.BucketList},"S3 Management Console",this.baseURLOfConsole);window.addEventListener("popstate",function(e){Ui.Navigation.navigateTo(e.state)})},navigateTo:function(navigationData){if(navigationData==null)return;if(navigationData.uiMode==Ui.Navigation.Mode.BucketList){Ui_hideObjectListViewAndPathShowBucketList();
Ui.ListView.closeJumpPanel()}else if(navigationData.uiMode==Ui.Navigation.Mode.ObjectList){Ui_hideBucketListShowObjectListViewAndPath();Console.ListView.browsePath(navigationData.data.bucket,navigationData.data.path);Ui.dynamicallySizeToggleButtonGroupButtonWidth(["#show-versions-button","#hide-versions-button"],75)}Console.UploadWizard.close();Ui.CreateBucketWizard.close();Ui.DownloadPanel.show(false);$(".contextMenu").hide();$("#list-view tbody").removeAttr("disableListSelection");$("#menu-underlay").click();
$(".feedback-dialog .ui-dialog-titlebar-close span").click();$("#bucket-policy-wizard .modal-wizard-header .modal-wizard-close-button").click();$("#cors-configuration-modal .modal-wizard-header .modal-wizard-close-button").click();$("#lifecycle-rule-modal .modal-wizard-header .modal-wizard-close-button").click()},setMode:function(mode){this.uiMode=mode},addToHistory:function(bucket,path){var concatenatedPath="";if(path[0].Folder!="")for(var i=0;i<path.length;i++)if(!path[i].Jump)concatenatedPath=
concatenatedPath+path[i].Folder+"/";var historyTitle,historySuffix;if(this.uiMode==this.Mode.BucketList){historyTitle="S3 Management Console";historySuffix=""}else{historyTitle="S3 Management Console "+bucket+"/"+concatenatedPath;historySuffix="bucket="+bucket+"&"+"path="+concatenatedPath.replace(/\//g,"-")}var concatenatedMark="";if(this.baseURLOfConsole.indexOf("?")<0)concatenatedMark="?";else if(historySuffix)concatenatedMark="&";if(history.state&&history.state.data&&history.state.data.bucket==
bucket&&history.state.data.path==concatenatedPath&&history.state.uiMode==this.uiMode)return;history.pushState({"uiMode":this.uiMode,"data":{"bucket":bucket,"path":concatenatedPath}},historyTitle,encodeURI(this.baseURLOfConsole+concatenatedMark+historySuffix))}};ns.Ui.Navigation=new Navigation})(this);(function(){var ActivationManager=new (FlowUtil.Klass.create({initialize:function(){this.autoBind(["maybeTriggerActivation"]);this.mod=Flow.module("WebsiteFeatureActivator");this.mod.dependsOn(["Configuration::initialized"]);this.mod.on("dependencies::met",this.boundMaybeTriggerActivation)},maybeTriggerActivation:function(){this.mod.notify("shouldActivate")}}));var currentMode=0;var c=Ui.PropertiesPanel.WebsiteSubpanel=new (FlowUtil.Klass.create({initialize:function(){this.formData=null;this.initializeAccordion();
this.defaultRedirectAllTo=""},radioButtonChanged:function(){var title=$(this);var radio=title.find("input");radio.prop("checked",true);var allWebsiteAccordionContents=$(".accordion-website .accordion-content");var selectedWebsiteAccordionContent=title.next();var mode=1;var previousMode=currentMode;currentMode=0;allWebsiteAccordionContents.each(function(){if(this===selectedWebsiteAccordionContent.get(0)){currentMode=mode;$(this).show()}else $(this).hide();mode++});if(currentMode!=previousMode){$(".validation-info, .validation-warning, .validation-error",
"#properties-panel-website-subpanel").removeClass("validation-info").removeClass("validation-error").removeClass("validation-warning");$(".validation-message, .validation-icon-container","#properties-panel-website-subpanel").empty()}},toggleAdvancedRediret:function(forceShow){var content=$("#advanced-redirect-container");var arrow=$("#advanced-redirect-arrow");var hide=function(){arrow.removeClass("bottom-arrow").addClass("right-arrow");content.hide()};var show=function(){arrow.removeClass("right-arrow").addClass("bottom-arrow");
content.show()};if(typeof forceShow!=="boolean")content.is(":visible")?hide():show();else forceShow?show():hide()},initializeAccordion:function(){$(".accordion-website .accordion-title").bind("click",this.radioButtonChanged);$("#advanced-redirect-container-trigger").bind("click",this.toggleAdvancedRediret)},container:function(){return $("#properties-panel-website-subpanel")},defaultFormData:function(){return{selectedOption:0,indexDocument:"",errorDocument:"",routingRulesXML:"",redirectAllTo:this.defaultRedirectAllTo}},
setEndpoint:function(bucketName,endpointSuffix){var hostName=bucketName+"."+endpointSuffix;hostName=Utility.escape(hostName);$("#website_endpoint").attr("href","http://"+hostName+"/").html(hostName);if(bucketName.match(/^www\./))this.defaultRedirectAllTo=bucketName.substring(4);else if(bucketName.match(/\./))this.defaultRedirectAllTo="www."+bucketName;else this.defaultRedirectAllTo="example.com"},fields:{enabled:"#properties-panel-website-enabled",indexDocument:"#properties-panel-website-index-document",
errorDocument:"#properties-panel-website-error-document",endpointLink:"#properties-panel-website-endpoint",routingRules:"#properties-panel-website-routin-rules-xml",redirectAll:"#properties-panel-website-redirect-all",errorIndicator:"#properties-panel-error-indicator"},clearValidation:function(){$(".validation-info, .validation-warning, .validation-error",this.container()).removeClass("validation-info").removeClass("validation-error").removeClass("validation-warning");$(".validation-message, .validation-icon-container",
this.container()).empty()},showValidationError:function(validation){this.validate(validation);$("#properties-panel-save-button").removeClass("disabled")},validate:function(validation){var isValid=true;if(!validation)validation=Console.PropertiesPanel.validateWebsiteConfiguration();this.clearValidation();var smallError=function(level,requestId){$("div[requestId='"+requestId+"']",this.container()).addClass("validation-"+level)}.bind(this);var animations={};var bigError=function(requestId,error){$("<img/>").attr("src",
CB.resolve("graphics/warning.png")).addClass("small-icon").addClass("clickable").addClass("validation-icon").data("error",error).click(function(){Ui.message($(this).data("error").message)}).appendTo($(".validation-icon-container[requestId='"+requestId+"']",this.container()));var elt=$(".validation-element[requestId='"+requestId+"']",this.container());elt.addClass("validation-error");animations[requestId]=animations[requestId]||elt.effect("pulsate",{times:1},800);if(!validation.message)validation.message=
error.message}.bind(this);for(var i=0;i<validation.infos.length;i++){var info=validation.infos[i];smallError("info",info.requestId)}for(var i=0;i<validation.warnings.length;i++){var warning=validation.warnings[i];smallError("warning",warning.requestId)}for(var i=0;i<validation.errors.length;i++){var error=validation.errors[i];bigError(error.requestId,error)}if(validation.message){$(".validation-message",this.container()).html(validation.message).effect("pulsate",{times:1},800);isValid=false}if(!isValid)$("#properties-panel-saving-indicator").hide();
return isValid},save:function(){if(!this.validate())return;Console.PropertiesPanel.commitTransaction("Website")},cancel:function(){this.clearValidation();Console.PropertiesPanel.rollbackTransaction("Website")},initFormWith:function(config){var options=$(".accordion-website .accordion-option",this.container());var option=$(options[config.selectedOption]);this.radioButtonChanged.call(option.find(".accordion-title"));$(this.fields.indexDocument).val(config.indexDocument);$(this.fields.errorDocument).val(config.errorDocument);
var routingXml=config.routingRulesXML;$(this.fields.routingRules).val(routingXml);if(routingXml)this.toggleAdvancedRediret(true);else this.toggleAdvancedRediret(false);if(config.selectedOption!=2)$(this.fields.redirectAll).val(this.defaultRedirectAllTo);else $(this.fields.redirectAll).val(config.redirectAllTo);$(this.fields.errorIndicator).hide();$(".validation-message",this.container()).text("")},setFormData:function(fd){this.formData=fd},resetFormData:function(){var config=this.formData||this.defaultFormData();
this.initFormWith(config)},clear:function(){this.initFormWith(this.defaultFormData());this.clearValidation()},getFormData:function(){return{selectedOption:currentMode,indexDocument:$(this.fields.indexDocument).val(),errorDocument:$(this.fields.errorDocument).val(),routingRulesXML:$(this.fields.routingRules).val(),redirectAllTo:$(this.fields.redirectAll).val()}}}))})();(function(w){w.VfsItemSelector={element:null,backdrop:null,beforeShow:null,afterShow:null,beforeHide:null,afterHide:null,fileTable:null,tableContainer:null,fileDiv:null,filePickerHeader:null,buttonContainer:null,fileIcon:"object.png",folderIcon:"folder.png",breadCrumb:null,initialize:function(ele){this.element=$(ele);this.backdrop=$("<div />").css({position:"absolute",backgroundColor:"#2d2d2d",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:"10",display:"none",opacity:"0.33"});$("body").append(this.backdrop);
this.element.shadow();this.element.addClass("ui-big-corner-all html-file-picker");this.filePickerHeader=$("<div />").addClass("modal-wizard-header ui-corner-all");this.filePickerHeader.append($("<span />").addClass("modal-wizard-page-header").html("FilePicker"));var close=$("<span />").addClass("modal-wizard-close-button clickable filePickerClose").html("Cancel").append($('<img class="asset" src="graphics/modal-close-button.gif" style="height:14px;width:14px;vertical-align:middle;position:relative;top:-2px;">'));
close.click(function(){Console.VfsItemSelector.close()});this.filePickerHeader.append(close);this.element.append(this.filePickerHeader);this.breadCrumb=$("<div />").css({width:"100%",height:"20px",padding:"0 5px"});this.fileDiv=$("<div />");this.tableContainer=$("<table />").css("width","100%");this.tableContainer.append($("<tr><th width='50%' id='htmlFilePickerName'>"+Ui.VfsItemSelector.Translator.name()+"</th><th width='50%' id='htmlFilePickerSize'>"+Ui.VfsItemSelector.fileSize()+"</th></tr>").css({backgroundAttachment:"scroll",
backgroundClip:"border-box",backgroundColor:"#D8D8DA",backgroundImage:'url("graphics/table-header-bg.png")',backgroundOrigin:"padding-box",backgroundRepeat:"repeat-x",borderCollapse:"separate",borderRight:"1px solid #C3C3C3",color:"#2F3132",fontFamily:"Arial,sans-serif",fontSize:"13px",height:"18px",lineHeight:"16px",padding:"4px",textAlign:"left"}));this.tableContainer.append($("<tr></tr>").append($("<td colspan='2'></td>").append(this.fileDiv)));this.fileDiv.css({width:"100%",overflowY:"auto",overflowX:"none"});
this.fileTable=$('<table cellpadding="5px" cellspacing="0"></table>').css("width","100%");this.fileDiv.append(this.fileTable);this.element.append(this.breadCrumb);this.element.append(this.tableContainer);this.fileTable.selectable({filter:"tr.selectable"});this.buttonContainer=$("<div />");this.buttonContainer.append($("<div class='form-button' />").append($("<span />").text(Ui.VfsItemSelector.Translator.cancel())).click(function(){Console.VfsItemSelector.close()}).css({"float":"right",marginRight:"20px"}));
this.buttonContainer.append($("<div class='form-button' />").append($("<span />").text(Ui.VfsItemSelector.Translator.select())).click(function(){var selected=new Array;$(".ui-selected",this.fileTable).each(function(){if($(this).data("isFile")!=undefined)selected.push({name:$(this).data("name"),size:Number($(this).data("size")),isFile:Boolean($(this).data("isFile"))})});Console.VfsItemSelector.selected(selected);Console.VfsItemSelector.close()}).css({"float":"right",marginRight:"5px"}));this.buttonContainer.css({width:"100%",
height:"40px",marginTop:"10px"});this.element.append(this.buttonContainer)},setUp:function(){$("#upload-wizard-browse-button").click(function(){Console.VfsItemSelector.open()})},tearDown:function(){$("#upload-wizard-browse-button").unbind()},show:function(){if(this.beforeShow!=null&&typeof this.beforeShow==="function")this.beforeShow();this.backdrop.css("display","block");this.element.css("display","block");if(this.afterShow!=null&&typeof this.afterShow==="function")this.afterShow();this.fileDiv.css({height:this.element.height()-
this.filePickerHeader.height()-this.breadCrumb.height()-this.buttonContainer.height()-55+"px"});this.element.center()},hide:function(){if(this.beforeHide!=null&&typeof this.beforeHide==="function")this.beforeHide();this.backdrop.css("display","none");this.element.css("display","none");if(this.afterHide!=null&&typeof this.afterHide==="function")this.afterHide()},onBeforeShow:function(callback){this.beforeShow=callback},onAfterShow:function(callback){this.afterShow=callback},onBeforeHide:function(callback){this.beforeHide=
callback},onAfterHide:function(callback){this.afterHide=callback},listDirectory:function(path){this.reset();this.buildbreadCrumb();var directory=window.Nitro.listDirectory(path);var $up=$("<tr><td colspan='2'>"+Ui.VfsItemSelector.Translator.up()+"</td></tr>").addClass("pickerEntry");$up.dblclick(function(){Console.VfsItemSelector.appendDir("..")});this.fileTable.append($up);for(var i=0;i<directory.length;i++){var $row=$("<tr><td width='"+($("#htmlFilePickerName").width()+5)+"px'><img src='graphics/"+
(directory[i].isFile?this.fileIcon:this.folderIcon)+"' class='list-view-item-icon'>"+directory[i].name+"</td><td width='"+$("#htmlFilePickerSize").width()+"'>"+directory[i].size+"</td></tr>");$row.data("name",directory[i].name);$row.data("isFile",directory[i].isFile);$row.data("size",directory[i].size);$row.addClass("pickerEntry selectable");$row.dblclick(function(){if($(this).data("isFile")){Console.VfsItemSelector.selected([{name:$(this).data("name"),size:Number($(this).data("size")),isFile:true}]);
Console.VfsItemSelector.close()}if(!$(this).data("isFile"))Console.VfsItemSelector.appendDir($(this).data("name"))});$row.hover(function(){$(this).addClass("list-view-item-hover")},function(){$(this).removeClass("list-view-item-hover")});this.fileTable.append($row)}},homeDirectory:function(){return window.Nitro.homeDirectory()},reset:function(){$(".pickerEntry").each(function(){$(this).remove()});this.breadCrumb.empty()},buildbreadCrumb:function(){var pathArray=Console.VfsItemSelector.buildbreadCrumb();
var $select=$("<select />");var currDir="";for(var i=0;i<pathArray.length;i++){if(pathArray[i]=="/")currDir+=pathArray[i];else currDir+=pathArray[i]+"/";$select.prepend($("<option>"+pathArray[i]+"</option>").data("path",currDir))}$select.change(function(){var $selected=$("option:selected",$select);console.dir($selected.data("path"));Console.VfsItemSelector.chDir($selected.data("path"))});this.breadCrumb.append($select);this.breadCrumb.append($("<a href='javascript:void(0);'>Forward</a>").click(function(){Console.VfsItemSelector.forwardDirectory()}).css({"float":"right",
marginLeft:"5px",marginRight:"20px"}));this.breadCrumb.append($("<a href='javascript:void(0);'>"+Ui.VfsItemSelector.Translator.back()+"</a>").click(function(){Console.VfsItemSelector.backDirectory()}).css({"float":"right",marginLeft:"5px",marginRight:"5px"}))}}})(window.Ui);(function(namespace){var customerReadyEventName="console-interactive";var minWaitTime=6E4;if(namespace.metricsTimer){namespace.metricsTimer.setCustomerReadyEvents([customerReadyEventName],minWaitTime);namespace.AWSConsoleMetrics.customerReadyEventName=customerReadyEventName}})(this);(function(){var alphabet="abcdefghijklmnopqrstuvwxyz234567";var alias={o:0,i:1,l:1,s:5};var lookup=function(){var table={};for(var i=0;i<alphabet.length;i++)table[alphabet[i]]=i;for(var key in alias){if(!alias.hasOwnProperty(key))continue;table[key]=table[""+alias[key]]}lookup=function(){return table};return table};function Encoder(){var skip=0;var bits=0;this.output="";this.readByte=function(inputByte){if(typeof inputByte=="string")inputByte=inputByte.charCodeAt(0);if(skip<0)bits|=inputByte>>-skip;
else bits=inputByte<<skip&248;if(skip>3){skip-=8;return 1}if(skip<4){this.output+=alphabet[bits>>3];skip+=5}return 0};this.finish=function(check){var output=this.output+(skip<0?alphabet[bits>>3]:"")+(check?"$":"");this.output="";return output}}Encoder.prototype.update=function(input,flush){for(var i=0;i<input.length;)i+=this.readByte(input[i]);var output=this.output;this.output="";if(flush)output+=this.finish();return output};function Decoder(){var skip=0;var currentByte=0;this.output="";this.readChar=
function(inputChar){if(typeof inputChar!="string")if(typeof inputChar=="number")inputChar=String.fromCharCode(inputChar);inputChar=inputChar.toLowerCase();var val=lookup()[inputChar];if(typeof val=="undefined")return;val<<=3;currentByte|=val>>>skip;skip+=5;if(skip>=8){this.output+=String.fromCharCode(currentByte);skip-=8;if(skip>0)currentByte=val<<5-skip&255;else currentByte=0}};this.finish=function(check){var output=this.output+(skip<0?alphabet[bits>>3]:"")+(check?"$":"");this.output="";return output}}
Decoder.prototype.update=function(input,flush){for(var i=0;i<input.length;i++)this.readChar(input[i]);var output=this.output;this.output="";if(flush)output+=this.finish();return output};function encode(input){var encoder=new Encoder;var output=encoder.update(input,true);return output}function decode(input){var decoder=new Decoder;var output=decoder.update(input,true);return output}var crypto,fs;function sha1(input,cb){if(typeof crypto=="undefined")crypto=require("crypto");var hash=crypto.createHash("sha1");
hash.digest=function(digest){return function(){return encode(digest.call(this,"binary"))}}(hash.digest);if(cb){if(typeof input=="string"||Buffer.isBuffer(input))try{return cb(null,sha1(input))}catch(err){return cb(err,null)}if(!typeof input.on=="function")return cb({message:"Not a stream!"});input.on("data",function(chunk){hash.update(chunk)});input.on("end",function(){cb(null,hash.digest())});return}if(input)return hash.update(input).digest();return hash}sha1.file=function(filename,cb){if(filename==
"-"){process.stdin.resume();return sha1(process.stdin,cb)}if(typeof fs=="undefined")fs=require("fs");return fs.stat(filename,function(err,stats){if(err)return cb(err,null);if(stats.isDirectory())return cb({dir:true,message:"Is a directory"});return sha1(require("fs").createReadStream(filename),cb)})};var base32={Decoder:Decoder,Encoder:Encoder,encode:encode,decode:decode,sha1:sha1};if(typeof window!=="undefined")window.base32=base32;if(typeof module!=="undefined"&&module.exports)module.exports=base32})();function s3_console_Console(){var P="",jb='" for "gwt:onLoadErrorFn"',hb='" for "gwt:onPropertyErrorFn"',$b='" type="text/javascript"></s',dc="&",Xb=".SymbolManifest.js",ac=".cache.js",ob="00AFFC0BA46EB2EF969B6AE06C636997",rb="29F5E8C30052F728FA9E734B907584F0",tb="3647C1262AF43287A05940DC95A21D94",vb="41D17EFCC66E5FD6A957B22E5CE8722A",wb="4B4BA9CAF29DE3C4D47BBAE4D2127770",zb="54AB19B5F8DC889BBE8A97C4212F7B26",Bb="60EDD2E1F6601307689F1BA02D2E3365",Db="612AD2DEBF79B0608D4886C9B27D7FC2",Eb="78CA5968CF5E84AF22A42FCF890F7B85",
Fb="79A5E0FD97D0B680EDA4D662F4983509",Gb="79D107FB8522876D5638F7B53A5D1B96",Hb="8542A419F955A5E6F6F14E909CDC2FF9",Ib="8B3D323B20FA78E6E527AADFF4B921E0",Jb="978F11D097409CA58437C61C401D4B71",Yb="<scri",lc="<script defer=\"defer\">s3_console_Console.onInjectionDone('s3.console.Console')<\/script>",eb="=",lb="?s3_console_Console",Kb="B8312EEECD302F20C66AC656E2CB04D2",Lb="BD52CB2E14E5C611FCF28A6618C7025C",gb='Bad handler "',Mb="C1662AFBDEE4697AF3198851ED7A8AE4",Nb="C95C9EF6D50C68ECCA0F971CE5EA85AA",Ob=
"DCC54F316627C11E271F2456A424CAFB",kc="DOMContentLoaded",Pb="E68C4615D757DFBD84536EEAD0529ECC",Qb="F2814D0C129C6F6E16B4986468F3365C",Rb="F51DE7C2F3A42763251C2B75255646B4",Sb="F55757FDD2AF9D99F0085F692E088BA1",Tb="FDA5425DD42A0D1CF4DC76944A7DF937",gc="Unexpected exception in locale detection, using default: ",fc="_",ec="__gwt_Locale",db="content",_b="cript>",xb="default",X="end",Ab="gecko",yb="gecko1_8",Q="gwt.codesvr=",R="gwt.hosted=",S="gwt.hybrid",ib="gwt:onLoadErrorFn",fb="gwt:onPropertyErrorFn",
cb="gwt:property",Cb="ie6",sb="ie8",Y="iframe",mb="ja",Z="javascript:''",T="loadSymbolManifest",Ub="locale",cc="locale=",ab="meta",_="moduleRequested",W="moduleStartup",ic="msie",bb="name",qb="opera",ub="pd_LO",$="position:absolute;width:0;height:0;border:none",bc='pt id="s3.console.Console" src="',Zb='pt id="s3.console.Console.Manifest" src="',U="s3.console.Console",Wb="s3.console.Console/",kb="s3.console.Console/hosted.html",nb="safari",V="startup",jc="unknown",Vb="user.agent",hc="webkit",pb="zh";
var j=window,k=document,l=j.__gwtStatsEvent?function(a){return j.__gwtStatsEvent(a)}:null,m,n=P,o={},p=[],q=[],r=[],s,t,u=false,v=false,w=false;if(!j.__gwt_stylesLoaded)j.__gwt_stylesLoaded={};if(!j.__gwt_scriptsLoaded)j.__gwt_scriptsLoaded={};function x(){var b=false;try{var c=j.location.search;return(c.indexOf(Q)!=-1||c.indexOf(R)!=-1||j.external&&j.external.gwtOnLoad)&&c.indexOf(S)==-1}catch(a){}x=function(){return b};return b}function y(){var a=false;var b=j.location.search;a=b.indexOf(T)>=0;
y=function(){return a};return a}function z(){if(x()){if(v&&u){var b=k.getElementById(U);var c=b.contentWindow;if(x())c.__gwt_getProperty=function(a){return J(a)};s3_console_Console=null;c.gwtOnLoad(s,U,n);l&&l({moduleName:U,sessionId:$sessionId,subSystem:V,evtGroup:W,millis:(new Date).getTime(),type:X})}}else{if(m)m(s,U,n);s3_console_Console=null}}var A;function B(){if(x()&&!A){A=true;var a=k.createElement(Y);a.src=Z;a.id=U;a.style.cssText=$;a.tabIndex=-1;k.body.appendChild(a);l&&l({moduleName:U,
sessionId:$sessionId,subSystem:V,evtGroup:W,millis:(new Date).getTime(),type:_});a.contentWindow.location.replace(F)}}function C(){var b=document.getElementsByTagName(ab);for(var c=0,d=b.length;c<d;++c){var e=b[c],f=e.getAttribute(bb),g;if(f)if(f==cb){g=e.getAttribute(db);if(g){var h,i=g.indexOf(eb);if(i>=0){f=g.substring(0,i);h=g.substring(i+1)}else{f=g;h=P}o[f]=h}}else if(f==fb){g=e.getAttribute(db);if(g)try{t=eval(g)}catch(a){alert(gb+g+hb)}}else if(f==ib){g=e.getAttribute(db);if(g)try{s=eval(g)}catch(a){alert(gb+
g+jb)}}}}function D(a,b){return b in p[a]}function E(a){var b=o[a];return b==null?null:b}var F;if(x()){if(j.external&&j.external.initModule&&j.external.initModule(U)){j.location.reload();return}var G=kb;var H=ConsoleBootstrapper.resolve(G);F=H+lb;K=P}C();function I(a,b){var c=r;for(var d=0,e=a.length-1;d<e;++d)c=c[a[d]]||(c[a[d]]=[]);c[a[e]]=b}function J(a){var b=q[a](),c=p[a];if(b in c)return b;var d=[];for(var e in c)d[c[e]]=e;if(t)t(a,d,b);throw null;}var K;var L;function M(){if(!x()&&!L){L=true;
I([mb,nb],ob);I([pb,qb],rb);I([pb,sb],tb);I([ub,sb],vb);I([pb,nb],wb);I([xb,yb],zb);I([pb,Ab],Bb);I([pb,Cb],Db);I([xb,Cb],Eb);I([xb,nb],Fb);I([xb,Ab],Gb);I([mb,Cb],Hb);I([ub,Cb],Ib);I([xb,sb],Jb);I([ub,nb],Kb);I([mb,Ab],Lb);I([mb,sb],Mb);I([mb,yb],Nb);I([ub,Ab],Ob);I([ub,yb],Pb);I([mb,qb],Qb);I([ub,qb],Rb);I([xb,qb],Sb);I([pb,yb],Tb);K=r[J(Ub)][J(Vb)];if(y()){var a=Wb+K+Xb;var b=ConsoleBootstrapper.resolve(a);k.write(Yb+Zb+b+$b+_b)}a=Wb+K+ac;b=ConsoleBootstrapper.resolve(a);k.write(Yb+bc+b+$b+_b)}}
q[Ub]=function(){try{var b;var c=xb||xb;if(b==null){var d=location.search;var e=d.indexOf(cc);if(e>=0){var f=d.substring(e);var g=f.indexOf(eb)+1;var h=f.indexOf(dc);if(h==-1)h=f.length;b=f.substring(g,h)}}if(b==null)b=E(Ub);if(b==null)b=j[ec];else j[ec]=b||c;if(b==null)return c;while(!D(Ub,b)){var i=b.lastIndexOf(fc);if(i==-1){b=c;break}else b=b.substring(0,i)}return b}catch(a){alert(gc+a);return xb}};p[Ub]={"default":0,ja:1,pd_LO:2,zh:3};q[Vb]=function(){var b=navigator.userAgent.toLowerCase();
var c=function(a){return parseInt(a[1])*1E3+parseInt(a[2])};if(b.indexOf(qb)!=-1)return qb;else if(b.indexOf(hc)!=-1)return nb;else if(b.indexOf(ic)!=-1)if(document.documentMode>=8)return sb;else{var d=/msie ([0-9]+)\.([0-9]+)/.exec(b);if(d&&d.length==3){var e=c(d);if(e>=6E3)return Cb}}else if(b.indexOf(Ab)!=-1){var d=/rv:([0-9]+)\.([0-9]+)/.exec(b);if(d&&d.length==3)if(c(d)>=1008)return yb;return Ab}return jc};p[Vb]={gecko:0,gecko1_8:1,ie6:2,ie8:3,opera:4,safari:5};s3_console_Console.onScriptLoad=
function(a){u=true;m=a;z()};s3_console_Console.onInjectionDone=function(){v=true;z()};if(x()){var N;function O(){if(!w){w=true;z();if(k.removeEventListener)k.removeEventListener(kc,O,false);if(N)clearInterval(N)}}if(k.addEventListener)k.addEventListener(kc,function(){B();O()},false);var N=setInterval(function(){if(/loaded|complete/.test(k.readyState)){B();O()}},50)}if(x())k.write(lc);else M()}s3_console_Console();
